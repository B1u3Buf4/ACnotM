<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-13</div>
<div class="tit"><h1 class="entry-title">九度-1528-最长回文子串[解题代码]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/jdoj" rel="category tag" title="查看九度OJ中的全部文章">九度OJ</a></span><span class="i4">围观2005次</span><span class="i3"><a class="ds-thread-count" data-thread-key="2402" href="http://www.acmerblog.com/jiudu-1528-2402.html#comments" title="《九度-1528-最长回文子串[解题代码]》上的评论">19 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p>题目来源：腾讯2013年实习生招聘二面面试题</p>
<dl>
<dt>
<b>题目描述：</b>
</dt>
<dd>
<p>回文串就是一个正读和反读都一样的字符串，比如“level”或者“noon”等等就是回文串。<br/>
回文子串，顾名思义，即字符串中满足回文性质的子串。<br/>
给出一个只由小写英文字符a,b,c…x,y,z组成的字符串，请输出其中最长的回文子串的长度。</p>
</dd>
</dl>
<dl>
<dt>
<b>输入：</b>
</dt>
<dd>
<p>输入包含多个测试用例，每组测试用例输入一行由小写英文字符a,b,c…x,y,z组成的字符串，字符串的长度不大于200000。</p>
</dd>
</dl>
<dl>
<dt>
<b>输出：</b>
</dt>
<dd>
<p>对于每组测试用例，输出一个整数，表示该组测试用例的字符串中所包含的的最长回文子串的长度。</p>
</dd>
</dl>
<dl>
<dt>
<b>样例输入：</b>
</dt>
<dd>
<pre>abab
bbbb
abba</pre>
</dd>
</dl>
<dl>
<dt>
<b>样例输出：</b>
</dt>
<dd>
<pre>3
4
4</pre>
</dd>
</dl>
<hr/>cpp 代码如下：
<pre class="brush:cpp ">#include &lt;iostream&gt;
#include &lt;string.h&gt;
#include &lt;stdio.h&gt;
using namespace std;
const int M = 200010;
char str[M * 2], sb[M];
int p[M * 2];

int pre() {
	str[0] = '$';
	int j = 1;
	for (int i = 0; sb[i]; i++) {
		str[j++] = '#';
		str[j++] = sb[i];
	}
	str[j++] = '#';
	str[j] = 0;
	return j;
}

int manacher(int n) {
	int mx = 0; //记录前面回文串最长影响到的地方。不一定是最长回文串造成的。
	int id; //最长影响串的ID;
	p[0] = 0;
	int i;
	int ans = 0;
	for (i = 1; i &lt; n; i++) {
		p[i] = 1;
		if (mx &gt; i) { //2*id-i是i关于id的对称点相当于是id-(i-id);
			p[i] = p[2 * id - i];

			//由于对称点的回文半径可能超过mx-i,因为mx后面的还没有配过
			//所以要取小的。等等继续配
			if (mx - i &lt; p[i])
				p[i] = mx - i;
		}
		while (str[i - p[i]] == str[i + p[i]])
			p[i]++;
		if (i + p[i] &gt; mx) {
			mx = i + p[i];
			id = i;
		}
		if (ans &lt; p[i])
			ans = p[i];
	}

	return ans;
}

int main() {
	while(gets(sb)) {
		int n = pre();
		printf("%d\n",manacher(n)-1);
	}
	return 0;
}

/**************************************************************
	Problem: 1528
	User: coder
	Language: C++
	Result: Accepted
	Time:60 ms
	Memory:3668 kb
****************************************************************/</pre>
<p></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-90529">
<article class="comment" id="comment-90529">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529516" rel="external nofollow">新用户358349</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-90529" rel="nofollow"><time datetime="2017-04-13T11:22:40+00:00" pubdate="">2017年4月13日 at 上午11:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>BT289-PN344-W3M64-4P9V3-8K6XV  Microsoft Office 2013 Pro Plus Online Volume License</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-90527">
<article class="comment" id="comment-90527">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529516" rel="external nofollow">新用户358349</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-90527" rel="nofollow"><time datetime="2017-04-13T11:22:40+00:00" pubdate="">2017年4月13日 at 上午11:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>BT289-PN344-W3M64-4P9V3-8K6XV  Microsoft Office 2013 Pro Plus Online Volume License</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-90526">
<article class="comment" id="comment-90526">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529516" rel="external nofollow">新用户358349</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-90526" rel="nofollow"><time datetime="2017-04-13T11:22:40+00:00" pubdate="">2017年4月13日 at 上午11:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>BT289-PN344-W3M64-4P9V3-8K6XV  Microsoft Office 2013 Pro Plus Online Volume License</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-90525">
<article class="comment" id="comment-90525">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529516" rel="external nofollow">新用户358349</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-90525" rel="nofollow"><time datetime="2017-04-13T11:22:40+00:00" pubdate="">2017年4月13日 at 上午11:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>BT289-PN344-W3M64-4P9V3-8K6XV  Microsoft Office 2013 Pro Plus Online Volume License</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-90524">
<article class="comment" id="comment-90524">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529516" rel="external nofollow">新用户358349</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-90524" rel="nofollow"><time datetime="2017-04-13T11:22:40+00:00" pubdate="">2017年4月13日 at 上午11:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>BT289-PN344-W3M64-4P9V3-8K6XV  Microsoft Office 2013 Pro Plus Online Volume License</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-15907">
<article class="comment" id="comment-15907">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ygwx</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15907" rel="nofollow"><time datetime="2015-05-09T17:13:42+00:00" pubdate="">2015年5月9日 at 下午5:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>afsasfasfasf</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-15916">
<article class="comment" id="comment-15916">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lin</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15916" rel="nofollow"><time datetime="2015-03-05T07:40:28+00:00" pubdate="">2015年3月5日 at 上午7:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env  python<br/>
def cou(n):<br/>
        arr =  <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/82/one_org.gif"/><br/>
        i = 1<br/>
        while(i&lt;n):<br/>
                arr.append(arr[i-1]+selfcount(i))<br/>
                i+=1<br/>
        return arr[n-1]</p>
<p>def selfcount(n):<br/>
        count = 0<br/>
        while(n):<br/>
                if n%10 == 1:<br/>
                        count += 1<br/>
                n /= 10<br/>
        return count</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-15915">
<article class="comment" id="comment-15915">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123456789_xd</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15915" rel="nofollow"><time datetime="2014-12-21T08:51:59+00:00" pubdate="">2014年12月21日 at 上午8:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>楼主 为什么输入的形式都不对  题目是不是弄错了？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-15913">
<article class="comment" id="comment-15913">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Emlar</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15913" rel="nofollow"><time datetime="2014-12-06T09:28:07+00:00" pubdate="">2014年12月6日 at 上午9:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序输出是对的，呈三角型。原程序是按C++写的，已经改成了C的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42272">
<article class="comment" id="comment-42272">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">abguorui0928</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-42272" rel="nofollow"><time datetime="2014-10-19T02:06:52+00:00" pubdate="">2014年10月19日 at 上午2:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一样</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-15910">
<article class="comment" id="comment-15910">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">MyHome</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15910" rel="nofollow"><time datetime="2014-09-08T19:30:07+00:00" pubdate="">2014年9月8日 at 下午7:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-15911">
<article class="comment" id="comment-15911">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">silianbo</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15911" rel="nofollow"><time datetime="2014-06-02T00:39:26+00:00" pubdate="">2014年6月2日 at 上午12:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>还是有些难度的！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-15908">
<article class="comment" id="comment-15908">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">JcZ</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15908" rel="nofollow"><time datetime="2014-05-31T13:06:06+00:00" pubdate="">2014年5月31日 at 下午1:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么不直接用STL排序呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-55429">
<article class="comment" id="comment-55429">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-55429" rel="nofollow"><time datetime="2014-03-28T08:03:46+00:00" pubdate="">2014年3月28日 at 上午8:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很不错！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-15912">
<article class="comment" id="comment-15912">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">09291010</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15912" rel="nofollow"><time datetime="2014-03-14T11:42:23+00:00" pubdate="">2014年3月14日 at 上午11:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>图像处理那题解题报告在哪儿呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42273">
<article class="comment" id="comment-42273">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">645198</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-42273" rel="nofollow"><time datetime="2014-02-03T02:05:31+00:00" pubdate="">2014年2月3日 at 上午2:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢支持！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-15914">
<article class="comment" id="comment-15914">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cyyuen</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15914" rel="nofollow"><time datetime="2014-01-07T09:18:55+00:00" pubdate="">2014年1月7日 at 上午9:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯，尽量吧。题目太多了，很多解题报告是用程序自动发布的，所以就只有代码了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-15909">
<article class="comment" id="comment-15909">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">blogpick</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-15909" rel="nofollow"><time datetime="2014-01-03T00:48:38+00:00" pubdate="">2014年1月3日 at 上午12:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-42271">
<article class="comment" id="comment-42271">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/jiudu-1528-2402.html#comment-42271" rel="nofollow"><time datetime="2013-12-29T22:21:18+00:00" pubdate="">2013年12月29日 at 下午10:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>什么破题，题意好难懂啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>