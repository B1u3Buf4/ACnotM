<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-02</div>
<div class="tit"><h1 class="entry-title">九度-1337-寻找最长合法括号序列[数据结构]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/jdoj" rel="category tag" title="查看九度OJ中的全部文章">九度OJ</a>, <a href="http://www.acmerblog.com/category/data-struct/linear" rel="category tag" title="查看线性结构中的全部文章">线性结构</a></span><span class="i4">围观1812次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3965" href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comments" title="《九度-1337-寻找最长合法括号序列[数据结构]》上的评论">16 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<dl>
<dt>题目来自九度OJ之我与名企有个约会趣味编程系列赛（1）</dt>
<dt><b>题目描述：</b></dt>
<dd>
<div>给你一个长度为N的，由’(‘和’)’组成的括号序列，你能找出这个序列中最长的合法括号子序列么？合法括号序列的含义便是，在这个序列中，所有的左括号都有唯一的右括号匹配；所有的右括号都有唯一的左括号匹配。例如：((()))()()便是一个长度为10的合法括号序列，而(()))( 则不是。</div>
<div>需要你求解的是，找出最长的合法括号子序列的长度，同时找出具有这样长度的序列个数。</div>
</dd>
</dl>
<dl>
<dt><b>输入：</b></dt>
<dd>
<div>测试数据包括多个，每个测试数据包含两行：</div>
<div>第一行为一个整数N，其中N不会超过10^6。</div>
<div>第二行为一个长度为N的字符串，这个字符串由左括号’(‘和右括号’)'组成。</div>
</dd>
</dl>
<dl>
<dt><b>输出：</b></dt>
<dd>对应每个测试案例，输出一行，其中包含两个整数，分别代表最长合法括号序列的长度和个数，中间由空格隔开。若没有合法的子序列存在，则返回0 1。</dd>
</dl>
<dl>
<dt><b>样例输入：</b></dt>
<dd>
<pre>6
(())()
3
))(</pre>
</dd>
</dl>
<dl>
<dt><b>样例输出：</b></dt>
<dd>
<pre>6 1
0 1</pre>
</dd>
</dl>
<p>不是新题了，栈的应用。这里用数组模拟。</p>
<pre class="brush:cpp">#include &lt;stdio.h&gt;
char s[1000001];
int opt[1000001];
int stack[1000000], m, ans, l, cnt, i, last, ll;
int main() {
    int n;
    while (scanf("%d %s", &amp;n, s) != EOF) {
        opt[0] = opt[1] = 0;
        cnt = l = ans = m = last =0;
        for (i = 1; i &lt;= n; i++) {
            if (s[i-1] == '(') {
                stack[l++] = i;//l记录左括号个数
                opt[i] = 0;
            } else {
                if(l){
                    l--;//左括号匹配，栈弹出
                    opt[i] = opt[stack[l]-1] + 2;
                    if(s[i-2] == ')') 
                        opt[i] += opt[i-1];
                    opt[stack[l] - 1] = opt[i];
                }else
                    opt[i] = 0;
            }
            if(opt[i] &gt; ans){
                ans = opt[i];
                cnt = 1;
            }else if(opt[i] == ans) cnt ++;
        }
        if(ans)
            printf("%d %d\n", ans, cnt);
        else
            printf("0 1\n");
 
    }
    return 0;
}
/**************************************************************
    Problem: 1337
    User: 从此醉
    Language: C
    Result: Accepted
    Time:100 ms
    Memory:9704 kb
****************************************************************/
 </pre>
<p> </p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-84371">
<article class="comment" id="comment-84371">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525661" rel="external nofollow">新用户988255</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-84371" rel="nofollow"><time datetime="2017-04-12T23:52:08+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我老婆没打我，手掐着我脖子，现在还没放开</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-84370">
<article class="comment" id="comment-84370">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525661" rel="external nofollow">新用户988255</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-84370" rel="nofollow"><time datetime="2017-04-12T23:52:08+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我老婆没打我，手掐着我脖子，现在还没放开</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-84369">
<article class="comment" id="comment-84369">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525661" rel="external nofollow">新用户988255</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-84369" rel="nofollow"><time datetime="2017-04-12T23:52:08+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我老婆没打我，手掐着我脖子，现在还没放开</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-56911">
<article class="comment" id="comment-56911">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yelawolf</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-56911" rel="nofollow"><time datetime="2015-07-07T08:07:54+00:00" pubdate="">2015年7月7日 at 上午8:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>可以根据二叉排序树的定义进行严格的排序树创建和后序遍历操作。如果形成的排序树相同，其树的前、中、后序遍历是相同的，但在此处不能使用中序遍历，因为，中序遍历的结果就是排序的结果。经在九度测试，运行时间90ms，比楼主的要快。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45486">
<article class="comment" id="comment-45486">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">2013283119</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-45486" rel="nofollow"><time datetime="2015-06-12T10:13:47+00:00" pubdate="">2015年6月12日 at 上午10:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的，已更新</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45490">
<article class="comment" id="comment-45490">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">09291010</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-45490" rel="nofollow"><time datetime="2015-05-28T03:12:02+00:00" pubdate="">2015年5月28日 at 上午3:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好。代码比书上的简练！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-56912">
<article class="comment" id="comment-56912">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">we</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-56912" rel="nofollow"><time datetime="2015-03-27T22:11:25+00:00" pubdate="">2015年3月27日 at 下午10:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>[…] 如果此题没有要求 相对位置不变，可以参考文章：http://www.acmerblog.com/interview-9-2427/ […]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-22549">
<article class="comment" id="comment-22549">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jlucky</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-22549" rel="nofollow"><time datetime="2015-03-13T18:50:12+00:00" pubdate="">2015年3月13日 at 下午6:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正解，已改正。应该都是protected</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-56910">
<article class="comment" id="comment-56910">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zx123456</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-56910" rel="nofollow"><time datetime="2015-01-02T20:33:35+00:00" pubdate="">2015年1月2日 at 下午8:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我觉得是D哎……</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-56915">
<article class="comment" id="comment-56915">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CHEATBEATER</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-56915" rel="nofollow"><time datetime="2014-12-17T16:11:06+00:00" pubdate="">2014年12月17日 at 下午4:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45488">
<article class="comment" id="comment-45488">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">stamwoo</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-45488" rel="nofollow"><time datetime="2014-10-03T14:43:59+00:00" pubdate="">2014年10月3日 at 下午2:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感觉这里的评分标准没啥作用阿，反而显得显得赘余，还不如直接去掉好了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-56913">
<article class="comment" id="comment-56913">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zwj0571</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-56913" rel="nofollow"><time datetime="2014-08-12T08:35:44+00:00" pubdate="">2014年8月12日 at 上午8:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你好，这题给出的代码好像弄错了，这个是pow那道题目的解法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-22548">
<article class="comment" id="comment-22548">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-22548" rel="nofollow"><time datetime="2014-08-10T14:36:47+00:00" pubdate="">2014年8月10日 at 下午2:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大致看了下，算法的时间复杂度没有很本性的提升，算不上高效。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45489">
<article class="comment" id="comment-45489">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wangzhenvs123</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-45489" rel="nofollow"><time datetime="2014-08-09T09:55:20+00:00" pubdate="">2014年8月9日 at 上午9:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯，是写错了，文中以更改。MAX ( L(X[0..m-2], Y[0..n-1]), L(X[0..m-1], Y[0..n-2])</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-56914">
<article class="comment" id="comment-56914">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yelawolf</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-56914" rel="nofollow"><time datetime="2014-07-07T12:37:29+00:00" pubdate="">2014年7月7日 at 下午12:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45487">
<article class="comment" id="comment-45487">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">H.Watson</a></span> on <a href="http://www.acmerblog.com/jiudu-1337-2-3965.html#comment-45487" rel="nofollow"><time datetime="2014-04-21T00:41:32+00:00" pubdate="">2014年4月21日 at 上午12:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好，解决了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>