<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-09</div>
<div class="tit"><h1 class="entry-title">POJ 1321 棋盘问题 [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a>, <a href="http://www.acmerblog.com/category/graph/graph-visit" rel="category tag" title="查看图的遍历中的全部文章">图的遍历</a></span><span class="i4">围观1247次</span><span class="i3"><a class="ds-thread-count" data-thread-key="364" href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comments" title="《POJ 1321 棋盘问题 [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">棋盘问题</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
在一个给定形状的棋盘（形状可能是不规则的）上面摆放棋子，棋子没有区别。要求摆放时任意的两个棋子不能放在棋盘中的同一行或者同一列，请编程求解对于给定形状和大小的棋盘，摆放k个棋子的所有可行的摆放方案C。 </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
输入含有多组测试数据。<br/>
<br/>每组数据的第一行是两个正整数，n k，用一个空格隔开，表示了将在一个n*n的矩阵内描述棋盘，以及摆放棋子的数目。 n &lt;= 8 ,  k &lt;= n<br/>
<br/>当为-1 -1时表示输入结束。<br/>
<br/>随后的n行描述了棋盘的形状：每行有n个字符，其中 # 表示棋盘区域， . 表示空白区域（数据保证不出现多余的空白行或者空白列）。<br/>
</div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
对于每一组数据，给出一行输出，输出摆放的方案数目C （数据保证C&lt;2^31）。</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2 1
#.
.#
4 4
...#
..#.
.#..
#...
-1 -1
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
2
1
</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=1321">提交代码</a>   <a href="http://poj.org/bbs?problem_id=1321">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=1321">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java">import java.util.Scanner;   
  
public class Main {   
  
 private static int n;   
 private static int k;   
 private static int ans;   
 private static int[] column;   
 private static String[] chessboard;   
  
 public static void main(String[] args) {   
  
  Scanner sc = new Scanner(System.in);   
  
  while (sc.hasNext()) {   
   n = sc.nextInt();   
   k = sc.nextInt();   
   if (n == -1 &amp;&amp; k == -1)   
    break;   
   sc.nextLine();   
   chessboard = new String[n];   
   column = new int[n];   
   for (int i = 0; i &lt; n; i++) {   
    chessboard[i] = sc.nextLine();   
   }   
   ans = 0;   
   dfs(0, 0);// 从第一行开始   
   System.out.println(ans);   
  }   
 }   
  
 private static void dfs(int pos, int i) {   
  
  if (pos == k) {   
   ans++;   
   return;   
  }   
  if (i &gt;= n)   
   return;   
  for (int j = 0; j &lt; n; j++) {   
   char ch = chessboard[i].charAt(j);   
   if (ch == '#' &amp;&amp; column[j] == 0) {   
    column[j] = 1;   
    pos++;   
    dfs(pos, i + 1);   
    column[j] = 0;   
    pos--;   
   }   
  }   
  dfs(pos, i + 1);   
 }   
  
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-4804">
<article class="comment" id="comment-4804">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ForgetVay</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4804" rel="nofollow"><time datetime="2015-05-17T03:45:06+00:00" pubdate="">2015年5月17日 at 上午3:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法很不错啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4806">
<article class="comment" id="comment-4806">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1832044043</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4806" rel="nofollow"><time datetime="2015-05-07T14:26:43+00:00" pubdate="">2015年5月7日 at 下午2:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么for循环找到的i一定是素数叻，而且约数定理说的是n=p1^a1*p2^a2*p3^a3*…*pk^ak，而你每次取余都用的是原来的m，也就是n</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4799">
<article class="comment" id="comment-4799">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liluvu</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4799" rel="nofollow"><time datetime="2015-03-20T14:36:39+00:00" pubdate="">2015年3月20日 at 下午2:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4798">
<article class="comment" id="comment-4798">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xun.gong</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4798" rel="nofollow"><time datetime="2015-03-17T22:39:16+00:00" pubdate="">2015年3月17日 at 下午10:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题这里的解法最坏情况似乎应该是指数的。回溯的时候<br/>
O(n) = O(n-1) + O(n-2) + ….<br/>
O(n-1) = O(n-2) + O(n-3)+ …<br/>
O(n) – O(n-1) = O(n-1)<br/>
O(n) = 2O(n-1)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-36805">
<article class="comment" id="comment-36805">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">lintong</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-36805" rel="nofollow"><time datetime="2015-03-11T06:45:56+00:00" pubdate="">2015年3月11日 at 上午6:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感觉第二种方法其实也不是很好，不过的确要比第一种方法要好一点。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4807">
<article class="comment" id="comment-4807">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">modstart</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4807" rel="nofollow"><time datetime="2015-01-30T05:32:50+00:00" pubdate="">2015年1月30日 at 上午5:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>[…] 答案：http://www.acmerblog.com/interview-2-1549/ […]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4808">
<article class="comment" id="comment-4808">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AcmDream</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4808" rel="nofollow"><time datetime="2015-01-01T03:08:38+00:00" pubdate="">2015年1月1日 at 上午3:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个也是算法导论的习题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4802">
<article class="comment" id="comment-4802">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vintion</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4802" rel="nofollow"><time datetime="2014-12-25T14:56:38+00:00" pubdate="">2014年12月25日 at 下午2:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好，找的就是这一题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4803">
<article class="comment" id="comment-4803">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">2013283119</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4803" rel="nofollow"><time datetime="2014-09-11T18:32:16+00:00" pubdate="">2014年9月11日 at 下午6:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二块代码if(it != mp.end())应改为if(it != mp.end() &amp;&amp; (i+1)!=(it-&gt;second +1))；因为第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-36806">
<article class="comment" id="comment-36806">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">missliuxin</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-36806" rel="nofollow"><time datetime="2014-08-13T16:07:16+00:00" pubdate="">2014年8月13日 at 下午4:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好。代码比书上的简练！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4805">
<article class="comment" id="comment-4805">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vintion</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4805" rel="nofollow"><time datetime="2014-08-13T08:14:32+00:00" pubdate="">2014年8月13日 at 上午8:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4801">
<article class="comment" id="comment-4801">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">g29tony</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4801" rel="nofollow"><time datetime="2014-03-17T13:22:22+00:00" pubdate="">2014年3月17日 at 下午1:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#pragma pack(2) 这个用法太坑爹</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-36804">
<article class="comment" id="comment-36804">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tkdzyl2013</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-36804" rel="nofollow"><time datetime="2014-02-03T12:06:33+00:00" pubdate="">2014年2月3日 at 下午12:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>受益匪浅！！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4800">
<article class="comment" id="comment-4800">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jxfactor</a></span> on <a href="http://www.acmerblog.com/POJ-1321-%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98-blog-364.html#comment-4800" rel="nofollow"><time datetime="2013-12-20T16:32:38+00:00" pubdate="">2013年12月20日 at 下午4:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>