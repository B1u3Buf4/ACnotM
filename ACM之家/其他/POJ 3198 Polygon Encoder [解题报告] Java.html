<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-12</div>
<div class="tit"><h1 class="entry-title">POJ 3198 Polygon Encoder [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观660次</span><span class="i3"><a class="ds-thread-count" data-thread-key="992" href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comments" title="《POJ 3198 Polygon Encoder [解题报告] Java》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Polygon Encoder</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
<span lang="en-us">
<p>Imagine an infinite table with rows and columns numbered using the natural numbers. The following figure shows a procedure to traverse such a table assigning a consecutive natural number to each table cell:</p>
<div align="center"><img src="http://cdn.acmerblog.com/img/poj/3198-5.gif"/></div>
<p>This enumeration of cells can be used to represent complex data types using natural numbers:</p>
<ul>
<li>
<p>A pair of natural numbers (<i>i</i>, <i>j</i>) is represented by the number corresponding to the cell in row <i>i</i> and column <i>j</i>. For instance, the pair (3, 2) is represented by the natural number 17; this fact is noted by <i>P</i><sub>2</sub>(3, 2) = 17.</p>
</li>
<li>
<p>The pair representation can be used to represent <i>n</i>-tuples. A triplet (<i>a</i>, <i>b</i>, <i>c</i>) is represented by <i>P</i><sub>2</sub>(<i>a</i>, <i>P</i><sub>2</sub>(<i>b</i>, <i>c</i>)). A 4-tuple (<i>a</i>, <i>b</i>, <i>c</i>, <i>d</i>) is represented by <i>P</i><sub>2</sub>(<i>a</i>, <i>P</i><sub>2</sub>(<i>b</i>, <i>P</i><sub>2</sub>(<i>c</i>, <i>d</i>))). This procedure can be generalized for an arbitrary <i>n</i>:</p>
<p align="center"><i>P<sub>n</sub></i>(<i>a</i><sub>1</sub>, …, <i>a<sub>n</sub></i>) = <i>P</i><sub>2</sub>(<i>a</i><sub>1</sub>, <i>P<sub>n</sub></i><sub>−1</sub>(<i>a</i><sub>2</sub>, …, <i>a<sub>n</sub></i>)),</p>
<p>where <i>P<sub>n</sub></i> denotes the <i>n</i>-tuple representation function, <i>n</i> ≥ 2. For example <i>P</i><sub>3</sub>(2, 0, 1) = 12.</p>
</li>
<li>
<p>A list of arbitrary length ‹<i>a</i><sub>1</sub>, …, <i>a<sub>n</sub></i>› is represented by</p>
<p align="center"><i>L</i>(‹<i>a</i><sub>1</sub>, …, <i>a<sub>n</sub></i>›) = <i>P</i><sub>2</sub>(<i>n</i>, <i>P<sub>n</sub></i>(<i>a</i><sub>1</sub>, …, <i>a<sub>n</sub></i>)).</p>
<p>For example, <i>L</i>(‹0, 1›) = 12.</p>
</li>
</ul>
<p>The Association of Convex Makers (ACM) uses this clever enumeration scheme in a polygon representation system. The system can represent a polygon, defined by integer coordinates, using a natural number as follows: given a polygon defined by a vertex sequence ‹(<i>x</i><sub>1</sub>, <i>y</i><sub>1</sub>), …, (<i>x<sub>n</sub></i>, <i>y<sub>n</sub></i>)› assign the natural number:</p>
<p align="center">L(‹<i>P</i><sub>2</sub>(<i>x</i><sub>1</sub>, <i>y</i><sub>1</sub>), …, <i>P</i><sub>2</sub>(<i>x<sub>n</sub></i>, <i>y<sub>n</sub></i>)›).</p>
<p>ACM needs a program that, given a natural numbers that represents a polygon, calculates the area of the polygon. It is guaranteed that the given polygon is a simple one, i.e. its sides do not intersect.</p>
<p>As an example of the problem, the triangle with vertices at <code>(1,1)</code>, <code> (2,0)</code> and <code> (0,0)</code> is codified with the number <code>2141</code>. The area of this triangle is <code>1</code>.</p>
<p></p></span> </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
<p>The input consists of several test cases. Each test case is given in a single line of the input by a natural number representing a polygon. The end of the test cases is indicated with <code>*</code>.</p>
</div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
<p>One line per test case, preserving the input order. Each output line contains a decimal number telling the area of the corresponding encoded polygon. Areas must be printed with 1 decimal place, truncating less significative decimal places.</p>
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2141
206
157895330
*</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1.0
0.5
1.0</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=3198">提交代码</a>   <a href="http://poj.org/bbs?problem_id=3198">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=3198">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">/* @author: */
import java.math.BigInteger;
import java.util.*;


public class Main
{
    public static BigInteger get( BigInteger h ) {
        BigInteger s = h.shiftLeft(1);
        BigInteger a = BigInteger.ONE.shiftLeft( s.bitLength()/2-1 ).subtract( BigInteger.ONE );
        BigInteger b = BigInteger.ONE.shiftLeft( s.bitLength()/2+1 ), c;
        
        while( a.add(BigInteger.ONE).compareTo(b) &lt; 0 ) {
            c = a.add( b ).shiftRight(1);
            if( c.multiply( c.add(BigInteger.ONE)).compareTo( s ) &lt;=0 )
                a = c;
            else
                b = c;
        }

        return a;
    }
    public static BigInteger X, Y;
    public static void Get( BigInteger s ) {
        BigInteger t = get( s );
        Y = s.subtract( t.multiply(t.add(BigInteger.ONE)).shiftRight(1) );
        X = t.subtract( Y );
    }
    
    public static void main(String args[])
    {
        Scanner cin = new Scanner(System.in);
        String s;
        while( true ) {
            s = cin.next();
            if( s.equals( "*" ) )
                break;
            BigInteger a = new BigInteger( s ), t = BigInteger.ONE, h = BigInteger.ONE, sum = BigInteger.ZERO, 
                x =BigInteger.ONE, 
                y=BigInteger.ONE, xt=BigInteger.ONE, yt=BigInteger.ONE, x0 = BigInteger.ONE, y0=BigInteger.ONE;
            Get( a );
            t = X; h = Y;
            //System.out.println( X+","+Y );
            //if(X==t)continue;
            int n = t.intValue();
            
            for( int i=0; i&lt; n; i++ ) {
                a = h;
                if( i &lt; n-1 ) {
                    Get( a );
                    t = X; h = Y;
                }
                else
                    t = a;
                
                Get( t );
                x = X; y = Y;
                if( i == 0 ) {
                    x0 = x; y0 = y;
                }
                else {
                    sum = sum.add( x.multiply(yt).subtract( y.multiply(xt) ));
                }
                xt = x; yt = y;
                //System.out.println( x + "," + y );
            }
            sum = sum.add( x0.multiply(yt).subtract( y0.multiply(xt) ));
            sum = sum.abs();
            
            System.out.print( sum.shiftRight(1) );
            if( sum.equals(sum.shiftRight(1).shiftLeft(1)))
                System.out.println( ".0" );
            else
                System.out.println( ".5");
        }
        return;
    }

}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-61006">
<article class="comment" id="comment-61006">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaoriqiang2</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-61006" rel="nofollow"><time datetime="2015-03-20T01:12:16+00:00" pubdate="">2015年3月20日 at 上午1:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9208">
<article class="comment" id="comment-9208">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wynk0804</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-9208" rel="nofollow"><time datetime="2015-03-08T02:46:22+00:00" pubdate="">2015年3月8日 at 上午2:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>I go through some of your put up and I uncovered a good deal of expertise from it. Many thanks for posting this sort of exciting posts</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61007">
<article class="comment" id="comment-61007">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ygwx</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-61007" rel="nofollow"><time datetime="2015-02-05T15:06:13+00:00" pubdate="">2015年2月5日 at 下午3:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很强大啊，佩服</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-38931">
<article class="comment" id="comment-38931">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wawa_zmt</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-38931" rel="nofollow"><time datetime="2014-11-04T02:48:04+00:00" pubdate="">2014年11月4日 at 上午2:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分三种情况讨论。Not Possible就是impossible</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-9207">
<article class="comment" id="comment-9207">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-9207" rel="nofollow"><time datetime="2014-09-19T01:42:49+00:00" pubdate="">2014年9月19日 at 上午1:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>太好了，收藏</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9204">
<article class="comment" id="comment-9204">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yupeng.bai</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-9204" rel="nofollow"><time datetime="2014-09-09T02:37:58+00:00" pubdate="">2014年9月9日 at 上午2:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很专业！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61008">
<article class="comment" id="comment-61008">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magichu</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-61008" rel="nofollow"><time datetime="2014-08-19T11:50:34+00:00" pubdate="">2014年8月19日 at 上午11:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>较好的写法是 start+(end-start)/2</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9205">
<article class="comment" id="comment-9205">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">userwawa</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-9205" rel="nofollow"><time datetime="2014-08-05T13:50:05+00:00" pubdate="">2014年8月5日 at 下午1:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>楼主 为什么输入的形式都不对  题目是不是弄错了？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-9210">
<article class="comment" id="comment-9210">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Snarl_jsb</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-9210" rel="nofollow"><time datetime="2014-07-10T07:21:45+00:00" pubdate="">2014年7月10日 at 上午7:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是穷举，但是代码有优化（v数组），并不是2^n。测试数据应该没问题，之前有超时的代码。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9206">
<article class="comment" id="comment-9206">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vintion</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-9206" rel="nofollow"><time datetime="2014-02-13T19:55:11+00:00" pubdate="">2014年2月13日 at 下午7:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>处凡愚而不减，在圣贤而不增；<br/>住烦恼而不乱，居禅定而不寂。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-9209">
<article class="comment" id="comment-9209">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tonight</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-9209" rel="nofollow"><time datetime="2013-12-19T11:45:59+00:00" pubdate="">2013年12月19日 at 上午11:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Excellent Web-site! I required to ask if I might webpages and use a component of the net web website and use a number of factors for just about any faculty process. Please notify me through email regardless of whether that would be excellent. Many thanks</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61005">
<article class="comment" id="comment-61005">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Happiness</a></span> on <a href="http://www.acmerblog.com/POJ-3198-Polygon-Encoder-blog-992.html#comment-61005" rel="nofollow"><time datetime="2013-11-28T16:59:45+00:00" pubdate="">2013年11月28日 at 下午4:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个还不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>