<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-13</div>
<div class="tit"><h1 class="entry-title">POJ 3687 Labeling Balls [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观807次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1130" href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comments" title="《POJ 3687 Labeling Balls [解题报告] Java》上的评论">11 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Labeling Balls</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
<div>
<p>Windy has <i>N</i> balls of distinct weights from 1 unit to <i>N</i> units. Now he tries to label them with 1 to <i>N</i> in such a way that: </p>
<ol>
<li>No two balls share the same label.</li>
<li>The labeling satisfies several constrains like “The ball labeled with <i>a</i> is lighter than the one labeled with <i>b”.</i></li>
</ol>
<p>Can you help windy to find a solution?</p>
</div></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
<p>The first line of input is the number of test case. The first line of each test case contains two integers, <i>N</i> (1 ≤ <i>N</i> ≤ 200) and <i>M</i> (0 ≤ <i>M</i> ≤ 40,000). The next <i>M</i> line each contain two integers <i>a</i> and <i>b</i> indicating the ball labeled with <i>a</i> must be lighter than the one labeled with <i>b</i>. (1 ≤ <i>a, b</i> ≤ <i>N</i>) There is a blank line before each test case. </p>
</div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
<p>For each test case output on a single line the balls’ weights from label 1 to label <i>N</i>. If several solutions exist, you should output the one with the smallest weight for label 1, then with the smallest weight for label 2, then with the smallest weight for label 3 and so on… If no solution exists, output -1 instead.</p>
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
5

4 0

4 1
1 1

4 2
1 2
2 1

4 1
2 1

4 1
3 2
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1 2 3 4
-1
-1
2 1 3 4
1 3 2 4
</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=3687">提交代码</a>   <a href="http://poj.org/bbs?problem_id=3687">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=3687">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">/* @author: */
import java.util.Scanner;
import java.util.Arrays;
public class Main{
  int degree[]=new int[210];
  boolean visit[][]=new boolean[210][210];
  int path[]=new int[210];
  int n,m,t;

  void topsort(){
     for(int k=n;k&gt;=1;k--){
          int i=n;
          while(i&gt;=1 &amp;&amp; degree[i]!=0) i--;
          if(i&lt; 1){ System.out.printf("-1\n"); return; }
          degree[i]=-1; 
          path[i]=k; 
          for(int x=1;x&lt;=n;x++) if(visit[x][i]) degree[x]--;
     }    
     for(int j=1;j&lt;=n;j++)  System.out.printf("%d ",path[j]);
     System.out.printf("\n");     
}

 public void doit(){
   Scanner sc=new Scanner(System.in);
 
    int x,y;
    t=sc.nextInt();
    while((t--)!=0){
        n=sc.nextInt();
        m=sc.nextInt();
        Arrays.fill(degree,0);
        for(int i=0;i&lt; visit.length;i++)
           Arrays.fill(visit[i],false);
        for(int i=1;i&lt;=m;i++){
           x=sc.nextInt();
           y=sc.nextInt();
           if(!visit[x][y]){
              visit[x][y]=true;
              degree[x]++;              
            }  
        }       
        topsort();
    }
  }
 public static void main(String args[]){
   Main m=new Main();
     m.doit();
  }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-10017">
<article class="comment" id="comment-10017">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zjd1988</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10017" rel="nofollow"><time datetime="2015-04-18T00:47:00+00:00" pubdate="">2015年4月18日 at 上午12:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>还是有些难度的！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10016">
<article class="comment" id="comment-10016">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">melody12ab</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10016" rel="nofollow"><time datetime="2015-02-23T17:27:26+00:00" pubdate="">2015年2月23日 at 下午5:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给力，赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10012">
<article class="comment" id="comment-10012">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wynk0804</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10012" rel="nofollow"><time datetime="2015-02-14T07:50:54+00:00" pubdate="">2015年2月14日 at 上午7:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p><a href="http://beeder.me" rel="nofollow">http://beeder.me</a> 这个网站上有很多poj和hihoCoder的题解，质量不错，欢迎转载。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10014">
<article class="comment" id="comment-10014">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">NiKaWaLi</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10014" rel="nofollow"><time datetime="2015-01-06T07:24:07+00:00" pubdate="">2015年1月6日 at 上午7:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>题目需要求解的是最小值，而且没有考虑可能存在环</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10013">
<article class="comment" id="comment-10013">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fermi</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10013" rel="nofollow"><time datetime="2015-01-02T19:55:53+00:00" pubdate="">2015年1月2日 at 下午7:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，这里说的最长回文子序列，非子串</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10019">
<article class="comment" id="comment-10019">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">soasipray</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10019" rel="nofollow"><time datetime="2014-12-28T16:50:27+00:00" pubdate="">2014年12月28日 at 下午4:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Java真是解决大数的利器</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10018">
<article class="comment" id="comment-10018">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yelawolf</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10018" rel="nofollow"><time datetime="2014-11-25T12:49:20+00:00" pubdate="">2014年11月25日 at 下午12:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39333">
<article class="comment" id="comment-39333">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">testnew</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-39333" rel="nofollow"><time datetime="2014-07-27T06:33:40+00:00" pubdate="">2014年7月27日 at 上午6:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不是有公式吗？何不直接计算</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10015">
<article class="comment" id="comment-10015">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">windy</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-10015" rel="nofollow"><time datetime="2014-06-05T18:10:50+00:00" pubdate="">2014年6月5日 at 下午6:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的思路，可以借鉴</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39332">
<article class="comment" id="comment-39332">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">blogpick</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-39332" rel="nofollow"><time datetime="2014-02-19T02:27:45+00:00" pubdate="">2014年2月19日 at 上午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序输出是对的，呈三角型。原程序是按C++写的，已经改成了C的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39331">
<article class="comment" id="comment-39331">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">huangduanjing</a></span> on <a href="http://www.acmerblog.com/POJ-3687-Labeling-Balls-blog-1130.html#comment-39331" rel="nofollow"><time datetime="2013-12-31T11:35:36+00:00" pubdate="">2013年12月31日 at 上午11:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env  python<br/>
def cou(n):<br/>
        arr =  <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/82/one_org.gif"/><br/>
        i = 1<br/>
        while(i&lt;n):<br/>
                arr.append(arr[i-1]+selfcount(i))<br/>
                i+=1<br/>
        return arr[n-1]</p>
<p>def selfcount(n):<br/>
        count = 0<br/>
        while(n):<br/>
                if n%10 == 1:<br/>
                        count += 1<br/>
                n /= 10<br/>
        return count</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>