<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-11</div>
<div class="tit"><h1 class="entry-title">POJ 2323 PERMS [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观812次</span><span class="i3"><a class="ds-thread-count" data-thread-key="689" href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comments" title="《POJ 2323 PERMS [解题报告] Java》上的评论">11 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">PERMS</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Count the number of permutations that have a specific number of inversions.<br/>
<br/>Given a permutation a1, a2, a3,…, an of the n integers 1, 2, 3, …, n, an inversion is a pair (ai, aj) where i &lt; j and ai &gt; aj. The number of inversions in a permutation gives an indication on how “unsorted” a permutation is. If we wish to analyze the average running time of a sorting algorithm, it is often useful to know how many permutations of n objects will have a certain number of inversions.
<p>In this problem you are asked to compute the number of permutations of n values that have exactly k inversions.</p>
<p>For example, if n = 3, there are 6 permutations with the indicated inversions as follows:<br/>
<br/>
</p><blockquote>
<pre>123			0 inversions
<br/> 
<br/>132			1 inversion (3 &gt; 2)
<br/> 
<br/>213			1 inversion (2 &gt; 1)
<br/> 
<br/>231			2 inversions (2 &gt; 1, 3 &gt; 1)
<br/> 
<br/>312			2 inversions (3 &gt; 1, 3 &gt; 2)
<br/> 
<br/>321			3 inversions (3 &gt; 2, 3 &gt; 1, 2 &gt; 1)</pre>
</blockquote>
<p>Therefore, for the permutations of 3 things<br/>
</p><ul>
<li>1 of them has 0 inversions<br/>
</li>
<li>2 of them have 1 inversion<br/>
</li>
<li>2 of them have 2 inversions<br/>
</li>
<li>1 of them has 3 inversions<br/>
</li>
<li>0 of them have 4 inversions<br/>
</li>
<li>0 of them have 5 inversions<br/>
</li>
<li>etc.</li>
</ul>
<p>
</p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input consists one or more problems. The input for each problem is specified on a single line, giving the integer n (1 &lt;= n &lt;= 18) and a non-negative integer k (0 &lt;= k &lt;= 200). The end of input is specified by a line with n = k = 0. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each problem, output the number of permutations of {1, …, n}with exactly k inversions.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3 0
3 1
3 2
3 3
4 2
4 10
13 23
18 80
0 0
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1
2
2
1
5
0
46936280
184348859235088
</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=2323">提交代码</a>   <a href="http://poj.org/bbs?problem_id=2323">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=2323">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author:alpc12
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.math.BigInteger;
import java.util.Arrays;
import java.util.Scanner;


public class Main {

    public static void main(String[] args) throws FileNotFoundException {
        new Main().run();

    }
    
    BigInteger [][] dp;

    private void run() throws FileNotFoundException {
        Scanner cin = new Scanner(System.in);
        //Scanner cin = new Scanner(new BufferedReader(new FileReader("t.in")));
        dp = new BigInteger[19][201];
        for(int i = 0; i &lt; 19; ++i) {
            Arrays.fill(dp[i], BigInteger.ZERO);
        }
        dp[1][0] = BigInteger.ONE;
        for(int i = 2; i &lt; 19; ++i) {
            for(int j = 0; j &lt;= (i-1)*i/2 &amp;&amp; j &lt; 201; ++j) {
                for(int k = j; k &gt;= j-i+1 &amp;&amp; k &gt;= 0; --k) {
                    dp[i][j] = dp[i][j].add(dp[i-1][k]);
                }
            }
        }
        while(true) {
            int a = cin.nextInt(), b = cin.nextInt();
            if(a == 0 &amp;&amp; b == 0)
                break;
            System.out.println(dp[a][b]);
        }
        
    }

}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-60753">
<article class="comment" id="comment-60753">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">congve1</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-60753" rel="nofollow"><time datetime="2015-05-23T12:18:29+00:00" pubdate="">2015年5月23日 at 下午12:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为避免精度问题，PI值请使用arccos(-1)。应该是acos</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-60752">
<article class="comment" id="comment-60752">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mitrenick</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-60752" rel="nofollow"><time datetime="2015-04-08T16:44:24+00:00" pubdate="">2015年4月8日 at 下午4:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有谁知道直接遍历的方法中第8行是什么意思嘛？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-7141">
<article class="comment" id="comment-7141">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ycaxgjd</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-7141" rel="nofollow"><time datetime="2015-04-04T10:24:34+00:00" pubdate="">2015年4月4日 at 上午10:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正确性是关键，冲突是都会有的，主要是那种算法冲突的概率低</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7143">
<article class="comment" id="comment-7143">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">TimeFight</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-7143" rel="nofollow"><time datetime="2014-12-01T19:36:07+00:00" pubdate="">2014年12月1日 at 下午7:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢提醒，是漏掉了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-60751">
<article class="comment" id="comment-60751">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bobkentt</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-60751" rel="nofollow"><time datetime="2014-11-17T15:11:04+00:00" pubdate="">2014年11月17日 at 下午3:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发类的题还是算法类？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53206">
<article class="comment" id="comment-53206">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liuk</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-53206" rel="nofollow"><time datetime="2014-06-05T16:18:11+00:00" pubdate="">2014年6月5日 at 下午4:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>目测会火</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37859">
<article class="comment" id="comment-37859">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magichu</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-37859" rel="nofollow"><time datetime="2014-05-13T01:39:47+00:00" pubdate="">2014年5月13日 at 上午1:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>红绯鱼：<br/>
这模板神了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53207">
<article class="comment" id="comment-53207">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fastislow</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-53207" rel="nofollow"><time datetime="2014-04-09T12:07:49+00:00" pubdate="">2014年4月9日 at 下午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一种方法怎么会是O(log(m+n))呢？没有二分的话直接遍历应该就是O(m+n)吧？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37858">
<article class="comment" id="comment-37858">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiaoliubuer</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-37858" rel="nofollow"><time datetime="2014-03-29T05:47:19+00:00" pubdate="">2014年3月29日 at 上午5:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第36行，struct node **head_ref，怎么理解，那个函数感觉不是很懂啊！？？弱渣求助</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7142">
<article class="comment" id="comment-7142">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linzzzz</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-7142" rel="nofollow"><time datetime="2014-03-08T10:38:10+00:00" pubdate="">2014年3月8日 at 上午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正解，我的方法占用的内存更多些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-7144">
<article class="comment" id="comment-7144">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">userwawa</a></span> on <a href="http://www.acmerblog.com/POJ-2323-PERMS-blog-689.html#comment-7144" rel="nofollow"><time datetime="2013-12-29T02:19:56+00:00" pubdate="">2013年12月29日 at 上午2:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大哥，你复制也看看是不是这题的答案才复制吧。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>