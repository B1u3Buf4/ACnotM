<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-11</div>
<div class="tit"><h1 class="entry-title">POJ 2559 Largest Rectangle in a Histogram [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观566次</span><span class="i3"><a class="ds-thread-count" data-thread-key="790" href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comments" title="《POJ 2559 Largest Rectangle in a Histogram [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Largest Rectangle in a Histogram</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
A histogram is a polygon composed of a sequence of rectangles aligned at a common base line. The rectangles have equal widths but may have different heights. For example, the figure on the left shows the histogram that consists of rectangles with the heights 2, 1, 4, 5, 1, 3, 3, measured in units where 1 is the width of the rectangles:<br/>
<br/><center><img src="http://www.acmerblog.com/img/poj/2559-3.jpg"/></center><br/>
<br/>Usually, histograms are used to represent discrete distributions, e.g., the frequencies of characters in texts. Note that the order of the rectangles, i.e., their heights, is important. Calculate the area of the largest rectangle in a histogram that is aligned at the common base line, too. The figure on the right shows the largest aligned rectangle for the depicted histogram. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input contains several test cases. Each test case describes a histogram and starts with an integer <i>n</i>, denoting the number of rectangles it is composed of. You may assume that <i>1&lt;=n&lt;=100000</i>. Then follow <i>n</i> integers <i>h<sub>1</sub>,…,h<sub>n</sub></i>, where <i>0&lt;=h<sub>i</sub>&lt;=1000000000</i>. These numbers denote the heights of the rectangles of the histogram in left-to-right order. The width of each rectangle is <i>1</i>. A zero follows the input for the last test case. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each test case output on a single line the area of the largest rectangle in the specified histogram. Remember that this rectangle must be aligned at the common base line. </div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
7 2 1 4 5 1 3 3
4 1000 1000 1000 1000
0
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
8
4000
</pre>
<div>
<p class="mytitle"> 温馨提示:</p>
</div>
<div class="mypanel">
Huge input, scanf is recommended.</div>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=2559">提交代码</a>   <a href="http://poj.org/bbs?problem_id=2559">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=2559">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: 82638882@163.com
import java.io.*;
public class Main
{
 static int[] p,b,c;
 static int a;
 public static void main(String[] args) throws IOException
 {
  InputStreamReader is=new InputStreamReader(System.in);
  BufferedReader in=new BufferedReader(is);
  while(true)
  {
   String[] ss=in.readLine().split(" ");
   a=Integer.parseInt(ss[0]);
   if(a==0) break;
   p=new int[a+2];
   b=new int[a+1];
   c=new int[a+1];
   for(int i=1;i&lt;=a;i++)
	p[i]=Integer.parseInt(ss[i]);
   p[0]=p[a+1]=-1;
   long max=0;
   for(int i=1;i&lt;=a;i++)
   {
	b[i]=1;
	int j=i;
	while(p[j-b[j]]&gt;=p[i])
	{
          j-=b[j];
	  b[i]+=b[j];
	}
    }
    for(int i=a;i&gt;0;i--)
    {
	c[i]=1;
	int j=i;
	while(p[j+c[j]]&gt;=p[i])
	{
	  j+=c[j];
	  c[i]+=c[j];
	}
     }
    for(int i=1;i&lt;=a;i++)
     {
	long h=(long)p[i]*(b[i]+c[i]-1);
	max=Math.max(h, max);
     }
    System.out.println(max);
  }
 }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-7856">
<article class="comment" id="comment-7856">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jue</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7856" rel="nofollow"><time datetime="2015-02-24T01:58:16+00:00" pubdate="">2015年2月24日 at 上午1:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很全很强大！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7860">
<article class="comment" id="comment-7860">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fanxianxian</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7860" rel="nofollow"><time datetime="2015-01-27T01:33:58+00:00" pubdate="">2015年1月27日 at 上午1:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好吧~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-38192">
<article class="comment" id="comment-38192">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zzzzzz</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-38192" rel="nofollow"><time datetime="2015-01-13T21:15:48+00:00" pubdate="">2015年1月13日 at 下午9:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第15行代码，/n/n，应该改为\n\n</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7855">
<article class="comment" id="comment-7855">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">siaswj</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7855" rel="nofollow"><time datetime="2015-01-11T12:36:13+00:00" pubdate="">2015年1月11日 at 下午12:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的思路，可以借鉴</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-7851">
<article class="comment" id="comment-7851">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lint</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7851" rel="nofollow"><time datetime="2015-01-11T09:33:00+00:00" pubdate="">2015年1月11日 at 上午9:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>和编译器有关吧，我用的g++正常。头文件可能还需要一个&lt;string.h&gt;</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7854">
<article class="comment" id="comment-7854">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">admin</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7854" rel="nofollow"><time datetime="2014-12-02T18:36:34+00:00" pubdate="">2014年12月2日 at 下午6:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>较好的写法是 start+(end-start)/2</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-7859">
<article class="comment" id="comment-7859">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ruoshui</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7859" rel="nofollow"><time datetime="2014-10-20T23:05:38+00:00" pubdate="">2014年10月20日 at 下午11:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>m /= i; 是一直在变的。参考这一篇关于质因数的http://www.acmerblog.com/integer-factorization-5124.html</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7858">
<article class="comment" id="comment-7858">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">michaelwen</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7858" rel="nofollow"><time datetime="2014-10-06T12:40:11+00:00" pubdate="">2014年10月6日 at 下午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>神奇的网站</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-7853">
<article class="comment" id="comment-7853">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jamoeba</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7853" rel="nofollow"><time datetime="2014-09-02T19:46:47+00:00" pubdate="">2014年9月2日 at 下午7:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env python def cou(n): arr =  [1]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-38191">
<article class="comment" id="comment-38191">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Monkey_Sun</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-38191" rel="nofollow"><time datetime="2014-07-14T20:44:05+00:00" pubdate="">2014年7月14日 at 下午8:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>通不过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53397">
<article class="comment" id="comment-53397">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zoe_music</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-53397" rel="nofollow"><time datetime="2014-03-13T06:48:01+00:00" pubdate="">2014年3月13日 at 上午6:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯，是写错了，文中以更改。MAX ( L(X[0..m-2], Y[0..n-1]), L(X[0..m-1], Y[0..n-2])</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7852">
<article class="comment" id="comment-7852">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">verycourage</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7852" rel="nofollow"><time datetime="2014-01-07T13:05:42+00:00" pubdate="">2014年1月7日 at 下午1:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一样</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-38193">
<article class="comment" id="comment-38193">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">missliuxin</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-38193" rel="nofollow"><time datetime="2013-12-28T06:58:13+00:00" pubdate="">2013年12月28日 at 上午6:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实不需要用LCA，用DFS+vector更简单</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7857">
<article class="comment" id="comment-7857">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ozhfo</a></span> on <a href="http://www.acmerblog.com/POJ-2559-Largest-Rectangle-in-a-Histogram-blog-790.html#comment-7857" rel="nofollow"><time datetime="2013-12-07T20:40:20+00:00" pubdate="">2013年12月7日 at 下午8:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>都是一些基础题啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>