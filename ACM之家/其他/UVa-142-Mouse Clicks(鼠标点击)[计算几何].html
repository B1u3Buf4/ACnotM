<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>01-28</div>
<div class="tit"><h1 class="entry-title">UVa-142-Mouse Clicks(鼠标点击)[计算几何]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/uva" rel="category tag" title="查看UVA中的全部文章">UVA</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a>, <a href="http://www.acmerblog.com/category/geometry/basis-geometry" rel="category tag" title="查看计算几何基础中的全部文章">计算几何基础</a></span><span class="i4">围观1154次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3810" href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comments" title="《UVa-142-Mouse Clicks(鼠标点击)[计算几何]》上的评论">8 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h2>Problem<br/><span style="color: #888888;">问题</span></h2>
<p>A typical windowing system on a computer will provide a number of icons on the screen as well as some defined regions. When the mouse button is clicked, the system has to determine where the cursor is and what is being selected. For this problem we assume that a mouse click in (or on the border of) a region selects that region, otherwise it selects the closest visible icon (or icons in the case of a tie).<br/>
<br/><span style="color: #888888;">一般的计算机视窗系统都会在屏幕上放置很多图标和预定义的区域。当鼠标键按下时，系统会检测鼠标点击的位置并确定点中了什么。在这个问题中，我们认为鼠标点击一个区域（点在边上也算）就选中该区域，否则就选中离的最近的可见图标（可能会有多个）。</span></p>
<p>Consider the following screen:<br/><span style="color: #888888;">观察下面的屏幕：</span></p>
<p> </p>
<p><img alt="i1" height="242" src="http://cdn.acmerblog.com/img/1390859923549.png" style="display: block; margin-left: auto; margin-right: auto;" width="510"/></p>
<p> </p>
<p>A mouse click at ‘a’ will select region A. A mouse click at ‘b’ will select icon 1. A mouse click at ‘c’ will select icons 6 and 7. A mouse click at ‘d’ is ambiguous. The ambiguity is resolved by assuming that one region is in front of another. In the data files, later regions can be assumed to be in front of earlier regions. Since regions are labelled in order of appearance (see later) ‘d’ will select C. Note that regions always overlap icons so that obscured icons need not be considered and that the origin (0,0) is at the top left corner.<br/><span style="color: #888888;">鼠标点在“a”处将选中区域A，点在“b”处将选中图标1，点在“c”处将选中图标6和7，而点在’d'处则会产生一个歧意。当产生歧意时应选中较为靠前的一个区域。在输入的数据中，后给出的区域应被视为在先给出的区域之前。注意，区域将会覆盖相应位置的所有图标，被覆盖的图应被忽略。坐标原点(0, 0)位于左下角。</span></p>
<p>Write a program that will read in a series of region and icon definitions followed by a series of mouse clicks and return the selected items. Coordinates will be given as pairs of integers in the range 0..499 and you can assume that all icons and regions lie wholly within the screen. Your program must number all icons (even invisible ones) in the order of arrival starting from 1 and label regions alphabetically in the order of arrival starting from ‘A’.<br/><span style="color: #888888;">写一个程序读入一组区域和图标的定义，以及一组鼠标点击的位置，并返回选中的对象。每个坐标都是两个0到499的整数，你可以认为所有的图标和区域都没有在屏幕外面的部分。你的程序应该按输入的顺序从1开始对图标进行编号，并按照输入的顺序从“A”开始以字母表对区域进行编号。</span></p>
<p> </p>
<h2>Input<br/><span style="color: #888888;">输入</span></h2>
<p>Input will consist of a series of lines. Each line will identify the type of data: I for icon, R for region and M for mouse click. There will be no separation between the specification part and the event part, however no icon or region specifications will follow the first mouse click. An I will be followed by the coordinates of the centre of the icon, R will be followed by the coordinates of the top left and bottom right corners respectively and M will be followed by the coordinates of the cursor at the time of the click. There will always be at least one visible icon and never more than 25 regions and 50 icons. The entire file will be terminated by a line consisting of a single #.<br/><span style="color: #888888;">输入由多行组成。每行的开头标注了数据的类型：I为图标，R为区域，M为鼠标点击位置。数据定义部分的输入和点击事件部分的输入之间没有间隔，但开始输入鼠标数据后，将不再会出现图标或区域数据。标志I的后面是图标中心的坐标地，标志R后面是左上角和右下角的坐标，标志M后面是鼠标点击时指针位置的坐标。至少会有一个可见的图标，最多有25个区域和50个图标。全部输入的数据由独占一行的单个字符#号表示结束。</span></p>
<p> </p>
<h2>Output<br/><span style="color: #888888;">输出</span></h2>
<p>Output will consist of one line for each mouse click, containing the selection(s) for that click. Regions will be identified by their single character identifier, icon numbers will be written out right justified in a field of width 3, and where there is more than one icon number they will appear in increasing numerical order.<br/><span style="color: #888888;">对应于每一个鼠标点击的事件，输出一行选中的对象。区域由单个字母表示，图标的应按右对齐，宽度为3的格式输出，对于多于一个图标被选中的情况应按照编号递增的顺序输出。</span></p>
<p> </p>
<h2>Sample input<br/><span style="color: #888888;">输入示例</span></h2>
<p>I       216     28<br/>R       22      19      170     102<br/>I       40      150<br/>I       96      138<br/>I       36      193<br/>R       305     13      425     103<br/>I       191     184<br/>I       387     200<br/>R       266     63      370     140<br/>I       419     134<br/>I       170     102<br/>M       50      50<br/>M       236     30<br/>M       403     167<br/>M       330     83<br/>#</p>
<p> </p>
<h2>Sample output<br/><span style="color: #888888;">输出示例</span></h2>
<p>A<br/>  1<br/>  6  7<br/>C</p>
<p> </p>
<h2>Analysis<br/><span style="color: #888888;">分析</span></h2>
<p>这道题没有什么复杂的算法，判断点在矩形内和计算距离都是最基本的运算，直接按题目做就可以了。注意两点：输入的矩形和图标不能随意改变顺序或删除，否则在输出时无法得到正确的编号；不要忘记忽略掉被矩形覆盖掉的图标。</p>
<p> </p>
<h2>Solution<br/><span style="color: #888888;">解答</span></h2>
<pre class="brush:cpp ">#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;iterator&gt;
#include &lt;deque&gt;
using namespace std;
struct POINT {int x; int y;};
struct RECT {POINT tl; POINT br;};
//判断点是否在矩形内
bool PointInRect(const POINT &amp;pt, const RECT &amp;rc) {
	return (pt.x &gt;= rc.tl.x &amp;&amp; pt.x &lt;= rc.br.x &amp;&amp;
		pt.y &gt;= rc.tl.y &amp;&amp; pt.y &lt;= rc.br.y);
}
//计算两点计距离的平方
int PointDistance(const POINT &amp;pt1, const POINT &amp;pt2) {
	POINT Vec = {pt2.x - pt1.x, pt2.y - pt1.y};
	return (Vec.x * Vec.x + Vec.y * Vec.y);
}
//主函数
int main(void) {
	deque&lt;POINT&gt; Icons, Clicks;
	deque&lt;RECT&gt; Rects;
	//循环读入每一组数据
	for (char Tag = 0; cin &gt;&gt; Tag &amp;&amp; Tag != '#'; ) {
		RECT rc;
		switch (Tag) {
		case 'I': //输入图标数据
			cin &gt;&gt; rc.tl.x &gt;&gt; rc.tl.y;
			Icons.push_back(rc.tl);
			break;
		case 'R': //输入矩形数据
			cin &gt;&gt; rc.tl.x &gt;&gt; rc.tl.y &gt;&gt; rc.br.x &gt;&gt; rc.br.y;
			if (rc.br.x &lt; rc.tl.x) *(int*)0 = 0;
			if (rc.br.y &lt; rc.tl.y) *(int*)0 = 0;
			Rects.push_back(rc);
			if (Rects.size() &gt; 26) *(int*)0 = 0;
			break;
		case 'M': //输入鼠标点击事件(坐标)
			cin &gt;&gt; rc.tl.x &gt;&gt; rc.tl.y;
			Clicks.push_back(rc.tl);
			break;
		}
	}
	deque&lt;POINT&gt;::iterator iIcon, iClick;
	deque&lt;RECT&gt;::iterator iRect;
	//检查是否存在图标被矩形覆盖
	for (iIcon = Icons.begin(); iIcon != Icons.end(); ++iIcon) {
		for (iRect = Rects.begin(); iRect != Rects.end(); ++iRect) {
			if (PointInRect(*iIcon, *iRect)) {
				iIcon-&gt;x = 10000; //将该图标移至无穷远处，即将其忽略
				iIcon-&gt;y = 10000; //不能删除，以免影响后面图标的编号
			}
		}
	}
	//处理每一次鼠标点击事件
	for (iClick = Clicks.begin(); iClick != Clicks.end(); ++iClick) {
		//按题目要求，从后向前检查是否点在某个矩形内
		deque&lt;RECT&gt;::reverse_iterator riRect;
		for (riRect = Rects.rbegin(); riRect != Rects.rend() &amp;&amp;
			!PointInRect(*iClick, *riRect); ++riRect);
		//如果找到点在某个矩型，输出该矩形
		if (riRect != Rects.rend()) {
			cout &lt;&lt; (char)(distance(riRect, Rects.rend()) - 1 + 'A') &lt;&lt; endl;
			continue;
		}
		//查找离鼠标位置距离最近的图标，存到动态数组SelIcons中
		deque&lt;int&gt; SelIcons(1, 1);
		deque&lt;POINT&gt;::iterator iNear = Icons.begin(), iIcon;
		int nNear = PointDistance(*iClick, *iNear);
		for (iIcon = iNear + 1; iIcon != Icons.end(); ++iIcon) {
			int nDist = PointDistance(*iClick, *iIcon); //计算距离
			if (nDist &lt; nNear) {
				iNear = iIcon;
				nNear = nDist;
				SelIcons.clear(); //清空原先的数组，以新图标代替
				SelIcons.push_back(distance(Icons.begin(), iIcon) + 1);
			}
			else if (nDist == nNear) { //发现同为最短距离的图标则加入数组
				SelIcons.push_back(distance(Icons.begin(), iIcon) + 1);
			}
		}
		//按要求的格式输出图标的编号
		deque&lt;int&gt;::iterator iSel;
		for (iSel = SelIcons.begin(); iSel != SelIcons.end(); ++iSel) {
			cout &lt;&lt; setw(3) &lt;&lt; *iSel;
		}
		cout &lt;&lt; endl;
	}
	return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-84388">
<article class="comment" id="comment-84388">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461721" rel="external nofollow">新用户204908</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-84388" rel="nofollow"><time datetime="2017-04-12T23:52:08+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有竞争才会有发展使用者才能得到更好的体验。所以还我GOOGLE</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62626">
<article class="comment" id="comment-62626">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">weijieut</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-62626" rel="nofollow"><time datetime="2015-07-03T15:45:16+00:00" pubdate="">2015年7月3日 at 下午3:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序输出是对的，呈三角型。原程序是按C++写的，已经改成了C的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62627">
<article class="comment" id="comment-62627">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liluvu</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-62627" rel="nofollow"><time datetime="2015-01-04T14:13:14+00:00" pubdate="">2015年1月4日 at 下午2:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正在学习搜索，很好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62625">
<article class="comment" id="comment-62625">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">warriorbrant</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-62625" rel="nofollow"><time datetime="2014-08-20T02:06:20+00:00" pubdate="">2014年8月20日 at 上午2:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有点意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-56877">
<article class="comment" id="comment-56877">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">usx13123</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-56877" rel="nofollow"><time datetime="2014-07-02T09:02:27+00:00" pubdate="">2014年7月2日 at 上午9:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>21行中，j&lt;10可改为j&lt;10-i，减少比较次数</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-56878">
<article class="comment" id="comment-56878">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hongfieyu</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-56878" rel="nofollow"><time datetime="2014-06-21T04:24:20+00:00" pubdate="">2014年6月21日 at 上午4:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Java真是解决大数的利器</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45438">
<article class="comment" id="comment-45438">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hao555sky</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-45438" rel="nofollow"><time datetime="2014-05-03T07:47:40+00:00" pubdate="">2014年5月3日 at 上午7:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不对吧 你算的an是前面说有的项的和</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-56879">
<article class="comment" id="comment-56879">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">super157</a></span> on <a href="http://www.acmerblog.com/uva-142-mouse-clicks-3810.html#comment-56879" rel="nofollow"><time datetime="2014-02-24T09:59:12+00:00" pubdate="">2014年2月24日 at 上午9:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这一题的代码这样提交时错误的~少考虑了很多情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>