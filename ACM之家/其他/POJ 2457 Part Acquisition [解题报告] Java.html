<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-11</div>
<div class="tit"><h1 class="entry-title">POJ 2457 Part Acquisition [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观604次</span><span class="i3"><a class="ds-thread-count" data-thread-key="745" href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comments" title="《POJ 2457 Part Acquisition [解题报告] Java》上的评论">10 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Part Acquisition</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
The cows have been sent on a mission through space to acquire a new milking machine for their barn.  They are flying through a cluster of stars containing N (1 &lt;= N &lt;= 50,000) planets, each with a trading post.
<p>The cows have determined which of K (1 &lt;= K &lt;= 1,000) types of objects (numbered 1..K) each planet in the cluster desires, and which products they have to trade. No planet has developed currency, so they work under the barter system: all trades consist of each party trading exactly one object (presumably of different types).</p>
<p>The cows start from Earth with a canister of high quality hay (item 1), and they desire a new milking machine (item K). Help them find the best way to make a series of trades at the planets in the cluster to get item K.  If this task is impossible, output -1. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
* Line 1: Two space-separated integers, N and K.
<p>* Lines 2..N+1: Line i+1 contains two space-separated integers, a_i and b_i respectively, that are planet i’s trading trading products. The planet will give item b_i in order to receive item a_i. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
* Line 1: One more than the minimum number of trades to get the milking machine which is item K (or -1 if the cows cannot obtain item K).
<p>* Lines 2..T+1: The ordered list of the objects that the cows possess in the sequence of trades.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
6 5
1 3
3 2
2 3
3 1
2 5
5 4</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
4
1
3
2
5</pre>
<div>
<p class="mytitle"> 温馨提示:</p>
</div>
<div class="mypanel">
OUTPUT DETAILS:
<p>The cows possess 4 objects in total: first they trade object 1 for object 3, then object 3 for object 2, then object 2 for object 5.</p></div>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=2457">提交代码</a>   <a href="http://poj.org/bbs?problem_id=2457">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=2457">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: ccQ.SuperSupper
import java.io.*;
import java.util.*;
public class Main {
	static final int N = 10000+10;
	static int meat[] = new int[N],pre[] = new int[N],n,K;
	static Vector Graph[] = new Vector[N];
	static Queue que = new LinkedList<integer>();
	static void start(){
		for(int i=0;i&lt; N;++i)
			Graph[i] = new Vector();
	}
	static void init(){
		que.clear();
		for(int i=0;i&lt; N;++i){
			Graph[i].clear();
			meat[i] = N+N;
			pre[i] = -1;
		}
		meat[1] = 1;
		que.offer(1);
	}

 public static void main(String[]args) throws Exception{
  int i,u,v;
  start();
  init();
  StreamTokenizer cin = new StreamTokenizer(new BufferedReader(new InputStreamReader(System.in)));

  n = Get_Num(cin);
  K = Get_Num(cin);
  for(i=0;i&lt; n;++i){
	v = Get_Num(cin);
	u = Get_Num(cin);
	Graph[v].add(u);
  }

  solve();
  if(meat[K]&gt;=N) System.out.println(-1);
  else{
	System.out.println(meat[K]);
	make_ans();
  }
 }
 
  static void solve(){
   int i,j,k,temp;
   while(!que.isEmpty()){
	temp = (Integer) que.element();
	que.remove();
	k = Graph[temp].size();
	for(i=0;i&lt; k;++i){
		j = (Integer) Graph[temp].elementAt(i);
		if(meat[j]&gt;meat[temp]+1){
			meat[j] = meat[temp]+1;
			pre[j] = temp;
			que.add(j);
		}
	}
   }
 }

  static void make_ans(){
   int ans[] = new int[N],i,k=K,top=0;
   while(true){
	ans[top++] = k;
	k = pre[k];
	if(k&lt; 0) break;
   }
   PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));
   for(i=top-1;i&gt;=0;--i)
	out.println(ans[i]);
   out.flush();
 }

  static int Get_Num(StreamTokenizer cin) throws Exception{
   cin.nextToken();
   return (int) cin.nval;
 }
}</integer></pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-38053">
<article class="comment" id="comment-38053">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">windy</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-38053" rel="nofollow"><time datetime="2015-06-10T23:46:58+00:00" pubdate="">2015年6月10日 at 下午11:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env  python<br/>
def cou(n):<br/>
        arr =  <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/82/one_org.gif"/><br/>
        i = 1<br/>
        while(i&lt;n):<br/>
                arr.append(arr[i-1]+selfcount(i))<br/>
                i+=1<br/>
        return arr[n-1]</p>
<p>def selfcount(n):<br/>
        count = 0<br/>
        while(n):<br/>
                if n%10 == 1:<br/>
                        count += 1<br/>
                n /= 10<br/>
        return count</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-38054">
<article class="comment" id="comment-38054">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">GordonTJ</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-38054" rel="nofollow"><time datetime="2015-06-02T20:43:01+00:00" pubdate="">2015年6月2日 at 下午8:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题目重复了，删掉一个吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-38056">
<article class="comment" id="comment-38056">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HaibaraAi</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-38056" rel="nofollow"><time datetime="2015-03-06T20:36:53+00:00" pubdate="">2015年3月6日 at 下午8:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很给力啊，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53307">
<article class="comment" id="comment-53307">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yipwinghong</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-53307" rel="nofollow"><time datetime="2014-12-08T00:36:00+00:00" pubdate="">2014年12月8日 at 上午12:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Dijkstra 不适合有负权值的边吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53306">
<article class="comment" id="comment-53306">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hanyi</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-53306" rel="nofollow"><time datetime="2014-11-04T14:11:25+00:00" pubdate="">2014年11月4日 at 下午2:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>您没有考虑 树的根节点是负数的情况， 若树的根节点是个很大的负数，那么就要考虑过不过另外一边子树了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7508">
<article class="comment" id="comment-7508">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tufei</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-7508" rel="nofollow"><time datetime="2014-07-07T05:48:15+00:00" pubdate="">2014年7月7日 at 上午5:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>值得分享！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-7509">
<article class="comment" id="comment-7509">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liuyuedeyu</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-7509" rel="nofollow"><time datetime="2014-04-25T22:06:44+00:00" pubdate="">2014年4月25日 at 下午10:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的方法，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-38052">
<article class="comment" id="comment-38052">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">3136869079</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-38052" rel="nofollow"><time datetime="2014-04-07T19:17:07+00:00" pubdate="">2014年4月7日 at 下午7:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>居然看懂了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53305">
<article class="comment" id="comment-53305">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">WalkCoder</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-53305" rel="nofollow"><time datetime="2014-02-26T18:38:28+00:00" pubdate="">2014年2月26日 at 下午6:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>else if也是要比较两次</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-38055">
<article class="comment" id="comment-38055">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xun.gong</a></span> on <a href="http://www.acmerblog.com/POJ-2457-Part-Acquisition-blog-745.html#comment-38055" rel="nofollow"><time datetime="2013-12-27T05:20:53+00:00" pubdate="">2013年12月27日 at 上午5:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>网站不错，支持一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>