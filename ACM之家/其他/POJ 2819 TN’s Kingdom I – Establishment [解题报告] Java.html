<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-12</div>
<div class="tit"><h1 class="entry-title">POJ 2819 TN’s Kingdom I – Establishment [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观711次</span><span class="i3"><a class="ds-thread-count" data-thread-key="880" href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comments" title="《POJ 2819 TN’s Kingdom I – Establishment [解题报告] Java》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">TN’s Kingdom I – Establishment</h1>
</div>
<div>
<p class="mytitle">问题描述 :</p>
</div>
<div class="mypanel">Once upon a time, there was a king called TN. Probably because of his quick rise and quick fall, he was little mentioned in written history. Still, I want to share with you some deeds of his.
<p>Before TN had himself crowned, the kingdom was under the reign of Dzx. Dzx was a hard-working king. But luck had little been by his side. During his reign, natural disasters fell frequently. After a drought that lasted for ten years, many citizens had lost their confidence in him. TN noticed the change and found it a good time to usurp power. Without too much effort, he managed to assemble a small troop of militants and launched his first insurrection, capturing several towns.<br/>
Hearing about the insurrection, the citizens soon divided. Some remained on their loyalty, but many more changed their stand. Not long after that, the divide evolved into a year-long war. At the end of the war, TN succeeded in seizing the scepter while Dzx was forced to exile.<br/>
The war was short but violent. It devastated almost the whole kingdom. As the new king, the first challenge TN faced was reconstruction. And the most urgent task was to rebuild the roads between towns in the kingdom. The job had to be done quick, therefore TN decided to rebuild as few roads as possible so that between every pair of towns there would exist a path consisting solely of new roads. In revenge on Dzx’s persistent resistance during war-time, he wanted to isolate Dzx’s hometown by letting only one new road connect it to another town. He wondered the proportion of such rebuilding plans to all plans rebuilding the fewest number of roads.</p>
</div>
<p> </p>
<div>
<p class="mytitle">输入:</p>
</div>
<div class="mypanel">The input consists of one or more lines each containing a positive integer between 2 and 10<sup>15</sup> and followed by a line containing a single zero which indicates the end of input and should not be processed. Each line represents a separate test case. The integer it contains gives the number of towns in the kingdom.</div>
<div>
<p class="mytitle">输出:</p>
</div>
<div class="mypanel">For each test case your solution should output one line containing the proportion that TN wondered represented in decimal form and truncated to fourteen decimal places.</div>
<div>
<p class="mytitle">样例输入:</p>
</div>
<pre class="mypanel iopanel">10
0</pre>
<div>
<p class="mytitle">样例输出:</p>
</div>
<pre class="mypanel iopanel">0.43046721000000</pre>
<div class="mybigtile mysubmit"><a href="http://poj.org/submit?problem_id=2819">提交代码</a>  <a href="http://poj.org/bbs?problem_id=2819">问题讨论</a>  <a href="http://poj.org/problemstatus?problem_id=2819">数据统计</a></div>
<div>
<p class="mytitle">解题代码:</p>
</div>
<pre class="brush:java ">//* @author: 
import java.util.*;
import java.math.BigDecimal;
import java.lang.String;

class Main
{
    public static void main(String args[])
    {
        Scanner cin = new Scanner(System.in);
        BigDecimal bd;
        String out;
        int l, i;
        long n;
        while (cin.hasNext())
        {
          n = cin.nextLong();
          if (n == 0)
         	break;
          if (n &lt;= 2)
          {
           System.out.println("1.00000000000000");
           continue;
           }
           bd = Make(n);
           bd = power(bd, n - 2);
	    out = bd.toString().substring(0, 16);
           System.out.println(out);
        }
    }

static BigDecimal power(BigDecimal bd, long n)
{
    	BigDecimal ans;
    	if (n == 0)
    	{
    		return BigDecimal.ONE;
    	}
    	ans = power(bd, n / 2);
    	ans = ans.multiply(ans);
    	if (n % 2 == 1)
    	{
    		ans = ans.multiply(bd);
    	}
    	if (ans.toString().length() &gt; 50)
    	{
    		ans = new BigDecimal(ans.toString().substring(0, 50));
    	}
    	return ans;
    }

    static BigDecimal Make(long N)
    {
    	String s = "";
    	long v = N - 1;
    	int i;
    	for (i = 0; i &lt; 50; i++)
    	{
    		v = (v % N) * 10;
    		s += v / N;
    	}
    	s = "0." + s;
    	return new BigDecimal(s);
    }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-38558">
<article class="comment" id="comment-38558">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">2013283119</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-38558" rel="nofollow"><time datetime="2015-06-01T13:12:38+00:00" pubdate="">2015年6月1日 at 下午1:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很专业！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53539">
<article class="comment" id="comment-53539">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magicSky</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-53539" rel="nofollow"><time datetime="2015-05-04T18:44:21+00:00" pubdate="">2015年5月4日 at 下午6:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>题目需要求解的是最小值，而且没有考虑可能存在环，比如<br/>
0 0 0 0 0<br/>
1 1 1 1 0<br/>
1 0 0 0 0<br/>
1 0 1 0 1<br/>
1 0 0 0 0<br/>
会陷入死循环</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-38557">
<article class="comment" id="comment-38557">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Spike</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-38557" rel="nofollow"><time datetime="2015-03-27T01:25:05+00:00" pubdate="">2015年3月27日 at 上午1:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢支持！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8479">
<article class="comment" id="comment-8479">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Trenson</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-8479" rel="nofollow"><time datetime="2014-12-05T08:40:01+00:00" pubdate="">2014年12月5日 at 上午8:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好。代码比书上的简练！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-38556">
<article class="comment" id="comment-38556">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magichu</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-38556" rel="nofollow"><time datetime="2014-08-30T16:59:19+00:00" pubdate="">2014年8月30日 at 下午4:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>信息不全</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8485">
<article class="comment" id="comment-8485">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-8485" rel="nofollow"><time datetime="2014-06-01T03:05:56+00:00" pubdate="">2014年6月1日 at 上午3:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>处凡愚而不减，在圣贤而不增；<br/>住烦恼而不乱，居禅定而不寂。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-8481">
<article class="comment" id="comment-8481">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jlucky</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-8481" rel="nofollow"><time datetime="2014-03-04T02:49:29+00:00" pubdate="">2014年3月4日 at 上午2:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题是不是可以这样想，生了n孩子的家庭等价于n个家庭各生了一个1个孩子，这样最后男女的比例还是1:1</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8484">
<article class="comment" id="comment-8484">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1193658339</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-8484" rel="nofollow"><time datetime="2014-02-04T00:46:20+00:00" pubdate="">2014年2月4日 at 上午12:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-8483">
<article class="comment" id="comment-8483">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">didiaozuoren</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-8483" rel="nofollow"><time datetime="2013-12-21T04:20:23+00:00" pubdate="">2013年12月21日 at 上午4:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第63行是不是漏了 return 1 + dis_right; ?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53538">
<article class="comment" id="comment-53538">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Spike</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-53538" rel="nofollow"><time datetime="2013-12-18T13:09:44+00:00" pubdate="">2013年12月18日 at 下午1:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>都是一些基础题啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-8480">
<article class="comment" id="comment-8480">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magichu</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-8480" rel="nofollow"><time datetime="2013-12-13T09:07:26+00:00" pubdate="">2013年12月13日 at 上午9:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8482">
<article class="comment" id="comment-8482">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123456789_xd</a></span> on <a href="http://www.acmerblog.com/poj-2819-tns-kingdom-i-establishment-blog-880.html#comment-8482" rel="nofollow"><time datetime="2013-11-16T06:42:08+00:00" pubdate="">2013年11月16日 at 上午6:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很全很强大！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>