<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-04</div>
<div class="tit"><h1 class="entry-title">剑指offer(02)-替换空格[字符串处理]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/jdoj" rel="category tag" title="查看九度OJ中的全部文章">九度OJ</a>, <a href="http://www.acmerblog.com/category/basis/string" rel="category tag" title="查看字符串处理中的全部文章">字符串处理</a></span><span class="i4">围观2258次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1611" href="http://www.acmerblog.com/goto-offer02-1611.html#comments" title="《剑指offer(02)-替换空格[字符串处理]》上的评论">25 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p>题目来自<strong>九度 1510</strong>：<a href="http://ac.jobdu.com/problem.php?pid=1510">http://ac.jobdu.com/problem.php?pid=1510</a></p>
<dl>
<dt><b>题目描述：</b></dt>
<dd>请实现一个函数，将一个字符串中的空格替换成“%20”。例如，当字符串为We Are Happy.则经过替换之后的字符串为We%20Are%20Happy。</dd>
</dl>
<dl>
<dt><b>输入：</b></dt>
<dd>每个输入文件仅包含一组测试样例。<br/>
对于每组测试案例，输入一行代表要处理的字符串。</dd>
</dl>
<dl>
<dt><b>输出：</b></dt>
<dd>对应每个测试案例，出经过处理后的字符串。</dd>
</dl>
<dl>
<dt><b>样例输入：</b></dt>
<dd>
<pre>We Are Happy</pre>
</dd>
</dl>
<dl>
<dt><b>样例输出：</b></dt>
<dd>
<pre>We%20Are%20Happy</pre>
</dd>
</dl>
<p>看似很简单的一题，替换即可。但是提交上去才发现超时。下面是超时的代码：</p>
<pre class="brush:cpp">#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
using namespace std;
char str[1000000];
int main()
{
	while (gets(str))
	{
		int len = strlen(str);
		for (int i = 0; str[i]; i++)
		{
			if (str[i] == ' ')
			{
				for (int j = len + 1; j &gt; i + 2; j--)
					str[j] = str[j - 2];
				len += 2;
				str[i] = '%';
				str[i + 1] = '2';
				str[i + 2] = '0';
				//puts(str);
			}
		}
		puts(str);
	}
	return 0;
}</pre>
<p>先用Java水过，在想怎么优化算法：</p>
<pre class="brush:java">import java.io.BufferedReader;
import java.io.InputStreamReader;
public class Main{
    public static void main(String[] args) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String line=null;
        while( (line=br.readLine()) != null){
            System.out.println(line.replaceAll(" ", "%20"));
        }
    }
}</pre>
<p>这次用一个辅助数组，可以减少交换的次数，顺利通过！</p>
<pre class="brush:cpp">#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
using namespace std;
char str[1000000];
char res[1000000];
int main()
{
	while (gets(str))
	{
		int off = 0;
		//int len = strlen(str);
		for (int i = 0; str[i]; i++)
		{
			if (str[i] == ' ')
			{
				res[off+i] = '%'; res[off+i+1] = '2'; res[off+i+2] = '0';
				off += 2;
			}else
				res[off+i] = str[i];
		}
		puts(res);
	}
	return 0;
}</pre>
<p> </p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-93439">
<article class="comment" id="comment-93439">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93439" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-93438">
<article class="comment" id="comment-93438">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93438" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-93437">
<article class="comment" id="comment-93437">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93437" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-93436">
<article class="comment" id="comment-93436">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93436" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-93435">
<article class="comment" id="comment-93435">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93435" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-93434">
<article class="comment" id="comment-93434">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93434" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-93433">
<article class="comment" id="comment-93433">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93433" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-93444">
<article class="comment" id="comment-93444">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93444" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-93443">
<article class="comment" id="comment-93443">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93443" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-93442">
<article class="comment" id="comment-93442">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93442" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-93441">
<article class="comment" id="comment-93441">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93441" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-93440">
<article class="comment" id="comment-93440">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461861" rel="external nofollow">新用户851044</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-93440" rel="nofollow"><time datetime="2017-04-13T16:46:15+00:00" pubdate="">2017年4月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>姆.真的放假了啊…</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61447">
<article class="comment" id="comment-61447">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gyouxu</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-61447" rel="nofollow"><time datetime="2015-05-25T21:53:48+00:00" pubdate="">2015年5月25日 at 下午9:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40582">
<article class="comment" id="comment-40582">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jlucky</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-40582" rel="nofollow"><time datetime="2015-05-21T01:54:41+00:00" pubdate="">2015年5月21日 at 上午1:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>无需用转移方程也可以解决，哈哈</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40580">
<article class="comment" id="comment-40580">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AC_Grazy</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-40580" rel="nofollow"><time datetime="2015-05-11T15:40:14+00:00" pubdate="">2015年5月11日 at 下午3:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>写的很好~~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40584">
<article class="comment" id="comment-40584">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-40584" rel="nofollow"><time datetime="2015-04-27T08:57:09+00:00" pubdate="">2015年4月27日 at 上午8:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个应该是比较简单的解法了，如果有更好的办法可以告诉我</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12384">
<article class="comment" id="comment-12384">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aifan</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-12384" rel="nofollow"><time datetime="2015-04-21T17:18:41+00:00" pubdate="">2015年4月21日 at 下午5:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>[…] 如果此题没有要求 相对位置不变，可以参考文章：http://www.acmerblog.com/interview-9-2427/ […]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40581">
<article class="comment" id="comment-40581">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">asdass</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-40581" rel="nofollow"><time datetime="2015-02-12T16:26:42+00:00" pubdate="">2015年2月12日 at 下午4:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已经挂掉了，给个参考呗</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61446">
<article class="comment" id="comment-61446">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">985836927</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-61446" rel="nofollow"><time datetime="2014-12-15T10:38:09+00:00" pubdate="">2014年12月15日 at 上午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12385">
<article class="comment" id="comment-12385">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linzzzz</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-12385" rel="nofollow"><time datetime="2014-10-10T02:32:40+00:00" pubdate="">2014年10月10日 at 上午2:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>请问printAllCombination的时间复杂度怎么分析呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12381">
<article class="comment" id="comment-12381">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-12381" rel="nofollow"><time datetime="2014-08-29T02:04:14+00:00" pubdate="">2014年8月29日 at 上午2:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>全是智力分析的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12383">
<article class="comment" id="comment-12383">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jiakcstudio</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-12383" rel="nofollow"><time datetime="2014-04-09T02:09:44+00:00" pubdate="">2014年4月9日 at 上午2:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢支持！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12380">
<article class="comment" id="comment-12380">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ygwx</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-12380" rel="nofollow"><time datetime="2014-03-22T20:00:34+00:00" pubdate="">2014年3月22日 at 下午8:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，就是把这32位当成一个长度为32的数</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40583">
<article class="comment" id="comment-40583">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tufei</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-40583" rel="nofollow"><time datetime="2014-03-16T23:51:43+00:00" pubdate="">2014年3月16日 at 下午11:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>可以根据二叉排序树的定义进行严格的排序树创建和后序遍历操作。如果形成的排序树相同，其树的前、中、后序遍历是相同的，但在此处不能使用中序遍历，因为，中序遍历的结果就是排序的结果。经在九度测试，运行时间90ms，比楼主的要快。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12382">
<article class="comment" id="comment-12382">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">489365227</a></span> on <a href="http://www.acmerblog.com/goto-offer02-1611.html#comment-12382" rel="nofollow"><time datetime="2013-12-07T03:13:52+00:00" pubdate="">2013年12月7日 at 上午3:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>老实说，这种方法就是穷举，复杂度是2^n，之所以能够AC是应为题目的测试数据有问题，要么数据量很小，要么能够得到k == t，否则即使n = 30，也要很久才能得出结果，本人亲测</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>