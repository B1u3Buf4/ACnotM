<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>04-04</div>
<div class="tit"><h1 class="entry-title">面试题：++*p, *p++ 和 *++p</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/gaotong2055" rel="author" title="由dragon发布">dragon</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/clanguage" rel="category tag" title="查看C基础练习中的全部文章">C基础练习</a>, <a href="http://www.acmerblog.com/category/offer" rel="category tag" title="查看剑指offer中的全部文章">剑指offer</a></span><span class="i4">围观1116次</span><span class="i3"><a class="ds-thread-count" data-thread-key="5539" href="http://www.acmerblog.com/interview-pointer-p-5539.html#comments" title="《面试题：++*p, *p++ 和 *++p》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p>预测下面程序的输出：</p>
<pre class="brush:cpp">// PROGRAM 1
#include &lt;stdio.h&gt;
int main(void)
{
    int arr[] = {10, 20};
    int *p = arr;
    ++*p;
    printf("arr[0] = %d, arr[1] = %d, *p = %d", arr[0], arr[1], *p);
    return 0;
}
// PROGRAM 2
#include &lt;stdio.h&gt;
int main(void)
{
    int arr[] = {10, 20};
    int *p = arr;
    *p++;
    printf("arr[0] = %d, arr[1] = %d, *p = %d", arr[0], arr[1], *p);
    return 0;
}
// PROGRAM 3
#include &lt;stdio.h&gt;
int main(void)
{
    int arr[] = {10, 20};
    int *p = arr;
    *++p;
    printf("arr[0] = %d, arr[1] = %d, *p = %d", arr[0], arr[1], *p);
    return 0;
}</pre>
<p>只要记住下面的运算规则就不难预测程序的输出：</p>
<p>1) 前置 ++ 和 * 的优先级是相同，都是<strong>从右向左</strong>结合</p>
<p>2) 后置++的优先级高于 *和前置++， 后置++<strong>从左向右</strong>结合</p>
<p>参考:<a href="http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm">C语言中运算符的优先级</a></p>
<p>程序1: <strong>++*p</strong> 优先级相同且都从右向左结合，可以看做是  <em><strong>++(*p)</strong></em> ，因此p所指向的那个数改变了。<em>arr[0] = 11, arr[1] = 20, *p = 11</em></p>
<p>程序2:  <strong>*p++</strong> 可以看做是 <em><strong> *(p++)</strong></em>， 指针的地址是变了，内容没变。<em>arr[0] = 10, arr[1] = 20, *p = 20</em></p>
<p>程序3：<strong>*++p</strong> 优先级相同且都从右向左结合，可以看做是 <em><strong>*(++p)</strong></em>. <em>arr[0] = 10, arr[1] = 20, *p = 20</em></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-75993">
<article class="comment" id="comment-75993">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468153" rel="external nofollow">新用户700066</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-75993" rel="nofollow"><time datetime="2017-04-12T05:46:06+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>凡事有好有坏，你能不能就事论事？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3496">
<article class="comment" id="comment-3496">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn">alone</span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-3496" rel="nofollow"><time datetime="2015-06-14T23:49:07+00:00" pubdate="">2015年6月14日 at 下午11:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不同的编译器，printf(),执行的顺序不同，所以结果也就不同，建议不要那么写</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-3298">
<article class="comment" id="comment-3298">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.banshouseo.com/" rel="external nofollow">seo培训</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-3298" rel="nofollow"><time datetime="2015-04-24T09:10:31+00:00" pubdate="">2015年4月24日 at 上午9:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30082">
<article class="comment" id="comment-30082">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aliens</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-30082" rel="nofollow"><time datetime="2015-03-05T18:52:47+00:00" pubdate="">2015年3月5日 at 下午6:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>没错的，九度OJ也有此题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49229">
<article class="comment" id="comment-49229">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mcitdkj</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-49229" rel="nofollow"><time datetime="2014-11-02T12:12:33+00:00" pubdate="">2014年11月2日 at 下午12:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第15行代码，/n/n，应该改为\n\n</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49228">
<article class="comment" id="comment-49228">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Anne</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-49228" rel="nofollow"><time datetime="2014-10-22T18:13:15+00:00" pubdate="">2014年10月22日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>跟书上的解法不一样，不知道哪个效率要高些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58725">
<article class="comment" id="comment-58725">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xuelanghu</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-58725" rel="nofollow"><time datetime="2014-08-28T08:30:59+00:00" pubdate="">2014年8月28日 at 上午8:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很全很强大！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-321">
<article class="comment" id="comment-321">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.zhouleyu.com" rel="external nofollow">zhouleyu</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-321" rel="nofollow"><time datetime="2014-04-27T09:07:37+00:00" pubdate="">2014年4月27日 at 上午9:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-318">
<article class="comment" id="comment-318">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.zhouleyu.com/life/skinny-essential-oils-work-again" rel="external nofollow">zhouleyu</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-318" rel="nofollow"><time datetime="2014-04-26T16:58:37+00:00" pubdate="">2014年4月26日 at 下午4:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-315">
<article class="comment" id="comment-315">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://kaixinzhuan.tk" rel="external nofollow">开心赚（kaixinzhuan)</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-315" rel="nofollow"><time datetime="2014-04-24T12:01:50+00:00" pubdate="">2014年4月24日 at 下午12:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49230">
<article class="comment" id="comment-49230">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1520006273</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-49230" rel="nofollow"><time datetime="2014-04-16T20:35:12+00:00" pubdate="">2014年4月16日 at 下午8:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>能不能说下这个是用的什么算法策略？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-277">
<article class="comment" id="comment-277">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn">hari</span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-277" rel="nofollow"><time datetime="2014-04-07T13:00:58+00:00" pubdate="">2014年4月7日 at 下午1:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;stdio.h&gt;<br/>
int main(void)<br/>
{<br/>
int arr[] = {10,20,30,40,50,60};<br/>
int *p=arr;<br/>
printf("%d,%d,",*p++,*++p);<br/>
printf("%d,%d,%d",*p,*p++,*++p);<br/>
return 0;<br/>
}</p>
<p>为什么是 20,20,50,40,50. 我觉得的应该是 20,20,40,40,50 . 谁能解释下？</p>
</div>
</article><!-- #comment-## -->
<ul class="children">
<li class="comment byuser comment-author-gaotong2055 bypostauthor even depth-2" id="li-comment-278">
<article class="comment" id="comment-278">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn">dragon</span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-278" rel="nofollow"><time datetime="2014-04-07T13:09:08+00:00" pubdate="">2014年4月7日 at 下午1:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>printf这个函数在计算的时候是从右到左，打印是从左到右。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin odd alt depth-2" id="li-comment-279">
<article class="comment" id="comment-279">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://weibo.com/itong2055" rel="external nofollow">管理员</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-279" rel="nofollow"><time datetime="2014-04-07T15:27:41+00:00" pubdate="">2014年4月7日 at 下午3:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一样</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-276">
<article class="comment" id="comment-276">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.zhuan50.com/youxi/" rel="external nofollow">赚五十任务站大全30个</a></span> on <a href="http://www.acmerblog.com/interview-pointer-p-5539.html#comment-276" rel="nofollow"><time datetime="2014-04-07T12:16:42+00:00" pubdate="">2014年4月7日 at 下午12:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>沙发呢，我抢到了沙发</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>