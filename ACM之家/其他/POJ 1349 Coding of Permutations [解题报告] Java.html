<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-09</div>
<div class="tit"><h1 class="entry-title">POJ 1349 Coding of Permutations [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观1582次</span><span class="i3"><a class="ds-thread-count" data-thread-key="374" href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comments" title="《POJ 1349 Coding of Permutations [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Coding of Permutations</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Write a program that gives us the ordinal position d(P) of any rank-n permutation P=(p1,p2卲n) in the dictionary without producing all the rank-n permutations in order, where pi{1,2,3,…,n},n&lt;=50.  When n=4, the whole rank-4 permutation in lexicographical order and the code is shown in the following figure.<br/>
<br/>For example: if P=(2,3,4,1), then d(P)=10; if P=(4,2,1,3), then d(P)=21.<br/>
<br/><center><img src="http://www.acmerblog.com/img/poj/1349-5.jpg"/></center>
</div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
(n, P): For more than one input in the input file, one line is for each input ,with -1 at the end. P is in the form of list. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
d(P): It should be in the form of a line with the outputs separated by commas.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
(4,(3,2,1,4))
(5,(3,5,1,2,4))
-1
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
15,67</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=1349">提交代码</a>   <a href="http://poj.org/bbs?problem_id=1349">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=1349">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java">//* @author: 
import java.util.*;
import java.math.*;

public class Main {
 public static String s;
 public static int []p = new int [51];
 public static int []visit = new int [51];
 public static Vector res = new Vector();
 public static BigInteger []q = new BigInteger [51];
 public static int n;
 static void init()
 {
   q[0] = q[1] = BigInteger.ONE;
   int i;
   for (i = 2; i &lt; 51; i++)
    q[i] = q[i - 1].multiply(new BigInteger (i + ""));
 }

 static void parse()
 {
  int i, j, k, len;
  char ch;
  len = s.length();
  ch = s.charAt(2);
  if (ch &gt;= '0' &amp;&amp; ch &lt;= '9')
  {
   n = (ch - '0') + 10 * (s.charAt(1) - '0');
   i = 5;
  }
  else
  {
   n = (s.charAt(1) - '0');
   i = 4;
  }
  k = j = 0;
  while (i &lt; len)
   {
	ch = s.charAt(i);
	if (ch == ',' || ch == ')')
	{
          p[j++] = k;
 	  k = 0;
	}
	else
	  k = k * 10 + (ch - '0');
	i++;
   }
 }

  static void deal()
  {
	BigInteger ans = BigInteger.ONE, temp;
	Arrays.fill(visit, 0);
	int i, j, count;
	for (i = 0; i &lt; n; i++)
	{
          count = 0;
	  for (j = 1; j &lt; p[i]; j++)
	    if (visit[j] == 0)
		 count++;
	    visit[p[i]] = 1;
	    temp = BigInteger.ONE;
	    temp = temp.multiply(new BigInteger (count + "")).multiply(q[n - i - 1]);
	    ans = ans.add(temp);
	 }
	res.addElement(ans);
  }

   static void input()
    {
	Scanner cin = new Scanner (System.in);
	while (cin.hasNext())
	{
	  s = cin.nextLine();
	  if (s.compareTo("-1") == 0)
		break;
	  parse();
	  deal();
	}
	int i, len = res.size();
	for (i = 0; i &lt; len - 1; i++)
	  System.out.print(res.elementAt(i) + ",");
	  System.out.println(res.elementAt(i));
     }
	
   public static void main (String []args)
    {
	init();
	input();
   }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-36835">
<article class="comment" id="comment-36835">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">reking</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-36835" rel="nofollow"><time datetime="2015-06-19T23:38:45+00:00" pubdate="">2015年6月19日 at 下午11:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有没有C++语言的代码？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4874">
<article class="comment" id="comment-4874">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bernice1989</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4874" rel="nofollow"><time datetime="2015-03-29T09:39:51+00:00" pubdate="">2015年3月29日 at 上午9:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>[…] 答案：http://www.acmerblog.com/interview-2-1549/ […]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4876">
<article class="comment" id="comment-4876">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Spike</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4876" rel="nofollow"><time datetime="2015-01-19T00:25:35+00:00" pubdate="">2015年1月19日 at 上午12:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大哥，你复制也看看是不是这题的答案才复制吧。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4880">
<article class="comment" id="comment-4880">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jamoeba</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4880" rel="nofollow"><time datetime="2015-01-17T20:16:25+00:00" pubdate="">2015年1月17日 at 下午8:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>秒！~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4878">
<article class="comment" id="comment-4878">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jupiterhyun</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4878" rel="nofollow"><time datetime="2014-11-13T07:09:17+00:00" pubdate="">2014年11月13日 at 上午7:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>换句话说，A[k/2-1]不可能大于两数组合并之后的第k小值，所以我们可以将其抛弃。<br/>
应该是，不可能小于合并后的第K小值吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4877">
<article class="comment" id="comment-4877">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCat</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4877" rel="nofollow"><time datetime="2014-10-22T22:21:51+00:00" pubdate="">2014年10月22日 at 下午10:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>沙发呢，我抢到了沙发</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4879">
<article class="comment" id="comment-4879">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1193658339</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4879" rel="nofollow"><time datetime="2014-10-10T10:31:52+00:00" pubdate="">2014年10月10日 at 上午10:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大致看了下，算法的时间复杂度没有很本性的提升，算不上高效。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-36833">
<article class="comment" id="comment-36833">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aliens</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-36833" rel="nofollow"><time datetime="2014-08-03T01:24:06+00:00" pubdate="">2014年8月3日 at 上午1:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法好！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4882">
<article class="comment" id="comment-4882">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">weijieut</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4882" rel="nofollow"><time datetime="2014-04-08T01:54:47+00:00" pubdate="">2014年4月8日 at 上午1:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>没有对题目进行一番分析，真是美中不足啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4875">
<article class="comment" id="comment-4875">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Supermaner</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4875" rel="nofollow"><time datetime="2014-04-06T20:49:39+00:00" pubdate="">2014年4月6日 at 下午8:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好，注释很详细啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-36837">
<article class="comment" id="comment-36837">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zx123456</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-36837" rel="nofollow"><time datetime="2014-04-06T04:44:22+00:00" pubdate="">2014年4月6日 at 上午4:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一个真的要比较两次吗，换成else if 不可以吗</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-36834">
<article class="comment" id="comment-36834">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linzzzz</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-36834" rel="nofollow"><time datetime="2014-03-07T01:31:54+00:00" pubdate="">2014年3月7日 at 上午1:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了！！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-4881">
<article class="comment" id="comment-4881">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Trenson</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-4881" rel="nofollow"><time datetime="2014-02-11T20:08:44+00:00" pubdate="">2014年2月11日 at 下午8:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>赞！！~~大赞！！~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-36836">
<article class="comment" id="comment-36836">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AE</a></span> on <a href="http://www.acmerblog.com/POJ-1349-Coding-of-Permutations-blog-374.html#comment-36836" rel="nofollow"><time datetime="2014-01-04T01:56:48+00:00" pubdate="">2014年1月4日 at 上午1:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>清华也会出这么无聊的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>