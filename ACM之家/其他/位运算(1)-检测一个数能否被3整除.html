<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-30</div>
<div class="tit"><h1 class="entry-title">位运算(1)-检测一个数能否被3整除</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/gaotong2055" rel="author" title="由dragon发布">dragon</a></span><span class="i1"><a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a>, <a href="http://www.acmerblog.com/category/zhuanti/classic" rel="category tag" title="查看经典问题中的全部文章">经典问题</a></span><span class="i4">围观1493次</span><span class="i3"><a class="ds-thread-count" data-thread-key="5403" href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comments" title="《位运算(1)-检测一个数能否被3整除》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p>第一个解决方案就是小学就学过的，如果一个数的每个位相加之和能被3整除，则这个数就可以被3整除。例如612各位之和为9，则可以被3整除。但是这个解决方法并不高效，我们需要取得每一位，然后再一个个相加。</p>
<p>观察二进制，我们可以找到一个模式来判断一个数能否被3整除。如果所有的偶数位出现1的次数为 even_count, 奇数位出现1的次数为 odd_count，两者只差如果是3的倍数，那么这个数就是3倍数。</p>
<p>例如：23 (00…..0010111)  even_count=3, odd_count = 1.    3-1 不能被2整除，所以不是3的倍数。</p>
<pre class="brush:cpp">#include&lt;stdio.h&gt;

/* 返回n是否是3的倍数*/
int isMultipleOf3(int n)
{
    int odd_count = 0;
    int even_count = 0;

    /* 使n为正数，防止递归不退出*/
    if(n &lt; 0)   n = -n;
    if(n == 0) return 1;
    if(n &lt;= 2) return 0;

    while(n)
    {
        /* 统计偶数位有1的个数 */
        if(n &amp; 1) 
           odd_count++;
        n = n&gt;&gt;1;

        /* 统计奇数位 */
        if(n &amp; 1)
            even_count++;
        n = n&gt;&gt;1;
    }

     return isMultipleOf3(odd_count - even_coun));
}

/* 测试 */
int main()
{
    int num = 23;
    if (isMultipleOf3(num))    
        printf("num is multiple of 3");
    else
        printf("num is not a multiple of 3");
    getchar();
    return 0;
}</pre>
<p>时间复杂度：O(logn)</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-58638">
<article class="comment" id="comment-58638">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">WalkCoder</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-58638" rel="nofollow"><time datetime="2015-03-09T03:35:44+00:00" pubdate="">2015年3月9日 at 上午3:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;stdio.h&gt;<br/>
int main(void)<br/>
{<br/>
int arr[] = {10,20,30,40,50,60};<br/>
int *p=arr;<br/>
printf("%d,%d,",*p++,*++p);<br/>
printf("%d,%d,%d",*p,*p++,*++p);<br/>
return 0;<br/>
}</p>
<p>为什么是 20,20,50,40,50. 我觉得的应该是 20,20,40,40,50 . 谁能解释下？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49061">
<article class="comment" id="comment-49061">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">3136869079</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49061" rel="nofollow"><time datetime="2014-12-28T00:13:41+00:00" pubdate="">2014年12月28日 at 上午12:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49060">
<article class="comment" id="comment-49060">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">abguorui0928</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49060" rel="nofollow"><time datetime="2014-11-29T23:07:28+00:00" pubdate="">2014年11月29日 at 下午11:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thanks for taking the time to examine this, I really feel strongly about it and love studying a lot more on this topic. If possible, as you acquire experience</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49053">
<article class="comment" id="comment-49053">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">dreams</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49053" rel="nofollow"><time datetime="2014-10-09T23:47:19+00:00" pubdate="">2014年10月9日 at 下午11:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49059">
<article class="comment" id="comment-49059">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">everos</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49059" rel="nofollow"><time datetime="2014-10-07T19:46:35+00:00" pubdate="">2014年10月7日 at 下午7:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是O(m+n)，不小心打错了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49051">
<article class="comment" id="comment-49051">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fermi</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49051" rel="nofollow"><time datetime="2014-09-09T04:51:47+00:00" pubdate="">2014年9月9日 at 上午4:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感谢分享 学习了`(*∩_∩*)′</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58637">
<article class="comment" id="comment-58637">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">20134055016</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-58637" rel="nofollow"><time datetime="2014-08-09T11:13:16+00:00" pubdate="">2014年8月9日 at 上午11:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正解，已改正。应该都是protected</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49058">
<article class="comment" id="comment-49058">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AC_Grazy</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49058" rel="nofollow"><time datetime="2014-06-21T09:44:18+00:00" pubdate="">2014年6月21日 at 上午9:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>比较基础，找些自信</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49055">
<article class="comment" id="comment-49055">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">howhaw</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49055" rel="nofollow"><time datetime="2014-06-15T07:24:41+00:00" pubdate="">2014年6月15日 at 上午7:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>97行缺一个分号</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49052">
<article class="comment" id="comment-49052">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCCat</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49052" rel="nofollow"><time datetime="2014-06-14T21:51:25+00:00" pubdate="">2014年6月14日 at 下午9:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主您好，这是一个内容十分优秀的博客，而且界面也非常漂亮。但是为什么博客的响应速度这么慢，虽然博客的主机在国外，但是我开启VPN还是经常响应很久，再者打开某些页面经常会出现数据库连接出错的提示</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49054">
<article class="comment" id="comment-49054">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">changjf</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49054" rel="nofollow"><time datetime="2014-04-29T09:38:54+00:00" pubdate="">2014年4月29日 at 上午9:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我还有个问题想请教一下，就是感觉对于新手来说，递归理解起来有些困难，不知有没有什么好的方法或者什么好的建议？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49056">
<article class="comment" id="comment-49056">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hao555sky</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49056" rel="nofollow"><time datetime="2014-04-27T00:52:52+00:00" pubdate="">2014年4月27日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>终于AC了！next数组还是不好理解啊，mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49057">
<article class="comment" id="comment-49057">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">a997930294</a></span> on <a href="http://www.acmerblog.com/efficient-check-if-a-number-is-multiple-of-3-5403.html#comment-49057" rel="nofollow"><time datetime="2014-04-26T04:48:47+00:00" pubdate="">2014年4月26日 at 上午4:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>