<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-10</div>
<div class="tit"><h1 class="entry-title">POJ 2018 Best Cow Fences [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观968次</span><span class="i3"><a class="ds-thread-count" data-thread-key="588" href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comments" title="《POJ 2018 Best Cow Fences [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Best Cow Fences</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Farmer John’s farm consists of a long row of N (1 &lt;= N &lt;= 100,000)fields.  Each field contains a certain number of cows, 1 &lt;= ncows &lt;= 2000.
<p>FJ wants to build a fence around a contiguous group of these fields in order to maximize the average number of cows per field within that block. The block must contain at least F (1 &lt;= F &lt;= N) fields, where F given as input.</p>
<p>Calculate the fence placement that maximizes the average, given the constraint.
 </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
* Line 1: Two space-separated integers, N and F.
<p>* Lines 2..N+1: Each line contains a single integer, the number of cows in a field. Line 2 gives the number of cows in field 1,line 3 gives the number in field 2, and so on.<br/>
</p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
* Line 1: A single integer that is 1000 times the maximal average.Do not perform rounding, just print the integer that is 1000*ncows/nfields.<br/>
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
10 6
6 
4
2
10
3
8
5
9
4
1
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
6500
</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=2018">提交代码</a>   <a href="http://poj.org/bbs?problem_id=2018">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=2018">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: ccQ.SuperSupper
import java.io.*;
import java.util.*;

public class Main {
	
  static int n,k;
  static final int N = 100000+100,que[] = new int[N];
  static double DP[] = new double[N] , sum[] = new double[N];
	
  public static int Get_Num(StreamTokenizer cin) throws Exception{
	cin.nextToken();
	return (int)cin.nval;
  }
  
  public static void main(String []args) throws Exception{
		
   int i,j;
   double temp;

   StreamTokenizer in = new StreamTokenizer(new BufferedReader(new InputStreamReader(System.in)));
		
	//n = cin.nextInt();
	//k = cin.nextInt();
	n = Get_Num(in);
	k = Get_Num(in);
	sum[0] = 0.0;
	for(i=1;i&lt;=n;++i){
		temp = (double) Get_Num(in);
		temp*=1000.0;
		sum[i] = sum[i-1]+temp;
	}
	i = (int) solve();
	System.out.println(i);
    }
	
   public static boolean G(int a,int b,int c){
	if((sum[c]-sum[a])*(b-a)&lt;=(sum[b]-sum[a])*(c-a))
		return true;
	return false;
   }

  public static int solve(){
		
   double Max;
   int left=0,right=0,i,j;
   for(i=k;i&lt;=n;++i){
	while(right-left&gt;=2 &amp;&amp; G(que[right-2],que[right-1],i-k))
		--right;
	que[right++] = i-k;
		
	DP[i] = (sum[i] - sum[que[left]])/(i-que[left]);
	while(left&lt; right-1 &amp;&amp; (DP[i]&lt;=((sum[i]-sum[que[left+1]])/(i-que[left+1])))){
		left++;
		DP[i] = (sum[i] - sum[que[left]])/(i-que[left]);
	}
    }
	for(Max=0.0,i=1;i&lt;=n;++i)
		Max = Max&gt;DP[i]?Max:DP[i];
	return (int)Max;
  }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-6465">
<article class="comment" id="comment-6465">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6465" rel="nofollow"><time datetime="2015-07-06T01:27:40+00:00" pubdate="">2015年7月6日 at 上午1:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我得邮箱cwqbupt@qq.com</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6463">
<article class="comment" id="comment-6463">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">winter</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6463" rel="nofollow"><time datetime="2015-04-20T13:25:36+00:00" pubdate="">2015年4月20日 at 下午1:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>惊艳了，没想到代码如此简洁</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6458">
<article class="comment" id="comment-6458">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mysteriousAngel_love</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6458" rel="nofollow"><time datetime="2015-04-16T23:53:35+00:00" pubdate="">2015年4月16日 at 下午11:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>一开始就规定不相邻节点颜色相同，可能得不到最优解。我想个类似的算法，也不确定是否总能得到最优解：先着一个点，随机挑一个相邻点，着第二色，继续随机选一个点，但必须至少有一个边和已着点相邻，着上不同色，当然尽量不增加新色，直到完成。我还找不到反例验证他的错误。。希望LZ也帮想想, 有想法欢迎来邮件。谢谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6461">
<article class="comment" id="comment-6461">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">645198</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6461" rel="nofollow"><time datetime="2015-03-30T19:26:56+00:00" pubdate="">2015年3月30日 at 下午7:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题是不是可以这样想，生了n孩子的家庭等价于n个家庭各生了一个1个孩子，这样最后男女的比例还是1:1</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6464">
<article class="comment" id="comment-6464">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiao597896577</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6464" rel="nofollow"><time datetime="2015-01-24T05:37:45+00:00" pubdate="">2015年1月24日 at 上午5:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>在第 18行的，while(scanf("%d %dn", &amp;n, &amp;c), n)，这句有错吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6462">
<article class="comment" id="comment-6462">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">645198</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6462" rel="nofollow"><time datetime="2014-11-18T13:19:38+00:00" pubdate="">2014年11月18日 at 下午1:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>具体实现上有所差别，但思路是一样的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37498">
<article class="comment" id="comment-37498">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magichu</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-37498" rel="nofollow"><time datetime="2014-10-19T04:25:20+00:00" pubdate="">2014年10月19日 at 上午4:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>参考 <a href="http://www.acmerblog.com/leetcode-solutions-6422.html" rel="nofollow">http://www.acmerblog.com/leetcode-solutions-6422.html</a></p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6460">
<article class="comment" id="comment-6460">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mcitdkj</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6460" rel="nofollow"><time datetime="2014-10-06T17:21:14+00:00" pubdate="">2014年10月6日 at 下午5:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这配图…..</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6457">
<article class="comment" id="comment-6457">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mechine</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6457" rel="nofollow"><time datetime="2014-10-01T11:37:12+00:00" pubdate="">2014年10月1日 at 上午11:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一句可以忽略不计了吧。从第二句开始分析，说明这个花色下的所有牌都会在其它里面出现，那么还剩下♠️和♦️。第三句，可以排除2和7，因为在两种花色里有。现在是第四句，因为♠️还剩下多个，只有是♦️B才能知道答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37497">
<article class="comment" id="comment-37497">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Snarl_jsb</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-37497" rel="nofollow"><time datetime="2014-07-20T05:13:54+00:00" pubdate="">2014年7月20日 at 上午5:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>算法，他认识我，我不认识他，后来有人告诉我你写的这段代码就是XXX算法。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6455">
<article class="comment" id="comment-6455">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tufei</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6455" rel="nofollow"><time datetime="2014-05-28T05:00:17+00:00" pubdate="">2014年5月28日 at 上午5:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;<br/>
#include &lt;cstring&gt;</p>
<p>const int MAXSIZE=256;<br/>
//char store[MAXSIZE];<br/>
char str1[MAXSIZE];<br/>
/*<br/>
void init(char *store) {<br/>
    int i;<br/>
    store['A']=’V', store['B']=’W',store['C']=’X',store['D']=’Y',store['E']=’Z';<br/>
    for(i=’F';i&lt;=’Z';++i) store <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =i-5;<br/>
}<br/>
*/<br/>
int main() {<br/>
    //freopen("input.txt","r",stdin);<br/>
    //init(store);<br/>
    char *p;<br/>
    while(fgets(str1,MAXSIZE,stdin) &amp;&amp; strcmp(str1,"STARTn")==0) {<br/>
        if(p=fgets(str1,MAXSIZE,stdin)) {<br/>
            for(;*p;++p) {<br/>
				//*p=store[*p]<br/>
                if(*p&lt;’A’ || *p&gt;’Z') continue;<br/>
                if(*p&gt;’E') *p=*p-5;<br/>
                else *p=*p+21;<br/>
            }<br/>
            printf("%s",str1);<br/>
        }<br/>
        fgets(str1,MAXSIZE,stdin);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6459">
<article class="comment" id="comment-6459">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">489365227</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6459" rel="nofollow"><time datetime="2014-02-16T11:43:37+00:00" pubdate="">2014年2月16日 at 上午11:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6456">
<article class="comment" id="comment-6456">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zzzzzz</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-6456" rel="nofollow"><time datetime="2013-12-11T21:51:42+00:00" pubdate="">2013年12月11日 at 下午9:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#pragma pack(2) 这个用法太坑爹</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-60668">
<article class="comment" id="comment-60668">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Snarl_jsb</a></span> on <a href="http://www.acmerblog.com/POJ-2018-Best-Cow-Fences-blog-588.html#comment-60668" rel="nofollow"><time datetime="2013-12-06T10:48:03+00:00" pubdate="">2013年12月6日 at 上午10:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>