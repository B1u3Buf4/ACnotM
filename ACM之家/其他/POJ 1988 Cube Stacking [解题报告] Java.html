<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-10</div>
<div class="tit"><h1 class="entry-title">POJ 1988 Cube Stacking [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观965次</span><span class="i3"><a class="ds-thread-count" data-thread-key="576" href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comments" title="《POJ 1988 Cube Stacking [解题报告] Java》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Cube Stacking</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Farmer John and Betsy are playing a game with N (1 &lt;= N &lt;= 30,000)identical cubes labeled 1 through N. They start with N stacks, each containing a single cube. Farmer John asks Betsy to perform P (1&lt;= P &lt;= 100,000) operation.  There are two types of operations:<br/>
<br/>moves and counts.<br/>
<br/>  * In a move operation, Farmer John asks Bessie to move the stack containing cube X on top of the stack containing cube Y.<br/>
<br/>  * In a count operation, Farmer John asks Bessie to count the  number of cubes on the stack with cube X that are under the cube X and report that value.
<p>Write a program that can verify the results of the game.
 </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
* Line 1: A single integer, P
<p>* Lines 2..P+1: Each of these lines describes a legal operation. Line 2 describes the first operation, etc.  Each line begins with a ‘M’ for a move operation or a ‘C’ for a count operation.  For move operations, the line also contains two integers: X and Y.For count operations, the line also contains a single integer: X.</p>
<p>Note that the value for N does not appear in the input file. No move operation will request a move a stack onto itself.<br/>
</p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
Print the output from each of the count operations in the same order as the input file.<br/>
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
6
M 1 6
C 1
M 2 4
M 2 6
C 3
C 4
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1
0
2
</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=1988">提交代码</a>   <a href="http://poj.org/bbs?problem_id=1988">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=1988">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">/* @author: */
import java.util.Scanner;
import java.util.Arrays;
public class Main{
 static int p[]=new int[30010];
 static int d[]=new int[30010];
 static int num[]=new int[30010];
 static int i=0;
 static char c[]=new char[5];

 static int getup(int a)
 {
  int b=a;
   while(p[b]!=b)
    b=p[b];
  return p[a]=b;
 }

 static int getd(int a)
 {
   int b=a;
   int v=0;
   while(d[b]!=b)
   {
    v+=num[b];
    b=d[b];
   }
   num[a]=v;
   return d[a]=b;
 }

 public static void main(String[] args){   
  Scanner sc=new Scanner(System.in);
  for(i=1;i&lt; 30005;i++)
   p[i]=d[i]=i;
  Arrays.fill(num,0);
  int n,m,u,v;
  n=sc.nextInt();
  while((n--)!=0)
  {
	c=sc.next().toCharArray();
	if(c[0]=='C')
	{
         m=sc.nextInt();
	  getd(m);
	  System.out.printf("%d\n",num[m]);
	}
	else if(c[0]=='M')
	{
	  u=sc.nextInt();
         v=sc.nextInt();
	  int g1=getd(u);
	  int g2=getup(v);
	  d[g1]=g2;
	  p[g2]=g1;
	  num[g1]=1;
	}
   }
  }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-53006">
<article class="comment" id="comment-53006">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mclown</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53006" rel="nofollow"><time datetime="2015-04-28T18:07:25+00:00" pubdate="">2015年4月28日 at 下午6:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53009">
<article class="comment" id="comment-53009">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">siaswj</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53009" rel="nofollow"><time datetime="2015-03-26T02:24:07+00:00" pubdate="">2015年3月26日 at 上午2:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6362">
<article class="comment" id="comment-6362">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gy910210</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-6362" rel="nofollow"><time datetime="2015-01-05T06:10:46+00:00" pubdate="">2015年1月5日 at 上午6:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题目重复了，删掉一个吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37476">
<article class="comment" id="comment-37476">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">JcZ</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-37476" rel="nofollow"><time datetime="2014-11-19T03:28:34+00:00" pubdate="">2014年11月19日 at 上午3:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不考虑最后将结果排序的话，快排的时间复杂度是O(N) ，而堆排的是O(N*logK)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53007">
<article class="comment" id="comment-53007">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhuliyan</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53007" rel="nofollow"><time datetime="2014-10-16T13:28:43+00:00" pubdate="">2014年10月16日 at 下午1:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>具体实现上有所差别，但思路是一样的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53010">
<article class="comment" id="comment-53010">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">anthozoan77</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53010" rel="nofollow"><time datetime="2014-06-06T16:18:50+00:00" pubdate="">2014年6月6日 at 下午4:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6360">
<article class="comment" id="comment-6360">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">crazymage</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-6360" rel="nofollow"><time datetime="2014-05-20T08:28:17+00:00" pubdate="">2014年5月20日 at 上午8:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题选错了，答案是A</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6361">
<article class="comment" id="comment-6361">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AE</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-6361" rel="nofollow"><time datetime="2014-04-04T05:39:33+00:00" pubdate="">2014年4月4日 at 上午5:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的思路，可以借鉴</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53005">
<article class="comment" id="comment-53005">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HenrryCheng</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53005" rel="nofollow"><time datetime="2014-03-31T01:08:17+00:00" pubdate="">2014年3月31日 at 上午1:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>全是智力分析的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53004">
<article class="comment" id="comment-53004">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53004" rel="nofollow"><time datetime="2014-03-15T05:41:23+00:00" pubdate="">2014年3月15日 at 上午5:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>头文件的颜色是有意设成这种灰暗色的吗？感觉看不清</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37475">
<article class="comment" id="comment-37475">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">0xc0de</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-37475" rel="nofollow"><time datetime="2014-02-15T21:56:03+00:00" pubdate="">2014年2月15日 at 下午9:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，赞一个！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53008">
<article class="comment" id="comment-53008">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jinxiang23</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53008" rel="nofollow"><time datetime="2014-01-27T04:15:38+00:00" pubdate="">2014年1月27日 at 上午4:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53011">
<article class="comment" id="comment-53011">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yueyanglou</a></span> on <a href="http://www.acmerblog.com/POJ-1988-Cube-Stacking-blog-576.html#comment-53011" rel="nofollow"><time datetime="2013-12-09T08:43:30+00:00" pubdate="">2013年12月9日 at 上午8:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个系列很不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>