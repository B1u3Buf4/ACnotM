<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>08-11</div>
<div class="tit"><h1 class="entry-title">找出二叉树中某个节点的所有祖先节点</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/data-struct/trees" rel="category tag" title="查看树形结构中的全部文章">树形结构</a></span><span class="i4">围观1696次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6048" href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comments" title="《找出二叉树中某个节点的所有祖先节点》上的评论">22 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p><strong>问题</strong></p>
<p>对于一颗普通的二叉树和一个节点key，找出该节点的所有祖先节点。</p>
<p>例如树结构如下：给定的key为节点7，则应该打印 4,2,1.</p>
<pre class="brush:other">              1
            /   \
          2      3
        /  \
      4     5
     /
    7</pre>
<p>使用递归可以很容易的解决：</p>
<pre class="brush:cpp">#include&lt;iostream&gt;
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;

using namespace std;
struct node
{
   int data;
   struct node* left;
   struct node* right;
};

bool printAncestors(struct node *root, int target)
{
  if (root == NULL)
     return false;

  if (root-&gt;data == target)
     return true;
  //子树可以找到，当前节点肯定为祖先节点
  if ( printAncestors(root-&gt;left, target) ||
       printAncestors(root-&gt;right, target) )
  {
    cout &lt;&lt; root-&gt;data &lt;&lt; " ";
    return true;
  }

  /* Else return false */
  return false;
}

/* 创建节点. */
struct node* newnode(int data)
{
  struct node* node = (struct node*)
                       malloc(sizeof(struct node));
  node-&gt;data = data;
  node-&gt;left = NULL;
  node-&gt;right = NULL;

  return(node);
}
 int main()
{

  /* 创建下面的结构
              1
            /   \
          2      3
        /  \
      4     5
     /
    7
  */
  struct node *root = newnode(1);
  root-&gt;left        = newnode(2);
  root-&gt;right       = newnode(3);
  root-&gt;left-&gt;left  = newnode(4);
  root-&gt;left-&gt;right = newnode(5);
  root-&gt;left-&gt;left-&gt;left  = newnode(7);

  printAncestors(root, 7);

  return 0;
}</pre>
<p>时间复杂度为O(n)</p>
<p>参考：http://www.geeksforgeeks.org/print-ancestors-of-a-given-node-in-binary-tree/</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-75166">
<article class="comment" id="comment-75166">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75166" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-75165">
<article class="comment" id="comment-75165">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75165" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-75164">
<article class="comment" id="comment-75164">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75164" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-75163">
<article class="comment" id="comment-75163">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75163" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-75162">
<article class="comment" id="comment-75162">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75162" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-75161">
<article class="comment" id="comment-75161">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75161" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-75160">
<article class="comment" id="comment-75160">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75160" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-75159">
<article class="comment" id="comment-75159">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518690" rel="external nofollow">新用户665562</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-75159" rel="nofollow"><time datetime="2017-04-12T05:46:04+00:00" pubdate="">2017年4月12日 at 上午5:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>杨先生莫生气，建立民主制度的初衷就是对人性的不信任，才用民主监督.制约.威慑，如果人性可靠，就用不着监督.制约.威慑了，把一切权力全部交给统治者就可以了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49511">
<article class="comment" id="comment-49511">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yupeng.bai</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-49511" rel="nofollow"><time datetime="2015-06-15T04:13:44+00:00" pubdate="">2015年6月15日 at 上午4:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;stdio.h&gt;<br/>
int main()<br/>
{<br/>
    int n,p,t[100]={1};<br/>
    for(int i=1;i&lt;100;i++)<br/>
        t <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =i;<br/>
    while(scanf("%d",&amp;n)&amp;&amp;n!=0){<br/>
        if(n==1)<br/>
        printf("Printing order for 1 pages:nSheet 1, front: Blank, 1n");<br/>
        else {<br/>
        if(n%4) p=n/4+1;<br/>
        else p=n/4;<br/>
        int q=4*p;<br/>
        printf("Printing order for %d pages:n",n);<br/>
        for(int i=0;i&lt;p;i++){<br/>
            printf("Sheet %d, front: ",i+1);<br/>
            if(q&gt;n) {printf("Blank, %dn",t[2*i+1]);}<br/>
            else {printf("%d, %dn",q,t[2*i+1]);}<br/>
            q–;//打印表前<br/>
            printf("Sheet %d, back : ",i+1);<br/>
            if(q&gt;n) {printf("%d, Blankn",t[2*i+2]);}<br/>
            else {printf("%d, %dn",t[2*i+2],q);}<br/>
            q–;//打印表后<br/>
           }<br/>
        }<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49510">
<article class="comment" id="comment-49510">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">edward2414</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-49510" rel="nofollow"><time datetime="2015-06-08T12:08:52+00:00" pubdate="">2015年6月8日 at 下午12:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49513">
<article class="comment" id="comment-49513">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-49513" rel="nofollow"><time datetime="2015-03-24T06:33:01+00:00" pubdate="">2015年3月24日 at 上午6:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，赞一个！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58866">
<article class="comment" id="comment-58866">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">weijieut</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-58866" rel="nofollow"><time datetime="2015-03-21T12:45:05+00:00" pubdate="">2015年3月21日 at 下午12:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>都是一些基础题啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63629">
<article class="comment" id="comment-63629">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">anthozoan77</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-63629" rel="nofollow"><time datetime="2015-03-17T01:08:24+00:00" pubdate="">2015年3月17日 at 上午1:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>补充：此算法求出的不一定是最优解，之前理解错了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63627">
<article class="comment" id="comment-63627">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">modstart</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-63627" rel="nofollow"><time datetime="2015-03-02T03:21:56+00:00" pubdate="">2015年3月2日 at 上午3:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我没看懂题目<br/>
2<br/>
5 6 -1 5 4 -7<br/>
7 0 6 -1 1 -6 7 -5<br/>
我觉得第一个应该是5 6 -1 5 4 输出是19 5 4<br/>
第二个是7 0 6 -1 1 -6 7输出是14 7 7<br/>
不知道题目例子是怎么得出来的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49512">
<article class="comment" id="comment-49512">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Emlar</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-49512" rel="nofollow"><time datetime="2015-02-17T19:02:12+00:00" pubdate="">2015年2月17日 at 下午7:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>您没有考虑 树的根节点是负数的情况， 若树的根节点是个很大的负数，那么就要考虑过不过另外一边子树了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58864">
<article class="comment" id="comment-58864">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">09291010</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-58864" rel="nofollow"><time datetime="2014-12-15T02:36:32+00:00" pubdate="">2014年12月15日 at 上午2:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>厉害啊，我遇见数学问题就头疼！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30650">
<article class="comment" id="comment-30650">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-30650" rel="nofollow"><time datetime="2014-11-22T17:32:03+00:00" pubdate="">2014年11月22日 at 下午5:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第15行代码，/n/n，应该改为nn</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58865">
<article class="comment" id="comment-58865">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mr_zhang2011</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-58865" rel="nofollow"><time datetime="2014-11-13T14:43:06+00:00" pubdate="">2014年11月13日 at 下午2:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>目前为止见过的最易懂的一个，多谢分享</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63628">
<article class="comment" id="comment-63628">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cyyuen</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-63628" rel="nofollow"><time datetime="2014-09-28T06:22:21+00:00" pubdate="">2014年9月28日 at 上午6:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>,,,,,,,,,,,,,,,</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49514">
<article class="comment" id="comment-49514">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Trenson</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-49514" rel="nofollow"><time datetime="2014-09-23T00:29:05+00:00" pubdate="">2014年9月23日 at 上午12:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已修改。一些字符在编辑的时候转义了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30649">
<article class="comment" id="comment-30649">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-30649" rel="nofollow"><time datetime="2014-09-14T19:22:48+00:00" pubdate="">2014年9月14日 at 下午7:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>清华也会出这么无聊的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58867">
<article class="comment" id="comment-58867">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Cloudy</a></span> on <a href="http://www.acmerblog.com/ancestors-of-a-given-node-6048.html#comment-58867" rel="nofollow"><time datetime="2014-09-05T18:16:25+00:00" pubdate="">2014年9月5日 at 下午6:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>目前为止见过的最易懂的一个，多谢分享</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>