<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-13</div>
<div class="tit"><h1 class="entry-title">POJ 3653 Here We Go(relians) Again [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a>, <a href="http://www.acmerblog.com/category/graph/shortest-path" rel="category tag" title="查看最短路径中的全部文章">最短路径</a></span><span class="i4">围观646次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1117" href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comments" title="《POJ 3653 Here We Go(relians) Again [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Here We Go(relians) Again</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
<div>
<p>The Gorelians are a warlike race that travel the universe conquering new worlds as a form of recreation. Given their violent, fun-loving nature, keeping their leaders alive is of serious concern. Part of the Gorelian security plan involves changing the traffic patterns of their cities on a daily basis, and routing all Gorelian Government Officials to the Government Building by the fastest possible route.</p>
<p>Fortunately for the Gorelian Minister of Traffic (that would be you), all Gorelian cities are laid out as a rectangular grid of blocks, where each block is a square measuring 2520 rels per side (a rel is the Gorelian Official Unit of Distance). The speed limit between two adjacent intersections is always constant, and may range from 1 to 9 rels per blip (a blip, of course, being the Gorelian Official Unit of Time). Since Gorelians have outlawed decimal numbers as unholy (hey, if you’re the dominant force in the known universe, you can outlaw whatever you want), speed limits are always integer values. This explains why Gorelian blocks are precisely 2520 rels in length: 2520 is the least common multiple of the integers 1 through 9. Thus, the time required to travel between two adjacent intersections is always an integer number of blips.</p>
<p>In all Gorelian cities, Government Housing is always at the northwest corner of the city, while the Government Building is always at the southeast corner. Streets between intersections might be one-way or two-way, or possibly even closed for repair (all this tinkering with traffic patterns causes a lot of accidents). Your job, given the details of speed limits, street directions, and street closures for a Gorelian city, is to determine the fastest route from Government Housing to the Government Building. (It is possible, due to street directions and closures, that no route exists, in which case a Gorelian Official Temporary Holiday is declared, and the Gorelian Officials take the day off.)</p>
<div align="center"><img alt="Gorelian city" src="http://cdn.acmerblog.com/img/poj/3653-11.png"/> </div>
<p>The picture above shows a Gorelian City marked with speed limits, one way streets, and one closed street. It is assumed that streets are always traveled at the exact posted speed limit, and that turning a corner takes zero time. Under these conditions, you should be able to determine that the fastest route from Government Housing to the Government Building in this city is 1715 blips. And if the next day, the only change is that the closed road is opened to two way traffic at 9 rels per blip, the fastest route becomes 1295 blips. On the other hand, suppose the three one-way streets are switched from southbound to northbound (with the closed road remaining closed). In that case, no route would be possible and the day would be declared a holiday.</p>
</div></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
<p>The input consists of a set of cities for which you must find a fastest route if one exists. The first line of an input case contains two integers, which are the vertical and horizontal number of city blocks, respectively. The smallest city is a single block, or 1 by 1, and the largest city is 20 by 20 blocks. The remainder of the input specifies speed limits and traffic directions for streets between intersections, one row of street segments at a time. The first line of the input (after the dimensions line) contains the data for the northernmost east-west street segments. The next line contains the data for the northernmost row of north-south street segments. Then the next row of east-west streets, then north-south streets, and so on, until the southernmost row of east-west streets. Speed limits and directions of travel are specified in order from west to east, and each consists of an integer from 0 to 9 indicating speed limit, and a symbol indicating which direction traffic may flow. A zero speed limit means the road is closed. All digits and symbols are delimited by a single space. For east-west streets, the symbol will be an asterisk ‘*’ which indicates travel is allowed in both directions, a less-than symbol ‘&lt;’ which indicates travel is allowed only in an east-to-west direction, or a greater-than symbol ‘&gt;’ which indicates travel is allowed only in a west-to-east direction. For north-south streets, an asterisk again indicates travel is allowed in either direction, a lowercase “vee” character ‘v’ indicates travel is allowed only in a north-to-south directions, and a caret symbol ‘^’ indicates travel is allowed only in a south-to-north direction. A zero speed, indicating a closed road, is always followed by an asterisk. Input cities continue in this manner until a value of zero is specified for both the vertical and horizontal dimensions.</p>
</div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
<p>For each input scenario, output a line specifying the integer number of blips of the shortest route, a space, and then the word “blips”. For scenarios which have no route, output a line with the word “Holiday”.</p>
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2 2
9 * 9 *
6 v 0 * 8 v
3 * 7 *
3 * 6 v 3 *
4 * 8 *
2 2
9 * 9 *
6 v 9 * 8 v
3 * 7 *
3 * 6 v 3 *
4 * 8 *
2 2
9 * 9 *
6 ^ 0 * 8 ^
3 * 7 *
3 * 6 ^ 3 *
4 * 8 *
0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1715 blips
1295 blips
Holiday</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=3653">提交代码</a>   <a href="http://poj.org/bbs?problem_id=3653">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=3653">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: SmilingWang
import java.util.*;
import java.io.*;

public class Main {
 static final int INF = 100000000;
 public static void main(String[] args){
   Scanner in = new Scanner(new BufferedInputStream(System.in));
   int x = in.nextInt();
   int y = in.nextInt();
   while(x != 0 || y != 0){
	int w[][] = new int[(x+1)*(y+1)+1][(x+1)*(y+1)+1];
	//int num = 1;
	int row = 1;
	for(int i = 1; i &lt;= 2*x+1; i++){
        if(i % 2 == 1){
	   //num = (row-1)*(y+1) + 1;
	   for(int j = 1; j &lt;= y; j++){
		int tm = in.nextInt();
		String tms = in.next();
						
		if(tms.equals("*")){
		  w[(row-1)*(y+1)+j][(row-1)*(y+1)+j+1] = tm;
		  w[(row-1)*(y+1)+j + 1][(row-1)*(y+1)+j] = tm;
		}
		else if(tms.equals("&lt; ")){
		  w[(row-1)*(y+1)+j + 1][(row-1)*(y+1)+j] = tm;
		}
		else if(tms.equals("&gt;")){
		  w[(row-1)*(y+1)+j][(row-1)*(y+1)+j+1] = tm;
		}
	    }
	    row++;
	  }
	 else{
	   for(int j = 1; j &lt;= y + 1; j++){
	    int tm = in.nextInt();
	    String tms = in.next();
			
          if(tms.equals("*")){
		w[(row-2)*(y+1) + j][(row-1)*(y+1) + j] = tm;
		w[(row-1)*(y+1) + j][(row-2)*(y+1) + j] = tm;
	   }
	  else if(tms.equals("^")){
		w[(row-1)*(y+1) + j][(row-2)*(y+1) + j] = tm;
	  }
	  else if(tms.equals("v")){
		w[(row-2)*(y+1) + j][(row-1)*(y+1) + j] = tm;
	  }
	}
    }
   }
  for(int p = 1; p &lt;= (x+1)*(y+1); p++){
   for(int q = 1; q &lt;= (x+1)*(y+1); q++){
	if(p == q){
         continue;
	}
	if(w[p][q] &gt; 0){
	  w[p][q] = 2520/w[p][q];
	  continue;
	}
	w[p][q] = INF;
     }
   }
			
   dijkstra(w, (x+1)*(y+1));			
   x = in.nextInt();
   y = in.nextInt();
 }
}

public static void dijkstra(int w[][], int v){
  int i, vnear = 0;
  int touch[] = new int[v+1];
  int length[] = new int[v+1];
  boolean y[] = new boolean[v+1];
  int map[] = new int[v+1];
  PriorityQueue&lt; Item&gt; heap = new PriorityQueue&lt; Item&gt;(v, new ItemCompare());
		
  for(i = 2; i &lt;= v; i++){
   length[i] = w[1][i];
   if(length[i] &lt; INF){
	heap.add(new Item(1, i, w[1][i]));
   }
  }
  //System.out.println(heap);
  while(!heap.isEmpty()){
	Item temp = heap.remove();
			
	for(i = 1; i &lt;= v; i++){
        if(i == temp.sv){
		continue;
	  }
	  else if(w[temp.ev][i] == INF){
		continue;
	  }
	  if(length[temp.ev] + w[temp.ev][i] &lt; length[i]){
	   length[i] = length[temp.ev] + w[temp.ev][i];
	   heap.add(new Item(temp.ev, i, length[i]));
	  }
	 }
	}
	if(length[v] &lt; INF){
	  System.out.println(length[v] + " blips");
	}
	else{
	  System.out.println("Holiday");
	}
    }
	
}

class Item{
 int sv;
 int ev;
 int w;
	
 Item(int sv, int ev, int w){
    this.sv = sv;
    this.ev = ev;
    this.w  = w;
   }
	
  public String toString(){
	return this.sv + " " + this.ev +" " + this.w;
  }
}

class ItemCompare implements Comparator&lt; Item&gt;{
	public int compare(Item i1, Item i2){
		return (i1.w - i2.w);
	}
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-9941">
<article class="comment" id="comment-9941">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bob</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9941" rel="nofollow"><time datetime="2015-06-07T00:31:35+00:00" pubdate="">2015年6月7日 at 上午12:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个程序编译都通不过， int L[m+1][n+1];这样定义出错，应该换成具体的数字ac</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39292">
<article class="comment" id="comment-39292">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xy7850151</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-39292" rel="nofollow"><time datetime="2015-05-21T19:28:36+00:00" pubdate="">2015年5月21日 at 下午7:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>站长，你好！<br/>
         你创办的的网站非常好，为我们学习算法练习编程提供了一个很好的平台，我想给你提个小建议，就是要能把每道题目的难度标出来就好了，这样我们学习起来会有一个循序渐进的过程！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-9937">
<article class="comment" id="comment-9937">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sharp</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9937" rel="nofollow"><time datetime="2015-03-10T12:57:59+00:00" pubdate="">2015年3月10日 at 下午12:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>helpful！！ mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9943">
<article class="comment" id="comment-9943">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aifan</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9943" rel="nofollow"><time datetime="2015-02-13T10:43:19+00:00" pubdate="">2015年2月13日 at 上午10:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-9935">
<article class="comment" id="comment-9935">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">a997930294</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9935" rel="nofollow"><time datetime="2015-01-22T05:04:49+00:00" pubdate="">2015年1月22日 at 上午5:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>在第 18行的，while(scanf("%d %dn", &amp;n, &amp;c), n)，这句有错吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9938">
<article class="comment" id="comment-9938">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123zxc</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9938" rel="nofollow"><time datetime="2015-01-11T19:25:26+00:00" pubdate="">2015年1月11日 at 下午7:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>请不要灌水，多谢！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61120">
<article class="comment" id="comment-61120">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lin</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-61120" rel="nofollow"><time datetime="2014-12-07T09:47:07+00:00" pubdate="">2014年12月7日 at 上午9:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为要修改链表头(指针)，所以要用指针的指针</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9942">
<article class="comment" id="comment-9942">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zclzcllove</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9942" rel="nofollow"><time datetime="2014-11-09T18:07:43+00:00" pubdate="">2014年11月9日 at 下午6:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>mark, 备用</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-9940">
<article class="comment" id="comment-9940">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">changjf</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9940" rel="nofollow"><time datetime="2014-08-15T13:04:00+00:00" pubdate="">2014年8月15日 at 下午1:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你的理解应该是：即使主持人拿走一个箱子对结果没有影响。这样想，主持人拿走的箱子只是没有影响到你初始选择的那个箱子中有奖品的概率，但是改变了其余两个箱子的概率分布。由 1/3,1/3 变成了 0, 2/3</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9936">
<article class="comment" id="comment-9936">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xy7850151</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9936" rel="nofollow"><time datetime="2014-02-14T11:15:36+00:00" pubdate="">2014年2月14日 at 上午11:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第36行，struct node **head_ref，怎么理解，那个函数感觉不是很懂啊！？？弱渣求助</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39290">
<article class="comment" id="comment-39290">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jamoeba</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-39290" rel="nofollow"><time datetime="2014-02-01T05:14:02+00:00" pubdate="">2014年2月1日 at 上午5:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这配图…..</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61121">
<article class="comment" id="comment-61121">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hao555sky</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-61121" rel="nofollow"><time datetime="2014-01-25T18:38:56+00:00" pubdate="">2014年1月25日 at 下午6:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个..  真没看出来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39291">
<article class="comment" id="comment-39291">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">130920099</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-39291" rel="nofollow"><time datetime="2014-01-10T13:37:10+00:00" pubdate="">2014年1月10日 at 下午1:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很棒的网站，加油！⛽️</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9939">
<article class="comment" id="comment-9939">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Snarl_jsb</a></span> on <a href="http://www.acmerblog.com/POJ-3653-Here-We-Go%28relians%29-Again-blog-1117.html#comment-9939" rel="nofollow"><time datetime="2013-12-24T21:10:05+00:00" pubdate="">2013年12月24日 at 下午9:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我还有个问题想请教一下，就是感觉对于新手来说，递归理解起来有些困难，不知有没有什么好的方法或者什么好的建议？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>