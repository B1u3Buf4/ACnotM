<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-12</div>
<div class="tit"><h1 class="entry-title">POJ 3264 Balanced Lineup [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观619次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1009" href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comments" title="《POJ 3264 Balanced Lineup [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Balanced Lineup</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
<p>For the daily milking, Farmer John’s <i>N</i> cows (1 ≤ <i>N</i> ≤ 50,000) always line up in the same order. One day Farmer John decides to organize a game of Ultimate Frisbee with some of the cows. To keep things simple, he will take a contiguous range of cows from the milking lineup to play the game. However, for all the cows to have fun they should not differ too much in height.</p>
<p>Farmer John has made a list of <i>Q</i> (1 ≤ <i>Q</i> ≤ 200,000) potential groups of cows and their heights (1 ≤ <i>height</i> ≤ 1,000,000). For each group, he wants your help to determine the difference in height between the shortest and the tallest cow in the group.</p>
</div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
Line 1: Two space-separated integers, <i>N</i> and <i>Q</i>.<br/>
<br/>Lines 2..<i>N</i>+1: Line <i>i</i>+1 contains a single integer that is the height of cow <i>i</i><br/>
<br/>Lines <i>N</i>+2..<i>N</i>+<i>Q</i>+1: Two integers <i>A</i> and <i>B</i> (1 ≤ <i>A</i> ≤ <i>B</i> ≤ <i>N</i>), representing the range of cows from <i>A</i> to <i>B</i> inclusive. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
Lines 1..<i>Q</i>: Each line contains a single integer that is a response to a reply and indicates the difference in height between the tallest and shortest cow in the range.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
6 3
1
7
3
4
2
5
1 5
4 6
2 2</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
6
3
0</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=3264">提交代码</a>   <a href="http://poj.org/bbs?problem_id=3264">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=3264">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: 82638882@163.com
import java.io.*;
public class Main
{
 static int[][] q=new int[160001][17];
 static int[][] p=new int[160001][17];
 public static void main(String[] args) throws NumberFormatException, IOException
 {
	InputStreamReader is=new InputStreamReader(System.in);
	BufferedReader in=new BufferedReader(is);
	String[] ss=in.readLine().split(" ");
	int n=Integer.parseInt(ss[0]);
	int k=Integer.parseInt(ss[1]);
	int v=(int)(Math.log(n)/Math.log(2));
	for(int i=1;i&lt;=n;i++)
		q[i][0]=p[i][0]=Integer.parseInt(in.readLine());
	for(int j=1;j&lt;=v;j++)
	{
		for(int i=1;i&lt;=n;i++)
		{
		 int u= (int)Math.pow(2, j-1)+i;
		 q[i][j]=Math.max(q[i][j-1],q[u][j-1]);
		 p[i][j]=Math.min(p[i][j-1],p[u][j-1]);
		}
	}
      while((k--)!=0)
      {
	ss=in.readLine().split(" ");
	int x1=Integer.parseInt(ss[0]);
	int x2=Integer.parseInt(ss[1]);
	int t=x2-x1;
	if(t!=0) t=(int)(Math.log(t)/Math.log(2));
	int o=(int)Math.pow(2, t);
	int max=Math.max(q[x1][t], q[x2-o+1][t]);
	int min=Math.min(p[x1][t], p[x2-o+1][t]);
	System.out.println(max-min);
     }
  }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-9348">
<article class="comment" id="comment-9348">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tangxiansheng</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-9348" rel="nofollow"><time datetime="2015-06-24T16:05:24+00:00" pubdate="">2015年6月24日 at 下午4:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好厉害～</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39001">
<article class="comment" id="comment-39001">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ozhfo</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-39001" rel="nofollow"><time datetime="2015-06-22T06:32:39+00:00" pubdate="">2015年6月22日 at 上午6:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>写的好·····  Pollard Rho快速因数分解</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-9345">
<article class="comment" id="comment-9345">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xuelanghu</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-9345" rel="nofollow"><time datetime="2015-06-19T01:46:34+00:00" pubdate="">2015年6月19日 at 上午1:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了。找到这题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9347">
<article class="comment" id="comment-9347">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tzf888888</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-9347" rel="nofollow"><time datetime="2015-05-08T11:54:45+00:00" pubdate="">2015年5月8日 at 上午11:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给你一组数据吧：29 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 1000。此时的数据量还是很小的，耗时却不短。这种方法确实可以，当然或许还有其他的优化方案，但是优化只能针对某些数据，不太可能在所有情况下都能在可接受的时间内求解出答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53729">
<article class="comment" id="comment-53729">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">helloacm</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-53729" rel="nofollow"><time datetime="2015-03-02T05:27:40+00:00" pubdate="">2015年3月2日 at 上午5:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个方法是错的，不信你试试：<br/>
20 5<br/>
1 A:9<br/>
1 A:9<br/>
1 A:9<br/>
1 A:6<br/>
1 A:4<br/>
正确答案应该是19，这个答案是18</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9346">
<article class="comment" id="comment-9346">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">NextLife</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-9346" rel="nofollow"><time datetime="2015-02-03T08:58:39+00:00" pubdate="">2015年2月3日 at 上午8:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>题本身没错，但是HDOJ放题目的时候，前面有个题目解释了什么是XXX定律。<br/>
这里直接放了这个题目，肯定没几个人明白是干啥</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39000">
<article class="comment" id="comment-39000">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jue</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-39000" rel="nofollow"><time datetime="2015-01-28T05:10:37+00:00" pubdate="">2015年1月28日 at 上午5:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>总结的很全面，学习了！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53731">
<article class="comment" id="comment-53731">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magicSky</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-53731" rel="nofollow"><time datetime="2014-11-27T14:17:47+00:00" pubdate="">2014年11月27日 at 下午2:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53730">
<article class="comment" id="comment-53730">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ForgetVay</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-53730" rel="nofollow"><time datetime="2014-09-13T21:56:14+00:00" pubdate="">2014年9月13日 at 下午9:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我想整理一下leetcode的题解，站长能不能给权限</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9344">
<article class="comment" id="comment-9344">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hong0220</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-9344" rel="nofollow"><time datetime="2014-08-09T07:21:19+00:00" pubdate="">2014年8月9日 at 上午7:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>We do not harbor that I couldn’t remove other individuals’ problems whenever this arrived at.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53732">
<article class="comment" id="comment-53732">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jintianya</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-53732" rel="nofollow"><time datetime="2014-08-08T06:28:07+00:00" pubdate="">2014年8月8日 at 上午6:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>说的就是无向图啊，有向图的算法也是类似的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53733">
<article class="comment" id="comment-53733">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wawa_zmt</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-53733" rel="nofollow"><time datetime="2014-06-15T16:19:23+00:00" pubdate="">2014年6月15日 at 下午4:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发的在线笔试题吗?发现很多C啊，阿里不是JAVA多么？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-38999">
<article class="comment" id="comment-38999">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">dreams</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-38999" rel="nofollow"><time datetime="2014-03-01T00:24:09+00:00" pubdate="">2014年3月1日 at 上午12:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好吧~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39002">
<article class="comment" id="comment-39002">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">WalkCoder</a></span> on <a href="http://www.acmerblog.com/POJ-3264-Balanced-Lineup-blog-1009.html#comment-39002" rel="nofollow"><time datetime="2014-01-06T06:02:08+00:00" pubdate="">2014年1月6日 at 上午6:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二块代码if(it != mp.end())应改为if(it != mp.end() &amp;&amp; (i+1)!=(it-&gt;second +1))；因为第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>