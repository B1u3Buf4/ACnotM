<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-13</div>
<div class="tit"><h1 class="entry-title">回溯法解n皇后问题</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/search/backtracking" rel="category tag" title="查看回溯和剪枝中的全部文章">回溯和剪枝</a>, <a href="http://www.acmerblog.com/category/zhuanti/classic" rel="category tag" title="查看经典问题中的全部文章">经典问题</a></span><span class="i4">围观2383次</span><span class="i3"><a class="ds-thread-count" data-thread-key="2442" href="http://www.acmerblog.com/queen-n-2442.html#comments" title="《回溯法解n皇后问题》上的评论">17 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p>这里说的回溯法其实就是递归的应用。遍历所有情况，每个都判断是否是解，然后输出符合情况的。<br/>
时间复杂度依然很高。</p>
<p>下面的程序读入一个n，然后输出n皇后的所有解。</p>
<p>详细注释见代码：</p>
<pre class="brush:cpp">#include &lt;iostream&gt;
using namespace std;

int x[20]; //解向量
int sum; //可行方案个数
int n;

//在第t列是否可放置
bool place(int t){
	int i;
	for(i=1; i&lt;t; i++)
		//如果 行-行 == 列-列 或者 在同一列。
		if(abs(t-i) == abs(x[t]-x[i]) || x[i]==x[t])
			return false;
	return true;
}

//回溯，即递归调用
void backtrack(int t){
	//cout &lt;&lt; t &lt;&lt; endl;
	int i;
	//到达最后一行，即找到所有解
	if(t &gt; n){
		sum++;
		for(i=1; i&lt;=n; i++)
			printf(" %d",x[i]);
		printf("\n");
	}else{
		//从第一行第一列开始，循环到 第一行 第n列
		for(i=1; i&lt;=n; i++){
			x[t] = i; //对于第t行，第i列，放置皇后.

			//判断刚才放置的位置（x[t] = i）是否可行，如果可行，就放置下一行。
			//不可行的话，继续在第t行放置
			if(place(t))  backtrack(t+1);
		}
	}
}
int main(){
	while(cin &gt;&gt; n){
		backtrack(1); //从第1行开始
		cout &lt;&lt; "方案数：" &lt;&lt;sum &lt;&lt; endl; //可行解个数
	}
	
	return 0;
}</pre>
<p> </p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-90869">
<article class="comment" id="comment-90869">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521189" rel="external nofollow">新用户988831</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-90869" rel="nofollow"><time datetime="2017-04-13T12:27:17+00:00" pubdate="">2017年4月13日 at 下午12:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>10:54 08.01.17 Receive 159589399 U9303305Maxi Pro Received Payment 1.35 USD from account U9303305. Memo: API Payment. Payment I</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-90868">
<article class="comment" id="comment-90868">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521189" rel="external nofollow">新用户988831</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-90868" rel="nofollow"><time datetime="2017-04-13T12:27:17+00:00" pubdate="">2017年4月13日 at 下午12:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>10:54 08.01.17 Receive 159589399 U9303305Maxi Pro Received Payment 1.35 USD from account U9303305. Memo: API Payment. Payment I</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-90867">
<article class="comment" id="comment-90867">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521189" rel="external nofollow">新用户988831</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-90867" rel="nofollow"><time datetime="2017-04-13T12:27:17+00:00" pubdate="">2017年4月13日 at 下午12:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>10:54 08.01.17 Receive 159589399 U9303305Maxi Pro Received Payment 1.35 USD from account U9303305. Memo: API Payment. Payment I</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16023">
<article class="comment" id="comment-16023">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">super157</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16023" rel="nofollow"><time datetime="2015-02-27T18:15:29+00:00" pubdate="">2015年2月27日 at 下午6:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>“再把所有不和该节点相邻的节点着相同的颜色”，程序中没有进行不和该节点相邻的其他节点是否相邻进行判断。再说求出来的也不一样是颜色数最少的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16018">
<article class="comment" id="comment-16018">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mr-zhang2011</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16018" rel="nofollow"><time datetime="2015-02-11T06:18:26+00:00" pubdate="">2015年2月11日 at 上午6:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我得邮箱cwqbupt@qq.com</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16019">
<article class="comment" id="comment-16019">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">howhaw</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16019" rel="nofollow"><time datetime="2015-02-06T16:52:39+00:00" pubdate="">2015年2月6日 at 下午4:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>终于找到一篇能看懂的，mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16028">
<article class="comment" id="comment-16028">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AC_Grazy</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16028" rel="nofollow"><time datetime="2014-10-28T13:46:27+00:00" pubdate="">2014年10月28日 at 下午1:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>遍历了所有的情况(2^n)，tmp数组就是由当前遍历的状态s推算出的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16031">
<article class="comment" id="comment-16031">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">calvert1991</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16031" rel="nofollow"><time datetime="2014-10-21T08:53:10+00:00" pubdate="">2014年10月21日 at 上午8:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个..  真没看出来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16027">
<article class="comment" id="comment-16027">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sheyty</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16027" rel="nofollow"><time datetime="2014-10-15T15:12:40+00:00" pubdate="">2014年10月15日 at 下午3:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p><strong>Gucci New Fall Arrivals</strong></p>
<p>This is really nice to know. I hope it will be successful in the future. Good job on this and keep up the good work.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16030">
<article class="comment" id="comment-16030">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lint</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16030" rel="nofollow"><time datetime="2014-09-20T07:07:01+00:00" pubdate="">2014年9月20日 at 上午7:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>前排支持</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16029">
<article class="comment" id="comment-16029">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Xun_Brooklyn</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16029" rel="nofollow"><time datetime="2014-09-15T04:22:04+00:00" pubdate="">2014年9月15日 at 上午4:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>C语言版本的代码好像有点问题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16022">
<article class="comment" id="comment-16022">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">crazymage</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16022" rel="nofollow"><time datetime="2014-09-01T00:22:35+00:00" pubdate="">2014年9月1日 at 上午12:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>for(int i=1; i&lt;=m; i++){<br/>
            for(int j=1; j&lt;=n; j++){<br/>
                    dp <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/>  = dp <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> [j-1] + 1;<br/>
                if(s1.charAt(i-1) == s3.charAt(i+j-1))<br/>
                    dp <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/>  = dp[i-1] <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/>  + 1;<br/>
                if(s2.charAt(j-1) == s3.charAt(i+j-1))<br/>
                    dp <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/>  = Math.max(dp <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> [j - 1] + 1, dp <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> );<br/>
            }<br/>
        }<br/>
这里的代码似乎有点问题？ dp(i)(j) = dp(i)(j-1) + 1;这个例子System.out.println(ils.isInterleave("aa","dbbca", "aadbbcb"));返回的应该是false</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16021">
<article class="comment" id="comment-16021">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sharp</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16021" rel="nofollow"><time datetime="2014-08-14T21:17:57+00:00" pubdate="">2014年8月14日 at 下午9:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>此题答案确实应该是A。文中已修改，感谢一楼的提醒！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16020">
<article class="comment" id="comment-16020">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">verycourage</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16020" rel="nofollow"><time datetime="2014-03-02T19:40:59+00:00" pubdate="">2014年3月2日 at 下午7:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>int L[m+1][n+1];这样定义出错，这个在gcc上可以编译通过 在VS上不行 应该改为new 或者vector</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16026">
<article class="comment" id="comment-16026">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sum_tsai</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16026" rel="nofollow"><time datetime="2014-01-24T10:58:06+00:00" pubdate="">2014年1月24日 at 上午10:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Excellent Web-site! I required to ask if I might webpages and use a component of the net web website and use a number of factors for just about any faculty process. Please notify me through email regardless of whether that would be excellent. Many thanks</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16025">
<article class="comment" id="comment-16025">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bcys</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16025" rel="nofollow"><time datetime="2013-12-26T05:51:43+00:00" pubdate="">2013年12月26日 at 上午5:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>如何解决overload的问题呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16024">
<article class="comment" id="comment-16024">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">congve1</a></span> on <a href="http://www.acmerblog.com/queen-n-2442.html#comment-16024" rel="nofollow"><time datetime="2013-12-21T12:46:42+00:00" pubdate="">2013年12月21日 at 下午12:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个才是我想要的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>