<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-18</div>
<div class="tit"><h1 class="entry-title">面试题精选1(02)设计包含min函数的栈-Google</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/offer" rel="category tag" title="查看剑指offer中的全部文章">剑指offer</a>, <a href="http://www.acmerblog.com/category/data-struct/linear" rel="category tag" title="查看线性结构中的全部文章">线性结构</a></span><span class="i4">围观1684次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1179" href="http://www.acmerblog.com/offer-google-1179.html#comments" title="《面试题精选1(02)设计包含min函数的栈-Google》上的评论">6 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p>
<span style="line-height: 28px; color: rgb(0, 0, 0); font-size: 16px; font-family: SimSun;">题目：定义栈的数据结构，要求添加一个</span><span style="color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; line-height: 28px;">min</span><span style="line-height: 28px; color: rgb(0, 0, 0); font-size: 16px; font-family: SimSun;">函数，能够得到栈的最小元素。要求函数</span><span style="color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; line-height: 28px;">min</span><span style="line-height: 28px; color: rgb(0, 0, 0); font-size: 16px; font-family: SimSun;">、</span><span style="color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; line-height: 28px;">push</span><span style="line-height: 28px; color: rgb(0, 0, 0); font-size: 16px; font-family: SimSun;">以及</span><span style="color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; line-height: 28px;">pop</span><span style="line-height: 28px; color: rgb(0, 0, 0); font-size: 16px; font-family: SimSun;">的时间复杂度都是</span><span style="color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; line-height: 28px;">O(1)</span><span style="line-height: 28px; color: rgb(0, 0, 0); font-size: 16px; font-family: SimSun;">。</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">分析：这是去年</span>google<span style="font-family: SimSun;">的一道面试题。</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">我看到这道题目时，第一反应就是每次</span>push<span style="font-family: SimSun;">一个新元素时，将栈里所有逆序元素排序。这样栈顶元素将是最小元素。但由于不能保证最后</span>push<span style="font-family: SimSun;">进栈的元素最先出栈，这种思路设计的数据结构已经不是一个栈了。</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">在栈里添加一个成员变量存放最小元素（或最小元素的位置）。每次</span>push<span style="font-family: SimSun;">一个新元素进栈的时候，如果该元素比当前的最小元素还要小，则更新最小元素。</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">乍一看这样思路挺好的。但仔细一想，该思路存在一个重要的问题：如果当前最小元素被</span>pop<span style="font-family: SimSun;">出去，如何才能得到下一个最小元素？</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">因此仅仅只添加一个成员变量存放最小元素（或最小元素的位置）是不够的。我们需要一个辅助栈。每次</span>push<span style="font-family: SimSun;">一个新元素的时候，同时将最小元素（或最小元素的位置。考虑到栈元素的类型可能是复杂的数据结构，用最小元素的位置将能减少空间消耗）</span>push<span style="font-family: SimSun;">到辅助栈中；每次</span>pop<span style="font-family: SimSun;">一个元素出栈的时候，同时</span>pop<span style="font-family: SimSun;">辅助栈。</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">参考代码：</span>
</p>
<pre class="brush:cpp">
#include &lt;deque&gt;
#include &lt;assert.h&gt;

template &lt;typename T&gt; class CStackWithMin
{
public:
      CStackWithMin(void) {}
      virtual ~CStackWithMin(void) {}
      T&amp; top(void);
      const T&amp; top(void) const;
      void push(const T&amp; value);
      void pop(void);

      const T&amp; min(void) const;

private:
     T&gt; m_data;               // the elements of stack
     size_t&gt; m_minIndex;      // the indices of minimum elements
};
// get the last element of mutable stack
template &lt;typename T&gt; T&amp; CStackWithMin&lt;T&gt;::top()
{
      return m_data.back();
}

// get the last element of non-mutable stack
template &lt;typename T&gt; const T&amp; CStackWithMin&lt;T&gt;::top() const
{
      return m_data.back();
}

// insert an elment at the end of stack
template &lt;typename T&gt; void CStackWithMin&lt;T&gt;::push(const T&amp; value)
{
      // append the data into the end of m_data
      m_data.push_back(value);
      // set the index of minimum elment in m_data at the end of m_minIndex
      if(m_minIndex.size() == 0)
            m_minIndex.push_back(0);
      else
      {
            if(value &lt; m_data[m_minIndex.back()])
                  m_minIndex.push_back(m_data.size() - 1);
            else
                  m_minIndex.push_back(m_minIndex.back());
      }
}

// erease the element at the end of stack
template &lt;typename T&gt; void CStackWithMin&lt;T&gt;::pop()
{
      // pop m_data
      m_data.pop_back();
      // pop m_minIndex
      m_minIndex.pop_back();
}
// get the minimum element of stack
template &lt;typename T&gt; const T&amp; CStackWithMin&lt;T&gt;::min() const
{
      assert(m_data.size() &gt; 0);
      assert(m_minIndex.size() &gt; 0);

      return m_data[m_minIndex.back()];
}</pre>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
	举个例子演示上述代码的运行过程：
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
	  步骤              数据栈            辅助栈                最小值<br/>
<font face="Courier">1.push 3    3          0             3<br/>
	2.push 4    3,4        0,0           3<br/>
	3.push 2    3,4,2      0,0,2         2<br/>
	4.push 1    3,4,2,1    0,0,2,3       1<br/>
	5.pop       3,4,2      0,0,2         2<br/>
	6.pop       3,4        0,0           3<br/>
	7.push 0    3,4,0      0,0,2         0</font>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">讨论：如果思路正确，编写上述代码不是一件很难的事情。但如果能注意一些细节无疑能在面试中加分。比如我在上面的代码中做了如下的工作：</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: Symbol;">·<span style="line-height: normal; font-size: 7pt; font-family: 'Times New Roman';">         </span></span><span style="font-family: SimSun;">用模板类实现。如果别人的元素类型只是</span>int<span style="font-family: SimSun;">类型，模板将能给面试官带来好印象；</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: Symbol;">·<span style="line-height: normal; font-size: 7pt; font-family: 'Times New Roman';">         </span></span><span style="font-family: SimSun;">两个版本的</span>top<span style="font-family: SimSun;">函数。在很多类中，都需要提供</span>const<span style="font-family: SimSun;">和非</span>const<span style="font-family: SimSun;">版本的成员访问函数；</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: Symbol;">·<span style="line-height: normal; font-size: 7pt; font-family: 'Times New Roman';">         </span></span>min<span style="font-family: SimSun;">函数中</span>assert<span style="font-family: SimSun;">。把代码写的尽量安全是每个软件公司对程序员的要求；</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: Symbol;">·<span style="line-height: normal; font-size: 7pt; font-family: 'Times New Roman';">         </span></span><span style="font-family: SimSun;">添加一些注释。注释既能提高代码的可读性，又能增加代码量，何乐而不为？</span>
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span style="font-family: SimSun;">总之，在面试时如果时间允许，尽量把代码写的漂亮一些。说不定代码中的几个小亮点就能让自己轻松拿到心仪的</span>Offer。
</p>
<p style="line-height: 28px; margin: 0px 0px 10px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 2em;">
<span lang="ZH-CN" style="line-height: 28px; color: rgb(0, 0, 0); font-size: 16px; text-indent: 48px; font-family: 宋体;"><font size="3">转载出处</font></span><a href="http://zhedahht.blog.163.com/" style="line-height: 28px; color: rgb(153, 0, 0); cursor: pointer; font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; text-indent: 48px;"><font color="#990000" face="Calibri" size="3">http://zhedahht.blog.163.com/</font></a></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-95007">
<article class="comment" id="comment-95007">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919513936" rel="external nofollow">新用户979298</a></span> on <a href="http://www.acmerblog.com/offer-google-1179.html#comment-95007" rel="nofollow"><time datetime="2017-04-13T20:28:20+00:00" pubdate="">2017年4月13日 at 下午8:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是的、如七樓所說。衹要不做虧心事他們也不會來惹你的。放心吧、千萬不可亂念滅鬼咒…等等的咒語。這樣衹會使你周圍的鬼魂們發飆、那時…你就死定了。愿樓主一心一意做好人、別做虧心事。善哉善哉、南無阿彌陀佛。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53996">
<article class="comment" id="comment-53996">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ygwx</a></span> on <a href="http://www.acmerblog.com/offer-google-1179.html#comment-53996" rel="nofollow"><time datetime="2015-03-31T23:57:15+00:00" pubdate="">2015年3月31日 at 下午11:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，就是把这32位当成一个长度为32的数</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61152">
<article class="comment" id="comment-61152">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Yaunxi</a></span> on <a href="http://www.acmerblog.com/offer-google-1179.html#comment-61152" rel="nofollow"><time datetime="2014-11-07T08:18:29+00:00" pubdate="">2014年11月7日 at 上午8:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>清华也会出这么无聊的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10221">
<article class="comment" id="comment-10221">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">piaoyi</a></span> on <a href="http://www.acmerblog.com/offer-google-1179.html#comment-10221" rel="nofollow"><time datetime="2014-10-14T15:28:56+00:00" pubdate="">2014年10月14日 at 下午3:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>总结的很全面，学习了！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-53997">
<article class="comment" id="comment-53997">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Silence.L</a></span> on <a href="http://www.acmerblog.com/offer-google-1179.html#comment-53997" rel="nofollow"><time datetime="2014-03-06T11:07:59+00:00" pubdate="">2014年3月6日 at 上午11:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>if(j){<br/>
                    int ans=a <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> ;<br/>
                    for(int x=j-1;x&gt;=0;x–){<br/>
                        if(!a <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d7/newx_org.gif"/> ) break;<br/>
                        ans=min(ans,a <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d7/newx_org.gif"/> );<br/>
                        sum+=ans;<br/>
                    }<br/>
                }<br/>
求解释，，dp的思路是什么呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-38">
<article class="comment" id="comment-38">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn">马涛</span> on <a href="http://www.acmerblog.com/offer-google-1179.html#comment-38" rel="nofollow"><time datetime="2013-11-21T19:40:10+00:00" pubdate="">2013年11月21日 at 下午7:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯   分析得很到位，确实用模板编程能让面试官对你的印象更好。在设置辅助栈的时候可以这样：push时，比较要push的elem和辅助栈的栈顶，elem&lt;=min.top()，则min.push(elem).否则只要push（elem）就好。在pop的时候，比较stack.top()与min.top(),if(stack.top()&lt;=min.top()),则{stack.pop();min.pop();}，否则{stack.pop();}.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>