<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-10</div>
<div class="tit"><h1 class="entry-title">POJ 2004 Mix and Build [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a>, <a href="http://www.acmerblog.com/category/basis/sort" rel="category tag" title="查看排序中的全部文章">排序</a></span><span class="i4">围观1210次</span><span class="i3"><a class="ds-thread-count" data-thread-key="583" href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comments" title="《POJ 2004 Mix and Build [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Mix and Build</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
In this problem, you are given a list of words (sequence of lower case letters). From this list, find the longest chain of words w1, …, wn such that wi is a mixed extension of w<sub>i-1</sub>. A word A is a mixed extension of another word B if A can be formed by adding one letter to B and permuting the result. For example, “ab”, “bar”, “crab”, “cobra”, and “carbon” form a chain of length 5. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input contains at least two, but no more than 10000 lines. Each line contains a word. The length of each word is at least 1 and no more than 20. All words in the input are distinct.  </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
Write the longest chain that can be constructed from the given words. Output each word in the chain on a separate line, starting from the first one. If there are multiple longest chains, any longest chain is acceptable. </div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
ab
arc
arco
bar
bran
carbon
carbons
cobra
crab
crayon
narc
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
ab
bar
crab
cobra
carbon
carbons
</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=2004">提交代码</a>   <a href="http://poj.org/bbs?problem_id=2004">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=2004">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: 82638882@163.com
import java.io.*;
import java.util.Arrays;
import java.util.Comparator;
public class Main
{
 static my[] s=new my[10001];
 public static void main(String[] args) throws IOException
 {
  InputStreamReader is=new InputStreamReader(System.in);
  BufferedReader in=new BufferedReader(is);
  int l=0,max=-1,rr=-1;
  while(in.ready())
  {
	String t=in.readLine();
	s[l++]=new my(t);
  }
  Comparator&lt; my&gt; cp=new Comparator&lt; my&gt;()
  {
	public int compare(my o1, my o2) {
		return o1.l-o2.l;
	}
   };
   Arrays.sort(s,0,l,cp);
   for(int i=0;i&lt; l;i++)
   {
	for(int j=0;j&lt; i;j++)
	{
	 if(s[j].l==s[i].l) break;
	 if(s[j].l!=s[i].l-1) continue;
		int cnt=0,k=0;
		while(k&lt; s[j].l&amp;&amp;cnt&lt; 2)
		{
	          if(s[j].c[k]!=s[i].c[k+cnt]) cnt++;
		  else k++;
		}
		if(cnt&lt; 2)
		{
		  if(s[i].n&lt; s[j].n+1){
			s[i].n=s[j].n+1;
			s[i].r=j;
		  }		
		}	
	}
    }
	
   for(int i=0;i&lt; l;i++)
   {
	if(s[i].n&gt;max)
	{
		max=s[i].n;
		rr=i;
	}
   }
   p(rr);
 }

  static void p(int a)
  {
    if(s[a].r!=-1)
	p(s[a].r);
    System.out.println(s[a].s);
  }
}
class my
{
	String s;
	int n=0;
	int l;
	int r=-1;
	char[] c;
	public my(String t)
	{
		s=t;
		l=s.length();
		c=new char[l];
		for(int i=0;i&lt; l;i++)
			c[i]=s.charAt(i);
		Arrays.sort(c);
	}
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-37491">
<article class="comment" id="comment-37491">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sam_justin</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-37491" rel="nofollow"><time datetime="2015-06-25T17:32:25+00:00" pubdate="">2015年6月25日 at 下午5:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为避免精度问题，PI值请使用arccos(-1)。应该是acos</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6417">
<article class="comment" id="comment-6417">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6417" rel="nofollow"><time datetime="2015-04-26T22:23:49+00:00" pubdate="">2015年4月26日 at 下午10:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正解，我的方法占用的内存更多些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-60661">
<article class="comment" id="comment-60661">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">congve1</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-60661" rel="nofollow"><time datetime="2015-02-13T02:23:02+00:00" pubdate="">2015年2月13日 at 上午2:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6414">
<article class="comment" id="comment-6414">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">usx13123</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6414" rel="nofollow"><time datetime="2015-01-29T00:59:52+00:00" pubdate="">2015年1月29日 at 上午12:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有一点问题。。后面动态规划的程序中<br/>
int dp[n+1][W+1];<br/>
会报错  提示表达式必须含有常量值。该怎么修改呢。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6411">
<article class="comment" id="comment-6411">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HaibaraAi</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6411" rel="nofollow"><time datetime="2015-01-15T06:34:24+00:00" pubdate="">2015年1月15日 at 上午6:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，算是枚举吧，已修正</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6413">
<article class="comment" id="comment-6413">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">slowlight</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6413" rel="nofollow"><time datetime="2014-12-19T09:52:14+00:00" pubdate="">2014年12月19日 at 上午9:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题选错了，答案是A</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6410">
<article class="comment" id="comment-6410">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xin</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6410" rel="nofollow"><time datetime="2014-12-14T03:57:01+00:00" pubdate="">2014年12月14日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6409">
<article class="comment" id="comment-6409">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zwj0571</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6409" rel="nofollow"><time datetime="2014-10-25T11:39:43+00:00" pubdate="">2014年10月25日 at 上午11:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很棒的网站，加油！⛽️</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6412">
<article class="comment" id="comment-6412">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zwj0571</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6412" rel="nofollow"><time datetime="2014-10-15T22:01:02+00:00" pubdate="">2014年10月15日 at 下午10:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>书上的解法更巧妙一些，在九度OJ实测的效率差不多</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6408">
<article class="comment" id="comment-6408">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">943965021</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6408" rel="nofollow"><time datetime="2014-09-26T03:04:57+00:00" pubdate="">2014年9月26日 at 上午3:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>信息不全</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6416">
<article class="comment" id="comment-6416">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Yaunxi</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6416" rel="nofollow"><time datetime="2014-07-01T17:35:09+00:00" pubdate="">2014年7月1日 at 下午5:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>非常不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6418">
<article class="comment" id="comment-6418">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gy910210</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6418" rel="nofollow"><time datetime="2014-04-14T18:07:51+00:00" pubdate="">2014年4月14日 at 下午6:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6415">
<article class="comment" id="comment-6415">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yesMan</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6415" rel="nofollow"><time datetime="2014-01-08T02:38:16+00:00" pubdate="">2014年1月8日 at 上午2:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>居然是机试，还和13年重复。题目不难</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6419">
<article class="comment" id="comment-6419">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">211206421</a></span> on <a href="http://www.acmerblog.com/POJ-2004-Mix-and-Build-blog-583.html#comment-6419" rel="nofollow"><time datetime="2013-12-31T10:26:45+00:00" pubdate="">2013年12月31日 at 上午10:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有两个重复的话结果是正确的，但解法不够严谨，后面重复的覆盖掉前面的，由于题目数据限制也比较严，所以能提交通过。已更新算法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>