<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>01-15</div>
<div class="tit"><h1 class="entry-title">Codeforces 34C Page Numbers-DFS[解题]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset" rel="category tag" title="查看ACM题库中的全部文章">ACM题库</a></span><span class="i4">围观1467次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3748" href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comments" title="《Codeforces 34C Page Numbers-DFS[解题]》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div class="header" style="margin:0px 0px 1em; padding:0px; text-align:center; color:rgb(34,34,34); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:21px">
<div class="title" style="margin:0px 0px 0.5em; padding:0px; font-size:21px">D. Road Map</div>
<div class="time-limit" style="margin:0px auto; padding:0px">
<div class="property-title" style="margin:0px; padding:0px 4px 0px 0px; display:inline">
time limit per test</div>
<p>2 seconds</p></div>
<div class="memory-limit" style="margin:0px auto; padding:0px">
<div class="property-title" style="margin:0px; padding:0px 4px 0px 0px; display:inline">
memory limit per test</div>
<p>256 megabytes</p></div>
<div class="input-file" style="margin:0px auto; padding:0px">
<div class="property-title" style="margin:0px; padding:0px 4px 0px 0px; display:inline">
input</div>
<p>standard input</p></div>
<div class="output-file" style="margin:0px auto; padding:0px">
<div class="property-title" style="margin:0px; padding:0px 4px 0px 0px; display:inline">
output</div>
<p>standard output</p></div>
</div>
<div style="margin:0px; padding:0px; color:rgb(34,34,34); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:21px">
<p style="margin-top:1.5em; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:1em; line-height:1.4em">
There are <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>n</em></span> cities in Berland. Each city has its index — an integer number from <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif">1</span> to <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>n</em></span>.<br/>
 The capital has index <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">1</span></span>.<br/>
 All the roads in Berland are two-way. The road system is such that there is exactly one path from the capital to each city, i.e. the road map looks like a tree. In Berland’s chronicles the road map is kept in the following way: for each city <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>i</em></span>,<br/>
 different from the capital, there is kept number <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>p</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em"><em>i</em></span></span> —<br/>
 index of the last city on the way from the capital to <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>i</em></span>.</p>
<p style="margin-top:1.5em; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:1em; line-height:1.4em">
Once the king of Berland Berl XXXIV decided to move the capital from city <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">1</span></span> to<br/>
 city <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">2</span></span>. Naturally, after<br/>
 this the old representation of the road map in Berland’s chronicles became incorrect. Please, help the king find out a new representation of the road map in the way described above.</p>
</div>
<div class="input-specification" style="margin:0px; padding:0px; color:rgb(34,34,34); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:21px">
<div class="section-title" style="margin:0px; padding:0px; font-size:16px; font-weight:bold">
Input</div>
<p style="margin-top:1.5em; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:1em; line-height:1.4em">
The first line contains three space-separated integers <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>n</em></span>, <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">1</span></span>, <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">2</span></span> (<span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif">2 ≤ <em>n</em> ≤ 5·10<span class="upper-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; top:-0.5em">4</span>, 1 ≤ <em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">1</span> ≠ <em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">2</span> ≤ <em>n</em></span>)<br/>
 — amount of cities in Berland, index of the old capital and index of the new one, correspondingly.</p>
<p style="margin-top:1.5em; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:1em; line-height:1.4em">
The following line contains <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>n</em> - 1</span> space-separated integers — the old representation of the road map. For each city, apart from <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>r</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em">1</span></span>,<br/>
 there is given integer <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>p</em><span class="lower-index" style="font-size:13px; line-height:0; position:relative; vertical-align:baseline; bottom:-0.25em"><em>i</em></span></span> —<br/>
 index of the last city on the way from the capital to city <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>i</em></span>. All the cities are described in order of increasing indexes.</p>
</div>
<div class="output-specification" style="margin:0px 0px 1em; padding:0px; color:rgb(34,34,34); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:21px">
<div class="section-title" style="margin:0px; padding:0px; font-size:16px; font-weight:bold">
Output</div>
<p style="margin-top:1.5em; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:1em; line-height:1.4em">
Output <span class="tex-span" style="font-size:18px; font-family:'times new roman',sans-serif"><em>n</em> - 1</span> numbers — new representation of the road map in the same format.</p>
</div>
<div class="sample-tests" style="margin:0px; padding:0px; font-family:Consolas,'Lucida Console','Andale Mono','Bitstream Vera Sans Mono','Courier New',Courier; font-size:0.9em; color:rgb(34,34,34); line-height:21px">
<div class="section-title" style="margin:0px; padding:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; font-weight:bold">
Sample test(s)</div>
<div class="sample-test" style="margin:0px; padding:0px">
<div class="input" style="margin:0px; padding:0px; border:1px solid rgb(136,136,136)">
<div class="title" style="margin:0px; padding:0.25em; font-size:1.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(136,136,136); text-transform:lowercase; font-weight:bold">
input</div>
<pre style="margin-top:0px; margin-bottom:0px; padding:0.25em; font-size:13px; font-family:Consolas,'Lucida Console','Andale Mono','Bitstream Vera Sans Mono','Courier New',Courier; line-height:1.25em; white-space:pre-wrap; word-wrap:break-word; color:rgb(136,0,0); background-color:rgb(239,239,239)">3 2 3
2 2
</pre>
</div>
<div class="output" style="margin:0px 0px 1em; padding:0px; border:1px solid rgb(136,136,136); position:relative; top:-1px">
<div class="title" style="margin:0px; padding:0.25em; font-size:1.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(136,136,136); text-transform:lowercase; font-weight:bold">
output</div>
<pre style="margin-top:0px; margin-bottom:0px; padding:0.25em; font-size:13px; font-family:Consolas,'Lucida Console','Andale Mono','Bitstream Vera Sans Mono','Courier New',Courier; line-height:1.25em; white-space:pre-wrap; word-wrap:break-word; color:rgb(136,0,0); background-color:rgb(239,239,239)">2 3 </pre>
</div>
<div class="input" style="margin:0px; padding:0px; border:1px solid rgb(136,136,136)">
<div class="title" style="margin:0px; padding:0.25em; font-size:1.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(136,136,136); text-transform:lowercase; font-weight:bold">
input</div>
<pre style="margin-top:0px; margin-bottom:0px; padding:0.25em; font-size:13px; font-family:Consolas,'Lucida Console','Andale Mono','Bitstream Vera Sans Mono','Courier New',Courier; line-height:1.25em; white-space:pre-wrap; word-wrap:break-word; color:rgb(136,0,0); background-color:rgb(239,239,239)">6 2 4
6 1 2 4 2
</pre>
</div>
<div class="output" style="margin:0px 0px 1em; padding:0px; border:1px solid rgb(136,136,136); position:relative; top:-1px">
<div class="title" style="margin:0px; padding:0.25em; font-size:1.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(136,136,136); text-transform:lowercase; font-weight:bold">
output</div>
<pre style="margin-top:0px; margin-bottom:0px; padding:0.25em; font-size:13px; font-family:Consolas,'Lucida Console','Andale Mono','Bitstream Vera Sans Mono','Courier New',Courier; line-height:1.25em; white-space:pre-wrap; word-wrap:break-word; color:rgb(136,0,0); background-color:rgb(239,239,239)">6 4 1 4 2 </pre>
</div>
</div>
</div>
<p>题意：很不好理解，n个城市编号1-n，现在要从首都r1迁徙到首都r2，迁徙前有一个表示国家的地图，地图的表示方法为，每个点对应的是他的前驱，首都无前驱跳过，问迁徙后的地图表示方法。图必然是一棵生成树（n-1条边）</p>
<p>思路：每个点对应前驱相连，这样就能构成图了，在从新的首都往后遍历，遍历过程中记录下答案。</p>
<p>代码：</p>
<pre class="brush:cpp ">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
using namespace std;

const int N = 100005;

int n, r1, r2, sb;

vector&lt;int&gt; g[N];
int du[N], i;
int vis[N];
int ans[N];

void dfs(int now) {
	vis[now] = 1;
	for (int i = 0; i &lt; g[now].size(); i++) {
		int v = g[now][i];
		if (vis[v]) continue;
		ans[v] = now;
		dfs(v);
	}
}

int main() {
	memset(vis, 0, sizeof(vis));
	memset(du, 0, sizeof(du));
	memset(g, 0, sizeof(g));
	scanf("%d%d%d", &amp;n, &amp;r1, &amp;r2);
	for (i = 1; i &lt;= n; i++) {
		if (i == r1) continue;
		scanf("%d", &amp;sb);
		g[i].push_back(sb);
		g[sb].push_back(i);
		du[i]++; du[sb]++;
	}
	dfs(r2);
	int bo = 0;
	for (i = 1; i &lt;= n; i++) {
		if (i == r2) continue;
		if (bo++) printf(" ");
		printf("%d", ans[i]);
	}
	printf("\n");
	return 0;
}</pre>
<p>转自：http://blog.csdn.net/accelerator_/article/details/18241859</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-85279">
<article class="comment" id="comment-85279">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515832" rel="external nofollow">新用户009040</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-85279" rel="nofollow"><time datetime="2017-04-13T01:15:58+00:00" pubdate="">2017年4月13日 at 上午1:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>通宵打牌饿了，所以有人去做腊肉蛋炒饭，没有出现在画卷里</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45068">
<article class="comment" id="comment-45068">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">dream</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-45068" rel="nofollow"><time datetime="2015-06-12T15:31:50+00:00" pubdate="">2015年6月12日 at 下午3:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>较好的写法是 start+(end-start)/2</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21603">
<article class="comment" id="comment-21603">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">huangdilj</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21603" rel="nofollow"><time datetime="2015-04-29T11:38:51+00:00" pubdate="">2015年4月29日 at 上午11:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>使用代码高亮的插件，再修改下css</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21604">
<article class="comment" id="comment-21604">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bai</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21604" rel="nofollow"><time datetime="2015-04-05T21:54:03+00:00" pubdate="">2015年4月5日 at 下午9:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p><a href="http://beeder.me" rel="nofollow">http://beeder.me</a> 这个网站上有很多poj和hihoCoder的题解，质量不错，欢迎转载。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21609">
<article class="comment" id="comment-21609">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">radish</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21609" rel="nofollow"><time datetime="2014-09-30T01:04:36+00:00" pubdate="">2014年9月30日 at 上午1:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>赞一个！权限已更新:）</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21605">
<article class="comment" id="comment-21605">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Sacomplex</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21605" rel="nofollow"><time datetime="2014-09-20T19:20:56+00:00" pubdate="">2014年9月20日 at 下午7:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>看见的晚了，只能提交一次唉</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21602">
<article class="comment" id="comment-21602">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tufei</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21602" rel="nofollow"><time datetime="2014-08-11T06:18:34+00:00" pubdate="">2014年8月11日 at 上午6:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很强大啊，佩服</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21607">
<article class="comment" id="comment-21607">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">litao</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21607" rel="nofollow"><time datetime="2014-06-25T15:12:09+00:00" pubdate="">2014年6月25日 at 下午3:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>注释很详细，多谢分享！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21608">
<article class="comment" id="comment-21608">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">aaa</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21608" rel="nofollow"><time datetime="2014-04-25T00:23:01+00:00" pubdate="">2014年4月25日 at 上午12:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好。代码比书上的简练！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45067">
<article class="comment" id="comment-45067">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-45067" rel="nofollow"><time datetime="2014-04-18T17:22:19+00:00" pubdate="">2014年4月18日 at 下午5:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你的理解应该是：即使主持人拿走一个箱子对结果没有影响。这样想，主持人拿走的箱子只是没有影响到你初始选择的那个箱子中有奖品的概率，但是改变了其余两个箱子的概率分布。由 1/3,1/3 变成了 0, 2/3</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21606">
<article class="comment" id="comment-21606">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">anshansh</a></span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-21606" rel="nofollow"><time datetime="2014-02-24T20:58:07+00:00" pubdate="">2014年2月24日 at 下午8:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>代码过于复杂了吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-154">
<article class="comment" id="comment-154">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn">aojian</span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-154" rel="nofollow"><time datetime="2014-01-18T16:56:21+00:00" pubdate="">2014年1月18日 at 下午4:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，再多来的CF上面的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-105">
<article class="comment" id="comment-105">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn">aojian</span> on <a href="http://www.acmerblog.com/codeforces-34c-page-numbers-3748.html#comment-105" rel="nofollow"><time datetime="2014-01-18T16:56:21+00:00" pubdate="">2014年1月18日 at 下午4:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，再多来的CF上面的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>