<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-10</div>
<div class="tit"><h1 class="entry-title">POJ 1703 Find them, Catch them [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观676次</span><span class="i3"><a class="ds-thread-count" data-thread-key="493" href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comments" title="《POJ 1703 Find them, Catch them [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Find them, Catch them</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
The police office in Tadu City decides to say ends to the chaos, as launch actions to root up the TWO gangs in the city, Gang Dragon and Gang Snake. However, the police first needs to identify which gang a criminal belongs to. The present question is, given two criminals; do they belong to a same clan? You must give your judgment based on incomplete information. (Since the gangsters are always acting secretly.)
<p>Assume N (N &lt;= 10^5) criminals are currently in Tadu City, numbered from 1 to N. And of course, at least one of them belongs to Gang Dragon, and the same for Gang Snake. You will be given M (M &lt;= 10^5) messages in sequence, which are in the following two kinds:</p>
<p>1. D [a] [b]<br/>
<br/>where [a] and [b] are the numbers of two criminals, and they belong to different gangs.</p>
<p>2. A [a] [b]<br/>
<br/>where [a] and [b] are the numbers of two criminals. This requires you to decide whether a and b belong to a same gang.
 </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of the input contains a single integer T (1 &lt;= T &lt;= 20), the number of test cases. Then T cases follow. Each test case begins with a line with two integers N and M, followed by M lines each containing one message as described above.  </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each message “A [a] [b]” in each case, your program should give the judgment based on the information got before. The answers might be one of “In the same gang.”, “In different gangs.” and “Not sure yet.”</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
5 5
A 1 2
D 1 2
A 1 2
D 2 4
A 1 4
</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Not sure yet.
In different gangs.
In the same gang.
</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=1703">提交代码</a>   <a href="http://poj.org/bbs?problem_id=1703">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=1703">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: 82638882@163.com
import java.io.*;
public class Main
{
 static int[] p,q;
 static int u;
 public static void main(String[] args) throws IOException
 {
	InputStreamReader is=new InputStreamReader(System.in);
	BufferedReader in=new BufferedReader(is);
	int a=Integer.parseInt(in.readLine());
	while((a--)!=0)
	{
	 String[] ss=in.readLine().split(" ");
	 int n=Integer.parseInt(ss[0]);
	 int m=Integer.parseInt(ss[1]);
	 p=new int[n+1];
	 q=new int[n+1];
	 for(int i=0;i&lt;=n;i++)
		p[i]=i;
	 for(int i=0;i&lt; m;i++)
	 {
		ss=in.readLine().split(" ");
		int x=Integer.parseInt(ss[1]);
		int y=Integer.parseInt(ss[2]);
		if(ss[0].equals("D"))
			union(x,y);
		else{
		   if(root(x)!=root(y))
			System.out.println("Not sure yet.");
		   else
		   {
			if(get(x)==get(y))
			  System.out.println("In the same gang.");
			else
			  System.out.println("In different gangs.");
		    }
		}
	  }
	}
 }
	static int root(int a)
	{
		while(p[a]!=a)
			a=p[a];
		return a;
	}
  static void union(int x,int y)
  {
	int s1=get(x);
	int x1=u;
	int s2=get(y);
	int y1=u;
	if(x1==y1)return;
	if(x1&lt; y1)
	{
		p[y1]=x1;
		if(s1==s2)
			q[y1]=q[x1]+1;
	}
	else
	{
		p[x1]=y1;
		if(s1==s2)
			q[x1]=q[y1]+1;
	}
    }
	
  static int get(int a)
 {
	int t=0;
	while(p[a]!=a)
	{
		t+=q[a];
		a=p[a];
	}
	u=a;
	return t%2;
  }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-5727">
<article class="comment" id="comment-5727">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5727" rel="nofollow"><time datetime="2015-06-26T03:15:31+00:00" pubdate="">2015年6月26日 at 上午3:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感觉这里的评分标准没啥作用阿，反而显得显得赘余，还不如直接去掉好了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5737">
<article class="comment" id="comment-5737">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiaobei</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5737" rel="nofollow"><time datetime="2015-06-18T06:09:08+00:00" pubdate="">2015年6月18日 at 上午6:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第23行：<br/>
hash <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/>  = -1是否应该改成hash[s <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> ] = -1</p>
<p>因为是要把从字符串s的start位到当前位在hash中重置</p>
<p>修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-5733">
<article class="comment" id="comment-5733">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jandk</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5733" rel="nofollow"><time datetime="2015-06-17T08:28:35+00:00" pubdate="">2015年6月17日 at 上午8:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很不错！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5738">
<article class="comment" id="comment-5738">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ygwx</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5738" rel="nofollow"><time datetime="2015-05-23T12:03:18+00:00" pubdate="">2015年5月23日 at 下午12:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个是代码高亮功能，那就再换一个颜色</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-5728">
<article class="comment" id="comment-5728">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCCat</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5728" rel="nofollow"><time datetime="2015-03-24T14:17:56+00:00" pubdate="">2015年3月24日 at 下午2:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>思考人生吗</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5730">
<article class="comment" id="comment-5730">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">943965021</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5730" rel="nofollow"><time datetime="2015-01-27T22:07:33+00:00" pubdate="">2015年1月27日 at 下午10:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>还是有些难度的！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-5739">
<article class="comment" id="comment-5739">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">slowlight</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5739" rel="nofollow"><time datetime="2014-12-10T18:59:19+00:00" pubdate="">2014年12月10日 at 下午6:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5729">
<article class="comment" id="comment-5729">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zoe_music</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5729" rel="nofollow"><time datetime="2014-10-19T11:17:02+00:00" pubdate="">2014年10月19日 at 上午11:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顶一个 赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-5736">
<article class="comment" id="comment-5736">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gy910210</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5736" rel="nofollow"><time datetime="2014-10-07T19:42:13+00:00" pubdate="">2014年10月7日 at 下午7:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的题，还是能做出几道的，嘿嘿</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5735">
<article class="comment" id="comment-5735">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hsp_77_abc</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5735" rel="nofollow"><time datetime="2014-05-15T19:00:01+00:00" pubdate="">2014年5月15日 at 下午7:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>printf这个函数在计算的时候是从右到左，打印是从左到右。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-5726">
<article class="comment" id="comment-5726">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bob</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5726" rel="nofollow"><time datetime="2014-04-29T11:01:36+00:00" pubdate="">2014年4月29日 at 上午11:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>怎么输入两个0程序还没退出</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5731">
<article class="comment" id="comment-5731">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vintion</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5731" rel="nofollow"><time datetime="2014-04-12T04:40:00+00:00" pubdate="">2014年4月12日 at 上午4:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-5734">
<article class="comment" id="comment-5734">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mayboy</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5734" rel="nofollow"><time datetime="2013-12-11T09:20:16+00:00" pubdate="">2013年12月11日 at 上午9:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题应该是有一般性的解决方法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5732">
<article class="comment" id="comment-5732">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ygwx</a></span> on <a href="http://www.acmerblog.com/POJ-1703-Find-them%2C-Catch-them-blog-493.html#comment-5732" rel="nofollow"><time datetime="2013-12-01T12:34:50+00:00" pubdate="">2013年12月1日 at 下午12:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>