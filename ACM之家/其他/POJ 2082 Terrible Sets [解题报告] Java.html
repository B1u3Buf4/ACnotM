<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-10</div>
<div class="tit"><h1 class="entry-title">POJ 2082 Terrible Sets [解题报告] Java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/zhuanti/java-poj" rel="category tag" title="查看Java解POJ中的全部文章">Java解POJ</a>, <a href="http://www.acmerblog.com/category/problemset/poj2" rel="category tag" title="查看POJ-北大中的全部文章">POJ-北大</a></span><span class="i4">围观857次</span><span class="i3"><a class="ds-thread-count" data-thread-key="607" href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comments" title="《POJ 2082 Terrible Sets [解题报告] Java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Terrible Sets</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Let N be the set of all natural numbers {0 , 1 , 2 , . . . }, and R be the set of all real numbers. wi, hi for i = 1 . . . n are some elements in N, and w0 = 0.<br/>
<br/>Define set B = {&lt; x, y &gt; | x, y ∈ R and there exists an index i &gt; 0 such that 0 &lt;= y &lt;= hi ,∑<sub>0&lt;=j&lt;=i-1</sub>wj &lt;= x &lt;= ∑<sub>0&lt;=j&lt;=i</sub>wj}<br/>
<br/>Again, define set S = {A| A = WH for some W , H ∈ R<sup>+</sup> and there exists x0, y0 in N such that the set T = { &lt; x , y &gt; | x, y ∈ R and x0 &lt;= x &lt;= x0 +W and y0 &lt;= y &lt;= y0 + H} is contained in set B}.<br/>
<br/>Your mission now. What is Max(S)?<br/>
<br/>Wow, it looks like a terrible problem. Problems that appear to be terrible are sometimes actually easy.<br/>
<br/>But for this one, believe me, it’s difficult. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input consists of several test cases. For each case, n is given in a single line, and then followed by n lines, each containing wi and hi separated by a single space. The last line of the input is an single integer -1, indicating the end of input. You may assume that 1 &lt;= n &lt;= 50000 and w<sub>1</sub>h<sub>1</sub>+w<sub>2</sub>h<sub>2</sub>+…+w<sub>n</sub>h<sub>n</sub> &lt; 10<sup>9</sup>. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
Simply output Max(S) in a single line for each case.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3
1 2
3 4
1 2
3
3 4
1 2
3 4
-1</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
12
14</pre>
<div class="mybigtile mysubmit"> <a href="http://poj.org/submit?problem_id=2082">提交代码</a>   <a href="http://poj.org/bbs?problem_id=2082">问题讨论</a>   <a href="http://poj.org/problemstatus?problem_id=2082">数据统计</a> </div>
<div>
<p class="mytitle"> 解题代码:</p>
</div>
<pre class="brush:java ">//* @author: 82638882@163.com
import java.io.*;
public class Main
{
 static int[] p,b,c,w;
 static int a;
 public static void main(String[] args) throws IOException
 {
  InputStreamReader is=new InputStreamReader(System.in);
  BufferedReader in=new BufferedReader(is);
  while(true)
  {
	String[] ss=in.readLine().split(" ");
	a=Integer.parseInt(ss[0]);
	if(a==-1)break;
	p=new int[a+2];
	b=new int[a+1];
	c=new int[a+1];
	w=new int[a+1];
	for(int i=1;i&lt;=a;i++)
	{
		ss=in.readLine().split(" ");
		w[i]=Integer.parseInt(ss[0]);
		p[i]=Integer.parseInt(ss[1]);
	}
	p[0]=p[a+1]=-1;
	long max=0;
	for(int i=1;i&lt;=a;i++)
	{
		b[i]=1;
		int j=i;
		while(p[j-b[j]]&gt;=p[i])
		{
			j-=b[j];
			b[i]+=b[j];
		}
	}
	for(int i=a;i&gt;0;i--)
	{
		c[i]=1;
		int j=i;
		while(p[j+c[j]]&gt;=p[i])
		{
			j+=c[j];
			c[i]+=c[j];
		}
	}
	for(int i=1;i&lt;=a;i++)
	{
		int total=w[i];
		for(int u=1;u&lt; c[i];u++)
			total+=w[u+i];
		for(int u=1;u&lt; b[i];u++)
			total+=w[i-u];
		long ans=total*p[i];
		max=Math.max(ans, max);
	}
	System.out.println(max);
   }
 }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-37584">
<article class="comment" id="comment-37584">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1520006273</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37584" rel="nofollow"><time datetime="2015-04-17T10:31:17+00:00" pubdate="">2015年4月17日 at 上午10:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题这里的解法最坏情况似乎应该是指数的。回溯的时候<br/>
O(n) = O(n-1) + O(n-2) + ….<br/>
O(n-1) = O(n-2) + O(n-3)+ …<br/>
O(n) – O(n-1) = O(n-1)<br/>
O(n) = 2O(n-1)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37589">
<article class="comment" id="comment-37589">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zx123456</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37589" rel="nofollow"><time datetime="2015-03-20T01:57:43+00:00" pubdate="">2015年3月20日 at 上午1:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37590">
<article class="comment" id="comment-37590">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">siaswj</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37590" rel="nofollow"><time datetime="2015-02-15T03:01:21+00:00" pubdate="">2015年2月15日 at 上午3:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>面霸网。www.51mx.org</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-60686">
<article class="comment" id="comment-60686">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-60686" rel="nofollow"><time datetime="2014-11-16T03:28:10+00:00" pubdate="">2014年11月16日 at 上午3:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>原来的主机不行，目前更换到了国内主机</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37592">
<article class="comment" id="comment-37592">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">OrangeGuy</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37592" rel="nofollow"><time datetime="2014-11-13T20:10:35+00:00" pubdate="">2014年11月13日 at 下午8:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37594">
<article class="comment" id="comment-37594">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Christmas</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37594" rel="nofollow"><time datetime="2014-08-05T16:12:38+00:00" pubdate="">2014年8月5日 at 下午4:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法挺不错。NewHead代表新的头节点，通过递归找到最后一个节点之后，就把这个节点赋给NewHead，然后一直返回返回，中途这个值是没有变化的，一边返回一边把相应的指针方向颠倒，最后结束时返回新的头节点到主函数。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37585">
<article class="comment" id="comment-37585">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">crazymage</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37585" rel="nofollow"><time datetime="2014-07-08T12:17:08+00:00" pubdate="">2014年7月8日 at 下午12:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>还真是，i7的cpu跑了3秒</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37587">
<article class="comment" id="comment-37587">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCCat</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37587" rel="nofollow"><time datetime="2014-04-29T11:12:47+00:00" pubdate="">2014年4月29日 at 上午11:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>此题的样例描述不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-6568">
<article class="comment" id="comment-6568">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Snarl_jsb</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-6568" rel="nofollow"><time datetime="2014-04-27T12:17:48+00:00" pubdate="">2014年4月27日 at 下午12:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对于第一题，我的直觉告诉我换不换都一样，求指教</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37588">
<article class="comment" id="comment-37588">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">skyand</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37588" rel="nofollow"><time datetime="2014-03-21T17:49:59+00:00" pubdate="">2014年3月21日 at 下午5:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>mark, 备用</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37593">
<article class="comment" id="comment-37593">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1193658339</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37593" rel="nofollow"><time datetime="2014-02-22T00:10:22+00:00" pubdate="">2014年2月22日 at 上午12:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好，找的就是这一题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37586">
<article class="comment" id="comment-37586">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">actlea</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37586" rel="nofollow"><time datetime="2014-01-24T15:07:31+00:00" pubdate="">2014年1月24日 at 下午3:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>[…] 如果此题没有要求 相对位置不变，可以参考文章：http://www.acmerblog.com/interview-9-2427/ […]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-37591">
<article class="comment" id="comment-37591">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">chengleisheng</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-37591" rel="nofollow"><time datetime="2013-12-29T22:02:17+00:00" pubdate="">2013年12月29日 at 下午10:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>漂亮。佩服。<br/>
P.S.  unsigned 应该去掉。换行符是n 不是/n<br/>
还可以稍微优化一下，<br/>
int main() {<br/>
	int m,n,ai,aj,bi,bj,ak,bk;<br/>
	while (scanf("%d%d",&amp;m,&amp;n)!=EOF) {<br/>
		ai = sqrt(m-1);<br/>
		bi = sqrt(n-1);<br/>
		aj = (m-ai*ai-1)&gt;&gt;1;<br/>
		bj = (n-bi*bi-1)&gt;&gt;1;<br/>
		ak = ((ai+1)*(ai+1)-m)&gt;&gt;1;<br/>
		bk = ((bi+1)*(bi+1)-n)&gt;&gt;1;<br/>
		printf("%dn",abs(ai-bi)+abs(aj-bj)+abs(ak-bk));<br/>
	}<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-60687">
<article class="comment" id="comment-60687">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sum_tsai</a></span> on <a href="http://www.acmerblog.com/POJ-2082-Terrible-Sets-blog-607.html#comment-60687" rel="nofollow"><time datetime="2013-12-05T13:30:16+00:00" pubdate="">2013年12月5日 at 下午1:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>网站不错，支持一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>