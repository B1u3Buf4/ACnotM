<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-10</div>
<div class="tit"><h1 class="entry-title">hdu 2576 Another Sum Problem-数论-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a></span><span class="i4">围观537次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4127" href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comments" title="《hdu 2576 Another Sum Problem-数论-[解题报告]C++》上的评论">16 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Another Sum Problem</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
FunnyAC likes mathematics very much. He thinks mathematics is very funny and beautiful.When he solved a math problem he would be very happy just like getting accepted in ACM.Recently, he find a very strange problem.Everyone know that the sum of sequence from 1 to n is     n*(n + 1)/2. But now if we create a sequence which consists of the sum of sequence from 1 to n. The new sequence is 1, 1+ 2, 1+2+3, …. 1+2+…+n. Now the problem is that what is the sum of the sequence from1 to  1+2+…+n .Is it very simple? I think you can solve it. Good luck! </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line contain an integer T .Then T cases followed. Each case contain an integer n (1 &lt;= n &lt;= 10000000). </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line contain an integer T .Then T cases followed. Each case contain an integer n (1 &lt;= n &lt;= 10000000).</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3
1
24
56</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1
2600
30856</pre>
<p> <!-- problem end --></p>
<p>题目蛮简单的，但是纠结了好久。原因倒不是推不出公式，而是推出公式以后不好办，因为公式是(n+2)*(n+1)*n/6，而n最大为10000000，这样的话即使用long long 也存不下。记得同余公式里关于除法的好像只有逆元的一些，上网找了一下，确定没有。于是只有自己继续推了。最后，自己终于证明了如下公式：</p>
<p>不妨设a &gt; b，r为a、b的公约数，则有</p>
<p>(a/r)%(b/r) = (a%b)/r。</p>
<p>不知道这个公式之前有没有人推出来过，反正自己挺有成就感的。其实也很好证明，如下：</p>
<p>设(a/r)%(b/r) = z，则一定有且仅有一个k满足(a/r) = k(b/r) + z。</p>
<p>从而得a = kb + zr</p>
<p>于是有a%b=(kb+zr)%b=((kb)%b+zr%b)%b=(zr%b)%b</p>
<p>由上述假设易知z &lt;(b/r)，从而得zr&lt;b</p>
<p>故(zr%b)%b = zr</p>
<p>故a%b=zr</p>
<p>从而</p>
<p>(a%b)/r = z = (a/r)%(b/r)</p>
<p>证毕。</p>
<p>有了公式，这题就是水题了。</p>
<pre class="brush:cpp ">/*
 * hdu2576/win.cpp
 * Created on: 2011-10-28
 * Author    : ben
 */
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#include &lt;ctime&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;deque&gt;
#include &lt;list&gt;
#include &lt;functional&gt;
#include &lt;numeric&gt;
#include &lt;cctype&gt;
using namespace std;
const int MOD = 20090524 * 6;

int main() {
#ifndef ONLINE_JUDGE
    freopen("data.in", "r", stdin);
#endif
    int T, n;
    long long ans;
    scanf("%d", &amp;T);
    while (T--) {
        scanf("%d", &amp;n);
        ans = n;
        ans *= n + 1;
        ans %= MOD;
        ans *= n + 2;
        ans %= MOD;
        ans /= 6;
        printf("%d\n", (int) ans);
    }
    return 0;
}</pre>
<p>解题转自：http://www.cnblogs.com/moonbay/archive/2011/10/28/2228125.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-83714">
<article class="comment" id="comment-83714">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919522773" rel="external nofollow">新用户791207</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-83714" rel="nofollow"><time datetime="2017-04-12T22:38:37+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>日本人总是会莫名其妙吓人一跳</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83713">
<article class="comment" id="comment-83713">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919522773" rel="external nofollow">新用户791207</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-83713" rel="nofollow"><time datetime="2017-04-12T22:38:37+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>日本人总是会莫名其妙吓人一跳</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23127">
<article class="comment" id="comment-23127">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCCat</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23127" rel="nofollow"><time datetime="2015-06-23T20:23:50+00:00" pubdate="">2015年6月23日 at 下午8:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>helpful！！ mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23126">
<article class="comment" id="comment-23126">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">0xc0de</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23126" rel="nofollow"><time datetime="2015-03-13T09:41:43+00:00" pubdate="">2015年3月13日 at 上午9:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23130">
<article class="comment" id="comment-23130">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">chengleisheng</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23130" rel="nofollow"><time datetime="2015-02-20T11:34:53+00:00" pubdate="">2015年2月20日 at 上午11:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23129">
<article class="comment" id="comment-23129">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yueyanglou</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23129" rel="nofollow"><time datetime="2015-02-13T05:24:35+00:00" pubdate="">2015年2月13日 at 上午5:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个系列很不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23131">
<article class="comment" id="comment-23131">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23131" rel="nofollow"><time datetime="2015-02-05T17:30:00+00:00" pubdate="">2015年2月5日 at 下午5:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有限自动机在ACM中是必须掌握的算法，实际上在面试当中几乎不可能让你单独的去实现这个算法，如果有题目要用到有限自动机来降低时间复杂度，那么这种面试题应该属于很难的级别了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23135">
<article class="comment" id="comment-23135">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">la0bei</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23135" rel="nofollow"><time datetime="2014-11-22T12:38:31+00:00" pubdate="">2014年11月22日 at 下午12:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个系列很不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23137">
<article class="comment" id="comment-23137">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">crazymage</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23137" rel="nofollow"><time datetime="2014-09-04T18:57:14+00:00" pubdate="">2014年9月4日 at 下午6:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>能告诉我为什么对于每一个m，cnt的值不用更新吗?这儿我想不通啊，谢谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23125">
<article class="comment" id="comment-23125">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23125" rel="nofollow"><time datetime="2014-09-01T18:20:22+00:00" pubdate="">2014年9月1日 at 下午6:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>代码不错，赞一个！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23136">
<article class="comment" id="comment-23136">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ailing</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23136" rel="nofollow"><time datetime="2014-08-10T04:52:11+00:00" pubdate="">2014年8月10日 at 上午4:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thank you very much</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23124">
<article class="comment" id="comment-23124">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wall_</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23124" rel="nofollow"><time datetime="2014-08-06T01:52:32+00:00" pubdate="">2014年8月6日 at 上午1:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，赞一个！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23133">
<article class="comment" id="comment-23133">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bernice1989</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23133" rel="nofollow"><time datetime="2014-07-29T11:04:25+00:00" pubdate="">2014年7月29日 at 上午11:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>隐藏最深的bug是(start+end)/2有可能上溢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23134">
<article class="comment" id="comment-23134">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sharp</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23134" rel="nofollow"><time datetime="2014-06-16T20:26:01+00:00" pubdate="">2014年6月16日 at 下午8:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>题目需要求解的是最小值，而且没有考虑可能存在环</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23128">
<article class="comment" id="comment-23128">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">489365227</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23128" rel="nofollow"><time datetime="2014-06-02T23:01:55+00:00" pubdate="">2014年6月2日 at 下午11:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我想整理一下leetcode的题解，站长能不能给权限</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23132">
<article class="comment" id="comment-23132">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhiqiang</a></span> on <a href="http://www.acmerblog.com/hdu-2576-another-sum-problem-4127.html#comment-23132" rel="nofollow"><time datetime="2014-05-15T22:53:41+00:00" pubdate="">2014年5月15日 at 下午10:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>The site You have write is very nicely prepared and quite insightful thanks for nice posta?|</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>