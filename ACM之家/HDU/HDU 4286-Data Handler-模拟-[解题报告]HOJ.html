<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">HDU 4286-Data Handler-模拟-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a></span><span class="i4">围观184次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7299" href="http://www.acmerblog.com/hdu-4286-data-handler-7299.html#comments" title="《HDU 4286-Data Handler-模拟-[解题报告]HOJ》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Data Handler</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
　　You are in charge of data in a company, so you are called "Data Handler". Different from the data in computer, the data you have are really in huge volume, and each data contains only one integer. All the data are placed in a line from left to right. There are two "hand" to handle the data, call hand "L" and hand "R". Every hand is between two adjacent data or at the end of the data line.<br/>　　In one day, the company gives you many commands to handle these data, so you should finish them one by one. At the beginning, there are N data, and hand "L" and "R" are in some positions. Each command is one the following formats:<br/>　　(1)MoveLeft L/R: it means that you should move the hand "L"/"R" left one data unit;<br/><center><img alt="circuits" src="http://www.acmerblog.com/img/1441033484929.jpg"/></center>
<p>　　(2)MoveRight L/R: it means that you should move the hand "L"/"R" right one data unit;<br/></p><center><img alt="circuits" src="http://www.acmerblog.com/img/1441033484991.jpg"/></center>
<p>　　(3)Insert L X: it means that you should insert the data that contains X at the right of the hand "L";<br/></p><center><img alt="circuits" src="http://www.acmerblog.com/img/1441033485058.jpg"/></center>
<p>　　(4)Insert R X: it means that you should insert the data that contains X at the left of the hand "R";<br/></p><center><img alt="circuits" src="http://www.acmerblog.com/img/1441033485146.jpg"/></center>
<p>　　(5)Delete L: it means that you should delete the one data at the right of the hand "L";<br/></p><center><img alt="circuits" src="http://www.acmerblog.com/img/1441033485239.jpg"/></center>
<p>　　(6)Delete R: it means that you should delete the one data at the left of the hand "R";<br/></p><center><img alt="circuits" src="http://www.acmerblog.com/img/1441033485326.jpg"/></center>
<p>　　(7)Reverse: it means that you should reverse all the data between hand "L" and hand "R".<br/></p><center><img alt="circuits" src="http://www.acmerblog.com/img/1441033485417.jpg"/></center>
<p>　　After finish all the commands, you should record all the data from left to right. So please do it. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
　　The first line contains an integer T(1&lt;=T&lt;=10), the number of test cases.<br/>　　Then T test cases follow. For each test case, the first line contains an integer N(1&lt;=N&lt;=500000), the number of data at the beginning. The second line contains N integers, means the integer in each data, from left to right. The third line contains two integers L and R (1&lt;=L&lt;=R&lt;=N), the positions of hand "L" and hand "R". It means that hand "L" is at the left of the L-th data and hand "R" is at the right of the R-th data. The fourth line contains one integer M(1&lt;=M&lt;=500000), the number of commands. Then M lines follow, each line contains a command in the above format. All the integers in the data will in range [-10000,10000].<br/>　　It is guaranteed that there are always some data between hand "L" and "R", and if the hand is at the left/right end of the data line, it will not receive the command MoveLeft/MoveRight.<br/>　　Because of large input, please use scanf instead of cin. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
　　The first line contains an integer T(1&lt;=T&lt;=10), the number of test cases.<br/>　　Then T test cases follow. For each test case, the first line contains an integer N(1&lt;=N&lt;=500000), the number of data at the beginning. The second line contains N integers, means the integer in each data, from left to right. The third line contains two integers L and R (1&lt;=L&lt;=R&lt;=N), the positions of hand "L" and hand "R". It means that hand "L" is at the left of the L-th data and hand "R" is at the right of the R-th data. The fourth line contains one integer M(1&lt;=M&lt;=500000), the number of commands. Then M lines follow, each line contains a command in the above format. All the integers in the data will in range [-10000,10000].<br/>　　It is guaranteed that there are always some data between hand "L" and "R", and if the hand is at the left/right end of the data line, it will not receive the command MoveLeft/MoveRight.<br/>　　Because of large input, please use scanf instead of cin.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
5
1 2 3 4 5
1 5
5
MoveLeft R
Insert R 6
Reverse
Delete R
Insert L 7
5
6536 5207 2609 6604 -4046
1 3
5
Delete L
Insert R -9221
Reverse
Delete L
MoveRight L</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
7 6 4 3 2 5
2609 5207 6604 -4046</pre>
<p> <!-- problem end --></p>
<p>Data Handler</p>
<p><span style="color:#ff0000">题目：</span><a>http://acm.hdu.edu.cn/showproblem.php?pid=4286</a></p>
<p><span style="color:#3366ff">题意：</span>给你一个数字串和一些操作指令，问你执行完操作后的数字串是什么。</p>
<p><span style="color:#cc33cc">题解：</span>双向链表模拟。就是要判断第i个结点的前后结点分别是什么比较困难，这个问题可以通过给左指针前1位加个指针，右指针后1位加个指针解决。</p>
<p>ps:打代码一定要细心，特别是这种模拟题。T^T</p>
<p>代码：</p>
<pre class="brush:cpp" name="code">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
using namespace std;
struct node
{
    int value;
    int pre,next;
} num[1000005];
int l,ll,r,rr,cnt;
void MoveLefe()
{
    char ch[5];
    scanf("%s",ch);
    if(ch[0]=='L')
    {
        if(num[ll].pre==l)
        {
            l=ll;
            ll=num[ll].next;
        }
        else
        {
            l=ll;
            ll=num[ll].pre;
        }
    }
    else
    {
        if(num[r].pre==rr)
        {
            rr=r;
            r=num[r].next;
        }
        else
        {
            rr=r;
            r=num[r].pre;
        }
    }
}
void MoveRight()
{
    char ch[5];
    scanf("%s",ch);
    if(ch[0]=='L')
    {
        if(num[l].pre==ll)
        {
            ll=l;
            l=num[l].next;
        }
        else
        {
            ll=l;
            l=num[l].pre;
        }
    }
    else
    {
        if(num[rr].pre==r)
        {
            r=rr;
            rr=num[rr].next;
        }
        else
        {
            r=rr;
            rr=num[rr].pre;
        }
    }
}
void Insert()
{
    char ch[5];
    int value;
    scanf("%s%d",ch,&amp;value);
    if(ch[0]=='L')
    {
        num[cnt].pre=ll;
        num[cnt].next=l;
        if(num[ll].pre==l) num[ll].pre=cnt;
        else               num[ll].next=cnt;
        if(num[l].pre==ll) num[l].pre=cnt;
        else               num[l].next=cnt;
        l=cnt++;
        num[l].value=value;
    }
    else
    {
        num[cnt].pre=rr;
        num[cnt].next=r;
        if(num[rr].pre==r) num[rr].pre=cnt;
        else               num[rr].next=cnt;
        if(num[r].pre==rr) num[r].pre=cnt;
        else               num[r].next=cnt;
        r=cnt++;
        num[r].value=value;
    }
}
void Delete()
{
    char ch[5];
    int next;
    scanf("%s",ch);
    if(ch[0]=='L')
    {
        if(num[l].pre==ll) next=num[l].next;
        else               next=num[l].pre;
        if(num[ll].pre==l)  num[ll].pre=next;
        else               num[ll].next=next;
        if(num[next].pre==l) num[next].pre=ll;
        else                 num[next].next=ll;
        l=next;
    }
    else
    {
        if(num[r].pre==rr) next=num[r].next;
        else               next=num[r].pre;
        if(num[rr].pre==r)  num[rr].pre=next;
        else               num[rr].next=next;
        if(num[next].pre==r) num[next].pre=rr;
        else                 num[next].next=rr;
        r=next;
    }
}
void Reverse()
{
    if(num[r].pre==rr) num[r].pre=ll;
    else               num[r].next=ll;
    if(num[l].pre==ll) num[l].pre=rr;
    else               num[l].next=rr;
    if(num[ll].pre==l) num[ll].pre=r;
    else               num[ll].next=r;
    if(num[rr].pre==r) num[rr].pre=l;
    else               num[rr].next=l;
    l=l^r;
    r=l^r;
    l=l^r;
}
void out(int n)
{
    bool first=true;
    int pre=0;
    for(int i=num[0].next;i!=n+1;)
    {
        if(first)
        {
            printf("%d",num[i].value);
            first=false;
        }
        else printf(" %d",num[i].value);
        if(num[i].next!=pre)
        {
            pre=i;
            i=num[i].next;
        }
        else
        {
            pre=i;
            i=num[i].pre;
        }
    }
    printf("\n");
}
int main()
{
    int cas,n,m;
    char s[20];
    scanf("%d",&amp;cas);
    for(; cas--;)
    {
        scanf("%d",&amp;n);
        cnt=n+2;
        for(int i=1; i&lt;=n; ++i)
        {
            scanf("%d",&amp;num[i].value);
            num[i].pre=i-1;
            num[i].next=i+1;
        }
        scanf("%d%d",&amp;l,&amp;r);
        num[0].pre=0;
        num[0].next=1;
        num[n+1].pre=n;
        ll=num[l].pre;
        rr=num[r].next;
        scanf("%d",&amp;m);
        for(; m--;)
        {
            scanf("%s",s);
            if(strcmp(s,"MoveLeft")==0)
                MoveLefe();
            else if(strcmp(s,"MoveRight")==0)
                MoveRight();
            else if(strcmp(s,"Insert")==0)
                Insert();
            else if(strcmp(s,"Delete")==0)
                Delete();
            else if(strcmp(s,"Reverse")==0)
                Reverse();
        }
        out(n);
    }
    return 0;
}
</pre>
<p>
来源：<a>http://blog.csdn.net/acm_ted/article/details/7961812</a></p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/acm_ted/article/details/7961812</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98923">
<article class="comment" id="comment-98923">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919520200" rel="external nofollow">新用户286040</a></span> on <a href="http://www.acmerblog.com/hdu-4286-data-handler-7299.html#comment-98923" rel="nofollow"><time datetime="2017-04-20T14:27:52+00:00" pubdate="">2017年4月20日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>ABC轮着按不行吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68626">
<article class="comment" id="comment-68626">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521640" rel="external nofollow">新用户580582</a></span> on <a href="http://www.acmerblog.com/hdu-4286-data-handler-7299.html#comment-68626" rel="nofollow"><time datetime="2017-04-11T07:10:17+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>垃    圾    中     国     动    漫     太    垃       圾         出    一 季  要 等 上  1     年    以    上    时    间</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>