<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>09-17</div>
<div class="tit"><h1 class="entry-title">HDU 4710-Balls Rearrangement-模拟-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a></span><span class="i4">围观69次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7755" href="http://www.acmerblog.com/hdu-4710-balls-rearrangement-7755.html#comments" title="《HDU 4710-Balls Rearrangement-模拟-[解题报告]HOJ》上的评论">一条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h1 style="color:rgb(26,92,200); text-align:center; font-family:'Times New Roman'">
Balls Rearrangement</h1>
<p><span style="font-family:'Times New Roman'; font-size:14px"><strong><span style="font-family:Arial; font-size:12px; color:green">Time Limit: 6000/3000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others)<br/>
Total Submission(s): 344    Accepted Submission(s): 165<br/>
</span></strong></span><br style="font-family:'Times New Roman'; font-size:14px"/><br/>
<br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
Bob has N balls and A boxes. He numbers the balls from 0 to N-1, and numbers the boxes from 0 to A-1. To find the balls easily, he puts the ball numbered x into the box numbered a if x = a mod A.<br/>
Some day Bob buys B new boxes, and he wants to rearrange the balls from the old boxes to the new boxes. The new boxes are numbered from 0 to B-1. After the rearrangement, the ball numbered x should be in the box number b if x = b mod B.<br/>
This work may be very boring, so he wants to know the cost before the rearrangement. If he moves a ball from the old box numbered a to the new box numbered b, the cost he considered would be |a-b|. The total cost is the sum of the cost to move every ball, and<br/>
 it is what Bob is interested in now.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
The first line of the input is an integer T, the number of test cases.(0&lt;T&lt;=50)<br/>
Then T test case followed. The only line of each test case are three integers N, A and B.(1&lt;=N&lt;=1000000000, 1&lt;=A,B&lt;=100000).</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
For each test case, output the total cost.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">3
1000000000 1 1
8 2 4
11 5 3</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">0
8
16</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Source</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2013%20ACM/ICPC%20Asia%20Regional%20Online%20%A1%AA%A1%AA%20Warmup&amp;source=1&amp;searchmode=source" style="color:rgb(26,92,200); text-decoration:none" target="_blank">2013 ACM/ICPC Asia Regional Online<br/>
 —— Warmup</a></div>
<div>
<pre class="brush:cpp" name="code">/*分析：对于i%a - i%b,每次加上从i开始和这个值(i%a - i%b)相等的一段,
这样i就不是每次+1,而是每次加上一段,如果碰到n大于a,b的最小公倍数，
则只需要计算a,b最小公倍数长度的总和，然后sum*=n/per + p;//p表示前i个数,p=n%per;

本题反思:刚开始自己就是这样想，但是想到a,b的最小公倍数可能很大,而且n也很大，
如果刚好碰到n&lt;per但是n很大;//per表示a,b最小公倍数，或者碰到n&gt;per但是per很大 
即使一段段的算也可能超时，所以一直不敢下手，一直在找寻更简单的推论。。结果一直没找到
下次碰到这种情况应该先试试，不能找不出别的更简单的方法就连自己想到的方法都不试试

现在认真分析发现时间复杂度好像是:O((a/b * min(per,n)/a));//假设a&gt;=b 
*/
#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;string&gt;
#include&lt;queue&gt;
#include&lt;algorithm&gt;
#include&lt;map&gt;
#include&lt;cmath&gt;
#include&lt;math.h&gt;
#include&lt;iomanip&gt;
#define INF 99999999
using namespace std;

const int MAX=10;
__int64 p;

__int64 Gcd(__int64 a,__int64 b){
    if(b == 0)return a;
    return Gcd(b,a%b);
}

__int64 calculate(__int64 n,__int64 a,__int64 b,__int64 num){
    p=0;
    __int64 la=a,lb=b,sum=0,l;
    for(__int64 i=0;i&lt;n;){
        l=min(la,min(lb,n-i));
        if(i+l&gt;num &amp;&amp; i&lt;num)p=sum+abs((int)(i%a - i%b))*(num-i);
        sum+=abs((int)(i%a - i%b))*l;
        i+=l;
        la=(la-l+a-1)%a+1;
        lb=(lb-l+b-1)%b+1;
    }
    return sum;
}

int main(){
    __int64 n,a,b,t;
    scanf("%I64d",&amp;t);
    while(t--){
        scanf("%I64d%I64d%I64d",&amp;n,&amp;a,&amp;b);
        __int64 gcd=Gcd(a,b),per=a*b/gcd,k=min(per,n);//求出最小公倍数 
        __int64 sum=calculate(k,a,b,n%k);
        if(n&gt;per)sum=(n/per)*sum+p;//p表示前n%k个i%a-i%b的和 
        printf("%I64d\n",sum);
    }
    return 0;
}</pre>
</div>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/xingyeyongheng/article/details/11527299</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97138">
<article class="comment" id="comment-97138">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919524797" rel="external nofollow">新用户994012</a></span> on <a href="http://www.acmerblog.com/hdu-4710-balls-rearrangement-7755.html#comment-97138" rel="nofollow"><time datetime="2017-04-20T00:52:30+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Nvidia</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>