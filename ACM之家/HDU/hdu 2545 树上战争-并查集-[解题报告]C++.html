<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-10</div>
<div class="tit"><h1 class="entry-title">hdu 2545 树上战争-并查集-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/data-struct/union-find" rel="category tag" title="查看并查集中的全部文章">并查集</a></span><span class="i4">围观1033次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4095" href="http://www.acmerblog.com/hdu-2545-4095.html#comments" title="《hdu 2545 树上战争-并查集-[解题报告]C++》上的评论">23 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">树上战争</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
给一棵树，如果树上的某个节点被某个人占据，则它的所有儿子都被占据，lxh和pfz初始时分别站在两个节点上，谁当前所在的点被另一个人占据，他就输了比赛，问谁能获胜 </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
输入包含多组数据<br/>每组第一行包含两个数N，M（N，M&lt;=100000），N表示树的节点数，M表示询问数，N=M=0表示输入结束。节点的编号为1到N。<br/>接下来N-1行，每行2个整数A，B(1&lt;=A,B&lt;=N)，表示编号为A的节点是编号为B的节点的父亲<br/>接下来M行，每行有2个数，表示lxh和pfz的初始位置的编号X，Y(1&lt;=X,Y&lt;=N,X!=Y)，lxh总是先移动</div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
输入包含多组数据<br/>每组第一行包含两个数N，M（N，M&lt;=100000），N表示树的节点数，M表示询问数，N=M=0表示输入结束。节点的编号为1到N。<br/>接下来N-1行，每行2个整数A，B(1&lt;=A,B&lt;=N)，表示编号为A的节点是编号为B的节点的父亲<br/>接下来M行，每行有2个数，表示lxh和pfz的初始位置的编号X，Y(1&lt;=X,Y&lt;=N,X!=Y)，lxh总是先移动
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
 2 1
 1 2
 1 2
 5 2
 1 2
 1 3
 3 4
 3 5
 4 2
 4 5
 0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
 lxh
 pfz
 lxh

提示：
本题输入、输出都很多，请使用scanf和printf代替cin、cout。</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">/*
    hdu 2545
    并查集

    求出点到根节点距离
*/
#include &lt;cstdio&gt;
#define maxn 100005
using namespace std;
int dis[maxn],father[maxn];
int m,n;
int find(int x)
{
    if(x == father[x])  return x;
    int temp=father[x];
    father[x]=find(father[x]);
    dis[x]+=dis[temp];
    return father[x];
}
int main()
{
    while(scanf("%d%d",&amp;n,&amp;m))
    {
        if(n==0 &amp;&amp; m==0)    break;
        for(int i=1; i&lt;=n; i++)
        {
            father[i]=i;
            dis[i]=0;
        }

        int a,b;
        for(int i=0; i&lt;n-1; i++)
        {
            scanf("%d%d",&amp;a,&amp;b);
            father[b]=a;
            dis[b]=1;
        }

        for(int i=0; i&lt;m; i++)
        {
            scanf("%d%d",&amp;a,&amp;b);
            find(a);
            find(b);
            //printf("father:%d %d\n",father[a],father[b]);
            //printf("dis:%d %d\n",dis[a],dis[b]);
            if(dis[a] &lt;= dis[b])    printf("lxh\n");
            else    printf("pfz\n");
        }
    }
}</pre>
<p></p>
<p>解题转自：http://blog.csdn.net/leoalwei/article/details/8889715</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-83870">
<article class="comment" id="comment-83870">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83870" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83869">
<article class="comment" id="comment-83869">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83869" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-83868">
<article class="comment" id="comment-83868">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83868" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83867">
<article class="comment" id="comment-83867">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83867" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-83866">
<article class="comment" id="comment-83866">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83866" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83865">
<article class="comment" id="comment-83865">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83865" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-83864">
<article class="comment" id="comment-83864">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83864" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83863">
<article class="comment" id="comment-83863">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83863" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-83862">
<article class="comment" id="comment-83862">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516766" rel="external nofollow">新用户161612</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-83862" rel="nofollow"><time datetime="2017-04-12T23:52:07+00:00" pubdate="">2017年4月12日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对哦···老唐可能不想更了吧···</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-22936">
<article class="comment" id="comment-22936">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">water160</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-22936" rel="nofollow"><time datetime="2015-05-19T03:08:16+00:00" pubdate="">2015年5月19日 at 上午3:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>a是根先忽略掉，递归子树。剩下前缀bejkcfghid和后缀jkebfghicd，分拆的原则的是每个子树前缀和后缀的节点个数是一样的，根节点出现在前缀的第一个，后缀的最后一个。根节点b出现后缀的第四个位置，则第一部分为四个节点，前缀bejk，后缀jkeb，剩下的c出现在后缀的倒数第2个，就划分为cfghi和 fghic，第3部分就为c、c</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45681">
<article class="comment" id="comment-45681">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lint</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45681" rel="nofollow"><time datetime="2015-02-11T09:16:40+00:00" pubdate="">2015年2月11日 at 上午9:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不是有公式吗？何不直接计算</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45676">
<article class="comment" id="comment-45676">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ailing</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45676" rel="nofollow"><time datetime="2014-12-23T22:33:16+00:00" pubdate="">2014年12月23日 at 下午10:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实不需要用LCA，用DFS+vector更简单</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45683">
<article class="comment" id="comment-45683">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bluesky</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45683" rel="nofollow"><time datetime="2014-10-24T07:06:06+00:00" pubdate="">2014年10月24日 at 上午7:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45684">
<article class="comment" id="comment-45684">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Klaus</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45684" rel="nofollow"><time datetime="2014-10-04T00:38:38+00:00" pubdate="">2014年10月4日 at 上午12:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给力！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45677">
<article class="comment" id="comment-45677">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jandk</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45677" rel="nofollow"><time datetime="2014-10-01T01:17:33+00:00" pubdate="">2014年10月1日 at 上午1:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>看来学好代数很重要啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45675">
<article class="comment" id="comment-45675">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xrjervis</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45675" rel="nofollow"><time datetime="2014-07-27T06:13:21+00:00" pubdate="">2014年7月27日 at 上午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>&amp;amp;这是C语言？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45682">
<article class="comment" id="comment-45682">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CHEATBEATER</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45682" rel="nofollow"><time datetime="2014-07-17T14:05:56+00:00" pubdate="">2014年7月17日 at 下午2:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是什么鬼，怎么多头文件</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45679">
<article class="comment" id="comment-45679">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">biantiao</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45679" rel="nofollow"><time datetime="2014-06-26T14:07:17+00:00" pubdate="">2014年6月26日 at 下午2:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一段代码中：<br/>
 next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/>  = next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> ;<br/>
明显不对吧，应该是 next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =j;才对</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-22938">
<article class="comment" id="comment-22938">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ding Qiangyuan</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-22938" rel="nofollow"><time datetime="2014-06-10T08:21:19+00:00" pubdate="">2014年6月10日 at 上午8:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>面霸网。www.51mx.org</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45678">
<article class="comment" id="comment-45678">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Monkey_Sun</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45678" rel="nofollow"><time datetime="2014-04-09T05:36:15+00:00" pubdate="">2014年4月9日 at 上午5:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢支持！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-22937">
<article class="comment" id="comment-22937">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Silence.L</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-22937" rel="nofollow"><time datetime="2014-03-28T04:06:00+00:00" pubdate="">2014年3月28日 at 上午4:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>非常不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-22939">
<article class="comment" id="comment-22939">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Riddick</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-22939" rel="nofollow"><time datetime="2014-03-11T17:38:25+00:00" pubdate="">2014年3月11日 at 下午5:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的思路，可以借鉴</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45680">
<article class="comment" id="comment-45680">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">missliuxin</a></span> on <a href="http://www.acmerblog.com/hdu-2545-4095.html#comment-45680" rel="nofollow"><time datetime="2014-02-14T19:07:26+00:00" pubdate="">2014年2月14日 at 下午7:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法好！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>