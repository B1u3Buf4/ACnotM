<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>01-26</div>
<div class="tit"><h1 class="entry-title">hdu 2434 Let’s play UNO[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观2833次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3898" href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comments" title="《hdu 2434 Let’s play UNO[解题报告]C++》上的评论">9 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Let’s play UNO</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Uno is a famous card game played with a specially printed deck. It’s very<br/>popular as a funny game in a party. <br/>A so-called "official rules" is presented at the Wikipedia, but there are a lot of different extended rules all over the <br/>world according to their specific needs. 
<p><img src="http://www.acmerblog.com/img/1390951087040.jpg"/></p>
<p>      In this problem, you are required to obey our rules introduced below:<br/>      The Uno deck consists of cards of 4 colors: red(R), green(G), blue(B), and yellow(Y). <br/>Each color has two kinds of cards, number cards and action cards. <br/>The ranks in number cards are 0-9. There are 3 "action" cards in each color, labeled "skip"(S), "draw two"(D), and "reverse"(R). <br/>The functions of the actions will be described afterwards. <br/>For each color, there are two copies of each positive number card and action card, but only one zero card, producing 25 cards in total.<br/>      Besides, there are also special black action cards called "wild cards", "wild"(WC) and "wild draw four"(WF). <br/>There are four "wild" and "wild draw four" cards each. Hence, there are 108 cards in total.<br/>      In this problem, a card is marked with an ID of two characters length, the first is the color (R, G, B, Y, W) while the second is the rank (0-9, S, D, R, C, F). <br/>For example, the ID of red 2 is R2, the yellow reverse is YR, the wild cards are WC and WF.<br/>      Supposed there are n players numbered from 1 to n clockwise. <br/>Before playing, players take turns(in the order of 1, 2, … n) to pick seven successive cards from the stock. <br/>The top card of the remaining stock is exposed to start the game, treated as if player 1 dropped that card. <br/>The exposed card will never be WC or WF in this problem. <br/>Then the game begins clockwise (next player is 2), or counter-clockwise (next player is n) if the top exposed card is a reverse. <br/>      At each turn, a player may drop a card from their hand that matches the color or rank of the top exposed card (e.g., if the top card is R3, you can drop R5 or G3; <br/>if the top card is RD, you can drop R3 or GD) or play a WC. <br/>What’s more, if the player has a WF and no other legal cards to drop, he can drop the WF. <br/>Then the card dropped just now becomes the top exposed card.<br/>      If a player has no legal cards, he must draw the top card of the stock and place it in his hand. <br/>After dropping a single card or drawing, the next player clockwise takes a turn, or counter-clockwise when the reverse is in effect.<br/>      When a player drops down to only one card, that player is required to say "uno" to warn other players. <br/>The game ends when a player drops all his/her cards, or the stock is emptied but the current player has to draw a card. <br/>If the last card is an action card, the special effect still occurs.<br/>      When the game ends, all players count the number of points pertaining to the values of the cards in their hands. <br/>Number cards worth the face value on them, colored special cards worth twenty, and wilds worth fifty, e.g., R2 worth 2, G0 worth 0, BD and YS worth 20, WC and WF worth 50.<br/>      The descriptions of the action cards:</p>
<p> <img src="http://www.acmerblog.com/img/1390951087368.jpg"/></p>
<p>      Now here comes the problem. <br/>There are N people playing Uno under the rules mentioned above. Given the sequence of the 108 cards of the stock, you are asked to simulate a Uno game. <br/>      At each turn, the player will always drop a card if permitted. <br/>If there are more than one choices, the player will drop the card with the largest point. <br/>If still a tie, he will choose the one whose ID is the smallest alphabetical order.<br/>      When a player drops WC or WF, he has to name a color. <br/>The first time he will name red, the second time he will name green, the third time blue, the fourth time yellow, the fifth time red again, and so on.<br/>      When the game ends, you should output the final score of each player, and we also want to know how many times each player calls "Uno".  </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of the input file contains a single number: the number of test <br/>cases to follow. Each test case has two lines:<br/>The first line contains the number of players N , with 2&lt;=N&lt;=10.<br/>The second line contains 108 IDs of the Uno cards, separated by one space. <br/>Each ID is two characters long as introduced in the description above. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line of the input file contains a single number: the number of test <br/>cases to follow. Each test case has two lines:<br/>The first line contains the number of players N , with 2&lt;=N&lt;=10.<br/>The second line contains 108 IDs of the Uno cards, separated by one space. <br/>Each ID is two characters long as introduced in the description above.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
2
R9 RD RD RS RS RR RR 
B0 B1 B1 B2 B2 B3 B3 
G0 GD GD GS GS GR GR G9 G9 G8 G8 G7 G7 G6 G6 G5 G5 G4 G4 G3 G3 G2 G2 G1 G1 
Y0 Y9 Y9 Y8 Y8 Y7 Y7 Y6 Y6 Y5 Y5 Y4 Y4 Y3 Y3 Y2 Y2 Y1 Y1 YD YD YS YS YR YR 
R9 R8 R8 R7 R7 R6 R6 R5 R5 R4 R4 R3 R3 R2 R2 R1 R1 R0 
B4 B4 B5 B5 B6 B6 B7 B7 B8 B8 B9 B9 BD BD BS BS BR BR 
WC WC WC WC WF WF WF WF</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
249 0
0 1
<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
The process of this game is:
G0(exposed) 
-&gt; B0(Player 2)		-&gt; Draw GD(Player 1)		-&gt; B3(Player 2) 
-&gt;Draw GD(Player 1)	-&gt; B3(Player 2) 			-&gt; Draw GS(Player 1)
-&gt; B2(Player 2)		-&gt; Draw GS(Player 1)		-&gt; B2(Player 2)
-&gt; Draw GR(Player 1)	-&gt; B1, call “Uno”(Player 2)	-&gt; Draw GR(Player 1) 
-&gt; B1(Player 2), end.
Score of player 1: 20*12(6 red action cards and 6 green action cards)+9(R9)

</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">/*This Code is Submitted by billforum for Problem 2434 at 2012-01-30 17:11:48*/
#include &lt;iostream&gt;
#include &lt;queue&gt;
#include &lt;memory.h&gt;
using namespace std;

struct point
{
        int length;//朋友的个数
        int step;
        bool visit;
        int f[1001];//存放朋友的号码
        int num;
};

point data[1001];
bool know[1001][1001];//标识两人认识不
int main(int args,char **argv)
{
        int g,n,gn,ntmp,ans=-1;
        int atmp[1001];
        
        while(cin&gt;&gt;g&gt;&gt;n)
        {
                if(g==0&amp;&amp;n==0) break;
//初始化
 for(int i=0;i&lt;n;i++)
                {
                        data[i].length=0;
                        data[i].step=0;
                        data[i].visit=0;
                        data[i].num=i;
                        for(int j=0;j&lt;1001;j++)
                                data[i].f[j]=-1;
                }
                ans=-1;
                for(int i=0;i&lt;1001;i++)
                        for(int j=0;j&lt;1001;j++)
                                know[i][j]=0;
//对输入数据进行处理，构造关系
 for(int i=0;i&lt;g;i++)
                {
                        cin&gt;&gt;gn;
                        for(int j=0;j&lt;gn;j++)
                                cin&gt;&gt;atmp[j];
                        for(int k=0;k&lt;gn;k++)
                        {
                                int t=atmp[k];
                                for(int j=k+1;j&lt;gn;j++)
                                {
                                        int s=atmp[j];
                                        if(!know[t][s])
                                        {
                                        data[t].length++;
                                        data[s].length++;
                                        data[t].f[data[t].length-1]=s;
                                        data[s].f[data[s].length-1]=t;
                                        know[t][s]=1;
                                        know[s][t]=1;
                                        }
                                }
                        }
                }
                queue&lt;point&gt; list;
                data[0].visit=1;
                list.push(data[0]);
                while(!list.empty())
                {
                        point tmp=list.front();
                        if(tmp.num==n-1)
                        {
                                ans=tmp.step;
                                break;
                        }
//广搜
 for(int k=0;k&lt;tmp.length;k++)
                        {
                                int i=tmp.f[k];
                                if(data[i].visit) continue;
                                else
                                {
                                        data[i].visit=1;
                                        data[i].step=tmp.step+1;
                                        list.push(data[i]);
                                }
                        }
                        list.pop();
                }
                if(ans==-1) cout&lt;&lt;"I can never know wywcgs!"&lt;&lt;endl;
                else if(ans==1||ans==0) cout&lt;&lt;"I do know wywcgs!"&lt;&lt;endl;
                else
                {
                        cout&lt;&lt;"I can know wywcgs by at most "&lt;&lt;ans-1&lt;&lt;" person(s)!"&lt;&lt;endl;
                }
                
        }
        
        return 0;
}</pre>
<p> http://acm.hit.edu.cn/hoj/problem/view?id=2434</p>
<p>广搜思想，将每人认识的朋友存在一个变量中，然后在每个搜一遍。</p>
<p>解题转自：http://www.cnblogs.com/wuzhibin/archive/2012/01/30/2332237.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-45236">
<article class="comment" id="comment-45236">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">feifei003603</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-45236" rel="nofollow"><time datetime="2015-02-24T00:47:00+00:00" pubdate="">2015年2月24日 at 上午12:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不好意思，写错了．应该是　path[0]=0,  visited[V] = true;</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21956">
<article class="comment" id="comment-21956">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liuk</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-21956" rel="nofollow"><time datetime="2014-12-22T20:57:18+00:00" pubdate="">2014年12月22日 at 下午8:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已修改。一些字符在编辑的时候转义了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21957">
<article class="comment" id="comment-21957">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">raymanshf</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-21957" rel="nofollow"><time datetime="2014-10-17T12:21:42+00:00" pubdate="">2014年10月17日 at 下午12:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>辛苦了，顶</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21962">
<article class="comment" id="comment-21962">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Rosamondwu</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-21962" rel="nofollow"><time datetime="2014-07-04T09:48:44+00:00" pubdate="">2014年7月4日 at 上午9:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对于第一题，我的直觉告诉我换不换都一样，求指教</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21961">
<article class="comment" id="comment-21961">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jixiangniao993</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-21961" rel="nofollow"><time datetime="2014-06-14T23:18:03+00:00" pubdate="">2014年6月14日 at 下午11:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个后缀数组不是常用的那个.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21960">
<article class="comment" id="comment-21960">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bluesky</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-21960" rel="nofollow"><time datetime="2014-06-10T22:13:51+00:00" pubdate="">2014年6月10日 at 下午10:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21959">
<article class="comment" id="comment-21959">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aliens</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-21959" rel="nofollow"><time datetime="2014-05-11T23:57:25+00:00" pubdate="">2014年5月11日 at 下午11:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>较好的写法是 start+(end-start)/2</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21958">
<article class="comment" id="comment-21958">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123456789_xd</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-21958" rel="nofollow"><time datetime="2014-03-08T19:59:13+00:00" pubdate="">2014年3月8日 at 下午7:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>后面的掩码变量部分乍一看比较难理解，其实就是把32位按照一个整体来看待。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45237">
<article class="comment" id="comment-45237">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jdliyao</a></span> on <a href="http://www.acmerblog.com/hdu-2434-lets-play-uno-3898.html#comment-45237" rel="nofollow"><time datetime="2014-03-05T08:40:59+00:00" pubdate="">2014年3月5日 at 上午8:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>楼主 为什么输入的形式都不对  题目是不是弄错了？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>