<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-24</div>
<div class="tit"><h1 class="entry-title">HDU 4395-D-mail-动态规划-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a>, <a href="http://www.acmerblog.com/category/geometry/analytic-geometry" rel="category tag" title="查看解析几何中的全部文章">解析几何</a></span><span class="i4">围观143次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7406" href="http://www.acmerblog.com/hdu-4395-d-mail-7406.html#comments" title="《HDU 4395-D-mail-动态规划-[解题报告]HOJ》上的评论">3 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">D-mail</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
To control the world, which is the ambition of Ryntarou Okabe, a mad scientist, is a problem that both of technology and wisdom are needed to handle it. After long time of experiment, Okabe eventually invented a strange machine, Telephone Oven, which can be used to send mails to the past! The mail is called D-mail in short. D-mail can be used to change the future of the world, but it cannot change it as what Okabe thinks exactly. According to the theory of time travel, the future of the world can be described by a real number, which is called Divergence. Now, Okabe has already calculated the Divergence that represents the world in which Okabe takes the control of the whole world. He calls it Steins Gate. There are kinds of D-mails with different content. And he has got the influence each kind of D-mail has to the Divergence. Now he wants to change the Divergence to a number as close to the Steins Gate as possible by selecting several kinds of D-mail, while each kind of D-mail cannot be used more than once. (He can choose 0 D-mail.)<br/><center><img alt="Digital Square" src="http://www.acmerblog.com/img/1441112410590.jpg"/></center>
<p>But if he changes the divergence too greatly that it becomes bigger than 2 or equals 2 during the process he send D-mail, then will he be trapped in the infinity maze of time and be "corrected" by the world itself, so he should choose the best order to send the D-mail so as to keep alive before he achieves his goal. Can you help him calculate the best result he can get? The original Divergence is 0. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line contains an integer T, which represents the number of test cases.<br/>For each test, the first line contains a real number D (-1&lt;D&lt;2), Stains Gate and an integer N(0&lt;N&lt;=200 ),represents the number of the kinds of D-mails. For the next N lines, each line contains a real number (which is no lesser than -0.1 and no bigger than 2)showing the influence of this D-mail to the Divergence. (all real number in the input file are written with exactly four digits after a decimal point.) </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line contains an integer T, which represents the number of test cases.<br/>For each test, the first line contains a real number D (-1&lt;D&lt;2), Stains Gate and an integer N(0&lt;N&lt;=200 ),represents the number of the kinds of D-mails. For the next N lines, each line contains a real number (which is no lesser than -0.1 and no bigger than 2)showing the influence of this D-mail to the Divergence. (all real number in the input file are written with exactly four digits after a decimal point.)</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
0.1234 2
0.1211
0.0023
-0.1234 2
0.1211
0.0023</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
0.1234
0.0000</pre>
<p> <!-- problem end --></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
<strong>题目链接：</strong><a style="color:rgb(202,0,0); text-decoration:none" target="_blank"><span style="color:rgb(51,0,153)">Click here~~</span></a>
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; font-weight:bold">
题意：</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
给 n 个数字，选取一些取它们的和 S，取和的过程中 S 不能超过2，求出最接近目标数字 D 的 S。（数字均为 4 位小数）</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
<span style="font-weight:bold">解题思路：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
很明显的 dp 模型，状态 dp[i][j] 表示前 i 个数字是否能取到和为 j 的情况。</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
由于条件的限制，第一维可以滚动，第二维的有效区间为 [-20,2] ， 映射成整数是 [-200000,20000]，再向右平移得到 [0,220000]。</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
由于 “取和的过程中 S 不能超过2” ，那么采取贪心的策略，先取小的，即对 w 排序后再 dp。</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
需要注意的是：1、<span style="font-family:Arial; font-size:14px; line-height:26px">double 转 int 时还要加个 eps。 2、</span>由于使用了滚动数组，当 w[i] 为负数时 循环的方向要改变。</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
思路明朗后，代码也不难。</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">
</p><pre class="brush:cpp" name="code">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;algorithm&gt;

using namespace std;

const int N = 2e5 + 2e4;

const int shift = 2e5;

bool reach[N];

int w[205];

inline int read(){
    double x;
    scanf("%lf",&amp;x);
    if(x &gt; 0)
        return x * 10000 + 1e-8;
    else
        return x * 10000 - 1e-8;
}

int main()
{
    int T,n;
    scanf("%d",&amp;T);
    while(T--)
    {
        memset(reach,false,sizeof(reach));
        int goal = read();
        scanf("%d",&amp;n);
        for(int i=0;i&lt;n;i++)
            w[i] = read();
        sort(w,w+n);
        reach[ 0 + shift ] = true;
        for(int i=0;i&lt;n;i++)
        {
            bool f = w[i] &gt; 0;
            if(f)
            {
                for(int j=N-1-w[i];j&gt;=0;j--)
                    if(reach[j])
                        reach[ j + w[i] ] = true;
            }
            else
            {
                for(int j=-w[i];j&lt;N;j++)
                    if(reach[j])
                        reach[ j + w[i] ] = true;
            }
        }
        int i = goal + shift , j = 0;
        int ans = -1;
        while(1)
        {
            if(i-j &gt;= 0 &amp;&amp; reach[i-j])
            {
                ans = i - j;
                break;
            }
            if(i+j &lt; N &amp;&amp; reach[i+j])
            {
                ans = i + j;
                break;
            }
            ++j;
        }
        printf("%.4f\n",(ans-shift)/10000.0);
    }
    return 0;
}
</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/dgq8211/article/details/12746797</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98163">
<article class="comment" id="comment-98163">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919526134" rel="external nofollow">新用户554140</a></span> on <a href="http://www.acmerblog.com/hdu-4395-d-mail-7406.html#comment-98163" rel="nofollow"><time datetime="2017-04-20T11:47:10+00:00" pubdate="">2017年4月20日 at 上午11:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我也对国外节日不感冒。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68102">
<article class="comment" id="comment-68102">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919528049" rel="external nofollow">新用户438096</a></span> on <a href="http://www.acmerblog.com/hdu-4395-d-mail-7406.html#comment-68102" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只是飘过了…  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68101">
<article class="comment" id="comment-68101">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919528049" rel="external nofollow">新用户438096</a></span> on <a href="http://www.acmerblog.com/hdu-4395-d-mail-7406.html#comment-68101" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只是飘过了…  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>