<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-05</div>
<div class="tit"><h1 class="entry-title">HDU 3524-Perfect Squares[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观246次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6485" href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comments" title="《HDU 3524-Perfect Squares[解题报告]HOJ》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Perfect Squares</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
A number x is called a perfect square if there exists an integer b <br/>satisfying x=b^2. There are many beautiful theorems about perfect squares in mathematics. Among which, Pythagoras Theorem is the most famous. It says that if the length of three sides of a right triangle is a, b and c respectively(a &lt; b &lt;c), then a^2 + b^2=c^2. <br/>In this problem, we also propose an interesting question about perfect squares. For a given n, we want you to calculate the number of different perfect squares mod 2^n. We call such number f(n) for brevity. For example, when n=2, the sequence of {i^2 mod 2^n} is 0, 1, 0, 1, 0……, so f(2)=2. Since f(n) may be quite large, you only need to output f(n) mod 10007. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line contains a number T&lt;=200, which indicates the number of test case.<br/>Then it follows T lines, each line is a positive number n(0&lt;n&lt;2*10^9). </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line contains a number T&lt;=200, which indicates the number of test case.<br/>Then it follows T lines, each line is a positive number n(0&lt;n&lt;2*10^9).</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
1
2</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case #1: 2
Case #2: 2</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
using namespace std;
#define mod 10007
const int N = 4;
struct Mat{
    int mat[N][N];
    void clear()
    {
        memset(mat,0,sizeof(mat));
    }
};

Mat mul(Mat A,Mat B)
{
    Mat C;
    C.clear();
    int i,j,k;
    for(i = 0;i &lt; N;i++)
        for(j = 0;j &lt; N;j++)
            for(k = 0;k &lt; N;k++)
                C.mat[i][j] = (C.mat[i][j]+A.mat[i][k]*B.mat[k][j])%mod;
    return C;
}

Mat fastm(Mat C,int n)
{
    if(n == 1)
        return C;
    else if(n&amp;1)
        return mul(fastm(mul(C,C),n&gt;&gt;1),C);
    else return fastm(mul(C,C),n&gt;&gt;1);
}

int main()
{
    int t,i,n;
    Mat A;
    A.clear();
    A.mat[0][0] = A.mat[1][1] = 2;
    A.mat[0][1] = A.mat[0][3] = A.mat[1][0] = A.mat[1][2] = 0;
    A.mat[2][0] = A.mat[2][1] = A.mat[2][2] = A.mat[3][0] = A.mat[3][1] = A.mat[3][3] = 0;
    A.mat[0][2] = A.mat[1][3] = A.mat[2][3] = A.mat[3][2] = 1;
    int f1 = 2,f2 = 2,a = -2,b = -1,fn;
    scanf("%d",&amp;t);
    for(i = 1;i &lt;= t;i++)
    {
        scanf("%d",&amp;n);
        if(n == 1 || n == 2)
        {
            printf("Case #%d: 2\n",i);
            continue;
        }
        Mat Ans = fastm(A,n-1);
        fn = ((Ans.mat[0][0]*f1)%mod+(Ans.mat[0][1]*f2)%mod+(Ans.mat[0][2]*a+Ans.mat[0][3]*b)%mod + mod)%mod;
        printf("Case #%d: %d\n",i,fn);
    }
    return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-75039">
<article class="comment" id="comment-75039">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919522402" rel="external nofollow">新用户024757</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-75039" rel="nofollow"><time datetime="2017-04-12T03:53:51+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好看，漓好帅啊，可惜更新太慢了，作者大人加油更更，爱死你了十三话快快快</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49646">
<article class="comment" id="comment-49646">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bernice1989</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49646" rel="nofollow"><time datetime="2015-07-16T01:39:49+00:00" pubdate="">2015年7月16日 at 上午1:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实不需要用LCA，用DFS+vector更简单</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49644">
<article class="comment" id="comment-49644">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49644" rel="nofollow"><time datetime="2015-07-13T10:02:34+00:00" pubdate="">2015年7月13日 at 上午10:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>抱歉，确实是弄错了，原来的代码是错误的，删掉了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49647">
<article class="comment" id="comment-49647">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Riddick</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49647" rel="nofollow"><time datetime="2015-06-30T05:38:18+00:00" pubdate="">2015年6月30日 at 上午5:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>We do not harbor that I couldn’t remove other individuals’ problems whenever this arrived at.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58924">
<article class="comment" id="comment-58924">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">room306</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-58924" rel="nofollow"><time datetime="2015-06-24T15:25:56+00:00" pubdate="">2015年6月24日 at 下午3:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>非常不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49641">
<article class="comment" id="comment-49641">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">winter</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49641" rel="nofollow"><time datetime="2015-06-03T22:22:35+00:00" pubdate="">2015年6月3日 at 下午10:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>面霸网。www.51mx.org</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49645">
<article class="comment" id="comment-49645">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">radish</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49645" rel="nofollow"><time datetime="2015-05-10T07:24:40+00:00" pubdate="">2015年5月10日 at 上午7:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是什么鬼，怎么多头文件</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49648">
<article class="comment" id="comment-49648">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiaoliubuer</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49648" rel="nofollow"><time datetime="2015-04-07T17:55:03+00:00" pubdate="">2015年4月7日 at 下午5:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49640">
<article class="comment" id="comment-49640">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hanyi</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49640" rel="nofollow"><time datetime="2015-03-27T10:09:20+00:00" pubdate="">2015年3月27日 at 上午10:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>3，求得所有的为的总和sum—-&gt;所有数的总和<br/>
printf( "Not Possible" );—-&gt;printf("impossible");<br/>
对吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63668">
<article class="comment" id="comment-63668">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">YangXiaoZhong</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-63668" rel="nofollow"><time datetime="2015-02-21T03:39:57+00:00" pubdate="">2015年2月21日 at 上午3:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有些说不通吧，只有1个孩子肯定是男孩了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49642">
<article class="comment" id="comment-49642">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">la0bei</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49642" rel="nofollow"><time datetime="2015-01-08T14:18:29+00:00" pubdate="">2015年1月8日 at 下午2:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>理解错了。。。。。谢谢楼主~~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30907">
<article class="comment" id="comment-30907">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hao555sky</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-30907" rel="nofollow"><time datetime="2015-01-01T14:43:39+00:00" pubdate="">2015年1月1日 at 下午2:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>I go through some of your put up and I uncovered a good deal of expertise from it. Many thanks for posting this sort of exciting posts</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49639">
<article class="comment" id="comment-49639">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gyouxu</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49639" rel="nofollow"><time datetime="2014-12-18T17:41:10+00:00" pubdate="">2014年12月18日 at 下午5:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>和编译器有关吧，我用的g++正常。头文件可能还需要一个&lt;string.h&gt;</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49643">
<article class="comment" id="comment-49643">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">everos</a></span> on <a href="http://www.acmerblog.com/hdu-3524-perfect-squares-6485.html#comment-49643" rel="nofollow"><time datetime="2014-12-17T05:27:16+00:00" pubdate="">2014年12月17日 at 上午5:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>刚开始学习，为啥会报错了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>