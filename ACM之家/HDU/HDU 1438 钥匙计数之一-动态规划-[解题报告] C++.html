<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-10</div>
<div class="tit"><h1 class="entry-title">HDU 1438 钥匙计数之一-动态规划-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/enumeration" rel="category tag" title="查看枚举中的全部文章">枚举</a>, <a href="http://www.acmerblog.com/category/dp2/state-dp" rel="category tag" title="查看状态DP中的全部文章">状态DP</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a>, <a href="http://www.acmerblog.com/category/basis/recurrence" rel="category tag" title="查看递推中的全部文章">递推</a></span><span class="i4">围观2093次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1917" href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comments" title="《HDU 1438 钥匙计数之一-动态规划-[解题报告] C++》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">钥匙计数之一</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
一把锁匙有N个槽，槽深为1，2，3，4。每锁匙至少有3个不同的深度且至少有1对相连的槽其深度之差为3。求这样的锁匙的总数。 </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
本题无输入 </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
对N&gt;=2且N&lt;=31，输出满足要求的锁匙的总数。</div>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
N=2: 0
N=3: 8
N=4: 64
N=5: 360
..
..
..
..
..
..
..

N=31: ...

注：根据Pku Judge Online 1351 Number of Locks或 Xi'an 2002 改编,在那里N&lt;=16</pre>
<p> <!-- problem end --></p>
<p style="margin-top:4px; margin-right:0px; margin-bottom:4px; margin-left:0px; padding-top:2px; padding-right:0px; padding-bottom:2px; padding-left:0px">
<span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; color:rgb(51,204,255); font-size:14px; line-height:26px; text-align:left">题目链接：</span></span></span></span><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2242" style="color:rgb(202,0,0); text-decoration:none; font-family:Arial; font-size:14px; line-height:26px; text-align:left" target="_blank"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4003" style="color:rgb(202,0,0); text-decoration:none; font-family:Arial; font-size:14px; line-height:26px; text-align:left"></a><a href="http://poj.org/problem?id=3107" style="color:rgb(202,0,0); text-decoration:none"></a><a href="http://poj.org/problem?id=2378" style="color:rgb(202,0,0); text-decoration:none"></a><a href="http://poj.org/problem?id=1655" style="color:rgb(202,0,0); text-decoration:none"></a><a href="http://poj.org/problem?id=3140" style="color:rgb(202,0,0); text-decoration:none"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1438">http://acm.hdu.edu.cn/showproblem.php?pid=1438</a></span></p>
<p style="margin-top:4px; margin-right:0px; margin-bottom:4px; margin-left:0px; padding-top:2px; padding-right:0px; padding-bottom:2px; padding-left:0px">
</p>
<p><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:Arial; color:rgb(51,204,255); font-size:14px; line-height:26px; text-align:left">题目大意</span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"><span style="color:#339999">：</span><span style="font-family:'Times New Roman'; font-size:15px">一把锁匙有N个槽，槽深为1，2，3，4。每锁匙至少有3个不同的深度且至少有1对相连的槽其深度之差为3。求这样的锁匙的总数。</span></span><br style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"/><br/>
<br style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"/><br/>
</span></span></span></span></p>
<p style="margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span style="color:rgb(51,204,255)">解题思路：</span>手贱用状态DP来写这递推题，用状态DP很好想但是编程略微复杂。用dp[i][j][k][s]来表示排到钥匙的第i个糟，i以前的槽深总状态为j，以槽深k结尾，s为0、1,0表示这之前没有深度之差为3的槽，1表示有深度之差为3的槽。然后枚举各种状态各种槽深，1-&gt;1，如果前后槽深之差为3则0-&gt;1,否则0-&gt;0.</p>
<p style="margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span style="color:rgb(51,204,255)"><br/>
</span></p>
<p style="margin-top:4px; margin-right:0px; margin-bottom:4px; margin-left:0px; padding-top:2px; padding-right:0px; padding-bottom:2px; padding-left:0px">
<span style="font-family:Arial; color:rgb(51,204,255); font-size:14px; line-height:26px; text-align:left">数据输出：</span></p>
<p><span style="color:rgb(255,0,0)"></span></p>
<p style="margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px">
<span style="color:rgb(204,0,0)"></span></p>
<p style="margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px">
<span style="color:rgb(255,0,0)">N=2: 0<br/>
N=3: 8<br/>
N=4: 64<br/>
N=5: 360<br/>
N=6: 1776<br/>
N=7: 8216<br/>
N=8: 36640<br/>
N=9: 159624<br/>
N=10: 684240<br/>
N=11: 2898296<br/>
N=12: 12164608<br/>
N=13: 50687208<br/>
N=14: 209961648<br/>
N=15: 865509848<br/>
N=16: 3553389280<br/>
N=17: 14538802248<br/>
N=18: 59313382032<br/>
N=19: 241378013240<br/>
N=20: 980200805824<br/>
N=21: 3973116354984<br/>
N=22: 16078778126448<br/>
N=23: 64978668500120<br/>
N=24: 262277950619296<br/>
N=25: 1057528710767880<br/>
N=26: 4260092054072400<br/>
N=27: 17147133531655928<br/>
N=28: 68968784226289024<br/>
N=29: 277229417298013800<br/>
N=30: 1113741009496217136<br/>
N=31: 4472142617535586136</span>
</p>
<p style="margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px">
</p>
<p><span style="font-family:Arial; color:rgb(51,204,255); font-size:14px; line-height:26px; text-align:left">代码：</span>
</p><pre class="brush:cpp ">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;


__int64 dp[40][40][40][3];
__int64 one[40], num[40];

int abs(int x) {

    return x &gt; 0 ? x : -x;
}

int main() {
    int i, j, k, s, cur, pre;
    int ii, jj, kk, ss,n;


    for (i = 0; i &lt;= 15; ++i)
        for (j = 0; j &lt; 4; ++j)
            if (i &amp; (1 &lt;&lt; j)) one[i]++;
    memset(dp,0,sizeof(dp));
    for (i = 0; i &lt; 4; ++i)
        dp[1][1 &lt;&lt; i][i][0] = 1;


    for (i = 2; i &lt;= 31; ++i) 
        for (j = 0; j &lt;= 15; ++j)
            for (k = 0; k &lt; 4; ++k) 
                for (s = 0; s &lt; 4; ++s) {
 
                    cur = (j | (1 &lt;&lt; s));
                    dp[i][cur][s][1] += dp[i - 1][j][k][1];
                    if (abs(k - s) == 3)
                        dp[i][cur][s][1] += dp[i - 1][j][k][0];
                    else dp[i][cur][s][0] += dp[i - 1][j][k][0];
                }

    
    for (i = 2; i &lt;= 31; ++i) {

        for (j = 0; j &lt;= 15; ++j)
            if (one[j] &gt;= 3) for (k = 0; k &lt; 4; ++k)
                    num[i] += dp[i][j][k][1];
        printf("N=%d: %I64d\n", i, num[i]);
    }

}</pre>
<p style="margin-top:4px; margin-right:0px; margin-bottom:4px; margin-left:0px; padding-top:2px; padding-right:0px; padding-bottom:2px; padding-left:0px">
<span style="font-family:Arial; color:rgb(51,204,255); font-size:14px; line-height:26px; text-align:left"><br/>
</span></p>
<p style="margin-top:4px; margin-right:0px; margin-bottom:4px; margin-left:0px; padding-top:2px; padding-right:0px; padding-bottom:2px; padding-left:0px">
<span style="font-family:Arial; color:rgb(51,204,255); font-size:14px; line-height:26px; text-align:left"><span style="color:rgb(255,0,0); font-family:Arial; font-size:14px; line-height:26px">本文ZeroClock原创，但可以转载，因为我们是兄弟。</span></span></p>
<p>解题报告转自：http://blog.csdn.net/woshi250hua/article/details/7743926</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-40995">
<article class="comment" id="comment-40995">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">digiworm</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-40995" rel="nofollow"><time datetime="2015-07-05T05:33:45+00:00" pubdate="">2015年7月5日 at 上午5:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>[…] 答案：http://www.acmerblog.com/interview-2-1549/ […]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13313">
<article class="comment" id="comment-13313">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ycaxgjd</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-13313" rel="nofollow"><time datetime="2015-05-12T02:35:47+00:00" pubdate="">2015年5月12日 at 上午2:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>神奇的网站</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61588">
<article class="comment" id="comment-61588">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaotongtest</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-61588" rel="nofollow"><time datetime="2015-02-24T12:50:55+00:00" pubdate="">2015年2月24日 at 下午12:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40994">
<article class="comment" id="comment-40994">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magicSky</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-40994" rel="nofollow"><time datetime="2015-02-19T05:53:12+00:00" pubdate="">2015年2月19日 at 上午5:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env python def cou(n): arr =  [1]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13312">
<article class="comment" id="comment-13312">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mechine</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-13312" rel="nofollow"><time datetime="2014-10-27T01:57:47+00:00" pubdate="">2014年10月27日 at 上午1:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13314">
<article class="comment" id="comment-13314">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sheyty</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-13314" rel="nofollow"><time datetime="2014-09-30T12:57:35+00:00" pubdate="">2014年9月30日 at 下午12:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>m^n % k 的算法写错了，没有人发现吗？？？正确的返回值应该是return b*m % k;</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13311">
<article class="comment" id="comment-13311">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HDC</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-13311" rel="nofollow"><time datetime="2014-09-03T15:20:54+00:00" pubdate="">2014年9月3日 at 下午3:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>代码可真够长的！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54802">
<article class="comment" id="comment-54802">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-54802" rel="nofollow"><time datetime="2014-06-30T19:54:28+00:00" pubdate="">2014年6月30日 at 下午7:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13310">
<article class="comment" id="comment-13310">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">huangduanjing</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-13310" rel="nofollow"><time datetime="2014-06-20T14:37:42+00:00" pubdate="">2014年6月20日 at 下午2:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这种二分还是比较经典！mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13308">
<article class="comment" id="comment-13308">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-13308" rel="nofollow"><time datetime="2014-05-18T20:55:31+00:00" pubdate="">2014年5月18日 at 下午8:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/good_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_org.gif"/> </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13309">
<article class="comment" id="comment-13309">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ailing</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-13309" rel="nofollow"><time datetime="2014-05-10T09:44:44+00:00" pubdate="">2014年5月10日 at 上午9:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>good !</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61590">
<article class="comment" id="comment-61590">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-61590" rel="nofollow"><time datetime="2014-02-19T09:39:50+00:00" pubdate="">2014年2月19日 at 上午9:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个应该是比较简单的解法了，如果有更好的办法可以告诉我</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61589">
<article class="comment" id="comment-61589">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Yaunxi</a></span> on <a href="http://www.acmerblog.com/hdu-1438-%E9%92%A5%E5%8C%99%E8%AE%A1%E6%95%B0%E4%B9%8B%E4%B8%80-1917.html#comment-61589" rel="nofollow"><time datetime="2013-12-29T05:54:10+00:00" pubdate="">2013年12月29日 at 上午5:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>