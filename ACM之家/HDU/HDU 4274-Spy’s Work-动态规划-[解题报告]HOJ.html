<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">HDU 4274-Spy’s Work-动态规划-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/tree-dp" rel="category tag" title="查看树形DP中的全部文章">树形DP</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观138次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7287" href="http://www.acmerblog.com/hdu-4274-spys-work-7287.html#comments" title="《HDU 4274-Spy’s Work-动态规划-[解题报告]HOJ》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Spy’s Work</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
I’m a manager of a large trading company, called ACM, and responsible for the market research. Recently, another trading company, called ICPC, is set up suddenly. It’s obvious that we are the competitor to each other now!<br/>To get some information about ICPC, I have learned a lot about it. ICPC has N staffs now (numbered from 1 to N, and boss is 1), and anybody has at most one superior. To increase the efficiency of the whole company, the company contains N departments and the ith department is led by the ith staff. All subordinates of the ith staff are also belong to the ith department.<br/>Last week, we hire a spy stealing into ICPC to get some information about salaries of staffs. Not getting the detail about each one, the spy only gets some information about some departments: the sum of the salaries of staff s working for the ith department is less than (more than or equal to) w. Although the some inaccurate information, we can also get some important intelligence from it.<br/>Now I only concerned about whether the spy is telling a lie to us, that is to say, there will be some conflicts in the information. So I invite you, the talented programmer, to help me check the correction of the information. Pay attention, my dear friend, each staff of ICPC will always get a salary even if it just 1 dollar! </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There are multiple test cases.<br/>The first line is an integer N. (1 &lt;= N &lt;= 10,000)<br/>Each line i from 2 to N lines contains an integer x indicating the xth staff is the ith staff’s superior(x&lt;i).<br/>The next line contains an integer M indicating the number of information from spy. (1 &lt;= M &lt;= 10,000)<br/>The next M lines have the form like (x &lt; (&gt; or =) w), indicating the sum of the xth department is less than(more than or equal to) w (1 &lt;= w &lt;=100,000,000) </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There are multiple test cases.<br/>The first line is an integer N. (1 &lt;= N &lt;= 10,000)<br/>Each line i from 2 to N lines contains an integer x indicating the xth staff is the ith staff’s superior(x&lt;i).<br/>The next line contains an integer M indicating the number of information from spy. (1 &lt;= M &lt;= 10,000)<br/>The next M lines have the form like (x &lt; (&gt; or =) w), indicating the sum of the xth department is less than(more than or equal to) w (1 &lt;= w &lt;=100,000,000)</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
5
1
1
3
3
3
1 &lt; 6
3 = 4
2 = 2

5
1
1
3
3
3
1 &gt; 5
3 = 4
2 = 2</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Lie
True</pre>
<p> <!-- problem end --></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">转载请注明出处，谢谢</span><a style="color:rgb(202,0,0); text-decoration:none; font-family:Arial; font-size:18px; line-height:26px; text-align:left"></a><a style="color:rgb(202,0,0); text-decoration:none; font-family:Arial; font-size:18px; line-height:26px; text-align:left">http://blog.csdn.net/acm_cxlove/article/details/7854526</a><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">      <br/>
 by—cxlove </span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">题目：给出一棵树，给出一些子树的权值关系，问是否矛盾</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left"><a>http://acm.hdu.edu.cn/showproblem.php?pid=4274</a> <br/>
</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">初始对于所有结点以及子树的下限为1，上限可能不确定</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">然后通过给出的不等式去更新上下界，之后进行树形DP，通过孩子的下界更新父节点的下界</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">再判断是否矛盾</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">注意当前节点当个的权值下限为1，该节点的下限为孩子下界的和+1</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left"></span></p>
<pre class="brush:cpp" name="code">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;map&gt;
#include&lt;cstring&gt;
#include&lt;cmath&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;
#include&lt;set&gt;
#define inf 110000000
#define M 10005
#define N 10005
#define Min(a,b) ((a)&lt;(b)?(a):(b))
#define Max(a,b) ((a)&gt;(b)?(a):(b))
#define pb(a) push_back(a)
#define mem(a,b) memset(a,b,sizeof(a))
#define LL long long
#define MOD 1000000007
using namespace std;
struct Node{
	int v,next;
}edge[N*2];
int n,start[N],tot;
int up[N],low[N];
void addedge(int u,int v){
	edge[tot].v=v;
	edge[tot].next=start[u];
	start[u]=tot++;
}
void _addedge(int u,int v){
	addedge(u,v);
	addedge(v,u);
}
bool ans;
void dfs(int u,int pre){
	if(ans) return;
	if(up[u]!=-1&amp;&amp;low[u]&gt;up[u]){ans=true;return;}
	int tmp=0;
	int leaf=1;
	for(int i=start[u];i!=-1;i=edge[i].next){
		int v=edge[i].v;
		if(v==pre) continue;
		dfs(v,u);
		leaf=0;
		tmp+=low[v];
	}
	if(leaf) return;
	low[u]=max(tmp+1,low[u]);
	if(up[u]!=-1&amp;&amp;low[u]&gt;up[u]) ans=true;
}
int main(){
	while(scanf("%d",&amp;n)!=EOF){
		tot=0;mem(start,-1);
		for(int i=2;i&lt;=n;i++){
			int u;
			scanf("%d",&amp;u);
			_addedge(u,i);
		}
		int m;
		for(int i=1;i&lt;=n;i++){low[i]=1;up[i]=-1;}
		scanf("%d",&amp;m);
		for(int i=0;i&lt;m;i++){
			int u,w;
			char str[5];
			scanf("%d%s%d",&amp;u,str,&amp;w);
			if(str[0]=='&lt;') up[u]=w-1;
			else if(str[0]=='&gt;') low[u]=w+1;
			else low[u]=up[u]=w;
		}
		ans=false;
		dfs(1,0);
		puts(ans?"Lie":"True");
	}
	return 0;
}

</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/acm_cxlove/article/details/7967135</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98935">
<article class="comment" id="comment-98935">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516572" rel="external nofollow">新用户139512</a></span> on <a href="http://www.acmerblog.com/hdu-4274-spys-work-7287.html#comment-98935" rel="nofollow"><time datetime="2017-04-20T14:27:53+00:00" pubdate="">2017年4月20日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个新闻我看过～大叔给警察补刀打死了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68641">
<article class="comment" id="comment-68641">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515809" rel="external nofollow">新用户059618</a></span> on <a href="http://www.acmerblog.com/hdu-4274-spys-work-7287.html#comment-68641" rel="nofollow"><time datetime="2017-04-11T07:10:17+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>可能作者死咯</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>