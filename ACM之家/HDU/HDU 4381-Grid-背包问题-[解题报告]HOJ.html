<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-24</div>
<div class="tit"><h1 class="entry-title">HDU 4381-Grid-背包问题-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/package" rel="category tag" title="查看背包问题中的全部文章">背包问题</a>, <a href="http://www.acmerblog.com/category/math/bignumber" rel="category tag" title="查看高精度计算中的全部文章">高精度计算</a></span><span class="i4">围观131次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7392" href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comments" title="《HDU 4381-Grid-背包问题-[解题报告]HOJ》上的评论">8 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Grid</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
　　There are n boxes in one line numbered 1 to n, at the beginning, all boxes are black. Two kinds of operations are provided to you:
<p>1 a<sub>i</sub> x<sub>i</sub> ：You can choose any x<sub>i</sub> black boxes in interval [1,a<sub>i</sub>], and color them white;<br/>2 a<sub>i</sub> x<sub>i</sub> ：You can choose any x<sub>i</sub> black boxes in interval [a<sub>i</sub>,n], and color them white;</p>
<p>　　lcq wants to know if she use these operations in optimal strategy, the maximum number of white boxes she can get, and if she get maximum white boxes, the minimum number of operations she should use.<br/>Tips:  <br/><strong>1. </strong> It is obvious that sometimes you can choose not to use some operations.<br/><strong>2. </strong> If the interval of one operation didn’t have enough black boxes, you can’t use this operation. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
　　The first line contains one integer T, indicating the number of test case.<br/>　　The first line of each test case contains two integers N (1 &lt;= N &lt;= 1000) and M (1&lt;=M&lt;=1000), indicating that there are N grids and M operations in total. Then M lines followed, each of which contains three integers s<sub>i</sub>(1&lt;=s<sub>i</sub>&lt;=2) , a<sub>i</sub> and x<sub>i</sub> (0 &lt;= x<sub>i</sub> &lt;= N,1&lt;=a<sub>i</sub>&lt;=N), si indicating the type of this operation, a<sub>i</sub> and x<sub>i</sub> indicating that the interval is [1,a<sub>i</sub>] or [a<sub>i</sub>,n](depending on s<sub>i</sub>), and you can choose x<sub>i</sub> black boxes and color them white. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
　　The first line contains one integer T, indicating the number of test case.<br/>　　The first line of each test case contains two integers N (1 &lt;= N &lt;= 1000) and M (1&lt;=M&lt;=1000), indicating that there are N grids and M operations in total. Then M lines followed, each of which contains three integers s<sub>i</sub>(1&lt;=s<sub>i</sub>&lt;=2) , a<sub>i</sub> and x<sub>i</sub> (0 &lt;= x<sub>i</sub> &lt;= N,1&lt;=a<sub>i</sub>&lt;=N), si indicating the type of this operation, a<sub>i</sub> and x<sub>i</sub> indicating that the interval is [1,a<sub>i</sub>] or [a<sub>i</sub>,n](depending on s<sub>i</sub>), and you can choose x<sub>i</sub> black boxes and color them white.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
5 2
2 3 3
1 3 3</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case 1: 3 1</pre>
<p> <!-- problem end --></p>
<p><span style="color:rgb(51,51,51); font-family:Arial; font-size:24px; line-height:26px; text-align:left">Brief Description:</span></p>
<p><span style="color:rgb(51,51,51); font-family:Arial; line-height:26px; text-align:left"><span style="font-size:18px">给定n个块，编号从1到n，以及m个操作，初始时n个块是白色。</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px">操作有2种形式：</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px">1 ai xi : 从[1,ai]选xi个块，将这些块涂白。</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px">2 ai xi：从[ai,n]选xi个块，将这些块涂白。</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px">可以忽略某些操作且如果区间内没有足够的黑块（黑块用于涂白），则不能进行这个操作。</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px"><span style="color:rgb(51,51,51); font-family:Arial; font-size:24px; line-height:26px; text-align:left; white-space:pre-wrap">Analysis:</span><br/>
</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px; white-space:pre-wrap">写写画画一看就知道这道题是一个背包问题。</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px; white-space:pre-wrap">一开始用“不恰好装满背包”方法，后来发现是错的（找到了错误数据）。</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px; white-space:pre-wrap">应该用更精确的“恰好装满背包”。</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px; white-space:pre-wrap">以下摘自题解：</span></span></p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px; white-space:pre-wrap"></span></span></p>
<p style="margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; line-height:1.4em; color:rgb(51,51,51); font-family:Tahoma,Verdana,STHeiTi,simsun,sans-serif; font-size:14px">
<strong>本题难点在于正确处理两种操作，不妨假设只有一种操作，那么这种操作如果是1的话那么就把操作按照a从小到大排序，每次都尽量往最左边涂，如果是2的话则类似的涂到最右边，但本题两种操作都出现了。</strong></p>
<p style="margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; line-height:1.4em; color:rgb(51,51,51); font-family:Tahoma,Verdana,STHeiTi,simsun,sans-serif; font-size:14px">
<strong>先考虑第一问:</strong></p>
<p style="margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; line-height:1.4em; color:rgb(51,51,51); font-family:Tahoma,Verdana,STHeiTi,simsun,sans-serif; font-size:14px">
<strong>我们把所有的操作按类别区分开，假设所有的1操作尽量用上能从1涂到a格子，所有的2操作尽量用上能从b格子涂到n，假设a&lt;b，那么答案显然是a+n-b+1。那么假设a&gt;=b，那么假设1操作从1涂到x，那么2操作一定会从n尽量往左边涂，直到x为止。最后两边的总和就是答案。</strong></p>
<p style="margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; line-height:1.4em; color:rgb(51,51,51); font-family:Tahoma,Verdana,STHeiTi,simsun,sans-serif; font-size:14px">
<strong>由上不难想到一个DP，l[i][j]表示用了前i种1操作，从1涂到j的最小操作数，转移l[i][j]=min(l[i][j],l[i-1][j-ope[i].x]+１)(ope[i].x&lt;=j&lt;=ope[i].a)，类似的，我们可以得到r[i][j]表示用2操作从j涂到n需要的最小操作数。dp复杂度O(n*m)。（这个背包也可以压缩一维，后面的l，r均为1维的状态）</strong></p>
<p style="margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; line-height:1.4em; color:rgb(51,51,51); font-family:Tahoma,Verdana,STHeiTi,simsun,sans-serif; font-size:14px">
<strong>那么我们倒着枚举涂色最大的数目，假设为k，这个数目必然由1操作贡献一部分，由2操作贡献一部分（也可能一个贡献全部，另一个为0），那么我们枚举1操作涂到了i，那么2操作必然涂到了n-(k-i)+1，如果l[i]和r[n-(k-i)+1]均有值，那么说明这个最大数目是可达的，即是第一问的答案。枚举复杂度O(n*n)。</strong></p>
<p style="margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; line-height:1.4em; color:rgb(51,51,51); font-family:Tahoma,Verdana,STHeiTi,simsun,sans-serif; font-size:14px">
<strong>再考虑第二问：</strong></p>
<p style="margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; line-height:1.4em; color:rgb(51,51,51); font-family:Tahoma,Verdana,STHeiTi,simsun,sans-serif; font-size:14px">
<strong>现在我们已经知道最大数目了，这个数目是由操作1和操作2一起贡献的，那么我们仍然可以枚举操作1涂到了i，那么操作2涂到了n-(ans-i)+1,如果l[i]和r[n-(k-i)+1]均有值，那么其和可以用来更新第二问的答案，最后第二问的答案为所有合法方案需操作数的最小值。枚举复杂度O(n*n)。</strong></p>
<p>代码如下：</p>
<p style="text-align:left"><span style="font-family:Arial; font-size:18px; color:#333333"><span style="line-height:26px; white-space:pre-wrap"></span></span></p>
<pre class="brush:cpp" name="code">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;

using namespace std;
const int maxn = 2005;
struct node{
    int aa,cor;
    node(){}
    node(int _aa,int _cor){
       aa = _aa;   cor = _cor;
    }
}x1[maxn],x2[maxn];
int n,m;
int dp1[maxn],dp2[maxn];
int sumx1,sumx2;

bool cmp(const node &amp;p,const node &amp;q){
    return p.aa &lt; q.aa;
}

int main()
{
    int cas,ta=1;
    scanf("%d",&amp;cas);
    while(cas--){
         int i,j;
         scanf("%d%d",&amp;n,&amp;m);

         sumx1 = sumx2 = 1;
         for(i=0; i&lt;m; i++){
             int key,yy,z;
             scanf("%d%d%d",&amp;key,&amp;yy,&amp;z);
             if(key == 1){
                x1[sumx1++] = node(yy,z);
             }else{
                x2[sumx2++] = node(n+1-yy,z);
             }
         }
         sort(x1+1,x1+sumx1,cmp);
         sort(x2+1,x2+sumx2,cmp);
         memset(dp1,0x3f,sizeof(dp1));
         memset(dp2,0x3f,sizeof(dp2));

         dp1[0] = dp2[0] = 0;
         for(i=1; i&lt;sumx1; i++){
             for(j=x1[i].aa; j&gt;=x1[i].cor; j--){
                dp1[j] = min(dp1[j],dp1[j-x1[i].cor]+1);
             }
         }// for

         for(i=1; i&lt;sumx2; i++){
             for(j=x2[i].aa; j&gt;=x2[i].cor; j--){
                dp2[j] = min(dp2[j],dp2[j-x2[i].cor]+1);
             }
         }// for

         int ans = 0,anssum = 0,tmp;
         for(i=1; i&lt;=n; i++){
            if(i == 3){
              tmp = 1;
            }
            for(j=0; j&lt;=i; j++){
               tmp = dp1[j] + dp2[i-j];
               if(tmp &lt;= m){
                  if(ans != i){
                    ans = i;   anssum = tmp;
                  }else if(tmp &lt; anssum){
                      anssum = tmp;
                  }
               }
            }
         }

         printf("Case %d: %d %d\n",ta++,ans,anssum);
    }
    return 0;
}
</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/linweiway67/article/details/7894046</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98176">
<article class="comment" id="comment-98176">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515771" rel="external nofollow">新用户248931</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-98176" rel="nofollow"><time datetime="2017-04-20T11:47:10+00:00" pubdate="">2017年4月20日 at 上午11:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>认可就转发…  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68146">
<article class="comment" id="comment-68146">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468264" rel="external nofollow">新用户560619</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-68146" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你说为“义举”就可以滥杀无辜？呵呵，“义举”还真是个万能词啊。。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68145">
<article class="comment" id="comment-68145">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468264" rel="external nofollow">新用户560619</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-68145" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你说为“义举”就可以滥杀无辜？呵呵，“义举”还真是个万能词啊。。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68144">
<article class="comment" id="comment-68144">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468264" rel="external nofollow">新用户560619</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-68144" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你说为“义举”就可以滥杀无辜？呵呵，“义举”还真是个万能词啊。。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68143">
<article class="comment" id="comment-68143">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468264" rel="external nofollow">新用户560619</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-68143" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你说为“义举”就可以滥杀无辜？呵呵，“义举”还真是个万能词啊。。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68142">
<article class="comment" id="comment-68142">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468264" rel="external nofollow">新用户560619</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-68142" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你说为“义举”就可以滥杀无辜？呵呵，“义举”还真是个万能词啊。。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68141">
<article class="comment" id="comment-68141">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468264" rel="external nofollow">新用户560619</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-68141" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你说为“义举”就可以滥杀无辜？呵呵，“义举”还真是个万能词啊。。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68140">
<article class="comment" id="comment-68140">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468264" rel="external nofollow">新用户560619</a></span> on <a href="http://www.acmerblog.com/hdu-4381-grid-7392.html#comment-68140" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你说为“义举”就可以滥杀无辜？呵呵，“义举”还真是个万能词啊。。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>