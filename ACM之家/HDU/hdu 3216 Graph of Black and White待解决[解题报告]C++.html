<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-07</div>
<div class="tit"><h1 class="entry-title">hdu 3216 Graph of Black and White待解决[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观640次</span><span class="i3"><a class="ds-thread-count" data-thread-key="5049" href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comments" title="《hdu 3216 Graph of Black and White待解决[解题报告]C++》上的评论">20 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Graph of Black and White</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Once upon a time, there was a graph. Actually, it was an undirected forest, i.e., an undirected graph without circles. There were N nodes in this forest, numbered from 1 to N inclusively, with each node colored black or white. Elves had been living in the forest for many years. Their homes were inside the nodes, and sometimes they would move their homes or visit other elves living in another node. However, they could only move between nodes that were connected by an edge or a path formed by several end-to-end connected edges. In other words, they could only move in the same tree. If two nodes were not connected, the elves could not travel between them. When they were passing a node, including the starting and the ending ones, they should use black or white magic power according to the color of the node. Waste is criminal, so during a journey the elves never pass a node twice. 
<p>The structure of the forest might change, when no elves were travelling. Two disconnected nodes might be connected by a new edge between them, or an existing edge might disappear, or the color of a node might change. Anyway, there would never be circles in the forest, so the forest remained a forest. <b>THUS HARMONY LONG LASTS!</b></p>
<p>Elves were intelligent. They knew everything happening in the forest. And they knew how much black and white magic power was used when they travel. Why? Because YY, the most intelligent one elf, simulated everything and told them. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
Input contains several test cases.
<p>For each test case, the first line contains two positive integers, N (N ≤ 10000) and M (M ≤ 100000), indicating the number of nodes in the graph and the number of operations that YY should simulate. At the beginning of his simulation, there were not any edge in the forest.</p>
<p>The following lines contains N space separated characters, each being ‘B’ or ‘W’ (quotes for clarity), the ith of which indicates the color of the node numbered i, black or white.</p>
<p>M lines follow, indicating the M operations to simulate. For each line, it will be one of the four types:</p>
<p>add u v<br/>The two nodes numbered u and v (1≤u, v≤N, and u≠v) are connected by a new edge. It is guaranteed that these two nodes are not connected before this operation.</p>
<p>del u v<br/>The edge between the two nodes numbered u and v (1≤u, v≤N, and u≠v) disappears. It is guaranteed that this edge exists before this operation.</p>
<p>set u c<br/>The color of the node numbered u (1≤u≤N) is set to c (c=’B’ or ‘W’, quotes for clarity).</p>
<p>query u v<br/>Now YY tells the elves the number of black and white nodes that have to be passed when travelling between nodes numbered u and v (1≤u, v≤N) inclusively, or tells them the journey is impossible. </p>
<p>Input ends with N=M=0. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
Input contains several test cases.
<p>For each test case, the first line contains two positive integers, N (N ≤ 10000) and M (M ≤ 100000), indicating the number of nodes in the graph and the number of operations that YY should simulate. At the beginning of his simulation, there were not any edge in the forest.</p>
<p>The following lines contains N space separated characters, each being ‘B’ or ‘W’ (quotes for clarity), the ith of which indicates the color of the node numbered i, black or white.</p>
<p>M lines follow, indicating the M operations to simulate. For each line, it will be one of the four types:</p>
<p>add u v<br/>The two nodes numbered u and v (1≤u, v≤N, and u≠v) are connected by a new edge. It is guaranteed that these two nodes are not connected before this operation.</p>
<p>del u v<br/>The edge between the two nodes numbered u and v (1≤u, v≤N, and u≠v) disappears. It is guaranteed that this edge exists before this operation.</p>
<p>set u c<br/>The color of the node numbered u (1≤u≤N) is set to c (c=’B’ or ‘W’, quotes for clarity).</p>
<p>query u v<br/>Now YY tells the elves the number of black and white nodes that have to be passed when travelling between nodes numbered u and v (1≤u, v≤N) inclusively, or tells them the journey is impossible. </p>
<p>Input ends with N=M=0.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3 8
B W B
query 1 2
add 1 2
add 2 3
query 1 3
del 2 3
add 1 3
set 1 W
query 3 2
0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
-1
2 1
1 2</pre>
<p> <!-- problem end --></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-78401">
<article class="comment" id="comment-78401">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514613" rel="external nofollow">新用户886451</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-78401" rel="nofollow"><time datetime="2017-04-12T12:30:17+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正则不行么***反正我无所谓都是登录的,但是APP什么时候更新呢,现在用APP多一些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-78400">
<article class="comment" id="comment-78400">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514613" rel="external nofollow">新用户886451</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-78400" rel="nofollow"><time datetime="2017-04-12T12:30:17+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正则不行么***反正我无所谓都是登录的,但是APP什么时候更新呢,现在用APP多一些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-78399">
<article class="comment" id="comment-78399">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514613" rel="external nofollow">新用户886451</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-78399" rel="nofollow"><time datetime="2017-04-12T12:30:17+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正则不行么***反正我无所谓都是登录的,但是APP什么时候更新呢,现在用APP多一些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-78398">
<article class="comment" id="comment-78398">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514613" rel="external nofollow">新用户886451</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-78398" rel="nofollow"><time datetime="2017-04-12T12:30:17+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正则不行么***反正我无所谓都是登录的,但是APP什么时候更新呢,现在用APP多一些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-78397">
<article class="comment" id="comment-78397">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514613" rel="external nofollow">新用户886451</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-78397" rel="nofollow"><time datetime="2017-04-12T12:30:17+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正则不行么***反正我无所谓都是登录的,但是APP什么时候更新呢,现在用APP多一些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-78396">
<article class="comment" id="comment-78396">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514613" rel="external nofollow">新用户886451</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-78396" rel="nofollow"><time datetime="2017-04-12T12:30:17+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正则不行么***反正我无所谓都是登录的,但是APP什么时候更新呢,现在用APP多一些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28018">
<article class="comment" id="comment-28018">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hao555sky</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-28018" rel="nofollow"><time datetime="2015-05-15T09:11:20+00:00" pubdate="">2015年5月15日 at 上午9:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>a是根先忽略掉，递归子树。剩下前缀bejkcfghid和后缀jkebfghicd，分拆的原则的是每个子树前缀和后缀的节点个数是一样的，根节点出现在前缀的第一个，后缀的最后一个。根节点b出现后缀的第四个位置，则第一部分为四个节点，前缀bejk，后缀jkeb，剩下的c出现在后缀的倒数第2个，就划分为cfghi和 fghic，第3部分就为c、c</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63249">
<article class="comment" id="comment-63249">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">lsdtc1225</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63249" rel="nofollow"><time datetime="2015-05-14T08:09:26+00:00" pubdate="">2015年5月14日 at 上午8:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63256">
<article class="comment" id="comment-63256">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gy910210</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63256" rel="nofollow"><time datetime="2015-01-10T03:39:06+00:00" pubdate="">2015年1月10日 at 上午3:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实就是DFS搜索，数据量较小，穷举了所有情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63251">
<article class="comment" id="comment-63251">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1832044043</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63251" rel="nofollow"><time datetime="2014-12-24T12:26:37+00:00" pubdate="">2014年12月24日 at 下午12:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种想法，我想来好久，为啥需要一个newhead，发现是把最后一个节点一直返回到嘴上面这层函数。厉害，这道题之前没样子想过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63255">
<article class="comment" id="comment-63255">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">room306</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63255" rel="nofollow"><time datetime="2014-09-16T11:33:27+00:00" pubdate="">2014年9月16日 at 上午11:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学算法中的数据结构学到一定程度会乐此不疲的，比如其中的2－3树，类似的红黑树，我甚至可以自己写个逻辑文件系统结构来。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63250">
<article class="comment" id="comment-63250">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Happiness</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63250" rel="nofollow"><time datetime="2014-08-19T23:15:11+00:00" pubdate="">2014年8月19日 at 下午11:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>处凡愚而不减，在圣贤而不增；<br/>住烦恼而不乱，居禅定而不寂。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63257">
<article class="comment" id="comment-63257">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">userwawa</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63257" rel="nofollow"><time datetime="2014-08-13T23:17:21+00:00" pubdate="">2014年8月13日 at 下午11:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>沙发呢，我抢到了沙发</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28016">
<article class="comment" id="comment-28016">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ForgetVay</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-28016" rel="nofollow"><time datetime="2014-08-11T06:33:20+00:00" pubdate="">2014年8月11日 at 上午6:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我是来看评论的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63253">
<article class="comment" id="comment-63253">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mclown</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63253" rel="nofollow"><time datetime="2014-07-21T09:00:47+00:00" pubdate="">2014年7月21日 at 上午9:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28015">
<article class="comment" id="comment-28015">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">slowlight</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-28015" rel="nofollow"><time datetime="2014-06-21T07:16:56+00:00" pubdate="">2014年6月21日 at 上午7:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>DFS方法的原理还是不太清楚啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28017">
<article class="comment" id="comment-28017">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zjd1988</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-28017" rel="nofollow"><time datetime="2014-04-29T06:05:01+00:00" pubdate="">2014年4月29日 at 上午6:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>红绯鱼：<br/>
这模板神了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63254">
<article class="comment" id="comment-63254">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yipwinghong</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63254" rel="nofollow"><time datetime="2014-04-26T12:28:41+00:00" pubdate="">2014年4月26日 at 下午12:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个条件 “两个数的乘积最小”可以忽略</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63252">
<article class="comment" id="comment-63252">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jixiangniao993</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-63252" rel="nofollow"><time datetime="2014-04-25T10:45:32+00:00" pubdate="">2014年4月25日 at 上午10:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很棒的网站，加油！⛽️</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28019">
<article class="comment" id="comment-28019">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yelawolf</a></span> on <a href="http://www.acmerblog.com/hdu-3216-graph-of-black-and-white-5049.html#comment-28019" rel="nofollow"><time datetime="2014-04-01T23:41:06+00:00" pubdate="">2014年4月1日 at 下午11:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>等待后面的实现，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>