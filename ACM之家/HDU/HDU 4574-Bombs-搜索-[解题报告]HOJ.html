<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>09-16</div>
<div class="tit"><h1 class="entry-title">HDU 4574-Bombs-搜索-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/search" rel="category tag" title="查看搜索中的全部文章">搜索</a>, <a href="http://www.acmerblog.com/category/basis/enumeration" rel="category tag" title="查看枚举中的全部文章">枚举</a></span><span class="i4">围观75次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7618" href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comments" title="《HDU 4574-Bombs-搜索-[解题报告]HOJ》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Bombs</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
　　Terrorists are around everywhere, they always make troubles by detonating bombs. The terrorist have some gunpowder to make bombs, different gunpowder has different damage, every kind of gunpowder can use any times, and the power of one bomb is the product of the gunpowder it consists of. Let’s see how they make a bomb.<br/>　　At the beginning they decide to use X parts of gunpowder to make a bomb, and then choose X parts of gunpowder, every time the damage of the gunpowder they choose can’t be smaller than the last time they choose excepting the first time. After choosing X parts gunpowder terrorists get gunpowder[1], gunpowder[2] … gunpowder[X] ( gunpowder[1] &lt;= gunpowder[2] &lt;= … &lt;= gunpowder[X]), and then mix the X parts gunpowder to generate a bomb with power of the product of the damage of the gunpowder. Terrorists make bombs in some order, if they make bomb_A before bomb_B one of the following conditions should meet.<br/><strong>(1)</strong>Terrorists use less parts gunpowder to make bomb_A than bomb_B.<br/><strong>(2)</strong>Terrorists both use X parts of gunpowders to make bomb_A and bomb_B. There exist an integer j（j &lt;=X）,for all i &lt; j,gunpowder_A[i] = gunpowder_B[i] and gunpowder_A[j] &lt; gunpowder_B[j].<br/>　　Now, the police get the gunpowder by some way, police find that the gunpowder’s damage is in the range of A to B(A, B included), police want to know the K-th bomb with the power in the range of L to R(L, R included). </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
　　There are multiple cases, the first line is an integer T denoting the number of the case, for each case has five integers A, B, L, R, K in a line. A, B denote the damage range of the gunpowder. L, R denote the power range of the bomb, K denotes the K-th bomb with the power in the range L to R that police want to know.<br/>2&lt;=A &lt;= B&lt;=10^6<br/>1&lt;=L&lt;=R&lt;=10^9<br/>1&lt;=K&lt;=10^6 </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
　　There are multiple cases, the first line is an integer T denoting the number of the case, for each case has five integers A, B, L, R, K in a line. A, B denote the damage range of the gunpowder. L, R denote the power range of the bomb, K denotes the K-th bomb with the power in the range L to R that police want to know.<br/>2&lt;=A &lt;= B&lt;=10^6<br/>1&lt;=L&lt;=R&lt;=10^9<br/>1&lt;=K&lt;=10^6</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
4
2 2 1 4 1
2 5 1 4 4
73 23642 12 20903 29401
2 50 1 1000000000 815180</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case #1: 2
2
Case #2: 4
2 2
Case #3: -1
Case #4: 59200
4 4 5 20 37
<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
In the second case we have 4 kinds of gunpowder with damage 2, 3, 4, 5.
the first bomb is “2”with power of 2 
The second bomb is “3” with power of 3
The third bomb is “4” with power of 4
The fouth bomb is “5” with power of 5
The fifth bomb is “2 2” with power of 2 * 2 = 4
So the 4-th bomb with power in the range of 1 to 4 is “2 2”.
</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<p><span style="font-size:18px">转载请注明出处，谢谢<a target="_blank">http://blog.csdn.net/ACM_cxlove?viewmode=contents</a>    by—cxlove</span></p>
<p><span style="font-size:18px">基本上想到了解法 ，但是一直在想[a,b]中乘积在[l,r]的组合有多少种怎么预处理。。。。</span></p>
<p><span style="font-size:18px">觉得当b – a + 1很大的时候，个数很少，大概可以承受n * m 的DP预处理。。。</span></p>
<p><span style="font-size:18px">结果结果就是个爆搜嘛。。。。不过加了些优化 。。。</span></p>
<p><span style="font-size:18px">取的数中最小是2，2 ^ 30 &gt; 1e9 。所以个数不多</span></p>
<p><span style="font-size:18px">首先枚举长度，然后爆搜得到个数，确定长度之后，依旧是按位确定。</span></p>
<p><span style="font-size:18px">枚举每一位的数，继续爆搜判断是否满足第k大。。。。</span></p>
<p><span style="font-size:18px">有一些优化 ：</span></p>
<p><span style="font-size:18px">1、当个数为1的时候，就不用枚举了，分析下上下界，O(1)可以得到结果</span></p>
<p><span style="font-size:18px">2、考虑剩下的c – 1个数都取上界，然后利用区间的下界可以得到当前数的下界，考虑剩下的c – 1个数都取下界，然后 利用区间的上界可以得到当前数的上界，这个剪枝很重要吧。</span></p>
<p><span style="font-size:18px"></span></p>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cmath&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;
#include &lt;vector&gt;
#define mp(a , b) make_pair(a , b)
using namespace std;
typedef long long LL;
const LL inf = 1000000000LL;
int a , b , l , r , k;
// a ^ b
int pow (int a , int b) {
    int ret = 1;
    for (int i = 0 ; i &lt; b ; i ++) {
        ret = ret * a;
        if (ret &gt; inf || ret &lt;= 0)
            return inf + 1;
    }
    return ret;
}
int gao (int c , int a , int b , int l , int r , int k) {
    if (c == 0) return l &lt;= r;
    if (c == 1) {
        if (l &gt; r) return 0;
        return max (0 , min(r , b) - max (l , a) + 1);
    }
    //上下界
    int down = max(a , l / pow(b , c - 1));
    int up = min (b , r / pow(a , c - 1));
    int ret = 0;
    for (int i = down ; i &lt;= up ; i ++) {
        ret += gao (c - 1 , i , b , (l + i - 1) / i , r / i , k - ret);
        if (ret &gt; k) return ret;  //剪枝
    }
    return ret;
}
int ret , ans[50];
void fuck (int c , int a , int b , int l , int r , int k) {
    if (c == 0) return;
    if (c == 1) {
        int num = k + max(l , a) - 1;
        ret = ret * num;
        ans[c] = num;
        return ;
    }
    // 上下界
    int down = max(a , l / pow(b , c - 1));
    int up = min (b , r / pow(a , c - 1));
    for (int i = down ; i &lt;= up ; i ++) {
        int cnt = gao (c - 1 , i , b , (l + i - 1) / i , r / i , k);
        if (k &gt; cnt) {
            k -= cnt;
            continue;
        }
        ret = ret * i;
        ans[c] = i;
        fuck (c - 1 , i , b , (l + i - 1) / i , r / i , k);
        return ;
    }
}
int main () {
    #ifndef ONLINE_JUDGE
        freopen ("input.txt" , "r" , stdin);
    #endif
    int t , cas = 0;
    scanf ("%d" , &amp;t);
    while (t --) {
        bool ok = false;
        scanf ("%d %d %d %d %d" , &amp;a , &amp;b , &amp;l , &amp;r , &amp;k);
        printf ("Case #%d: " , ++ cas);
        //枚举长度
        for (int i = 1 ; i &lt;= 30 ; i ++) {
            int cnt = gao (i , a , b , l , r , k);
            if (k &gt; cnt) {
                k -= cnt;
                continue;
            }
            ret = 1;
            fuck (i , a , b , l , r , k);
            printf ("%d\n" , ret);
            for (int j = i ; j &gt;= 1 ; j --) {
                printf ("%d%c" , ans[j] , j == 1 ? '\n' : ' ');
            }
            ok = true;
            break;
        }
        if (!ok) puts("-1");
    }
    return 0;
}</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/acm_cxlove/article/details/9935667</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97556">
<article class="comment" id="comment-97556">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532492" rel="external nofollow">新用户662503</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-97556" rel="nofollow"><time datetime="2017-04-20T05:15:17+00:00" pubdate="">2017年4月20日 at 上午5:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>装了个人进前窗玻璃上？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66873">
<article class="comment" id="comment-66873">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66873" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66872">
<article class="comment" id="comment-66872">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66872" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66871">
<article class="comment" id="comment-66871">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66871" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66870">
<article class="comment" id="comment-66870">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66870" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66869">
<article class="comment" id="comment-66869">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66869" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66868">
<article class="comment" id="comment-66868">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66868" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66867">
<article class="comment" id="comment-66867">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66867" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66866">
<article class="comment" id="comment-66866">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66866" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66865">
<article class="comment" id="comment-66865">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66865" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66864">
<article class="comment" id="comment-66864">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66864" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66863">
<article class="comment" id="comment-66863">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463856" rel="external nofollow">新用户900547</a></span> on <a href="http://www.acmerblog.com/hdu-4574-bombs-7618.html#comment-66863" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有兴趣的话可以试试</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>