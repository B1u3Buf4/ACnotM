<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-21</div>
<div class="tit"><h1 class="entry-title">HDU 2904-Warfare[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观267次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4565" href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comments" title="《HDU 2904-Warfare[解题报告]HOJ》上的评论">16 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Warfare</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
In the year 2240 a great war is taking place between the Earth Allied Forces (EAF) and the Mars Federation (MF). Until recently, none of the two major factions could gain the upper hand in the war. Because of a recent  nancial crisis, both factions’ resources are thinning out, and it appears that the MF is using this to their advantage to claim more territories over the EAF. In response to this, the EAF have decided to carry out its greatest operation since the start of the war: it will launch a simultaneous attack against all the MF bases that are scattered over the planet Mars. The EAF’s forces mostly consist of mechs, which are huge bipedal, limbed vehicles with  ying capabilities.<br/> A typical MF base is built up as follows: The buildings that make up the base are positioned over one or multiple territories. Each of these territories is protected against outside attacks by impenetrable energy  elds that are generated by shield towers. These shield towers are positioned around the territories they’re supposed to protect. <br/>Each shield tower is connected to at least one other tower via channels that are constructed above the ground. When these connected towers form a cycle, they generate an energy  eld. However,if a channel in a cycle is destroyed so that the cycle is broken, the energy  eld will disappear. The MF knows that if all energy  elds disappear, the base will be easily overrun by the EAF forces. Therefore, the two towers that are connected by a channel protect the channel against armed forces. Each tower has defenses that can take down a given number of enemy mechs. Each channel can handle an attack by a certain number of enemy mechs before it collapses. This number  is given by the amount of mechs that both towers, that the channel connects, can take down. Two towers cannot be connected by more than one channel.
<p></p><center><img src="http://www.acmerblog.com/img/1393166697518.jpg"/></center><br/>(a) Two towers that are connected by a channel. The vertices represent the towers while the line is the channel that connects the towers. The amount of mechs needed to destroy the channel is the combined amount of mechs that the connected towers can take down.
<p>However, attacking a channel on one side of the tower does not diminish the amount of mechs that it can take down on the other side of the tower. <br/>Because the operation is a surprise attack, all attacks on the channels must happen simultaneously: all channels are taken down at the same moment.</p>
<p></p><center><img src="http://www.acmerblog.com/img/1393166697664.jpg"/></center> <br/>(b) MF base with multiple energy  elds. The vertices represent the towers while the lines are the channels that connect the towers. The numbers indicate how many mechs a tower can take down.
<p></p><center><img src="http://www.acmerblog.com/img/1393166697814.jpg"/></center> <br/>(c) In this case, the destruction of two channels will make all energy  elds disappear. Four mechs will be lost in the battle.
<p>All energy  elds must be disabled in order to destroy a MF base. Tearing down all channels would make this happen, but would also require a lot of mechs to be sacri ced. The EAF has very little forces to spare and must therefore deploy its mechs as e cient as possible.<br/> You have been tasked to write a program that will lead the EAF to victory. Given a graph of shield towers, determine which channels must be destroyed to make all energy  elds disappear, in such a way that the least number of EAF mechs are lost during the battle. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The  first line of input consists of the positive integer number n, the number of test cases;<br/>Then, for each test case: <br/>A line containing the positive integer number m (2 &lt; m  &lt;=100), the number of towers in the base;<br/>Per tower two lines:<br/>A line containing three positive integer numbers i (0 &lt;= i &lt;= m-1), ui(1&lt;= ui &lt;=50) and ci (1  &lt;= ci &lt;=  m -1): the (identification) number of the tower, the amount of mechs that the tower can take down and the number of channels respectively. The numbers are separated by a space;<br/>A line containing ci  different positive integers, the towers that are connected to tower i. A tower cannot be connected to itself. The integers are separated by a space.<br/>A given base will always be able to generate at least one energy  field.</div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The  first line of input consists of the positive integer number n, the number of test cases;<br/>Then, for each test case: <br/>A line containing the positive integer number m (2 &lt; m  &lt;=100), the number of towers in the base;<br/>Per tower two lines:<br/>A line containing three positive integer numbers i (0 &lt;= i &lt;= m-1), ui(1&lt;= ui &lt;=50) and ci (1  &lt;= ci &lt;=  m -1): the (identification) number of the tower, the amount of mechs that the tower can take down and the number of channels respectively. The numbers are separated by a space;<br/>A line containing ci  different positive integers, the towers that are connected to tower i. A tower cannot be connected to itself. The integers are separated by a space.<br/>A given base will always be able to generate at least one energy  field.
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
3
0 1 2
1 2
1 2 2
0 2
2 3 2
0 1</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
3</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;cmath&gt;
using namespace std;
struct Edge
{
 int l,r,w;
 bool operator&lt;(const Edge &amp;b)const
 {
 return w&gt;b.w;
 }
};
Edge p[100005];
int set[105];
int m;
int map[105][105],w[105];
int find(int x)
{
 if(x==set[x])return x;
 return set[x]=find(set[x]);
}
int main()
{
 int T;
 scanf("%d",&amp;T);
 while(T--)
 {
 scanf("%d",&amp;m);
 memset(map,0,sizeof(map));
 for(int i=0;i&lt;m;i++)
 {
 int j,t,k;
 scanf("%d",&amp;j);
 scanf("%d%d",&amp;w[j],&amp;t);
 while(t--)
 {
 scanf("%d",&amp;k);
 map[j][k]=map[k][j]=1;
 }
 }
 Edge tmp;
 int tot=0,sum=0;
 for(int i=0;i&lt;m;i++)
 for(int j=i+1;j&lt;m;j++)
 if(map[i][j])
 {
 tmp.l=i;
 tmp.r=j;
 tmp.w=(w[i]+w[j]);
 p[tot++]=tmp;
 sum+=w[i]+w[j];
 }
 sort(p,p+tot);
 //for(int i=0;i&lt;tot;i++)printf("%d ",p[i].w);puts("");
 for(int i=0;i&lt;m;i++)set[i]=i;
 int cnt=0,ret=0;
 for(int i=0;i&lt;tot;i++)
 {
 int l=find(p[i].l);
 int r=find(p[i].r);
 //printf("%d %d %d %d\n",p[i].l,p[i].r,l,r);
 if(l==r)continue;
 set[l]=r;
 //cnt++;
 ret+=p[i].w;
 //if(cnt==m-1)break;
 }
 printf("%d\n",sum-ret);
 }
}
/*
100
7
0 3 2
1 2
1 1 2
0 3
2 3 2
0 3
3 1 4
1 2 4 5
4 2 2
3 6
5 1 2
3 6
6 2 2
4 5

4
0 2 2
1 2
1 1 3
0 2 3
2 1 3
0 1 3
3 3 2
1 2
*/</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-81439">
<article class="comment" id="comment-81439">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518876" rel="external nofollow">新用户913627</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-81439" rel="nofollow"><time datetime="2017-04-12T18:13:49+00:00" pubdate="">2017年4月12日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>钢琴曲，还蛮好听的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81438">
<article class="comment" id="comment-81438">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518876" rel="external nofollow">新用户913627</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-81438" rel="nofollow"><time datetime="2017-04-12T18:13:49+00:00" pubdate="">2017年4月12日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>钢琴曲，还蛮好听的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81437">
<article class="comment" id="comment-81437">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518876" rel="external nofollow">新用户913627</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-81437" rel="nofollow"><time datetime="2017-04-12T18:13:49+00:00" pubdate="">2017年4月12日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>钢琴曲，还蛮好听的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81436">
<article class="comment" id="comment-81436">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518876" rel="external nofollow">新用户913627</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-81436" rel="nofollow"><time datetime="2017-04-12T18:13:49+00:00" pubdate="">2017年4月12日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>钢琴曲，还蛮好听的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81435">
<article class="comment" id="comment-81435">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518876" rel="external nofollow">新用户913627</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-81435" rel="nofollow"><time datetime="2017-04-12T18:13:49+00:00" pubdate="">2017年4月12日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>钢琴曲，还蛮好听的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57605">
<article class="comment" id="comment-57605">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Miracle-cc</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-57605" rel="nofollow"><time datetime="2015-05-22T18:05:51+00:00" pubdate="">2015年5月22日 at 下午6:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正在学习搜索，很好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-25604">
<article class="comment" id="comment-25604">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">admin</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-25604" rel="nofollow"><time datetime="2014-12-21T21:04:52+00:00" pubdate="">2014年12月21日 at 下午9:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46962">
<article class="comment" id="comment-46962">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiao1108</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-46962" rel="nofollow"><time datetime="2014-11-16T09:37:14+00:00" pubdate="">2014年11月16日 at 上午9:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>算法，他认识我，我不认识他，后来有人告诉我你写的这段代码就是XXX算法。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46965">
<article class="comment" id="comment-46965">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">binqi_ren</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-46965" rel="nofollow"><time datetime="2014-10-24T11:38:51+00:00" pubdate="">2014年10月24日 at 上午11:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>后面的掩码变量部分乍一看比较难理解，其实就是把32位按照一个整体来看待。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57604">
<article class="comment" id="comment-57604">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xun.gong</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-57604" rel="nofollow"><time datetime="2014-09-20T03:45:41+00:00" pubdate="">2014年9月20日 at 上午3:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>看见的晚了，只能提交一次唉</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46963">
<article class="comment" id="comment-46963">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">edward2414</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-46963" rel="nofollow"><time datetime="2014-09-10T06:51:40+00:00" pubdate="">2014年9月10日 at 上午6:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很强大啊，佩服</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57603">
<article class="comment" id="comment-57603">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiao1108</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-57603" rel="nofollow"><time datetime="2014-08-02T15:36:21+00:00" pubdate="">2014年8月2日 at 下午3:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发的在线笔试题吗?发现很多C啊，阿里不是JAVA多么？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46966">
<article class="comment" id="comment-46966">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">TimeFight</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-46966" rel="nofollow"><time datetime="2014-07-31T08:36:15+00:00" pubdate="">2014年7月31日 at 上午8:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46967">
<article class="comment" id="comment-46967">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Yaunxi</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-46967" rel="nofollow"><time datetime="2014-05-28T19:35:32+00:00" pubdate="">2014年5月28日 at 下午7:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感觉这里的评分标准没啥作用阿，反而显得显得赘余，还不如直接去掉好了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62988">
<article class="comment" id="comment-62988">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tonight</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-62988" rel="nofollow"><time datetime="2014-05-02T16:48:59+00:00" pubdate="">2014年5月2日 at 下午4:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好厉害～</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46964">
<article class="comment" id="comment-46964">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ycaxgjd</a></span> on <a href="http://www.acmerblog.com/hdu-2904-warfare-4565.html#comment-46964" rel="nofollow"><time datetime="2014-03-13T02:37:32+00:00" pubdate="">2014年3月13日 at 上午2:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>必须试过啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>