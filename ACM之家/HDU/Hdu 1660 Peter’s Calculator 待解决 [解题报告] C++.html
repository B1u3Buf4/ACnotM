<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-21</div>
<div class="tit"><h1 class="entry-title">Hdu 1660 Peter’s Calculator 待解决 [解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观1194次</span><span class="i3"><a class="ds-thread-count" data-thread-key="2605" href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comments" title="《Hdu 1660 Peter’s Calculator 待解决 [解题报告] C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Peter’s Calculator</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Unfortunately, Peter’s Calculator broke down last week. Now Peter is left with his computer, which has no calculator application, and paper and pencil, which is too tiresome for an engineer. As one of Peter’s friends, you are asked to write him a calculator application. After talking to him, you figure out the following: 
<p>Peter does only integer arithmetic. The operations he needs are addition, subtraction and multiplication.<br/>He would like to use an arbitrary number of variables whose names are not longer than 50 characters.<br/>His main way of doing calculations are to type in a few formulas and to assign them to variables. Some formulas are complicated expressions, which can refer to yet undefined variables, while other formulas consist of a single number. Then Peter asks for the value of some variables, i.e. he evaluates the formulas.<br/>Peters wants to redefine some variables and then to reevaluate formulas that depend on these variables. <br/>The input strictly adheres to the following syntax (given in EBNF): <br/>file = line { line } &lt;EOF&gt;.<br/>line = [ assignment | print | reset ] &lt;CR&gt;.<br/>assignment = var ":=" expression.<br/>print = "PRINT" var.<br/>reset = "RESET".<br/>expression = term { addop term }.<br/>term = factor { mulop factor }.<br/>factor = "(" expression ")" | var | number.<br/>addop = "+" | "-".<br/>mulop = "*".<br/>In the Extended Backus-Naur Formalism (EBNF), A = B C declares that the grammatical construct A consists of a B followed by a C . A = B | C means that A consists of a B or, alternatively, of a C . A = [ B ] defines construct A to be either a B or nothing and A = B tells you that A consists of the concatenation of any number of B’s (including none). </p>
<p>The production var stands for the name of a variable, which starts with a letter followed by up to 49 letters or digits. Letters may be uppercase or lowercase. The production number stands for a integer number. The precise syntax for these productions are given below. The case of letters is important for both variables and statements. </p>
<p>var = letter { letter | digit }.<br/>number = [ "-" ] digit { digit }.<br/>letter = "A" | "B" | … | "Z" | "a" | "b" | … | "z".<br/>digit = "0" | "1" | … | "8" | "9".</p>
<p>Between the parts of a grammatical construct but not within the names of variables or integer numbers, any number of spaces may appear. &lt;EOF&gt; stands for the end of the input file and &lt;CR&gt; stands for the new-line character. All lines in the input file are shorter than 200 characters. </p>
<p>The value of a variable is said to be undefined: </p>
<p>if it has not yet been defined or it refers to a variable, which has not yet been defined;<br/>if the definition of the variable contains a cycle. <br/>Your are to write a program that implements Peter’s calculator. It should store all variable definitions and for each "PRINT" statement evaluate the specified variable based on the latest variable definitions. If your program encounters a "RESET" statement, it should delete all stored variables so that all variables become undefined.  </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input file contains calculations adhering to the syntax given above. Each line contains either an assignment to a variable, a "PRINT" statement, a "RESET" statement or nothing. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each "PRINT" statement found in the input file, your program should output a line containing the numerical value of the specified variable or the word "UNDEF" if the variable is undefined.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
a := b + c
b := 3
c := 5
PRINT d
PRINT a
b := 8
PRINT a
RESET
PRINT a</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
UNDEF
8
13
UNDEF</pre>
<p> <!-- problem end --></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-16440">
<article class="comment" id="comment-16440">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">modstart</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16440" rel="nofollow"><time datetime="2015-05-04T23:13:41+00:00" pubdate="">2015年5月4日 at 下午11:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>失误失误，转载错了。已经改正，抱歉。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16441">
<article class="comment" id="comment-16441">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hanyi</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16441" rel="nofollow"><time datetime="2015-04-25T22:18:54+00:00" pubdate="">2015年4月25日 at 下午10:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16446">
<article class="comment" id="comment-16446">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HaibaraAi</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16446" rel="nofollow"><time datetime="2015-04-19T11:18:09+00:00" pubdate="">2015年4月19日 at 上午11:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16449">
<article class="comment" id="comment-16449">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mysteriousAngel_love</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16449" rel="nofollow"><time datetime="2015-04-03T18:21:53+00:00" pubdate="">2015年4月3日 at 下午6:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>无需用转移方程也可以解决，哈哈</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16447">
<article class="comment" id="comment-16447">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">anshansh</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16447" rel="nofollow"><time datetime="2015-02-20T17:05:08+00:00" pubdate="">2015年2月20日 at 下午5:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>处凡愚而不减，在圣贤而不增；<br/>住烦恼而不乱，居禅定而不寂。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16442">
<article class="comment" id="comment-16442">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liuk</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16442" rel="nofollow"><time datetime="2015-02-01T21:25:11+00:00" pubdate="">2015年2月1日 at 下午9:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序是错的吧，明显没有判断不和该节点相邻的其他节点是否相互相邻</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16448">
<article class="comment" id="comment-16448">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sam_justin</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16448" rel="nofollow"><time datetime="2015-02-01T01:46:36+00:00" pubdate="">2015年2月1日 at 上午1:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发的在线笔试题吗?发现很多C啊，阿里不是JAVA多么？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16450">
<article class="comment" id="comment-16450">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">130920099</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16450" rel="nofollow"><time datetime="2015-01-09T15:23:10+00:00" pubdate="">2015年1月9日 at 下午3:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有点意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16444">
<article class="comment" id="comment-16444">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yueyanglou</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16444" rel="nofollow"><time datetime="2014-12-24T05:00:12+00:00" pubdate="">2014年12月24日 at 上午5:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16439">
<article class="comment" id="comment-16439">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">la0bei</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16439" rel="nofollow"><time datetime="2014-05-03T20:11:39+00:00" pubdate="">2014年5月3日 at 下午8:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>必须试过啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16451">
<article class="comment" id="comment-16451">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Christmas</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16451" rel="nofollow"><time datetime="2014-04-29T03:24:04+00:00" pubdate="">2014年4月29日 at 上午3:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实不需要用LCA，用DFS+vector更简单</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16438">
<article class="comment" id="comment-16438">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sam_justin</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16438" rel="nofollow"><time datetime="2014-04-03T07:31:37+00:00" pubdate="">2014年4月3日 at 上午7:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>DFS方法的原理还是不太清楚啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-16445">
<article class="comment" id="comment-16445">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">siaswj</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16445" rel="nofollow"><time datetime="2014-03-07T00:15:31+00:00" pubdate="">2014年3月7日 at 上午12:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>面霸网。www.51mx.org</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16443">
<article class="comment" id="comment-16443">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">blogpick</a></span> on <a href="http://www.acmerblog.com/hdu-1660-Peter%27s-Calculator-2605.html#comment-16443" rel="nofollow"><time datetime="2014-01-05T05:41:00+00:00" pubdate="">2014年1月5日 at 上午5:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>额楼主能否在发布代码的同时对解题思路做个讲解呢？这样大家在学习的时候就方便多了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>