<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-16</div>
<div class="tit"><h1 class="entry-title">HDU 3347-Calculate the expression-模拟-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a></span><span class="i4">围观311次</span><span class="i3"><a class="ds-thread-count" data-thread-key="5279" href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comments" title="《HDU 3347-Calculate the expression-模拟-[解题报告]HOJ》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Calculate the expression</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
You may find it’s easy to calculate the expression such as:<br/>a = 3<br/>b = 4<br/>c = 5<br/>a + b + c = ?<br/>Isn’t it? </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line contains an integer stands for the number of test cases.<br/>Each test case start with an integer n stands for n expressions will follow for this case.<br/>Then n � 1 expressions in the format: [variable name][space][=][space][integer] will follow.<br/>You may suppose the variable name will only contain lowercase letters and the length will not exceed 20, and the integer will between -65536 and 65536.<br/>The last line will contain the expression you need to work out.<br/>In the format: [variable name| integer][space][+|-][space][variable name| integer] …= ?<br/>You may suppose the variable name must have been defined in the n � 1 expression and the integer is also between -65536 and 65536. <br/>You can get more information from the sample. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line contains an integer stands for the number of test cases.<br/>Each test case start with an integer n stands for n expressions will follow for this case.<br/>Then n � 1 expressions in the format: [variable name][space][=][space][integer] will follow.<br/>You may suppose the variable name will only contain lowercase letters and the length will not exceed 20, and the integer will between -65536 and 65536.<br/>The last line will contain the expression you need to work out.<br/>In the format: [variable name| integer][space][+|-][space][variable name| integer] …= ?<br/>You may suppose the variable name must have been defined in the n � 1 expression and the integer is also between -65536 and 65536. <br/>You can get more information from the sample.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3
4
aa = 1
bb = -1
aa = 2
aa + bb + 11 = ?
1
1 + 1 = ?
1
1 + -1 = ?</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
12
2
0</pre>
<p> <!-- problem end --></p>
<p><a>点击打开链接</a></p>
<p>模拟！！</p>
<pre class="brush:cpp ">#include"stdio.h"
#include"string.h"
struct node
{
    char str[21];
    int x;
}A[1001];
int main()
{
    int t,n;
    int i,j;
    int cnt,a;
    char s[22];
    scanf("%d",&amp;t);    
    while(t--)
    {
        cnt=0;
        scanf("%d",&amp;n);
        getchar();
        for(i=0;i&lt;n-1;i++)
        {
            scanf("%s = %d",s,&amp;a);
            getchar();
            for(j=0;j&lt;cnt;j++)
            {
                if(strcmp(A[j].str,s)==0)
                {
                    A[j].x=a;break;
                }
            }
            if(j==cnt)
            {
                strcpy(A[cnt].str,s);
                A[cnt].x=a;
                cnt++;
            }
        }
        int ans,f;
        f=ans=0;
        while(1)
        {
            scanf("%s",s);
            if(strcmp("?",s)==0)break;
            if(strcmp("=",s)==0)printf("%d\n",ans);
            else if(strcmp("+",s)==0)f=1;
            else if(strcmp("-",s)==0)f=-1;
            else 
            {
                for(i=0;i&lt;cnt;i++)
                    if(strcmp(A[i].str,s)==0)
                        break;
                if(i==cnt)
                {
                    int t,ff;
                    t=0;ff=1;
                    for(i=0;s[i];i++)
                    {
                        if(s[i]=='-'){ff=-1;continue;}
                        t=t*10+s[i]-'0';
                    }
                    strcpy(A[cnt].str,s);
                    A[cnt].x=t;
                    A[cnt].x*=ff;
                    cnt++;
                    i=cnt-1;
                }
                if(f==0)ans=A[i].x;
                else if(f==1)ans=ans+A[i].x;
                else if(f==-1)ans=ans-A[i].x;
            }
        }
    }
    return 0;
}</pre>
<p>参考：http://blog.csdn.net/yangyafeiac/article/details/8797467</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-77608">
<article class="comment" id="comment-77608">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521963" rel="external nofollow">新用户436660</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-77608" rel="nofollow"><time datetime="2017-04-12T09:15:01+00:00" pubdate="">2017年4月12日 at 上午9:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我也很喜欢这句的呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28987">
<article class="comment" id="comment-28987">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sheyty</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28987" rel="nofollow"><time datetime="2015-04-26T05:37:11+00:00" pubdate="">2015年4月26日 at 上午5:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>后面的是python代码啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28980">
<article class="comment" id="comment-28980">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bob</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28980" rel="nofollow"><time datetime="2015-02-08T16:36:26+00:00" pubdate="">2015年2月8日 at 下午4:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大致看了下，算法的时间复杂度没有很本性的提升，算不上高效。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28983">
<article class="comment" id="comment-28983">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28983" rel="nofollow"><time datetime="2014-11-17T13:59:53+00:00" pubdate="">2014年11月17日 at 下午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58372">
<article class="comment" id="comment-58372">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">nsoi_onion</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-58372" rel="nofollow"><time datetime="2014-11-02T21:14:21+00:00" pubdate="">2014年11月2日 at 下午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>写的好·····  Pollard Rh</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63381">
<article class="comment" id="comment-63381">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bernice1989</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-63381" rel="nofollow"><time datetime="2014-11-01T15:30:50+00:00" pubdate="">2014年11月1日 at 下午3:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我没看懂题目<br/>
2<br/>
5 6 -1 5 4 -7<br/>
7 0 6 -1 1 -6 7 -5<br/>
我觉得第一个应该是5 6 -1 5 4 输出是19 5 4<br/>
第二个是7 0 6 -1 1 -6 7输出是14 7 7<br/>
不知道题目例子是怎么得出来的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28985">
<article class="comment" id="comment-28985">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">keyyuanxin</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28985" rel="nofollow"><time datetime="2014-10-17T11:56:51+00:00" pubdate="">2014年10月17日 at 上午11:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个也是算法导论的习题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28981">
<article class="comment" id="comment-28981">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">303589828</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28981" rel="nofollow"><time datetime="2014-09-19T12:02:47+00:00" pubdate="">2014年9月19日 at 下午12:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>书上的解法更巧妙一些，在九度OJ实测的效率差不多</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-48526">
<article class="comment" id="comment-48526">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">anshansh</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-48526" rel="nofollow"><time datetime="2014-09-16T14:57:47+00:00" pubdate="">2014年9月16日 at 下午2:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，再多来的CF上面的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28982">
<article class="comment" id="comment-28982">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mr_zhang2011</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28982" rel="nofollow"><time datetime="2014-09-14T22:14:30+00:00" pubdate="">2014年9月14日 at 下午10:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>老实说，这种方法就是穷举，复杂度是2^n，之所以能够AC是应为题目的测试数据有问题，要么数据量很小，要么能够得到k == t，否则即使n = 30，也要很久才能得出结果，本人亲测</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28984">
<article class="comment" id="comment-28984">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28984" rel="nofollow"><time datetime="2014-07-07T01:44:42+00:00" pubdate="">2014年7月7日 at 上午1:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实就是DFS搜索，数据量较小，穷举了所有情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-48528">
<article class="comment" id="comment-48528">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">daisyleedq</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-48528" rel="nofollow"><time datetime="2014-06-05T09:04:46+00:00" pubdate="">2014年6月5日 at 上午9:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>值得分享！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28986">
<article class="comment" id="comment-28986">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jdliyao</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-28986" rel="nofollow"><time datetime="2014-05-27T07:55:19+00:00" pubdate="">2014年5月27日 at 上午7:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我是来看评论的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58373">
<article class="comment" id="comment-58373">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aifan</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-58373" rel="nofollow"><time datetime="2014-04-06T02:00:34+00:00" pubdate="">2014年4月6日 at 上午2:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>&amp;amp;这是C语言？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-48527">
<article class="comment" id="comment-48527">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">la0bei</a></span> on <a href="http://www.acmerblog.com/hdu-3347-calculate-the-expression-5279.html#comment-48527" rel="nofollow"><time datetime="2014-03-22T23:34:32+00:00" pubdate="">2014年3月22日 at 下午11:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>helpful！！ mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>