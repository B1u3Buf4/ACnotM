<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>07-17</div>
<div class="tit"><h1 class="entry-title">HDU 4494-Teamwork -网络流-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/search/dfs" rel="category tag" title="查看DFS搜索中的全部文章">DFS搜索</a>, <a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/graph/flow" rel="category tag" title="查看网络流中的全部文章">网络流</a></span><span class="i4">围观107次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7507" href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comments" title="《HDU 4494-Teamwork -网络流-[解题报告]HOJ》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Teamwork </h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Some  locations  in  city  A  has  been  destroyed  in  the  fierce  battle.  So  the  government decides to send some workers to repair these locations. There are m kinds of workers that were trained for different skills. Each location need some number of some kinds of workers and has a schedule that at what time can the repair begins, and the time cost of repair. Any job cannot begin until all the workers required arrived.  <br/>For  example,  location  1 needs  2  workers  of type  1  and  3  workers  of type  2,  and  the beginning time and time cost is 100 minute and 90 minute correspondingly, then 5 workers that  satisfy the  requirement should  arrive  before 100 minute,  start  working  at  100 minute and  get  the  job  done  at  190  minute. Notice  that  two  different  types  of  workers  cannot replace  each  other,  so  with  3  workers  of  type  1  and  only  2  workers  of  type  2,  this  job cannot be done. <br/>Workers  can go from  one  location  to  another  after  their  jobs  are  done.  You  can take the Euclidean  distance  between  locations  as  the  time  workers  need  to  travel  between them.  Each worker should be sent from a depot initially at 0 minute. Now your task is to determine  the  minimum  number  of  workers  needed to  be  sent  from  depot  so  that  all  the jobs can be done. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There  are  multiple  test  cases,  the  integer  on  the  first  line  T (T&lt;25)  indicates  the number of test cases. <br/>Each  test  case  begins  with  two  integers  n (&lt;=150),  the  number  of  location(including the depot) and m(&lt;=5), the number of different skills. <br/>The next line gives two integers x<sub>0</sub>, y<sub>0</sub> indicates the coordinate of depot. <br/>Then follows n – 1 lines begins with 4 integer numbers: x<sub>i</sub>, y<sub>i</sub>, b<sub>i</sub>(b<sub>i</sub>&gt;0), p<sub>i</sub>(p<sub>i</sub>&gt;0), (x<sub>i</sub>, y<sub>i</sub>) gives the coordinate of the i-th location, bi gives the beginning time and pi gives the time cost.   The rest  of the  line  gives  m  non-negative  integers  v<sub>1</sub>,  v<sub>2</sub>,  …,  v<sub>m</sub>, of  which  the  i-th number  indicates  the  the  number  of  workers  of  type  i  needed  (for  all  v<sub>i</sub>,  0&lt;=v<sub>i</sub>&lt;10,  each location at least requires one worker). <br/>All integers are less than 1000000 (10<sup>6</sup>). </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There  are  multiple  test  cases,  the  integer  on  the  first  line  T (T&lt;25)  indicates  the number of test cases. <br/>Each  test  case  begins  with  two  integers  n (&lt;=150),  the  number  of  location(including the depot) and m(&lt;=5), the number of different skills. <br/>The next line gives two integers x<sub>0</sub>, y<sub>0</sub> indicates the coordinate of depot. <br/>Then follows n – 1 lines begins with 4 integer numbers: x<sub>i</sub>, y<sub>i</sub>, b<sub>i</sub>(b<sub>i</sub>&gt;0), p<sub>i</sub>(p<sub>i</sub>&gt;0), (x<sub>i</sub>, y<sub>i</sub>) gives the coordinate of the i-th location, bi gives the beginning time and pi gives the time cost.   The rest  of the  line  gives  m  non-negative  integers  v<sub>1</sub>,  v<sub>2</sub>,  …,  v<sub>m</sub>, of  which  the  i-th number  indicates  the  the  number  of  workers  of  type  i  needed  (for  all  v<sub>i</sub>,  0&lt;=v<sub>i</sub>&lt;10,  each location at least requires one worker). <br/>All integers are less than 1000000 (10<sup>6</sup>).</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2 
4 1 
0 0 
0 1 1 1 3 
1 1 3 3 4 
1 0 10 1 5 
4 1 
0 0 
0 1 1 1 3 
1 1 3 3 4 
1 0 3 1 5 </pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
5
9</pre>
<p> <!-- problem end --></p>
<p><span style="font-size:18px">网上比较多的代码都是用费用流做的，但是这个题目简单的描述就是求最小路径覆盖，每个点覆盖的次数不是1了而已。简单修改求最小路径覆盖的方法即可，源点向顶点，顶点向汇点连的边都变成点需要被覆盖的次数即可。</span></p>
<p><span style="font-size:18px"></span></p>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;
const int maxn=15e1+9,inf=1e9;
int n,m;
int sum[maxn][10];
long long dist[maxn][maxn],x[maxn],y[maxn],st[maxn],ed[maxn];
int level[maxn&lt;&lt;1],que[maxn&lt;&lt;1];
int head[maxn&lt;&lt;1],lon;
struct
{
    int next,to,c;
}e[maxn*maxn&lt;&lt;2];
void edgeini()
{
    memset(head,-1,sizeof(head));
    lon=-1;
}
void edgemake(int from,int to,int c)
{
    e[++lon].c=c;
    e[lon].to=to;
    e[lon].next=head[from];
    head[from]=lon;
}
void make(int from,int to,int c)
{
    edgemake(from,to,c);
    edgemake(to,from,0);
}

bool makelevel(int s,int t)
{
    memset(level,0,sizeof(level));
    int front=1,end=0;
    que[++end]=s;
    level[s]=1;
    while(front&lt;=end)
    {
        int u=que[front++];
        if(u==t) return true;
        for(int k=head[u];k!=-1;k=e[k].next)
        {
            int v=e[k].to;
            if(!level[v]&amp;&amp;e[k].c)
            {
                que[++end]=v;
                level[v]=level[u]+1;
            }
        }
    }
    return false;
}

int dfs(int now,int t,int maxf)
{
    if(now==t) return maxf;
    int ret=0;
    for(int k=head[now];k!=-1;k=e[k].next)
    {
        int u=e[k].to;
        if(level[u]==level[now]+1&amp;&amp;e[k].c)
        {
            int f=dfs(u,t,min(e[k].c,maxf-ret));
            e[k].c-=f;
            e[k^1].c+=f;
            ret+=f;
            if(ret==maxf) return ret;
        }
    }
    return ret;
}

int maxflow(int s,int t)
{
    int ret=0;
    while(makelevel(s,t))
    {
        ret+=dfs(s,t,inf);
    }
    return ret;
}


void getdist()
{
    for(int i=1;i&lt;=n;i++)
    for(int j=1;j&lt;=n;j++)
    {
        dist[i][j]=(x[i]-x[j])*(x[i]-x[j]);
        dist[i][j]+=(y[i]-y[j])*(y[i]-y[j]);
    }
}

void makegraph(int tt)
{
    edgeini();
    for(int i=1;i&lt;=n;i++)
    for(int j=1;j&lt;=n;j++)
    if(i!=j)
    {
        if(st[j]&gt;=ed[i])
        {
            long long tmp=(st[j]-ed[i])*(st[j]-ed[i]);
            if(tmp&gt;=dist[i][j])
            {
                make(i,j+n,inf);
            }
        }
    }
    for(int i=1;i&lt;=n;i++)
    {
        make(0,i,sum[i][tt]);
        make(i+n,n+n+1,sum[i][tt]);
    }
}

int main()
{
//    freopen("in.txt","r",stdin);
    int T;
    scanf("%d",&amp;T);
    while(T--)
    {
        int ans=0;
        scanf("%d%d",&amp;n,&amp;m);
        scanf("%d%d",&amp;x[1],&amp;y[1]);
        n--;
        for(int i=1;i&lt;=n;i++)
        {
            scanf("%I64d %I64d %I64d %I64d",&amp;x[i],&amp;y[i],&amp;st[i],&amp;ed[i]);
            ed[i]+=st[i];
            for(int j=1;j&lt;=m;j++)
            {
                scanf("%d",&amp;sum[i][j]);
                ans+=sum[i][j];
            }
        }
        getdist();
        for(int i=1;i&lt;=m;i++)
        {
            makegraph(i);
            ans-=maxflow(0,n+n+1);
        }
        cout&lt;&lt;ans&lt;&lt;endl;
    }
    return 0;
}
</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/yrleep/article/details/13391427</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97868">
<article class="comment" id="comment-97868">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516217" rel="external nofollow">新用户632144</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-97868" rel="nofollow"><time datetime="2017-04-20T08:48:51+00:00" pubdate="">2017年4月20日 at 上午8:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>怎么还没更新啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67359">
<article class="comment" id="comment-67359">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67359" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67358">
<article class="comment" id="comment-67358">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67358" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67357">
<article class="comment" id="comment-67357">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67357" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67356">
<article class="comment" id="comment-67356">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67356" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67355">
<article class="comment" id="comment-67355">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67355" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67354">
<article class="comment" id="comment-67354">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67354" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67353">
<article class="comment" id="comment-67353">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67353" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67352">
<article class="comment" id="comment-67352">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67352" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67351">
<article class="comment" id="comment-67351">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67351" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67350">
<article class="comment" id="comment-67350">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67350" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67349">
<article class="comment" id="comment-67349">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67349" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67348">
<article class="comment" id="comment-67348">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468239" rel="external nofollow">新用户482058</a></span> on <a href="http://www.acmerblog.com/hdu-4494-teamwork-7507.html#comment-67348" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>F-35的软件系统</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>