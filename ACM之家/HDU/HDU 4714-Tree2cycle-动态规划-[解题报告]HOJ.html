<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>09-17</div>
<div class="tit"><h1 class="entry-title">HDU 4714-Tree2cycle-动态规划-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/tree-dp" rel="category tag" title="查看树形DP中的全部文章">树形DP</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观71次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7759" href="http://www.acmerblog.com/hdu-4714-tree2cycle-7759.html#comments" title="《HDU 4714-Tree2cycle-动态规划-[解题报告]HOJ》上的评论">一条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h1 style="color:rgb(26,92,200); text-align:center; font-family:'Times New Roman'">
Tree2cycle</h1>
<p><span style="font-family:'Times New Roman'; font-size:14px"><strong><span style="font-family:Arial; font-size:12px; color:green">Time Limit: 15000/8000 MS (Java/Others)    Memory Limit: 102400/102400 K (Java/Others)<br/>
Total Submission(s): 382    Accepted Submission(s): 74<br/>
</span></strong></span><br style="font-family:'Times New Roman'; font-size:14px"/><br/>
<br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
A tree with N nodes and N-1 edges is given. To connect or disconnect one edge, we need 1 unit of cost respectively. The nodes are labeled from 1 to N. Your job is to transform the tree to a cycle(without superfluous edges) using minimal cost.
<p>A cycle of n nodes is defined as follows: (1)a graph with n nodes and n edges (2)the degree of every node is 2 (3) each node can reach every other node with these N edges.</p></div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
The first line contains the number of test cases T( T&lt;=10 ). Following lines are the scenarios of each test case.<br/>
In the first line of each test case, there is a single integer N( 3&lt;=N&lt;=1000000 ) – the number of nodes in the tree. The following N-1 lines describe the N-1 edges of the tree. Each line has a pair of integer U, V ( 1&lt;=U,V&lt;=N ), describing a bidirectional edge<br/>
 (U, V).
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
For each test case, please output one integer representing minimal cost to transform the tree to a cycle.
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">1
4
1 2
2 3
2 4</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">3
<div style="font-family:'Times New Roman'; background-color:rgb(244,251,255); border:1px dashed rgb(183,203,255); padding:6px"><div style="font-family:Arial; font-weight:bold; color:rgb(124,169,237); border-bottom-color:rgb(183,203,255); border-bottom-width:1px; border-bottom-style:dashed"><em>Hint</em></div>
In the sample above, you can disconnect (2,4) and then connect (1, 4) and
(3, 4), and the total cost is 3.
</div><span style="font-size:1px"> </span></div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Source</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2013%20ACM/ICPC%20Asia%20Regional%20Online%20%A1%AA%A1%AA%20Warmup&amp;source=1&amp;searchmode=source" style="color:rgb(26,92,200); text-decoration:none" target="_blank">2013 ACM/ICPC Asia<br/>
 Regional Online —— Warmup</a></div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Recommend</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
liuyiding</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<div>题意： 有一颗树， 删除一条边花费一权值， 添加一条边花费一权值。 问让N个节点构成一个环，最少花费多少权值。</div>
<div>思路： 树形DP</div>
<div>每次都将儿子节点变成一条链。</div>
<div><img alt="Tree2cycle" src="http://cdn.acmerblog.com/img/1447908368913.jpg"/>
</div>
<div>给个样例。 黑线表示操作数。  黑线与红线相交表示删除该红线。  两节点的黑线表示， 添加一条边。  </div>
<div>得到如图：</div>
<div><img alt="Tree2cycle" src="http://cdn.acmerblog.com/img/1447908369133.jpg"/>
</div>
<div>也就是说，</div>
<div>如果该节点有二个以上（包括二个）的分叉， 那么就首先与父亲断离，形成一条游离链。 还需要断离 sum – 2个儿子， 并且再次连接  sum – 2个儿子构成一条直链。</div>
<div>这里已经花费了  2 * （sum – 2) + 1次操作。 还需要一次操作是与下一个游离链相连。 即 2 * （sum – 1) 次操作。</div>
<div>如果该节点就是自定义的根节点， 那么其无需与父亲断离， 也无需与下一个游离链相连。 即需要 2 * （sum – 2)次操作。</div>
<div>每次与父亲断离后。 父亲就失去一个儿子节点。</div>
<div>如果该节点只有一个分叉或者是叶子节点， 什么都不管， 返回true. 表示 还是原树一起。
</div>
<div>然后再 + 1就会构成一个环。</div>
<div>
<pre class="brush:cpp" name="code">#pragma comment(linker,"/STACK:102400000,102400000")
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
using namespace std;
const int V = 1000000 + 50;
int pnt[V * 2], nxt[V * 2], head[V * 2], e;
int T, n, ans;
bool vis[V];
inline void addedge(int u, int v) {
    pnt[e] = v;
    nxt[e] = head[u];
    head[u] = e++;
}
bool dfs(int u) { //返回是否还是还是u的儿子。
    int sum = 0;
    vis[u] = true;
    for(int i = head[u]; i != -1; i = nxt[i])
        if(!vis[pnt[i]])
            sum += dfs(pnt[i]);
    if(sum &gt;= 2) {
        if(u == 1) //如果是根节点
            ans += 2 * (sum - 2);
        else
            ans += 2 * (sum - 1);
        return false;
    }
    else
        return true;
}
int main() {
    int i, j, k;
    scanf("%d", &amp;T);
    while(T--) {
        scanf("%d", &amp;n);
        e = ans = 0;
        memset(head, -1, sizeof(head));
        memset(vis, false, sizeof(vis));
        for(i = 0; i &lt; n - 1; ++i) {
            int a, b;
            scanf("%d%d", &amp;a, &amp;b);
            addedge(a, b);
            addedge(b, a);
        }
        dfs(1);
        printf("%d\n", ans + 1);
    }
}
</pre>
</div>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/dongdongzhang_/article/details/11395305</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97136">
<article class="comment" id="comment-97136">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919531465" rel="external nofollow">新用户217744</a></span> on <a href="http://www.acmerblog.com/hdu-4714-tree2cycle-7759.html#comment-97136" rel="nofollow"><time datetime="2017-04-20T00:52:30+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>等了一年了~！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>