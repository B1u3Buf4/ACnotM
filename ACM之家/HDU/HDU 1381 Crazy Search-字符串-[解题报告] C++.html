<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-09</div>
<div class="tit"><h1 class="entry-title">HDU 1381 Crazy Search-字符串-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/string" rel="category tag" title="查看字符串处理中的全部文章">字符串处理</a></span><span class="i4">围观891次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1815" href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comments" title="《HDU 1381 Crazy Search-字符串-[解题报告] C++》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Crazy Search</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Many people like to solve hard puzzles some of which may lead them to madness. One such puzzle could be finding a hidden prime number in a given text. Such number could be the number of different substrings of a given size that exist in the text. As you soon will discover, you really need the help of a computer and a good algorithm to solve such a puzzle.
<p>Your task is to write a program that given the size, N, of the substring, the number of different characters that may occur in the text, NC, and the text itself, determines the number of different substrings of size N that appear in the text.</p>
<p>As an example, consider N=3, NC=4 and the text "daababac". The different substrings of size 3 that can be found in this text are: "daa", "aab", "aba", "bab", "bac". Therefore, the answer should be 5.  </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of input consists of two numbers, N and NC, separated by exactly one space. This is followed by the text where the search takes place. You may assume that the maximum number of substrings formed by the possible set of characters does not exceed 16 Millions. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The program should output just an integer corresponding to the number of different substrings of size N found in the given text.<br/>The first line of a multiple input is an integer N, then a blank line followed by N input blocks. Each input block is in the format indicated in the problem description. There is a blank line between input blocks.
<p>The output format consists of N output blocks. There is a blank line between output blocks.</p>
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1

3 4
daababac</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
5</pre>
<p> <!-- problem end --></p>
<p>主要思路：将出现的字符用nc进制的数来表示，保证其不会重复出现。。若有重复子字符串则这个数就相同，len-n+1 总的子字符串个数。。这个需要仔细观察。hash存储查找一遍重复的–最后就只剩下不重复的子字符串的个数了。</p>
<p> </p>
<pre class="brush:cpp ">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#define N 16000007
int hash[8000000],assi[27];
char str[N];
int a[N];
int main()
{
#ifndef ONLINE_JUDGE
	freopen("acm.txt","r",stdin);
#endif
	int T,n,nc,len,k;
	int i,j,sum;
	scanf("%d",&amp;T);
	while(T--)
	{
		memset(hash,0,sizeof(hash));
		scanf("%d %d",&amp;n,&amp;nc);
		getchar();
		scanf("%s",str);
		len=strlen(str);
		i=0;
		k=0;
		for(i = 0; i &lt; len; i++)
		{
			a[i] = str[i] - 'a';
		}
		i = 0;
		while(str[i]!='\0')
		{
			if(assi[a[i]]==0)
				assi[a[i]]=k++;
			if(k==nc)
				break;
			i++;
		}
		int cnt=len-n+1;
		for(i=0;i&lt;len-n+1;i++)
		{
			sum=0;
			for(j=i;j&lt;i+n;j++)
			{
				sum=sum*nc+assi[a[j]];
			}
			sum%=N;
			if(hash[sum]==0)
				hash[sum]=1;
			else
				cnt--;
		}
		printf("%d\n",cnt);
		if(T&gt;0)
			printf("\n");
	}
	return 0;
}</pre>
<p>
 </p>
<p>解题报告转自：http://blog.csdn.net/vsooda/article/details/8542653</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-40805">
<article class="comment" id="comment-40805">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wangzhenvs123</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-40805" rel="nofollow"><time datetime="2015-04-29T04:11:06+00:00" pubdate="">2015年4月29日 at 上午4:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>/*<br/>
 * =====================================================================================<br/>
 *<br/>
 *       Filename:  1366.cc<br/>
 *<br/>
 *    Description:<br/>
 *<br/>
 *        Version:  1.0<br/>
 *        Created:  2014年01月06日 14时52分14秒<br/>
 *       Revision:  none<br/>
 *       Compiler:  gcc<br/>
 *<br/>
 *         Author:  Wenxian Ni (Hello World~), <a href="mailto:niwenxianq@qq.com">niwenxianq@qq.com</a><br/>
 *   Organization:  AMS/ICT<br/>
 *<br/>
 * =====================================================================================<br/>
 */</p>
<p>#include<br/>
#include </p>
<p>using namespace std;</p>
<p>int main()<br/>
{<br/>
    stack st;<br/>
    int n,i,j;<br/>
    int test;<br/>
    int a[100001];<br/>
    int b[100001];<br/>
    while(cin&gt;&gt;n)<br/>
    {<br/>
       for(i=1;i&gt;a[i];<br/>
       for(i=1;i&gt;b[i];<br/>
        //st.clear();<br/>
        while(!st.empty())<br/>
            st.pop();<br/>
        i = 1;<br/>
        j = 1;</p>
<p>        while(in)<br/>
                break;<br/>
            }<br/>
            while(!st.empty()&amp;&amp;st.top()==b[j])<br/>
            {<br/>
                st.pop();<br/>
                j++;<br/>
            }<br/>
        }<br/>
        if(st.empty())<br/>
            cout&lt;&lt;"YES"&lt;&lt;endl;<br/>
        else<br/>
            cout&lt;&lt;"NO"&lt;&lt;endl;<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12915">
<article class="comment" id="comment-12915">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mnmlist</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-12915" rel="nofollow"><time datetime="2015-04-17T05:14:25+00:00" pubdate="">2015年4月17日 at 上午5:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12913">
<article class="comment" id="comment-12913">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hsp_77_abc</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-12913" rel="nofollow"><time datetime="2015-02-15T07:26:27+00:00" pubdate="">2015年2月15日 at 上午7:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>m /= i; 是一直在变的。参考这一篇关于质因数的http://www.acmerblog.com/integer-factorization-5124.html</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54682">
<article class="comment" id="comment-54682">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magicSky</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-54682" rel="nofollow"><time datetime="2015-02-09T19:23:19+00:00" pubdate="">2015年2月9日 at 下午7:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯，是写错了，文中以更改。MAX ( L(X[0..m-2], Y[0..n-1]), L(X[0..m-1], Y[0..n-2])</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12917">
<article class="comment" id="comment-12917">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Christmas</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-12917" rel="nofollow"><time datetime="2014-11-28T03:48:29+00:00" pubdate="">2014年11月28日 at 上午3:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有点意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54683">
<article class="comment" id="comment-54683">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Spike</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-54683" rel="nofollow"><time datetime="2014-10-06T02:22:02+00:00" pubdate="">2014年10月6日 at 上午2:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>[…] 如果此题没有要求 相对位置不变，可以参考文章：http://www.acmerblog.com/interview-9-2427/ […]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40803">
<article class="comment" id="comment-40803">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">qq1005873807</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-40803" rel="nofollow"><time datetime="2014-09-11T11:42:30+00:00" pubdate="">2014年9月11日 at 上午11:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>从数学角度确实是C(n,r)，能给个递推关系式吗，从分治的角度不好理解</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40804">
<article class="comment" id="comment-40804">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hwp</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-40804" rel="nofollow"><time datetime="2014-09-03T08:57:10+00:00" pubdate="">2014年9月3日 at 上午8:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法挺不错。NewHead代表新的头节点，通过递归找到最后一个节点之后，就把这个节点赋给NewHead，然后一直返回返回，中途这个值是没有变化的，一边返回一边把相应的指针方向颠倒，最后结束时返回新的头节点到主函数。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-54681">
<article class="comment" id="comment-54681">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Spike</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-54681" rel="nofollow"><time datetime="2014-06-23T01:10:52+00:00" pubdate="">2014年6月23日 at 上午1:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>约瑟夫也用说这么长……很成熟的一个问题了，分治的方法解起来o(n)就可以了，有兴趣可以看看具体数学的第一章，关于约瑟夫问题推导出了一系列的结论，很漂亮</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12914">
<article class="comment" id="comment-12914">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">litaotao</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-12914" rel="nofollow"><time datetime="2014-03-10T23:54:42+00:00" pubdate="">2014年3月10日 at 下午11:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>简洁的代码</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12912">
<article class="comment" id="comment-12912">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AE</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-12912" rel="nofollow"><time datetime="2013-12-30T01:11:34+00:00" pubdate="">2013年12月30日 at 上午1:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>simple, however efficient. A lot of instances it is difficult to get that a??perfect balancea?? among usability and appearance. I must say that youa??ve done a exceptional task with this. Also, the blog masses quite fast for me on Web explore.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12916">
<article class="comment" id="comment-12916">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yipwinghong</a></span> on <a href="http://www.acmerblog.com/hdu-1381-Crazy-Search-1815.html#comment-12916" rel="nofollow"><time datetime="2013-12-20T16:59:31+00:00" pubdate="">2013年12月20日 at 下午4:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个条件 “两个数的乘积最小”可以忽略</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>