<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>04-13</div>
<div class="tit"><h1 class="entry-title">hdu 3846-pyramids-动态规划-[解题报告]hoj</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观253次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6848" href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comments" title="《hdu 3846-pyramids-动态规划-[解题报告]hoj》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p>
</p>
<div align="left" class="panel_title" style="height:38px; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
YaoYao has a company and he wants to employ m people recently. Since his company is so famous, there are n people coming for the interview. However, YaoYao is so busy that he has no time to interview them by himself. So he decides to select exact m interviewers<br/>
 for this task.<br/>
YaoYao decides to make the interview as follows. First he queues the interviewees according to their coming order. Then he cuts the queue into m segments. The length of each segment is<img alt="" src="http://localhost/blog/img/1447143934373.jpg" style="border:none"/> ,<br/>
 which means he ignores the rest interviewees (poor guys because they comes late). Then, each segment is assigned to an interviewer and the interviewer chooses the best one from them as the employee.<br/>
YaoYao’s idea seems to be wonderful, but he meets another problem. He values the ability of the ith arrived interviewee as a number from 0 to 1000. Of course, the better one is, the higher ability value one has. He wants his employees good enough, so the sum<br/>
 of the ability values of his employees must exceed his target k (exceed means strictly large than). On the other hand, he wants to employ as less people as possible because of the high salary nowadays. Could you help him to find the smallest m?
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
The input consists of multiple cases.<br/>
In the first line of each case, there are two numbers n and k, indicating the number of the original people and the sum of the ability values of employees YaoYao wants to hire (n≤200000, k≤1000000000). In the second line, there are n numbers v1, v2, …, vn (each<br/>
 number is between 0 and 1000), indicating the ability value of each arrived interviewee respectively.<br/>
The input ends up with two negative numbers, which should not be processed as a case.
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
For each test case, print only one number indicating the smallest m you can find. If you can’t find any, output -1 instead.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="word-wrap:break-word; white-space:pre-wrap; margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">11 300
7 100 7 101 100 100 9 100 100 110 110
-1 -1</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="word-wrap:break-word; white-space:pre-wrap; margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">3
<div style="font-family:'Times New Roman'; border:1px dashed rgb(183,203,255); padding:6px; background-color:rgb(244,251,255)"><div style="font-family:Arial; font-weight:bold; color:rgb(124,169,237); border-bottom-color:rgb(183,203,255); border-bottom-width:1px; border-bottom-style:dashed"><em>Hint</em></div>We need 3 interviewers to help YaoYao. The first one interviews people from 1 to 3, the second interviews people from 4 to 6, 
and the third interviews people from 7 to 9. And the people left will be ignored. And the total value you can get is 100+101+100=301&gt;300.</div><span style="font-size:1px"> </span></div></pre>
</div>
<p></p>
<p><span style="white-space:pre"></span>这个题目是rmq先打出st表，然后暴搜，首先找到整个区间的最大值max，那么他需要的人数最少是（k / max ）；所以从这个点开始暴搜，一般的暴搜会超时；注意这里的（k / max ）可能为0 ，那么就应该分类讨论，注意这里不能用二分查找因为这个函数不是单调的，如果最后一个人的值很大，然后 ans = n;的时候选上了可能满足，但是如果n+1的时候选不上，那么就可能不满足，所以这个函数不是单调的；</p>
<p><span style="white-space:pre"></span>代码：</p>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
using namespace std;
int sum,k;
int num[2000005];
int dp[2000005][40];
void rmp_st(int n)
{
    int i,j;
    for(i=0;i&lt;n;i++)
       dp[i][0]=num[i];
    for(j=1;j&lt;=(int)(log((double)n)/log(2.0));j++)
    {
        for(i=0;i+(1&lt;&lt;j)-1&lt;n;i++)
           dp[i][j]=max(dp[i][j-1],dp[i+(1&lt;&lt;(j-1))][j-1]);
    }
}
int rmp_find(int L,int R)
{
    int x=(int)(log(double(R-L+1))/log(2.0));
    return max(dp[L][x],dp[R-(1&lt;&lt;x)+1][x]);
}

bool devide( int n )
{
    int people = sum / n;
    int marks = 0;
    for ( int i = 0; i &lt; n; i++)
    {
        marks += rmp_find(i*people,i*people+people-1);
        if ( marks &gt; k ) return true;
    }
    return false;
}
int main()
{

    while ( scanf("%d %d",&amp;sum,&amp;k))
    {
        if ( sum == -1 ) break;
        int maxsum = 0,flag = 0;
        for ( int i = 0; i &lt; sum; i++)
        {
            scanf("%d",&amp;num[i]);
            if (!flag) maxsum += num[i];
            if ( maxsum &gt;= k ) flag = 1;
        }
        if ( !flag )///如果flag == 1 就是说明所有人加起来也不能凑足k
        {
            printf("-1\n"); continue;
        }
        rmp_st(sum);
        int t = rmp_find(0,sum-1);
        if ( t &gt; k )///题目要求严格大于；
        {
            printf("1\n"); continue;
        }
        int ans = k/t;///这里的ans可能为0；所以要在上面分情况讨论
        for(;;)
        {
            if(!devide(ans)) ans++;
            else break;
        }
        printf("%d\n",ans);
    }

}
</pre>
<p>
 </p>
<p>
</p>
<p>
</p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-72305">
<article class="comment" id="comment-72305">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919528571" rel="external nofollow">新用户969797</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-72305" rel="nofollow"><time datetime="2017-04-11T17:41:14+00:00" pubdate="">2017年4月11日 at 下午5:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>算了，前十……</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34224">
<article class="comment" id="comment-34224">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bobo</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34224" rel="nofollow"><time datetime="2015-07-04T21:47:55+00:00" pubdate="">2015年7月4日 at 下午9:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>m^n % k 的算法写错了，没有人发现吗？？？正确的返回值应该是return b*m % k;</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-34221">
<article class="comment" id="comment-34221">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">GDUTtian</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34221" rel="nofollow"><time datetime="2015-07-04T03:10:15+00:00" pubdate="">2015年7月4日 at 上午3:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>使用ListNodeWrapper很蹩脚的感觉，没有更好的解决办法？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34233">
<article class="comment" id="comment-34233">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Klaus</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34233" rel="nofollow"><time datetime="2015-07-01T13:22:27+00:00" pubdate="">2015年7月1日 at 下午1:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这排版…你都打开来看看改改</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-34228">
<article class="comment" id="comment-34228">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mitrenick</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34228" rel="nofollow"><time datetime="2015-06-20T09:58:32+00:00" pubdate="">2015年6月20日 at 上午9:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>27行 minStack.push(minValue); 去掉就对了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34227">
<article class="comment" id="comment-34227">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34227" rel="nofollow"><time datetime="2015-06-19T22:06:59+00:00" pubdate="">2015年6月19日 at 下午10:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-34225">
<article class="comment" id="comment-34225">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ding Qiangyuan</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34225" rel="nofollow"><time datetime="2015-06-02T19:11:15+00:00" pubdate="">2015年6月2日 at 下午7:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好，找的就是这一题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34222">
<article class="comment" id="comment-34222">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">g29tony</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34222" rel="nofollow"><time datetime="2015-05-31T07:49:20+00:00" pubdate="">2015年5月31日 at 上午7:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-34231">
<article class="comment" id="comment-34231">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AE</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34231" rel="nofollow"><time datetime="2015-05-20T22:35:48+00:00" pubdate="">2015年5月20日 at 下午10:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>写的好·····  Pollard Rho快速因数分解</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34232">
<article class="comment" id="comment-34232">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yupeng.bai</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34232" rel="nofollow"><time datetime="2015-05-08T02:57:30+00:00" pubdate="">2015年5月8日 at 上午2:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-34229">
<article class="comment" id="comment-34229">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">michaelwen</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34229" rel="nofollow"><time datetime="2015-05-04T14:41:47+00:00" pubdate="">2015年5月4日 at 下午2:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有没有C++语言的代码？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34226">
<article class="comment" id="comment-34226">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">OrangeGuy</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34226" rel="nofollow"><time datetime="2015-04-26T12:16:30+00:00" pubdate="">2015年4月26日 at 下午12:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>通不过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-34230">
<article class="comment" id="comment-34230">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HenrryCheng</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34230" rel="nofollow"><time datetime="2015-04-25T13:25:31+00:00" pubdate="">2015年4月25日 at 下午1:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>nice!!!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34223">
<article class="comment" id="comment-34223">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bobo</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34223" rel="nofollow"><time datetime="2015-04-21T02:45:38+00:00" pubdate="">2015年4月21日 at 上午2:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>2的64次方是多少？ 这到底是在考什么啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-34234">
<article class="comment" id="comment-34234">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AE</a></span> on <a href="http://www.acmerblog.com/hdu-3846-pyramids-6848.html#comment-34234" rel="nofollow"><time datetime="2015-04-20T21:36:48+00:00" pubdate="">2015年4月20日 at 下午9:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>加了星号 (*) 表示跳过此数据不读入. 因为scanf是不读取本行回车的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>