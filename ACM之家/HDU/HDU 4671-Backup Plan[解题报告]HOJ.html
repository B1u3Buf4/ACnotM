<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>09-17</div>
<div class="tit"><h1 class="entry-title">HDU 4671-Backup Plan[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观82次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7716" href="http://www.acmerblog.com/hdu-4671-backup-plan-7716.html#comments" title="《HDU 4671-Backup Plan[解题报告]HOJ》上的评论">一条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h1 style="color:rgb(26,92,200); text-align:center; font-family:'Times New Roman'">
Backup Plan</h1>
<p><span style="font-family:'Times New Roman'; font-size:14px"><strong><span style="font-family:Arial; font-size:12px; color:green">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65535/65535 K (Java/Others)<br/>
Total Submission(s): 136    Accepted Submission(s): 54<br/>
<span style="color:red">Special Judge</span></span></strong></span><br style="font-family:'Times New Roman'; font-size:14px"/><br/>
<br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
Makomuno has N servers and M databases. All databases are synchronized among all servers and each database has a ordered list denotes the priority of servers to access. This list is guaranteed to be a valid permutation of all servers.<br/>
Every time someone wants to execute queries on a certain database, he will send a request to the first server in the list. If it’s dead, he will simply turn to the next one. Otherwise a working copy of the database is found, and this copy is called active.<br/>
Now, given N and M, Makomuno wants to find a permutation for each database which could assure that all servers are load-balanced. Moreover, Makomuno hopes the system will be load-balanced even if <strong>exactly</strong> one server is broken.<br/>
Note that if we call the number of active copies on i-th server A<sub>i</sub>, then load-balanced means max∣A<sub>i</sub> - A<sub>j</sub>∣≤1 for any i and j in non broken servers set. We won’t consider broken servers in this case.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
The input contains several test cases, terminated by EOF.<br/>
Each test case has one line containing two integer N ( 2≤N≤100) and M ( 1≤M≤100).</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
For each case output M lines, the i-th line contains a permutation of all servers, indicating the expected order. Servers are numbered from 1 to n.
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">5 3</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">2 4 3 1 5
1 5 4 2 3
3 5 2 4 1
<div style="font-family:'Times New Roman'; background-color:rgb(244,251,255); border:1px dashed rgb(183,203,255); padding:6px"><div style="font-family:Arial; font-weight:bold; color:rgb(124,169,237); border-bottom-color:rgb(183,203,255); border-bottom-width:1px; border-bottom-style:dashed"><em>Hint</em></div>
In the sample test case, the active copies of these databases are on server 2,1 and 3 in normal state. A = {1,1,1,0,0}
If server 1 or 3 has broken, server 5 will take its work. In case we lost server 2, the second database will use server 4 instead. A = {1,BROKEN,1,1,0}
It's clear that in any case this system is load-balanced according to the plan in sample output. 
</div><span style="font-size:1px"> </span></div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Source</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2013%20Multi-University%20Training%20Contest%207&amp;source=1&amp;searchmode=source" style="color:rgb(26,92,200); text-decoration:none" target="_blank">2013 Multi-University Training Contest<br/>
 7</a></div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Recommend</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
zhuyuanchen520</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<div>
</div>
<div>题意： 略：</div>
<div>思路： YY</div>
<div>只要弄好前两列就可以。 因为整个计划只会坏一台服务器。</div>
<div>尽量让每个服务器出现次数相同</div>
<div>第一列按顺序填就好。</div>
<div>第二列， 在相同服务器的，  更换的服务器接着第一列的顺序。</div>
<div>
</div>
<div>
<pre class="brush:cpp" name="code">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
using namespace std;
const int V = 105;
int n, m, ans[V][V];
bool vis[V][V];
int main() {
    int i, j, k;
    while(~scanf("%d%d", &amp;n, &amp;m)) {
        memset(ans, 0, sizeof(ans));
        memset(vis, false, sizeof(vis));
        for(i = 0, j = 1; i &lt; m; ++i) {
            ans[i][0] = j;
            vis[i][j] = true;
            j = j == n ? 1 : j + 1;
        }
        for(i = 0; i &lt; m; ++i) {
            if(ans[i][1] != 0)
                continue;
            int now = m % n + 1;
            for(j = i; j &lt; m; j += n) {
                if(now == ans[j][0])
                    now = now == n ? 1 : now + 1;
                ans[j][1] = now;
                vis[j][now] = true;
                now = now == n ? 1 : now + 1;
            }
        }
        for(i = 0; i &lt; m; ++i)
            for(j = 2, k = 1; j &lt; n; ++j) {
                while(vis[i][k])
                    k++;
                ans[i][j] = k++;
            }
        for(i = 0; i &lt; m; ++i) {
            for(j = 0; j &lt; n - 1; ++j)
                printf("%d ", ans[i][j]);
            printf("%d\n", ans[i][n - 1]);
        }
    }
}
</pre>
</div>
<div>
</div>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/dongdongzhang_/article/details/9954751</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97174">
<article class="comment" id="comment-97174">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514610" rel="external nofollow">新用户263843</a></span> on <a href="http://www.acmerblog.com/hdu-4671-backup-plan-7716.html#comment-97174" rel="nofollow"><time datetime="2017-04-20T00:52:32+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>数学绝对是自学的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>