<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-05</div>
<div class="tit"><h1 class="entry-title">HDU 3519-Lucky Coins Sequence[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观349次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6480" href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comments" title="《HDU 3519-Lucky Coins Sequence[解题报告]HOJ》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Lucky Coins Sequence</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
As we all know,every coin has two sides,with one side facing up and another side facing down.Now,We consider two coins’s state is same if they both facing up or down.If we have N coins and put them in a line,all of us know that it will be 2^N different ways.We call a "N coins sequence" as a Lucky Coins Sequence only if there exists more than two continuous coins’s state are same.How many different Lucky Coins Sequences exist? </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There will be sevaral test cases.For each test case,the first line is only a positive integer n,which means n coins put in a line.Also,n not exceed 10^9. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There will be sevaral test cases.For each test case,the first line is only a positive integer n,which means n coins put in a line.Also,n not exceed 10^9.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3
4</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
2
6</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;
using namespace std;
#define LL long long
#define FF(i, n) for (int i = 0; i &lt; n; i++)
#define M 2

int ans[M];
int ret[M][M], mod = 10007;
int init[M][M];
int s[M][M] = { 1, 1,
 1, 0 };

void ini(int n)
{
 FF(i, n) FF(j, n) init[i][j] = s[i][j];
}

void matmul(int a[][M], int b[][M], int n)
{
 int tp[M][M] = {0};
 FF(i, n) FF(k, n) if(a[i][k]) FF(j, n) if(b[k][j])
 tp[i][j] = (tp[i][j]+(LL)a[i][k]*b[k][j]) % mod;
 FF(i, n) FF(j, n) a[i][j] = tp[i][j];
}

void qmod(int n, int b)
{
 FF(i, n) FF(j, n) ret[i][j] = (i==j);
 for ( ; b; b &gt;&gt;= 1)
 {
 if (b &amp; 1) matmul(ret, init, n);
 matmul(init, init, n);
 }
}

int cal(int a, int b)
{
 a %= mod;
 int res = 1;
 for ( ; b; b &gt;&gt;= 1)
 {
 if (b &amp; 1) res = res * a % mod;
 a = a * a % mod;
 }
 return res;
}

int main()
{
 int n;
 while (cin &gt;&gt; n)
 {
 ini(M);
 qmod(M, n+1);
 cout &lt;&lt; (cal(2,n)-2*ret[0][1]%mod+mod)%mod &lt;&lt; endl;
 }
 return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-30863">
<article class="comment" id="comment-30863">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">aaa</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30863" rel="nofollow"><time datetime="2015-06-10T22:10:22+00:00" pubdate="">2015年6月10日 at 下午10:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好厉害～</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30868">
<article class="comment" id="comment-30868">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yipwinghong</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30868" rel="nofollow"><time datetime="2015-05-22T00:14:09+00:00" pubdate="">2015年5月22日 at 上午12:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个解法好像不对</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30873">
<article class="comment" id="comment-30873">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jixiangniao993</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30873" rel="nofollow"><time datetime="2015-04-20T10:26:59+00:00" pubdate="">2015年4月20日 at 上午10:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有意思，有难度</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58908">
<article class="comment" id="comment-58908">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">crazymage</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-58908" rel="nofollow"><time datetime="2015-04-09T11:52:20+00:00" pubdate="">2015年4月9日 at 上午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Java真是解决大数的利器</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30866">
<article class="comment" id="comment-30866">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">starcuan</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30866" rel="nofollow"><time datetime="2015-03-21T04:40:42+00:00" pubdate="">2015年3月21日 at 上午4:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>请问printAllCombination的时间复杂度怎么分析呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30867">
<article class="comment" id="comment-30867">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30867" rel="nofollow"><time datetime="2015-03-19T10:52:37+00:00" pubdate="">2015年3月19日 at 上午10:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>问题3是不是应该为1/4  .因为截取的三段，无论是否能组成三角形， x， y-x ，1-y,都应大于0，所以  x&lt;y,基础应该是一个大三角形。小三角是大三角的 1/4.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30872">
<article class="comment" id="comment-30872">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30872" rel="nofollow"><time datetime="2015-03-12T18:48:06+00:00" pubdate="">2015年3月12日 at 下午6:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已经挂掉了，给个参考呗</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30871">
<article class="comment" id="comment-30871">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">April</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30871" rel="nofollow"><time datetime="2015-03-09T03:58:49+00:00" pubdate="">2015年3月9日 at 上午3:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给你一组数据吧：29 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 1000。此时的数据量还是很小的，耗时却不短。这种方法确实可以，当然或许还有其他的优化方案，但是优化只能针对某些数据，不太可能在所有情况下都能在可接受的时间内求解出答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30870">
<article class="comment" id="comment-30870">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jandk</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30870" rel="nofollow"><time datetime="2015-03-02T19:09:18+00:00" pubdate="">2015年3月2日 at 下午7:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好网站，肯定会火的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30862">
<article class="comment" id="comment-30862">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30862" rel="nofollow"><time datetime="2015-03-01T13:06:40+00:00" pubdate="">2015年3月1日 at 下午1:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>通不过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30874">
<article class="comment" id="comment-30874">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linzzzz</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30874" rel="nofollow"><time datetime="2015-02-15T04:36:58+00:00" pubdate="">2015年2月15日 at 上午4:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30864">
<article class="comment" id="comment-30864">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lin</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30864" rel="nofollow"><time datetime="2014-12-25T05:09:02+00:00" pubdate="">2014年12月25日 at 上午5:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二块代码if(it != mp.end())应改为if(it != mp.end() &amp;&amp; (i+1)!=(it-&gt;second +1))；因为第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30869">
<article class="comment" id="comment-30869">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">michaelwen</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30869" rel="nofollow"><time datetime="2014-12-09T00:59:45+00:00" pubdate="">2014年12月9日 at 上午12:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了。找到这题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30865">
<article class="comment" id="comment-30865">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1832044043</a></span> on <a href="http://www.acmerblog.com/hdu-3519-lucky-coins-sequence-6480.html#comment-30865" rel="nofollow"><time datetime="2014-11-19T10:33:50+00:00" pubdate="">2014年11月19日 at 上午10:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>约瑟夫也用说这么长……很成熟的一个问题了，分治的方法解起来o(n)就可以了，有兴趣可以看看具体数学的第一章，关于约瑟夫问题推导出了一系列的结论，很漂亮</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>