<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-26</div>
<div class="tit"><h1 class="entry-title">hdu 2013 蟠桃记-递推-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math" rel="category tag" title="查看数学相关中的全部文章">数学相关</a>, <a href="http://www.acmerblog.com/category/basis/recurrence" rel="category tag" title="查看递推中的全部文章">递推</a></span><span class="i4">围观896次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3098" href="http://www.acmerblog.com/hdu-2013-3098.html#comments" title="《hdu 2013 蟠桃记-递推-[解题报告]C++》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">蟠桃记</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
喜欢西游记的同学肯定都知道悟空偷吃蟠桃的故事，你们一定都觉得这猴子太闹腾了，其实你们是有所不知：悟空是在研究一个数学问题！<br/>什么问题？他研究的问题是蟠桃一共有多少个！<br/>不过，到最后，他还是没能解决这个难题，呵呵^-^<br/>当时的情况是这样的：<br/>第一天悟空吃掉桃子总数一半多一个，第二天又将剩下的桃子吃掉一半多一个，以后每天吃掉前一天剩下的一半多一个，到第n天准备吃的时候只剩下一个桃子。聪明的你，请帮悟空算一下，他第一天开始吃的时候桃子一共有多少个呢？ </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
输入数据有多组，每组占一行，包含一个正整数n（1&lt;n&lt;30），表示只剩下一个桃子的时候是在第n天发生的。 </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
输入数据有多组，每组占一行，包含一个正整数n（1&lt;n&lt;30），表示只剩下一个桃子的时候是在第n天发生的。</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
4</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
4
22</pre>
<p> <!-- problem end --></p>
<p><span style="font-size:18px">题目链接：<a href="http://acm.hdu.edu.cn/showproblem.php?pid=2013" target="_blank">http://acm.hdu.edu.cn/showproblem.php?pid=2013</a></span></p>
<p><span style="font-size:18px"><br/>
</span></p>
<p><span style="font-size:18px">迭代的方法很简单，直接按题目意思来就可以了。<br/>
</span></p>
<blockquote><p><tt></tt></p>
<pre>&lt;span style="font-size:18px;"&gt;for (s = n = 1; n &amp;amp;lt; 30; n++)s = (s + 1) * 2;&lt;/span&gt;</pre>
<p><tt></tt></p>
<pre>&lt;span style="font-size:18px;"&gt;&lt;br /&gt;&lt;/span&gt;</pre>
<p><tt></tt></p>
<pre>&lt;span style="font-size:18px;"&gt;&lt;br /&gt;&lt;/span&gt;</pre>
</blockquote>
<p><span style="font-size:12px">计算机的鼻祖本来就是数学家，自然优化程序的最终方法还是要回归到数学上。<br/>
本题很容易得到它的递推方程: </span></p>
<blockquote><p><span style="font-size:14px"><tt></tt></span></p>
<pre>f(1) = 1;f(n) = [f(n-1) + 1] × 2;</pre>
</blockquote>
<p>于是我们得到:</p>
<blockquote><p><span style="font-size:14px"></span></p>
<pre>f(n) + 2 = 2 × [f(n-1) + 2]
f(1) + 2 = 3

=&gt;

f(n) + 2 = 3 × 2<sup>n-1</sup>

=&gt;

f(n) = 3 × 2<sup>n-1</sup> - 2
</pre>
</blockquote>
<p>对于这种推断题还有另外一种递推方法，虽然对于本题来说很麻烦。但有时候它是无可替代的。</p>
<blockquote><p><span style="font-size:14px"></span></p>
<pre>f(1) = 1;
f(n) = 2f(n-1) + 2 = f(n-1) + 2f(n-2) + 4;

=&gt;

f(n) + f(n-1) + 4 = 2 × [f(n-1) + f(n+2) + 4];

设 g(n) = f(n) + f(n-1) + 4;

则 g(n) = 2 × g(n-1);
   g(2) = f(2) + f(1) + 4 = 9;

∴g(n) = 9 × 2<sup>n-2</sup>  (n &gt; 1)

∴f(n)   + f(n-1) = 9 × 2<sup>n-2</sup> - 4	①
  f(n-1) + f(n-2) = 9 × 2<sup>n-3</sup> - 4	②
  ┋
  f(3)   + f(2)   = 9 × 2 - 4
  f(2)   + f(1)   = 9 - 4

把①式减去②式得
  f(n)   = 9 × 2<sup>n-3</sup> + f(n-2)
  f(n-2) = 9 × 2<sup>n-5</sup> + f(n-4)
  ┋
</pre>
</blockquote>
<p>这时候，我们需要分类讨论了:</p>
<ol>
<li type="A">n为奇数<br/>
<blockquote><p><span style="font-size:14px"></span></p>
<pre>  f(n)   = 9 × 2<sup>n-3</sup> + f(n-2)
  f(n-2) = 9 × 2<sup>n-5</sup> + f(n-4)
  ┋
  f(5)   = 9 × 2<sup>2</sup> + f(3)
  f(3)   = 9 + f(1)
  f(1)   = 1

从下往上迭代，得:
  f(n) = 9 × (2<sup>n-3</sup> + 2<sup>n-5</sup> + ... + 2<sup>2</sup> + 1) + 1
=&gt;
  f(n) = 9 × (1 - 4<sup>(n-1)/2</sup>) ÷ (1 - 4) + 1
=&gt;
  f(n) = 3 × 2<sup>n - 1</sup> - 2
</pre>
</blockquote>
</li>
<li type="A">n为偶数<br/>
<blockquote><p><span style="font-size:14px"></span></p>
<pre>  f(n)   = 9 × 2<sup>n-3</sup> + f(n-2)
  f(n-2) = 9 × 2<sup>n-5</sup> + f(n-4)
  ┋
  f(4)   = 9 × 2<sup>1</sup> + f(2)
  f(2)   = 4

从下往上迭代，得:
  f(n) = 9 × (2<sup>n-3</sup> + 2<sup>n-5</sup> + ... + 2<sup>1</sup>) + 4
=&gt;
  f(n) = 9 × 2 × (1 - 4<sup>(n-2)/2</sup>) ÷ (1 - 4) + 4
=&gt;
  f(n) = 3 × 2<sup>n - 1</sup> - 2
</pre>
</blockquote>
</li>
</ol>
<p>世上的事往往如此，巧合的事情经常发生。不得不感叹大自然的美妙~<br/>
现在我们就得到了这道题目的公式了: f(n) = 3 × 2<sup>n – 1</sup> – 2</p>
<p><span style="font-size:12px"></span></p>
<p></p>
<pre class="brush:cpp ">#include &lt;math.h&gt;
#include &lt;stdio.h&gt;

int main(void)
{
    int n;

    while (scanf("%d", &amp;n) != EOF)
        printf("%.0f\n", 3 * pow(2, n - 1) - 2);

    return 0;
}</pre>
<p>解题转自：http://blog.csdn.net/basementman/article/details/16920389</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-87685">
<article class="comment" id="comment-87685">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919517481" rel="external nofollow">新用户709212</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-87685" rel="nofollow"><time datetime="2017-04-13T07:51:11+00:00" pubdate="">2017年4月13日 at 上午7:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好想看一次他们着火乱跑的样子</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18419">
<article class="comment" id="comment-18419">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">digiworm</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18419" rel="nofollow"><time datetime="2015-06-27T10:59:10+00:00" pubdate="">2015年6月27日 at 上午10:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这张页面太松散拉，重新编辑一下，弄紧凑一点。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-18427">
<article class="comment" id="comment-18427">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhiqiang</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18427" rel="nofollow"><time datetime="2015-06-06T11:36:02+00:00" pubdate="">2015年6月6日 at 上午11:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>居然是机试，还和13年重复。题目不难</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18426">
<article class="comment" id="comment-18426">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">nwling</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18426" rel="nofollow"><time datetime="2015-06-01T13:52:31+00:00" pubdate="">2015年6月1日 at 下午1:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢支持！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-18423">
<article class="comment" id="comment-18423">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hehe_snail</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18423" rel="nofollow"><time datetime="2015-05-15T05:03:50+00:00" pubdate="">2015年5月15日 at 上午5:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种想法，我想来好久，为啥需要一个newhead，发现是把最后一个节点一直返回到嘴上面这层函数。厉害，这道题之前没样子想过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18424">
<article class="comment" id="comment-18424">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18424" rel="nofollow"><time datetime="2015-01-30T23:36:43+00:00" pubdate="">2015年1月30日 at 下午11:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大哥，你复制也看看是不是这题的答案才复制吧。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-18422">
<article class="comment" id="comment-18422">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Baifern</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18422" rel="nofollow"><time datetime="2014-11-14T16:24:28+00:00" pubdate="">2014年11月14日 at 下午4:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>隐藏最深的bug是(start+end)/2有可能上溢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18417">
<article class="comment" id="comment-18417">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhuliyan</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18417" rel="nofollow"><time datetime="2014-09-30T06:36:55+00:00" pubdate="">2014年9月30日 at 上午6:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不太明白DFS的方法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-43651">
<article class="comment" id="comment-43651">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">dreams</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-43651" rel="nofollow"><time datetime="2014-09-09T06:31:25+00:00" pubdate="">2014年9月9日 at 上午6:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>抱歉，确实是弄错了，原来的代码是错误的，删掉了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18418">
<article class="comment" id="comment-18418">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">645198</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18418" rel="nofollow"><time datetime="2014-06-06T10:46:03+00:00" pubdate="">2014年6月6日 at 上午10:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个后缀数组不是常用的那个.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-56078">
<article class="comment" id="comment-56078">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hong0220</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-56078" rel="nofollow"><time datetime="2014-04-17T04:08:23+00:00" pubdate="">2014年4月17日 at 上午4:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>swap写成内联函数会不会好一些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18421">
<article class="comment" id="comment-18421">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">usx13123</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18421" rel="nofollow"><time datetime="2014-02-28T05:43:14+00:00" pubdate="">2014年2月28日 at 上午5:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的思路，可以借鉴</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-43652">
<article class="comment" id="comment-43652">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">silianbo</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-43652" rel="nofollow"><time datetime="2014-02-23T09:08:12+00:00" pubdate="">2014年2月23日 at 上午9:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>理解错了。。。。。谢谢楼主~~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18420">
<article class="comment" id="comment-18420">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wangzhenvs123</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18420" rel="nofollow"><time datetime="2014-01-07T16:02:23+00:00" pubdate="">2014年1月7日 at 下午4:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顶一个 赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-18425">
<article class="comment" id="comment-18425">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ruoshui</a></span> on <a href="http://www.acmerblog.com/hdu-2013-3098.html#comment-18425" rel="nofollow"><time datetime="2013-12-29T12:29:11+00:00" pubdate="">2013年12月29日 at 下午12:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>能不能说下这个是用的什么算法策略？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>