<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-12</div>
<div class="tit"><h1 class="entry-title">hdu 2646 Expression[解题报告]hoj</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观325次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4238" href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comments" title="《hdu 2646 Expression[解题报告]hoj》上的评论">21 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Expression</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
As a shopkeeper of a restaurant,everyday ,dandelion’s mother needs to calculate the incomes.Sometimes,she may make some mistakes.So dandelion wants you to write a program to help her calculate the value of some expressions.<br/>  You may consider every expression is made of :left parenthesis ‘(‘ ,right parenthesis ‘)’ , plus sign ‘+’ , subtraction sign ‘-’ , multiplication sign ‘*’ ,positive sign ‘+’ ,and negative sign ‘-’.There is no precursor 0.The length of expression will not exceed 100.The value produced during the calculating will not exceed 10^9.Every expression is legal.Ie. ((10+(-100))) ，-（-1），-3*(+5+7*2)-(0) ，-0 ，(-3)*(-5+7) are legal,while 1+-7 ，–3+8 ，-3+() are illegal. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There are several cases,every line contains a expression. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There are several cases,every line contains a expression.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
-3*(+5-7*2)-(0)</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
27</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;cctype&gt;
#include &lt;cstdlib&gt;
#include &lt;ctime&gt;
#include &lt;climits&gt;
#include &lt;cmath&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;list&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
#include &lt;deque&gt;
#include &lt;algorithm&gt;
using namespace std;
typedef long long ll;
const int INF = 0x3f3f3f3f;
const int maxn = 210;

int T,cas=1,n,len;
ll ans;
struct Node
{
    int idx, weight;
}a[maxn];
char str[maxn],str2[maxn];
int num[10];

bool operator &lt; (const Node &amp; a, const Node &amp; b)
{
    return (a.weight == b.weight &amp;&amp; a.idx &gt; b.idx ) || a.weight &gt; b.weight;
}

void dfs(int &amp;i,int sym)
{
    int cursym=1, cnt=0;
    while (i&lt;len)
    {
        if (str[i]=='#') {cnt++; i++;}
        else
        {
            if (cnt&gt;0)
            {
                for (int j=1,r=1;j&lt;=cnt;j++,r*=10)
                {
                    a[n].idx=i-j;
                    a[n].weight=r*(sym*cursym);
                    n++;
                }
                cnt=0;
            }
            if (str[i]==')') { i++; return; }
            else if (str[i]=='(') { i++; dfs(i,sym*cursym); }
            else if (str[i]=='+') { cursym=1; i++; }
            else if (str[i]=='-') { cursym=-1; i++; }
            else return;
        }
    }
}

int main()
{
    scanf("%d",&amp;T);
    while (T--)
    {
        scanf("%s%s",str,str2);

        for (int i=0;i&lt;10;i++) num[i]=0;
        for (int i=0;str2[i];i++) num[str2[i]-48]++;

        len=strlen(str);
        str[len]='$'; len++; str[len]=0;
        n=0;
        int i=0;
        dfs(i,1);

        sort(a,a+n);
        ans=0;
        for (int i=0,cur=9;i&lt;n;i++)
        {
            while (num[cur]==0) cur--;
            num[cur]--;
            ans+=cur*a[i].weight;
            str[a[i].idx]=cur+48;
        }

        printf("Case %d:\n",cas++);
        str[--len]=0;
        printf("%s\n",str);
        printf("%lld\n",ans);
    }
	return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-83533">
<article class="comment" id="comment-83533">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463207" rel="external nofollow">新用户234649</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-83533" rel="nofollow"><time datetime="2017-04-12T22:38:35+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>15关四字歌是？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83532">
<article class="comment" id="comment-83532">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463207" rel="external nofollow">新用户234649</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-83532" rel="nofollow"><time datetime="2017-04-12T22:38:35+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>15关四字歌是？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-83531">
<article class="comment" id="comment-83531">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463207" rel="external nofollow">新用户234649</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-83531" rel="nofollow"><time datetime="2017-04-12T22:38:35+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>15关四字歌是？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83530">
<article class="comment" id="comment-83530">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463207" rel="external nofollow">新用户234649</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-83530" rel="nofollow"><time datetime="2017-04-12T22:38:35+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>15关四字歌是？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-83529">
<article class="comment" id="comment-83529">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463207" rel="external nofollow">新用户234649</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-83529" rel="nofollow"><time datetime="2017-04-12T22:38:35+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>15关四字歌是？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83528">
<article class="comment" id="comment-83528">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463207" rel="external nofollow">新用户234649</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-83528" rel="nofollow"><time datetime="2017-04-12T22:38:35+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>15关四字歌是？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-83527">
<article class="comment" id="comment-83527">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919463207" rel="external nofollow">新用户234649</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-83527" rel="nofollow"><time datetime="2017-04-12T22:38:35+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>15关四字歌是？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23655">
<article class="comment" id="comment-23655">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HaibaraAi</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-23655" rel="nofollow"><time datetime="2015-07-01T23:21:57+00:00" pubdate="">2015年7月1日 at 下午11:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>L（X [0 .. M-1]，Y [0 .. N-1]）= 1 + L（X [0 .. M-2]，Y [0 .. N-1]）这个地方也也有笔误<br/>
应改为L（X [0 .. M-1]，Y [0 .. N-1]）= 1 + L（X [0 .. M-2]，Y [0 .. N-2]）</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23651">
<article class="comment" id="comment-23651">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhenghao</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-23651" rel="nofollow"><time datetime="2015-06-18T12:35:16+00:00" pubdate="">2015年6月18日 at 下午12:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23653">
<article class="comment" id="comment-23653">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">testnew</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-23653" rel="nofollow"><time datetime="2015-05-15T16:37:07+00:00" pubdate="">2015年5月15日 at 下午4:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>L（X [0 .. M-1]，Y [0 .. N-1]）= 1 + L（X [0 .. M-2]，Y [0 .. N-1]）这个地方也也有笔误<br/>
应改为L（X [0 .. M-1]，Y [0 .. N-1]）= 1 + L（X [0 .. M-2]，Y [0 .. N-2]）</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46077">
<article class="comment" id="comment-46077">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jamoeba</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-46077" rel="nofollow"><time datetime="2015-04-12T08:38:16+00:00" pubdate="">2015年4月12日 at 上午8:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>&amp;amp;这是C语言？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57194">
<article class="comment" id="comment-57194">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HenrryCheng</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-57194" rel="nofollow"><time datetime="2015-03-16T18:22:59+00:00" pubdate="">2015年3月16日 at 下午6:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学算法中的数据结构学到一定程度会乐此不疲的，比如其中的2－3树，类似的红黑树，我甚至可以自己写个逻辑文件系统结构来。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23654">
<article class="comment" id="comment-23654">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">changjf</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-23654" rel="nofollow"><time datetime="2014-10-28T14:32:20+00:00" pubdate="">2014年10月28日 at 下午2:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>“可以发现,树将是满二叉树,”这句话不对吧，构造的树应该是“完全二叉树”，而非“满二叉树”。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57192">
<article class="comment" id="comment-57192">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-57192" rel="nofollow"><time datetime="2014-09-09T05:59:13+00:00" pubdate="">2014年9月9日 at 上午5:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>排版</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23652">
<article class="comment" id="comment-23652">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">radish</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-23652" rel="nofollow"><time datetime="2014-08-24T04:10:51+00:00" pubdate="">2014年8月24日 at 上午4:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23650">
<article class="comment" id="comment-23650">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">20122256</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-23650" rel="nofollow"><time datetime="2014-07-23T05:04:56+00:00" pubdate="">2014年7月23日 at 上午5:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/good_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_org.gif"/> </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57191">
<article class="comment" id="comment-57191">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">pain</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-57191" rel="nofollow"><time datetime="2014-06-07T15:22:58+00:00" pubdate="">2014年6月7日 at 下午3:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57195">
<article class="comment" id="comment-57195">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fanxianxian</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-57195" rel="nofollow"><time datetime="2014-05-28T05:14:00+00:00" pubdate="">2014年5月28日 at 上午5:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你指的哪个问题？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23656">
<article class="comment" id="comment-23656">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wkhuahuo</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-23656" rel="nofollow"><time datetime="2014-05-14T14:14:25+00:00" pubdate="">2014年5月14日 at 下午2:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57193">
<article class="comment" id="comment-57193">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">nwling</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-57193" rel="nofollow"><time datetime="2014-04-24T12:02:54+00:00" pubdate="">2014年4月24日 at 下午12:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法挺不错。NewHead代表新的头节点，通过递归找到最后一个节点之后，就把这个节点赋给NewHead，然后一直返回返回，中途这个值是没有变化的，一边返回一边把相应的指针方向颠倒，最后结束时返回新的头节点到主函数。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46076">
<article class="comment" id="comment-46076">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liluvu</a></span> on <a href="http://www.acmerblog.com/hdu-2646-expression-4238.html#comment-46076" rel="nofollow"><time datetime="2014-03-22T12:02:49+00:00" pubdate="">2014年3月22日 at 下午12:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错的网站，建议添加些比赛信息</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>