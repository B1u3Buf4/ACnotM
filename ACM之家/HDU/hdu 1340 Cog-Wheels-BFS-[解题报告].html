<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-09</div>
<div class="tit"><h1 class="entry-title">hdu 1340 Cog-Wheels-BFS-[解题报告]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/search/bfs" rel="category tag" title="查看BFS搜索中的全部文章">BFS搜索</a></span><span class="i4">围观1750次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1761" href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comments" title="《hdu 1340 Cog-Wheels-BFS-[解题报告]》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Cog-Wheels</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Your little sister has got a new mechanical building kit, which includes many cog-wheels of different sizes. She starts building gears with different ratios, but soon she notices that there are some ratios which are quite difficult to realize, and some others she cannot realize at all. She would like to have a computer program that tells her what ratios can be realized and what ratios cannot. She asks you to write a program that does the job.
<p>For example, let us assume that the kit contains cog-wheels with 6, 12, and 30 cogs. Your sister wants to realize a gear of ratio 5 : 4. One possible solution is shown in Figure 2. </p>
<p></p><center><img src="http://acm.hdu.edu.cn/data/images/1340-1.gif"/></center>
<p></p><center>Figure 2: Combination of cog-wheels realizing a gear of 5 : 4.</center>
<p>It depicts a complete gear of ratio 5 : 4. Four wheels are used: cog-wheels of sizes 30 and 12 on the first axis, cog-wheels of sizes 6 and 12 on the second axis. The gear ratio is given by</p>
<p></p><center><img src="http://acm.hdu.edu.cn/data/images/1340-2.gif"/></center>
<p>as desired. However, a gear of ratio 1 : 6 cannot be realized using the cog-wheels your sister has.</p>
<p>Given the sizes of the cog-wheels in the kit (i.e. the number of cogs they have), decide whether a given gear ratio can be built or not. You may use any finite number of cog-wheels of each size available. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input begins with a line containing the number of scenarios.
<p>The input for each scenario starts with a description of the cog-wheels in the kit. First, there is a line containing the number n of different sizes of cog-wheels (1&lt;=n&lt;=20). The next line contains n numbers c1 . . . cn, separated by single blanks. These denote the n different sizes of the cog-wheels in the kit, with 5&lt;=ci&lt;=100 for i = 1, . . . , n. You may assume that there is a cog-wheel of smallest size c = min{c1, . . . , cn} in the kit such that all sizes c1, . . . , cn are multiples of c.</p>
<p>The line describing the available cog-wheels is followed by the list of gear ratios to be realized. It starts with a line containing the numbermof ratios. The nextmlines each contain two integers a and b, separated by a single blank. They denote the ratio a : b, with 1&lt;=a, b&lt;=10000. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The output for every scenario begins with a line containing “Scenario #i:”, where i is the number of the scenario starting at 1. Then print the results for all the gear ratios given in that scenario. For each gear ratio a : b, print a line containing either Gear ratio a:b can be realized.
<p>or</p>
<p>Gear ratio a:b cannot be realized.</p>
<p>Terminate the output of each scenario with a blank line.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
3
6 12 30
2
5 4
1 6
1
42
2
13 13
42 1</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Scenario #1:
Gear ratio 5:4 can be realized.
Gear ratio 1:6 cannot be realized.

Scenario #2:
Gear ratio 13:13 can be realized.
Gear ratio 42:1 cannot be realized.</pre>
<p> <!-- problem end -->
</p><p>首先根据给出的数算出所有在10000内的能到达的比率　r : 1　用bfs 来做，输入所要判断的 x:y　我们只要做的就是先求t=gcd(x,y)，而后将<br/>x:y转化为求 x /= t : y /= t;而这个过程我们来将新得的 x与y 因式分解for(int i = 2; i &lt;= x; i++)只要找到x的因子i并mark[i] == i　即i的比率是<br/>可达得就更新　x /= i;　如此也处理y; 若最后 x == y == 1则可达否则不可达<br/>#include &lt;iostream&gt;<br/>//#include &lt;cstdio&gt;<br/>#include &lt;algorithm&gt;<br/>using namespace std;</p>
<p>const int MAX = 10001;<br/>int q[MAX],a[21];<br/>bool mark[MAX];<br/>int Case,N,x,y;<br/>int gcd(int n, int m){<br/> int t;<br/> while(m){<br/>   t = m;<br/>   m = n % m;<br/>   n = t;<br/> }<br/> return n;<br/>}<br/>void bfs();</p>
<p>int main()<br/>{<br/> cin&gt;&gt;Case;<br/> for(int S = 1; S &lt;= Case; S++){<br/>   cin&gt;&gt;N;<br/>   for(int i = 0; i &lt; N; i++)<br/>    cin&gt;&gt;a[i];<br/>   sort(a,a+N);<br/>   for(int i = 1; i &lt; N; i++)<br/>    a[i] /= a[0];<br/>   a[0] = 1;<br/>   memset(mark, 0, sizeof(mark));<br/>   //mark[q[0] = 1] = 1;<br/>   bfs();<br/>   int m;<br/>   cin&gt;&gt;m;<br/>   cout&lt;&lt;"Scenario #"&lt;&lt;S&lt;&lt;":\n"; <br/>   while(m–){   <br/>    cin&gt;&gt;x&gt;&gt;y;<br/>    int t;<br/>    cout&lt;&lt;"Gear ratio "&lt;&lt;x&lt;&lt;’:'&lt;&lt;y;<br/>    t = gcd(x,y);<br/>    x /= t;<br/>    y /= t;<br/>    for(int i = 2; i &lt;= y; i++)<br/>     if(mark[i] &amp;&amp; y%i == 0)<br/>      y /= i;<br/>    for(int i = 2; i &lt;= x; i++)<br/>     if(mark[i] &amp;&amp; x%i == 0)<br/>      x /= i;<br/>    if(mark[y] &amp;&amp; mark[x])cout&lt;&lt;" can ";<br/>    else cout&lt;&lt;" cannot ";<br/>    cout&lt;&lt;"be realized.\n";<br/>   }<br/>   cout&lt;&lt;endl;<br/> }<br/> return 0;<br/>}<br/>void bfs(){<br/> int i = 0,top = 1, t;<br/> mark[q[0] = 1] = 1;<br/> while(i &lt; top){<br/>   for(int j = 0; j &lt; N; j++){<br/>    t = q[i] * a[j];<br/>    if(t &lt; MAX &amp;&amp; !mark[t]){<br/>     q[top++] = t;<br/>     mark[t] = 1;<br/>    }<br/>    t = q[i] / a[j];<br/>    if(t * a[j] == q[i] &amp;&amp; !mark[t]){<br/>     q[top++] = t;<br/>     mark[t] = 1;<br/>    }<br/>   }<br/>   i++;<br/> }<br/>}</p>
<p> 解题转自：http://hi.baidu.com/yangchenhao/item/88331ef13797610884d278b2</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-40673">
<article class="comment" id="comment-40673">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123zxc</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40673" rel="nofollow"><time datetime="2015-06-18T12:36:19+00:00" pubdate="">2015年6月18日 at 下午12:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是什么鬼，怎么多头文件</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40670">
<article class="comment" id="comment-40670">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hwp</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40670" rel="nofollow"><time datetime="2015-05-16T13:37:50+00:00" pubdate="">2015年5月16日 at 下午1:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，再多来的CF上面的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12626">
<article class="comment" id="comment-12626">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">chengleisheng</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-12626" rel="nofollow"><time datetime="2015-04-18T03:40:42+00:00" pubdate="">2015年4月18日 at 上午3:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有点意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12625">
<article class="comment" id="comment-12625">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lint</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-12625" rel="nofollow"><time datetime="2015-01-22T19:51:24+00:00" pubdate="">2015年1月22日 at 下午7:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>终于AC了！next数组还是不好理解啊，mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-54623">
<article class="comment" id="comment-54623">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-54623" rel="nofollow"><time datetime="2014-12-29T06:38:35+00:00" pubdate="">2014年12月29日 at 上午6:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哎，path[0]应该是从零开始吧，为什么是赋值1呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40671">
<article class="comment" id="comment-40671">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wkhuahuo</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40671" rel="nofollow"><time datetime="2014-08-21T13:40:08+00:00" pubdate="">2014年8月21日 at 下午1:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>上面的评论很起劲，为什么我看不懂啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40675">
<article class="comment" id="comment-40675">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ding Qiangyuan</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40675" rel="nofollow"><time datetime="2014-08-02T21:38:37+00:00" pubdate="">2014年8月2日 at 下午9:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，就是把这32位当成一个长度为32的数组</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40677">
<article class="comment" id="comment-40677">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">actlea</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40677" rel="nofollow"><time datetime="2014-07-12T01:07:02+00:00" pubdate="">2014年7月12日 at 上午1:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40669">
<article class="comment" id="comment-40669">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Sacomplex</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40669" rel="nofollow"><time datetime="2014-04-30T09:47:19+00:00" pubdate="">2014年4月30日 at 上午9:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40674">
<article class="comment" id="comment-40674">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">final</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40674" rel="nofollow"><time datetime="2014-03-02T02:54:28+00:00" pubdate="">2014年3月2日 at 上午2:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发类的题还是算法类？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12624">
<article class="comment" id="comment-12624">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">congve1</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-12624" rel="nofollow"><time datetime="2014-01-15T18:49:10+00:00" pubdate="">2014年1月15日 at 下午6:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不是有公式吗？何不直接计算</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40676">
<article class="comment" id="comment-40676">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">MCIT</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40676" rel="nofollow"><time datetime="2013-12-30T08:19:45+00:00" pubdate="">2013年12月30日 at 上午8:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个应该是比较简单的解法了，如果有更好的办法可以告诉我</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40672">
<article class="comment" id="comment-40672">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">MCIT</a></span> on <a href="http://www.acmerblog.com/hdu-1340-Cog-Wheels-1761.html#comment-40672" rel="nofollow"><time datetime="2013-12-11T02:23:06+00:00" pubdate="">2013年12月11日 at 上午2:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有点意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>