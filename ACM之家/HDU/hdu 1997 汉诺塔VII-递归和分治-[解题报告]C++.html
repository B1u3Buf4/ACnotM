<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-26</div>
<div class="tit"><h1 class="entry-title">hdu 1997 汉诺塔VII-递归和分治-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观1155次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3079" href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comments" title="《hdu 1997 汉诺塔VII-递归和分治-[解题报告]C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">汉诺塔VII</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
n个盘子的汉诺塔问题的最少移动次数是2^n-1,即在移动过程中会产生2^n个系列。由于发生错移产生的系列就增加了，这种错误是放错了柱子，并不会把大盘放到小盘上，即各柱子从下往上的大小仍保持如下关系 ： <br/>n=m+p+q<br/>a1&gt;a2&gt;…&gt;am<br/>b1&gt;b2&gt;…&gt;bp<br/>c1&gt;c2&gt;…&gt;cq<br/>ai是A柱上的盘的盘号系列，bi是B柱上的盘的盘号系列， ci是C柱上的盘的盘号系列，最初目标是将A柱上的n个盘子移到C盘. 给出1个系列，判断它是否是在正确的移动中产生的系列.<br/>例1：n=3<br/>3<br/>2<br/>1<br/>是正确的<br/>例2：n=3<br/>3<br/>1<br/>2<br/>是不正确的。<br/>注：对于例2如果目标是将A柱上的n个盘子移到B盘. 则是正确的. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
包含多组数据，首先输入T,表示有T组数据.每组数据4行，第1行N是盘子的数目N&lt;=64.<br/>后3行如下<br/>m a1 a2 …am<br/>p b1 b2 …bp<br/>q c1 c2 …cq<br/>N=m+p+q,0&lt;=m&lt;=N,0&lt;=p&lt;=N,0&lt;=q&lt;=N, </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
包含多组数据，首先输入T,表示有T组数据.每组数据4行，第1行N是盘子的数目N&lt;=64.<br/>后3行如下<br/>m a1 a2 …am<br/>p b1 b2 …bp<br/>q c1 c2 …cq<br/>N=m+p+q,0&lt;=m&lt;=N,0&lt;=p&lt;=N,0&lt;=q&lt;=N,</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
6
3
1 3
1 2
1 1
3
1 3
1 1
1 2
6
3 6 5 4
1 1
2 3 2
6
3 6 5 4
2 3 2
1 1
3
1 3
1 2
1 1
20
2 20 17
2 19 18
16 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
true
false
false
false
true
true</pre>
<p> <!-- problem end --></p>
<p>题目大意:这一个是汉诺塔问题的另一个版本。之前的一个版本关注的是"将n个盘子从a移到c所需要的步数"。而现在的这个版本可以概括的描述为"判断将n跟盘子从a移到c的过程中所产生的移动序列是否正确"…其输入的样例中各个数据的含义如下:</p>
<p>测试用例数</p>
<p>盘子数</p>
<p>柱子a中的盘子数                 盘子的编号</p>
<p>。。b。。。。。。。。。</p>
<p>。。c。。。。。。。。。</p>
<p>
</p>
<p>解题思路:</p>
<pre style="white-space:pre-wrap; word-wrap:break-word; font-size:14px; line-height:26px; background-color:rgb(244,251,255); font-family:'Courier New'"><span style="color:green"><span style="font-size:18px">1）若把n个盘子从柱子a通过柱子b移到柱子c，则先把n-1个盘子从柱子a移动柱子b，再把第n个盘子从a移道c，再把n-1个盘子从b移到a。

所以当判断序列是否符合把n个盘子从a移到c时，第n个只能出现在柱子a的最底部，或柱子c的最底部，否则这个序列错的。

当第n个盘子在a的最底部时，则继续判断剩下的序列是否把n-1个盘子从a移到b。

当第n个盘子在c的最底部时，则继续判断剩下的序列是否把n-1个盘子从b移到c。</span></span></pre>
<p></p>
<p>2）</p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt; line-height:19.5pt; background-color:rgb(244,251,255)">
<span style="color:rgb(8,68,135); font-size:10.5pt; font-family:宋体; background-color:rgb(186,186,186)">现在我们有n个盘子，然后我们想把这些盘子从A上面移到C盘上去，那么第n个盘子应该是最后一次的移动，所以第n个盘子只可能出现在A和C盘上，OK。。那么如果现在你知道了第n个盘子在哪里，能不能确定n-1个盘子不能出现在哪个盘子。</span><span style="color:rgb(0,128,0); font-size:13.5pt; font-family:宋体"></span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt; line-height:19.5pt; background-color:rgb(244,251,255)">
</p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt; line-height:19.5pt; background-color:rgb(244,251,255)">
<span style="font-family:宋体; color:#084487"><span style="font-size:14px">3)</span></span></p>
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">
对一个含有n个盘子，从A柱移动到C柱借助B柱的汉诺塔，第n个盘子移动到C柱过程是这样子的：首先将其余的n-1个盘子移动到B柱，然后第n个盘子直接移动到C柱。在这过程中，第n个盘子只出现在A柱和C柱两个柱子上，也即第n个盘子不可能出现在B柱上。<span style="color:rgb(255,0,0)">因此对于当前移动的盘子，只需检查其所在的柱子是否符合这个要求，如果出现在B柱上，则显然进入了错误移动中。这是本题求解思想精髓所在。</span>汉诺塔是个递归求解过程，假设第n个盘子符合要求，则判别的下一个目标是第n-1个盘子。若第n个盘子在A柱上，此时剩余n-1个盘子必由A柱移动到B柱，经由C柱。此时对第n-1个盘子，C柱就是其不可能出现的位置；若第n个盘子在C住上，这剩余n-1个盘子则是在B柱上，经由A柱，移动到C柱上，因此，A柱就是第n-1个盘子不可能出现的位置。</p>
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">
根据汉诺塔递归求解的过程，对每个移动的盘子，可以用递归求解的方式判断</p>
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">
</p>
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">
认真看完以上的解题思路(尽管有些重复)，再结合以下的代码理解，应该就能做出来了。。。。</p>
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">
代码如下：</p>
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">
</p><pre class="brush:cpp ">/*
 * 1997_2.cpp
 *
 *  Created on: 2013年8月11日
 *      Author: Administrator
 */

#include &lt;iostream&gt;

using namespace std;

const int maxlen = 70;

bool hanoi(int n , int start[],int end[],int zhongjian[]){
	if(zhongjian[0] == n){
		return 0;
	}else if(start[0] == n){
		return hanoi(n-1,start+1,zhongjian,end);
	}else if(end[0] == n){
		return hanoi(n-1,zhongjian,end+1,start);
	}

	return 1;


}


int main(){

	int t,a[maxlen],b[maxlen],c[maxlen];
	scanf("%d",&amp;t);
	while(t--){
		int n,m,p,q;
		scanf("%d",&amp;n);
		int i;
		scanf("%d",&amp;m);
		for(i = 0 ; i &lt; m ; ++i){
			scanf("%d",&amp;a[i]);
		}

		scanf("%d",&amp;p);
		for(i = 0 ; i &lt; p ; ++i){
			scanf("%d",&amp;b[i]);
		}

		scanf("%d",&amp;q);
		for(i = 0 ; i &lt; q ; ++i){
			scanf("%d",&amp;c[i]);
		}
		a[m]=b[p]=c[q] = -1;



		if(hanoi(n,a,c,b)){
			cout&lt;&lt;"true"&lt;&lt;endl;
		}else{
			cout&lt;&lt;"false"&lt;&lt;endl;
		}


	}
}</pre>
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">
</p>
<p>解题转自：http://blog.csdn.net/hjd_love_zzt/article/details/9897281</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-43592">
<article class="comment" id="comment-43592">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">reking</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43592" rel="nofollow"><time datetime="2015-06-02T06:51:47+00:00" pubdate="">2015年6月2日 at 上午6:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，再多来的CF上面的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18303">
<article class="comment" id="comment-18303">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xuelanghu</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-18303" rel="nofollow"><time datetime="2015-03-02T07:46:04+00:00" pubdate="">2015年3月2日 at 上午7:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不好意思，写错了．应该是　path[0]=0,  visited[V] = true;</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-18306">
<article class="comment" id="comment-18306">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bob</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-18306" rel="nofollow"><time datetime="2015-02-24T16:34:22+00:00" pubdate="">2015年2月24日 at 下午4:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>惊艳了，没想到代码如此简洁</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-43588">
<article class="comment" id="comment-43588">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ktcer</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43588" rel="nofollow"><time datetime="2015-01-24T20:36:36+00:00" pubdate="">2015年1月24日 at 下午8:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>红绯鱼：<br/>
牛逼牛逼</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-18304">
<article class="comment" id="comment-18304">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCCat</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-18304" rel="nofollow"><time datetime="2015-01-12T22:37:52+00:00" pubdate="">2015年1月12日 at 下午10:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>可以根据二叉排序树的定义进行严格的排序树创建和后序遍历操作。如果形成的排序树相同，其树的前、中、后序遍历是相同的，但在此处不能使用中序遍历，因为，中序遍历的结果就是排序的结果。经在九度测试，运行时间90ms，比楼主的要快。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-43591">
<article class="comment" id="comment-43591">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">3136869079</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43591" rel="nofollow"><time datetime="2014-10-30T03:14:59+00:00" pubdate="">2014年10月30日 at 上午3:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>沙发呢，我抢到了沙发</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-43585">
<article class="comment" id="comment-43585">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1173954900</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43585" rel="nofollow"><time datetime="2014-08-12T23:44:14+00:00" pubdate="">2014年8月12日 at 下午11:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，还是这种实现比较好理解。虽然效率有点低</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18305">
<article class="comment" id="comment-18305">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Tree</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-18305" rel="nofollow"><time datetime="2014-07-15T16:30:44+00:00" pubdate="">2014年7月15日 at 下午4:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>编辑的时候有些不小心了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-43589">
<article class="comment" id="comment-43589">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tonight</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43589" rel="nofollow"><time datetime="2014-06-17T19:39:03+00:00" pubdate="">2014年6月17日 at 下午7:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>华为这题目略显简单啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18307">
<article class="comment" id="comment-18307">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sheyty</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-18307" rel="nofollow"><time datetime="2014-04-26T17:12:32+00:00" pubdate="">2014年4月26日 at 下午5:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一段代码中：<br/>
 next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/>  = next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> ;<br/>
明显不对吧，应该是 next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =j;才对</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-43590">
<article class="comment" id="comment-43590">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">489365227</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43590" rel="nofollow"><time datetime="2014-03-25T16:33:45+00:00" pubdate="">2014年3月25日 at 下午4:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个系列很不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-43587">
<article class="comment" id="comment-43587">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zwj0571</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43587" rel="nofollow"><time datetime="2014-03-06T07:01:58+00:00" pubdate="">2014年3月6日 at 上午7:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62186">
<article class="comment" id="comment-62186">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mnmlist</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-62186" rel="nofollow"><time datetime="2014-01-15T18:10:34+00:00" pubdate="">2014年1月15日 at 下午6:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我没看懂题目<br/>
2<br/>
5 6 -1 5 4 -7<br/>
7 0 6 -1 1 -6 7 -5<br/>
我觉得第一个应该是5 6 -1 5 4 输出是19 5 4<br/>
第二个是7 0 6 -1 1 -6 7输出是14 7 7<br/>
不知道题目例子是怎么得出来的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-43586">
<article class="comment" id="comment-43586">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zjd1988</a></span> on <a href="http://www.acmerblog.com/hdu-1997-%E6%B1%89%E8%AF%BA%E5%A1%94VII-3079.html#comment-43586" rel="nofollow"><time datetime="2014-01-02T18:24:56+00:00" pubdate="">2014年1月2日 at 下午6:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>