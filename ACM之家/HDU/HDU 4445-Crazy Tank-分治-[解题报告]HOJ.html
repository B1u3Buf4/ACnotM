<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>07-16</div>
<div class="tit"><h1 class="entry-title">HDU 4445-Crazy Tank-分治-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/enumeration" rel="category tag" title="查看枚举中的全部文章">枚举</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观113次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7458" href="http://www.acmerblog.com/hdu-4445-crazy-tank-7458.html#comments" title="《HDU 4445-Crazy Tank-分治-[解题报告]HOJ》上的评论">6 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Crazy Tank</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Crazy Tank was a famous game about ten years ago. Every child liked it. Time flies, children grow up, but the memory of happy childhood will never go.<br/><center><img alt="Walk" src="http://www.acmerblog.com/img/1445694230647.jpg"/></center><br/>     Now you’re controlling the tank Laotu on a platform which is H meters above the ground. Laotu is so old that you can only choose a shoot angle(all the angle is available) before game start and then any adjusting is <strong>not allowed</strong>. You need to launch N cannonballs and you know that the i-th cannonball’s initial speed is Vi.<br/>     On the right side of Laotu There is an enemy tank on the ground with coordination(L1, R1) and a friendly tank with coordination(L2, R2). A cannonball is considered hitting enemy tank if it lands on the ground between [L1,R1] (two ends are included). As the same reason, it will be considered hitting friendly tank if it lands between [L2, R2]. Laotu’s horizontal coordination is 0.<br/>     The goal of the game is to maximize the number of cannonballs which hit the enemy tank under the condition that no cannonball hits friendly tank.<br/>     The g equals to 9.8. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There are multiple test case.<br/>     Each test case contains 3 lines.<br/>     The first line contains an integer N(0≤N≤200), indicating the number of cannonballs to be launched.<br/>     The second line contains 5 float number H(1≤H≤100000), L1, R1(0&lt;L1&lt;R1&lt;100000) and L2, R2(0&lt;L2&lt;R2&lt;100000). Indicating the height of the platform, the enemy tank coordinate and the friendly tank coordinate. Two tanks <strong>may overlap</strong>.<br/>     The third line contains N float number. The i-th number indicates the initial speed of i-th cannonball.<br/>     The input ends with N=0. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There are multiple test case.<br/>     Each test case contains 3 lines.<br/>     The first line contains an integer N(0≤N≤200), indicating the number of cannonballs to be launched.<br/>     The second line contains 5 float number H(1≤H≤100000), L1, R1(0&lt;L1&lt;R1&lt;100000) and L2, R2(0&lt;L2&lt;R2&lt;100000). Indicating the height of the platform, the enemy tank coordinate and the friendly tank coordinate. Two tanks <strong>may overlap</strong>.<br/>     The third line contains N float number. The i-th number indicates the initial speed of i-th cannonball.<br/>     The input ends with N=0.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
10 10 15 30 35
10.0
20.0
2
10 35 40 2 30
10.0
20.0
0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1
0
<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
In the first case one of the best choices is that shoot the cannonballs parallelly to the horizontal line, then the first 
cannonball lands on 14.3 and the second lands on 28.6.
In the second there is no shoot angle to make any cannonball land between [35,40] on the condition that no 
cannonball lands between [2,30].
</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<p><span style="font-family:'Microsoft YaHei'; font-size:12px">题意：在高为H的台上有一个坦克向右打炮，[L1.R1]为敌军范围，[L2,R2]为友军范围，现在有n（0&lt;=n&lt;=200）个初速度不同的炮弹，现在想找到一个最好的</span></p>
<p><span style="font-family:'Microsoft YaHei'; font-size:12px">         角度使得任意一个不打在友军的范围内同时打在敌军最多。</span></p>
<p><span style="font-family:'Microsoft YaHei'; font-size:12px">题解：对于不同的炮弹打的最远的角度是不一样的，因为这个我wa的很惨。对于每个炮弹三分找出能打最远的角度，然后枚举打的点分别为L1.R1,L2,R2，</span></p>
<p><span style="font-family:'Microsoft YaHei'; font-size:12px">         二分得到两个角度更新答案。</span></p>
<p><span style="font-family:'Microsoft YaHei'; font-size:12px">         PS：个人认为出题者的本意不应该是暴力枚举角度吧……</span></p>
<p><span style="font-family:'Microsoft YaHei'; font-size:12px"><br/>
</span></p>
<p><span style="line-height:26px; text-align:left"><span style="font-family:'Microsoft YaHei'; font-size:12px">Sure原创，转载请注明出处</span></span>
</p>
<p><span style="font-family:'Microsoft YaHei'; line-height:26px; text-align:left"></span></p>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;memory.h&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#define MAX(a , b) ((a) &gt; (b) ? (a) : (b))
using namespace std;
const int maxn = 202;
const double g = 9.80;
const double eps = 1e-8;
const double PI = acos(-1.0);
double pos[10],v[maxn];
double h,farest;
int n;

void read()
{
    scanf("%lf %lf %lf %lf %lf",&amp;h,&amp;pos[0],&amp;pos[1],&amp;pos[2],&amp;pos[3]);
    for(int i=0;i&lt;n;i++)
    {
        scanf("%lf",&amp;v[i]);
    }
    return;
}

double dis(double ang,double vv)
{
    double s = sin(ang);
    double c = cos(ang);
    return vv * s * (vv * c + sqrt(vv * vv * c * c + 2.0 * g * h)) / g;
}

void tris(double vv)
{
    double l = 0,r = PI / 2.0;
    int t = 30;
    while(t--)
    {
        double mid = (l + r) / 2.0;
        double midd = (l + mid) / 2.0;
        if(dis(midd , vv) &gt; dis(mid , vv)) r = mid;
        else l = midd;
    }
    farest = l;
    return;
}

double bis_left(double l,double r,double d,double vv)
{
    int t = 30;
    while(t--)
    {
        double mid = (l + r) / 2.0;
        if(dis(mid , vv) &lt;= d) l = mid;
        else r = mid;
    }
    return l;
}

double bis_right(double l,double r,double d,double vv)
{
    int t = 30;
    while(t--)
    {
        double mid = (l + r) / 2.0;
        if(dis(mid , vv) &lt; d) r = mid;
        else l = mid;
    }
    return l;
}

void solve()
{
    int res = 0;
    for(int i=0;i&lt;n;i++)
    {
        for(int j=0;j&lt;4;j++)
        {
            tris(v[i]);
            if(dis(farest , v[i]) &lt; pos[j]) continue;
            double wei = pos[j];
            if(j == 0) wei += eps;
            if(j == 1) wei -= eps;
            if(j == 2) wei -= eps;
            if(j == 3) wei += eps;
            double ang = bis_left(0.0 , farest , wei , v[i]);
            bool flag = true;
            int c = 0;
            for(int k=0;k&lt;n;k++)
            {
                double here = dis(ang , v[k]);
                if(here &gt;= pos[2] &amp;&amp; here &lt;= pos[3])
                {
                    flag = false;
                    break;
                }
                else if(here &gt;= pos[0] &amp;&amp; here &lt;= pos[1]) c++;
            }
            if(flag) res = MAX(res , c);
            if(res == n) break;

            ang = bis_right(farest , PI , wei , v[i]);
            flag = true;
            c = 0;
            for(int k=0;k&lt;n;k++)
            {
                double here = dis(ang , v[k]);
                if(here &gt;= pos[2] &amp;&amp; here &lt;= pos[3])
                {
                    flag = false;
                    break;
                }
                else if(here &gt;= pos[0] &amp;&amp; here &lt;= pos[1]) c++;
            }
            if(flag) res = MAX(res , c);
            if(res == n) break;
        }
    }
    printf("%d\n",res);
    return;
}

int main()
{
    while(scanf("%d",&amp;n) &amp;&amp; n)
    {
        read();
        solve();
    }
    return 0;
}
</pre>
<p>
</p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/flying_stones_sure/article/details/8134930</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97917">
<article class="comment" id="comment-97917">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919512179" rel="external nofollow">新用户287132</a></span> on <a href="http://www.acmerblog.com/hdu-4445-crazy-tank-7458.html#comment-97917" rel="nofollow"><time datetime="2017-04-20T08:48:54+00:00" pubdate="">2017年4月20日 at 上午8:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>三个都有自己的基因，却从不选择意识容易侵蚀的朝夕、而是与自己不一样的月见来保住灵魂就因该发现了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67783">
<article class="comment" id="comment-67783">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919523120" rel="external nofollow">新用户833465</a></span> on <a href="http://www.acmerblog.com/hdu-4445-crazy-tank-7458.html#comment-67783" rel="nofollow"><time datetime="2017-04-11T00:40:29+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Y400装固态用win10感觉还好，和win8时没啥变化，这个机型要是靠原来那个渣硬盘什么系统都不好用。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67782">
<article class="comment" id="comment-67782">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919523120" rel="external nofollow">新用户833465</a></span> on <a href="http://www.acmerblog.com/hdu-4445-crazy-tank-7458.html#comment-67782" rel="nofollow"><time datetime="2017-04-11T00:40:29+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Y400装固态用win10感觉还好，和win8时没啥变化，这个机型要是靠原来那个渣硬盘什么系统都不好用。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67781">
<article class="comment" id="comment-67781">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919523120" rel="external nofollow">新用户833465</a></span> on <a href="http://www.acmerblog.com/hdu-4445-crazy-tank-7458.html#comment-67781" rel="nofollow"><time datetime="2017-04-11T00:40:29+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Y400装固态用win10感觉还好，和win8时没啥变化，这个机型要是靠原来那个渣硬盘什么系统都不好用。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67780">
<article class="comment" id="comment-67780">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919523120" rel="external nofollow">新用户833465</a></span> on <a href="http://www.acmerblog.com/hdu-4445-crazy-tank-7458.html#comment-67780" rel="nofollow"><time datetime="2017-04-11T00:40:29+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Y400装固态用win10感觉还好，和win8时没啥变化，这个机型要是靠原来那个渣硬盘什么系统都不好用。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67779">
<article class="comment" id="comment-67779">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919523120" rel="external nofollow">新用户833465</a></span> on <a href="http://www.acmerblog.com/hdu-4445-crazy-tank-7458.html#comment-67779" rel="nofollow"><time datetime="2017-04-11T00:40:29+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Y400装固态用win10感觉还好，和win8时没啥变化，这个机型要是靠原来那个渣硬盘什么系统都不好用。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>