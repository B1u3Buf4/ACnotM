<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>07-25</div>
<div class="tit"><h1 class="entry-title">hdu 4567-brilliant programmers show-动态规划-[解题报告]hoj</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观111次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7589" href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comments" title="《hdu 4567-brilliant programmers show-动态规划-[解题报告]hoj》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<p align="left"><strong><span style="font-family:Times New Roman">Description</span></strong></p>
<p align="left"><span style="font-family:Times New Roman">Hunan TV holds many talent shows everyyear, such as Happy Girls and Super Boys which attract the attention of thewhole country. This year Hunan University held a new type of talent show calledBrilliant<br/>
 Programmers. Millions of programmers had registered online and onlytop <em>N</em> most brilliant programmers got the opportunity to compete on site.The organizer had hold ten rounds of qualification contest and programmers wereranked by their total scores.<br/>
 The programmers who ranked after <em>N</em> wereeliminated.</span></p>
<p align="left"><span style="font-family:Times New Roman">The final show continued for a very longtime. Initially programmers were ranked by their qualification scores. The rulewas special: A challenge may be happen between exactly two adjacent rankedprogrammers<br/>
 at any time and the lower ranked one tries to solve the other’sproblem. If the challenger successfully solves this problem, their ranksexchange. Otherwise their ranks remain unchanged. It is guaranteed that aprogrammer never involved in two challenges at the<br/>
 same time. The top rankedprogrammer at last is the champion.</span></p>
<p align="left"><span style="font-family:Times New Roman">The show was over but… The hard disk whichlogs the whole progress was burned out. After data rescue, the number ofsuccessful challenges of each programmer was recovered but the final rank wasdisappeared<br/>
 forever. During the rescue some errors may occur, which lead to somewrong recovered numbers. Is the show possible at all? If it is possible, canyou help to find the champion from the very limited information?</span></p>
<p align="left"><span style="font-family:Times New Roman"> </span></p>
<p align="left"><strong><span style="font-family:Times New Roman">Input</span></strong></p>
<p align="left"><span style="font-family:Times New Roman">There are multiple test cases.</span></p>
<p align="left"><span style="font-family:Times New Roman">Each test case is described in two lines.The first line contains one integer<em>N</em>: the number of programmers. Thesecond line contains a sequence of integers<em>Ai</em> that gives the number ofsuccessful<br/>
 challenges of the programmer initially ranked i-th.</span></p>
<p align="left"><span style="font-family:Times New Roman">1 &lt;= <em>N </em>&lt;= 10<sup>6</sup>, 0 &lt;=<em>Ai</em>&lt;=10<sup>9</sup></span></p>
<p align="left"><span style="font-family:Times New Roman">The input will finish with the end of file.</span></p>
<p align="left"><strong><span style="font-family:Times New Roman"> </span></strong></p>
<p align="left"><strong><span style="font-family:Times New Roman">Output</span></strong></p>
<p align="left"><span style="font-family:Times New Roman">For each case the output contains only oneline.</span></p>
<p align="left"><span style="font-family:Times New Roman">If it is an impossible show, output “BadRescue”. Otherwise if the champion is uniquely determined, output the initialrank of the champion. Output “Unknown” if the champion is not sure.</span></p>
<p align="left"><strong><span style="font-family:Times New Roman"> </span></strong></p>
<p align="left"><strong><span style="font-family:Times New Roman">Sample Input</span></strong></p>
<p><span style="font-family:Times New Roman; font-size:14px">2</span></p>
<p><span style="font-family:Times New Roman; font-size:14px">0 1</span></p>
<p><span style="font-family:Times New Roman; font-size:14px">3</span></p>
<p><span style="font-family:Times New Roman; font-size:14px">0 1 5</span></p>
<p><span style="font-family:Times New Roman; font-size:14px">3</span></p>
<p align="left"><span style="font-family:Times New Roman; font-size:14px">0 1 1</span></p>
<p align="left"><strong><span style="font-family:Times New Roman"> </span></strong></p>
<p align="left"><strong><span style="font-family:Times New Roman">Sample Output</span></strong></p>
<p><span style="font-family:Times New Roman; font-size:14px">2</span></p>
<p><span style="font-family:Times New Roman; font-size:14px">Bad Rescue</span></p>
<p align="left"><span style="font-family:Times New Roman; font-size:14px">Unknown</span></p>
<p align="left"><span style="font-family:Times New Roman; font-size:14px"></span> </p>
<p align="left">首先，我们很直观的想到，对于每个人，都会有一个超越次数的上限，这个上限的取得很显然是尽量地让这个人与其余所有人都相互超越。</p>
<p align="left"> </p>
<p align="left">我们记这个上限为U[k]，那么很容易发现，U[k]有两部分构成，一部分是与前面的互相超越，一部分是与后面的互相超越。</p>
<p align="left"> </p>
<p align="left">首先我们来考虑与前面的互相超越，那么记：A[k]=sum{a[i]+1},i&lt;k。A[k]就是与前面的最多的互相超越的次数。</p>
<p align="left">然后我们再来考虑与后面相互超越的那一部分。显然，如果要让两个人相互超越，那么两个人要挨在一起，记：T[k+1]=0,T[i]=T[i-1]+(a[i-1]&lt;=T[i-1])。</p>
<p align="left">那么T[i]即为要使k和i靠在一起i需进行的超越次数，记B[k]=sum{max(0,a[i]-T[i])},i&gt;k。<a name="_GoBack"></a></p>
<p align="left">那么B[k]即为第k辆车最多与后面互相超越的次数。</p>
<p align="left"> </p>
<p align="left">那么显然U[k]=A[k]+B[k]。</p>
<p align="left"> </p>
<p align="left">实际上，对于a[k]&lt;=U[k]，实际上是这个问题的充分条件，因为按照我们上面给出的策略，就可以构成一组合法的解。而且如果存在A[k]=U[k]，那么这个人一定就是冠军。</p>
<p align="left"> </p>
<p align="left">于是判断合法性就变成了求是否存在a[k]&gt;U[k]，并判断是否有A[k]=U[k]。但是直接求是O(n^2)的,需要优化。</p>
<p align="left"> </p>
<p align="left">注意到问题的特殊性，我们发现，我们只需要考虑满足A[k]&lt;=a[k]的最大的k即可，证明如下：</p>
<p align="left"> </p>
<p align="left">1.对于i，如果A[i]&gt;a[i]，那么显然U[i]&gt;a[i]；</p>
<p align="left">2.对于i，如果A[i]&lt;=a[i]且i&lt;k，那么由A[k]&lt;=a[k]，可以得到a[k]-a[i]&gt;=k-i，而易知对于i有T[k]&lt;=k-i-1，所以a[k]-T[k]&gt;a[i]，所以U[i]&gt;a[i]。</p>
<p align="left"> </p>
<p align="left">综上，只需考虑k一个人即可。时间复杂度降为O(n)。</p>
<p><span style="font-size:14px"> </span></p>
<p align="left"> </p>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;sstream&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;cctype&gt;
#include &lt;ctime&gt;
#include &lt;climits&gt;
#include &lt;cassert&gt;
#include &lt;string&gt;
#include &lt;bitset&gt;
#include &lt;vector&gt;
#include &lt;deque&gt;
#include &lt;list&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;numeric&gt;
#define Fill(a, b) memset(a, b, sizeof(a))
#define Copy(a, b) memcpy(a, b, sizeof(b))
#define NPOS string::npos
#define rep(i, a, b) for (int i = a; i &lt;= b; i++)
#define rrep(i, a, b) for (int i = a; i &gt;= b; i--)
#define erep(j, a) for (Tedge *j = a; j; j = j -&gt; next)
#define irep(i,a) for (__typeof(a.begin()) i = a.begin(); i != a.end(); i++)
#define sqr(a) ((a) * (a))
#define sf scanf
#define pf printf
#define pb push_back
#define ppb pop_back
#define pft push_front
#define ppf pop_front
#define mp make_pair
#define vec vector
#define it iterator
#define fir first
#define sec second
#define x first
#define y second
#define all(a) a.begin(),a.end()
#define sz(a) (int)(a.size())
#define bg(a) (a).begin()
#define en(a) (a).end()
#define clr(a) (a).clear()
#define dbg(x) cerr &lt;&lt; __LINE__ &lt;&lt; ": " &lt;&lt; #x &lt;&lt; " = " &lt;&lt; (x) &lt;&lt; endl
#define bin_cnt(x) __builtin_popcount((unsigned)x)
#define gcd(a, b) __gcd(a, b)
using namespace std;
template&lt;class T&gt; inline bool gmin(T &amp;a, T b) { if (a &gt; b) return a = b, true; return false; }
template&lt;class T&gt; inline bool gmax(T &amp;a, T b) { if (a &lt; b) return a = b, true; return false; }
template&lt;class T&gt; T exgcd(T a, T b, T &amp;x, T &amp;y) { if (!b) return x = (T)1, y = (T)0, a; else { T d = exgcd(b, a % b, y, x); return y -= a / b * x, d; } }
typedef long long ll;
typedef unsigned long long ull;
typedef long double ld;
typedef pair&lt;int, int&gt; pii;
typedef pair&lt;double, double&gt; pdd;
typedef vec&lt;int&gt; vi;
typedef vec&lt;double&gt; vd;
typedef istringstream iss;
typedef ostringstream oss;
const int INF = 0x3f3f3f3f;
const ll LINF = 0x3f3f3f3f3f3f3f3fll;
const double DINF = 1e10;
const double EPS = 1e-9;
const double PI = 3.14159265358979323846264338327950288;
inline int dcmp(const double &amp;a) { return a &gt; EPS ? 1 : (a &lt; -EPS ? -1 : 0); }

const int MAXN = 1000005;

int n;
int a[MAXN];
ll sa[MAXN];

int main() {
//    freopen("show.in", "r", stdin);
//   freopen("show.out", "w", stdout);
    int T(0);
    
    while   (sf("%d", &amp;n) != EOF) {
    ++T;
        rep (i, 1, n) sf("%d", &amp;a[i]);
    if(T  &gt;= 40 )  continue;

        ll b = 0, B = 0;
        int p = 0;
        sa[0] = 0;
        rep (i, 1, n) {
            if (sa[i-1] &lt;= (ll)a[i]) p = i;
            sa[i] = sa[i-1]+(ll)a[i] + 1ll;
        }
        
        rep (i, p + 1, n) {
            b += a[i] &lt;= b;
            B += max(0ll, (ll)a[i] - b);
        }
        if (sa[p-1] + B &gt;= (ll)a[p]) {
            if (sa[p-1] + B == (ll)a[p]) pf("%d\n", p);
            else pf("Unknown\n");
        }
        else pf("Bad Rescue\n");
    }
    return 0;
}
</pre>
<p align="left">
 </p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97565">
<article class="comment" id="comment-97565">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919522245" rel="external nofollow">新用户972755</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-97565" rel="nofollow"><time datetime="2017-04-20T05:15:18+00:00" pubdate="">2017年4月20日 at 上午5:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>66666，你的回复点亮了评论区</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66950">
<article class="comment" id="comment-66950">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66950" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66949">
<article class="comment" id="comment-66949">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66949" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66948">
<article class="comment" id="comment-66948">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66948" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66947">
<article class="comment" id="comment-66947">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66947" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66946">
<article class="comment" id="comment-66946">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66946" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66945">
<article class="comment" id="comment-66945">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66945" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66944">
<article class="comment" id="comment-66944">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66944" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66943">
<article class="comment" id="comment-66943">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66943" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66942">
<article class="comment" id="comment-66942">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66942" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-66941">
<article class="comment" id="comment-66941">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66941" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66940">
<article class="comment" id="comment-66940">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919464183" rel="external nofollow">新用户016062</a></span> on <a href="http://www.acmerblog.com/hdu-4567-brilliant-programmers-show-7589.html#comment-66940" rel="nofollow"><time datetime="2017-04-10T22:27:50+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的狗趁你不在家，狼嚎，滚沙发，滚床单，顺便找了一个它认为最合适的厕所，你的床，杀了它的心都有。不录下来我还真不知道这二货原来是这种狗。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>