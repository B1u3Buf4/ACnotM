<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">HDU 4244-The Golden Ceiling[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观179次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7257" href="http://www.acmerblog.com/hdu-4244-the-golden-ceiling-7257.html#comments" title="《HDU 4244-The Golden Ceiling[解题报告]HOJ》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">The Golden Ceiling</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
The main office of the Bank of Zork was built in the Aragain Village(later known as Flatheadia)in the year 722 of the Great Underground Empire(GUE). In 788 GUE,the chairman, J.Pierpont Flathead, decided(shortly before his unexplained disappearance in 789), that it was time to completely redesign the already ornate bank atrium with a ceiling covered in brilliant gold leaf.
<p>This new ceiling was not your ordinary ceiling. Although the atrium is essentially a big box,the ceiling would be slanted(supposedly,making the atrium look bigger). At the time,the exact dimensions of the rectangular atrium and the slope and location of the slanted ceiling had not been finalized. Flathead wanted to know how much gold leaf he would have to order from the Frobozz Magic Gold Leaf Company to cover the ceiling for different atrium dimensions and ceiling slants. He also wanted to allow the slanted part to possibly hit the floor of the box and/or the top of the box.<br/></p><center><img alt="Maximum in the Cycle of 1" src="http://www.acmerblog.com/img/1441006443496.jpg"/></center><br/>Consider the following rough sketches of some possibly atrium configurations:
<p>Note: The dashed outline represents the original box,the horizontally ruled surface is the slanted part of the ceiling and the cross hatched surface is the part of the top of the box not cut off by the plane. The walls and floor of the atrium are transparent.The total area to be covered(the ceiling)is the slanted part plus any part of the top of the original box that is not cut off by the plane.</p>
<p>Your job is to write a program that Flathead could have used to calculate the amount gold leaf required to cover the ceiling for a particular configuration.<br/>As a sad epilogue,the main branch was brought to ruins when the Curse of Megaboz befell it in 883GUE. Between the barbarian invasions of the 880′s and the countless looters that had tread the underground ruins in the year that followed, the entire bank with all its valuables, as well as its very expensive gold leaf ceiling, had been removed or vandalized. More information can be found on-line at:http://www.thezorklibrary.com/history/bank_of_zork.html. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of input contains a single integer P,(1&lt;=P&lt;=1000),which is the number of data sets that follow. Each data set is a single line that contains the data set number,N,followed by a space, followed by seven space separated double precision floating point values,L,W,H,A,B,C and D. The values L,W and H specify the length, width and height of the atrium in Flathead Units(FU’s), respectively, and are always positive values. The values A,B,C and D specify the coefficients of the plane equation for the slanted part of the ceiling:
<p></p><center><strong>Ax + By + Cz = D</strong></center>
<p>where :0 &lt;= x &lt;= L, 0 &lt;= y &lt;= W, 0 &lt;= z &lt;= H.</p>
<p>One corner of the original box is always at the origin (0,0,0)and the other at (L,W,H). The plane will never be vertical(C will be&gt;=1.0)and the plane will always pass through the interior of the box (there will be points(x,y,z)in the box and strictly above the plane(Ax+By+Cz&gt;D)).and others strictly below the plane (Ax+By+Cz&lt;D). </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line of input contains a single integer P,(1&lt;=P&lt;=1000),which is the number of data sets that follow. Each data set is a single line that contains the data set number,N,followed by a space, followed by seven space separated double precision floating point values,L,W,H,A,B,C and D. The values L,W and H specify the length, width and height of the atrium in Flathead Units(FU’s), respectively, and are always positive values. The values A,B,C and D specify the coefficients of the plane equation for the slanted part of the ceiling:
<p></p><center><strong>Ax + By + Cz = D</strong></center>
<p>where :0 &lt;= x &lt;= L, 0 &lt;= y &lt;= W, 0 &lt;= z &lt;= H.</p>
<p>One corner of the original box is always at the origin (0,0,0)and the other at (L,W,H). The plane will never be vertical(C will be&gt;=1.0)and the plane will always pass through the interior of the box (there will be points(x,y,z)in the box and strictly above the plane(Ax+By+Cz&gt;D)).and others strictly below the plane (Ax+By+Cz&lt;D).</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3                                                     
1 10 12 15 -1.3 1 1.1 3.5                             
2 10 12 10 -1.3 1 1.1 11                              
3 13 9 10 -1.3 1 1.1 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1 166 
2 164
3 144</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">/*BISMILLAHIRRAHMANIRRAHIM*/

//#pragma warning (disable: 4786)
//#pragma comment (linker, "/STACK:0x800000")
//#define _CRT_SECURE_NO_WARNINGS 1

#include &lt;cassert&gt;
#include &lt;cctype&gt;
#include &lt;climits&gt;
#include &lt;cmath&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;list&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;queue&gt;
#include &lt;algorithm&gt;
#include &lt;iterator&gt;
#include &lt;utility&gt;
using namespace std;

template&lt; class T &gt; T _abs(T n) { return (n &lt; 0 ? -n : n); }
template&lt; class T &gt; T _max(T a, T b) { return (!(a &lt; b) ? a : b); }
template&lt; class T &gt; T _min(T a, T b) { return (a &lt; b ? a : b); }
template&lt; class T &gt; T sq(T x) { return x * x; }

#define ALL(p) p.begin(),p.end()
#define MP(x, y) make_pair(x, y)
#define SET(p) memset(p, -1, sizeof(p))
#define CLR(p) memset(p, 0, sizeof(p))
#define MEM(p, v) memset(p, v, sizeof(p))
#define CPY(d, s) memcpy(d, s, sizeof(s))
#define READ(f) freopen(f, "r", stdin)
#define WRITE(f) freopen(f, "w", stdout)
#define SZ(c) (int)c.size()
#define PB(x) push_back(x)
#define ff first
#define ss second
#define ld long double
#define pii pair&lt; int, int &gt;
#define psi pair&lt; string, int &gt;

const double EPS = 1e-9;
const int INF = 0x7f7f7f7f;

struct point {
    double x,y,z;
};

bool eql(point &amp;a,point &amp;b) {
	return fabs(a.x-b.x)&lt;EPS &amp;&amp; fabs(a.y-b.y)&lt;EPS &amp;&amp; fabs(a.z-b.z)&lt;EPS;
}


double dist(point a,point b) {
	b.x-=a.x;
	b.y-=a.y;
	b.z-=a.z;
	return sqrt(sq(b.x)+sq(b.y)+sq(b.z));
}

double ar(point a,point b,point c) {
	double x=dist(a,b);
	double y=dist(b,c);
	double z=dist(c,a);
	double s=0.5*(x+y+z);
	return sqrt(s*(s-x)*(s-y)*(s-z));
}

int main() {
	//READ("in.txt");
	//WRITE("out.txt");
	int i,j,k,l,T,I,cn;
	double a,b,c,d,x,y,z;
	point tt[200];
	double g[3][2]={0};
	cin&gt;&gt;T;
	while(T--) {
	    cin&gt;&gt;I&gt;&gt;g[0][1]&gt;&gt;g[1][1]&gt;&gt;g[2][1]&gt;&gt;a&gt;&gt;b&gt;&gt;c&gt;&gt;d;
	    vector &lt; pair &lt; point , point &gt; &gt; r,tr;
	    for(i=0;i&lt;2;i++) {
	        cn=0;
	        x=g[0][i];
	        for(j=0;j&lt;2;j++) {
	            y=g[1][j];
	            z=(d-b*y-a*x)/c;
	            ////cout&lt;&lt;i&lt;&lt;' '&lt;&lt;j&lt;&lt;' '&lt;&lt;x&lt;&lt;' '&lt;&lt;y&lt;&lt;' '&lt;&lt;z&lt;&lt;'\n';
	            if(z&gt;=0 &amp;&amp; z&lt;=g[2][1]) {
	                tt[cn].x=x;
	                tt[cn].y=y;
	                tt[cn].z=z;
	                cn++;
	            }
	        }

	        if(cn==2) {
	            r.PB(make_pair(tt[0],tt[1]));
	            continue;
	        }
	        for(j=0;j&lt;2;j++) {
	            z=g[2][j];
	            y=(d-c*z-a*x)/b;
	            ////cout&lt;&lt;i&lt;&lt;' '&lt;&lt;j&lt;&lt;' '&lt;&lt;x&lt;&lt;' '&lt;&lt;y&lt;&lt;' '&lt;&lt;z&lt;&lt;'\n';
	            if(y&gt;=0 &amp;&amp; y&lt;=g[1][1]) {
	                tt[cn].x=x;
	                tt[cn].y=y;
	                tt[cn].z=z;
	                cn++;
	            }
	        }
	        if(cn==2) r.PB(make_pair(tt[0],tt[1]));
	        else if(cn==3) {
				bool f=1;
				for(j=0;j&lt;3 &amp;&amp; f;j++) for(l=0;l&lt;j &amp;&amp; f;l++) if(!eql(tt[j],tt[l])) {
					r.PB(make_pair(tt[j],tt[l]));
					f=0;
				}
			}
	        //cout&lt;&lt;i&lt;&lt;' '&lt;&lt;cn&lt;&lt;' '&lt;&lt;r.size()&lt;&lt;'\n';
	        //cout&lt;&lt;r.back().first.x&lt;&lt;' '&lt;&lt;r.back().first.y&lt;&lt;' '&lt;&lt;r.back().first.z&lt;&lt;'\n';
	        //cout&lt;&lt;r.back().second.x&lt;&lt;' '&lt;&lt;r.back().second.y&lt;&lt;' '&lt;&lt;r.back().second.z&lt;&lt;'\n'&lt;&lt;'\n';
	    }
	    for(i=0;i&lt;2;i++) {
	        cn=0;
	        y=g[1][i];
	        for(j=0;j&lt;2;j++) {
	            x=g[0][j];
	            z=(d-b*y-a*x)/c;
	            if(z&gt;=0 &amp;&amp; z&lt;=g[2][1]) {
	                tt[cn].x=x;
	                tt[cn].y=y;
	                tt[cn].z=z;
	                cn++;
	            }
	        }

	        if(cn==2) {
	            r.PB(make_pair(tt[0],tt[1]));
	            continue;
	        }
	        for(j=0;j&lt;2;j++) {
	            z=g[2][j];
	            x=(d-c*z-b*y)/a;
	            if(x&gt;=0 &amp;&amp; x&lt;=g[0][1]) {
	                tt[cn].x=x;
	                tt[cn].y=y;
	                tt[cn].z=z;
	                cn++;
	            }
	        }
	        if(cn==2) r.PB(make_pair(tt[0],tt[1]));
	        else if(cn==3) {
				bool f=1;
				for(j=0;j&lt;3 &amp;&amp; f;j++) for(l=0;l&lt;j &amp;&amp; f;l++) if(!eql(tt[j],tt[l])) {
					r.PB(make_pair(tt[j],tt[l]));
					f=0;
				}
			}
	    }
	    for(i=0;i&lt;2;i++) {
	        cn=0;
	        z=g[2][i];
	        for(j=0;j&lt;2;j++) {
	            y=g[1][j];
	            x=(d-b*y-c*z)/a;
	            if(x&gt;=0 &amp;&amp; x&lt;=g[0][1]) {
	                tt[cn].x=x;
	                tt[cn].y=y;
	                tt[cn].z=z;
	                cn++;
	            }
	        }

	        if(cn==2) {
	            r.PB(make_pair(tt[0],tt[1]));
	            continue;
	        }
	        for(j=0;j&lt;2;j++) {
	            x=g[0][j];
	            y=(d-c*z-a*x)/b;
	            if(y&gt;=0 &amp;&amp; y&lt;=g[1][1]) {
	                tt[cn].x=x;
	                tt[cn].y=y;
	                tt[cn].z=z;
	                cn++;
	            }
	        }
	        if(cn==2) r.PB(make_pair(tt[0],tt[1]));
	        else if(cn==3) {
				bool f=1;
				for(j=0;j&lt;3 &amp;&amp; f;j++) for(l=0;l&lt;j &amp;&amp; f;l++) if(!eql(tt[j],tt[l])) {
					r.PB(make_pair(tt[j],tt[l]));
					f=0;
				}
			}
	    }
		for(i=0;i&lt;r.size();i++) if(!eql(r[i].first,r[i].second)) tr.PB(r[i]);
		r=tr;
	    for(i=0;i&lt;r.size();i++) {
	        //cout&lt;&lt;r[i].first.x&lt;&lt;' '&lt;&lt;r[i].first.y&lt;&lt;' '&lt;&lt;r[i].first.z&lt;&lt;'\n';
	        //cout&lt;&lt;r[i].second.x&lt;&lt;' '&lt;&lt;r[i].second.y&lt;&lt;' '&lt;&lt;r[i].second.z&lt;&lt;'\n'&lt;&lt;'\n';
	    }
		vector &lt; point &gt; ls;
		j=0;
		ls.push_back(r[0].first);
		j=0;
		for(i=0;i&lt;r.size();i++) {
			for(k=0;k&lt;r.size();k++) if(k!=j) {
				if(eql(ls.back(),r[k].first)) {
					ls.PB(r[k].second);
					break;
				}
				if(eql(ls.back(),r[k].second)) {
					ls.PB(r[k].first);
					break;
				}
			}
			j=k;
		}
		double res=0;
		for(i=0;i&lt;ls.size();i++) //cout&lt;&lt;ls[i].x&lt;&lt;' '&lt;&lt;ls[i].y&lt;&lt;' '&lt;&lt;ls[i].z&lt;&lt;'\n';
		for(i=2;i&lt;ls.size()-1;i++) res+=ar(ls[0],ls[i-1],ls[i]);
		z=g[2][1];
		if(fabs(r.back().first.z-z)&lt;=EPS &amp;&amp; fabs(r.back().second.z-z)&lt;=EPS) {
			r.clear();
			r.PB(tr.back());
			//puts(":)");
			for(i=0;i&lt;2;i++) {
				x=g[0][i];
				//cout&lt;&lt;(a*x+b*g[1][0]+c*z)&lt;&lt;' '&lt;&lt;a*x+b*g[1][1]+c*z&lt;&lt;'\n';
				if(a*x+b*g[1][0]+c*z&lt;=d &amp;&amp; a*x+b*g[1][1]+c*z&lt;=d) {
					y=(d-c*z-a*x)/b;
					tt[0].x=x;
					tt[0].y=g[1][0];
					tt[0].z=z;
					tt[1].x=x;
					tt[1].y=g[1][1];
					tt[1].z=z;
					r.PB(make_pair(tt[0],tt[1]));
				}
				else if(a*x+b*g[1][0]+c*z&lt;=d) {
					y=(d-c*z-a*x)/b;
					tt[0].x=x;
					tt[0].y=g[1][0];
					tt[0].z=z;
					tt[1].x=x;
					tt[1].y=y;
					tt[1].z=z;
					r.PB(make_pair(tt[0],tt[1]));
				}
				else if(a*x+b*g[1][1]+c*z&lt;=d) {
					y=(d-c*z-a*x)/b;
					tt[0].x=x;
					tt[0].y=y;
					tt[0].z=z;
					tt[1].x=x;
					tt[1].y=g[1][1];
					tt[1].z=z;
					r.PB(make_pair(tt[0],tt[1]));
				}
			}
			for(i=0;i&lt;2;i++) {
				y=g[1][i];
				if(a*g[0][0]+b*y+c*z&lt;=d &amp;&amp; a*g[0][1]+b*y+c*z&lt;=d) {
					x=(d-c*z-b*y)/a;
					tt[0].x=g[0][0];
					tt[0].y=y;
					tt[0].z=z;
					tt[1].x=g[0][1];
					tt[1].y=y;
					tt[1].z=z;
					r.PB(make_pair(tt[0],tt[1]));
				}
				else if(a*g[0][0]+b*y+c*z&lt;=d) {
					x=(d-c*z-b*y)/a;
					tt[0].x=g[0][0];
					tt[0].y=y;
					tt[0].z=z;
					tt[1].x=x;
					tt[1].y=y;
					tt[1].z=z;
					r.PB(make_pair(tt[0],tt[1]));
				}
				else if(a*g[0][1]+b*y+c*z&lt;=d) {
					x=(d-c*z-b*y)/a;
					tt[0].x=x;
					tt[0].y=y;
					tt[0].z=z;
					tt[1].x=g[0][1];
					tt[1].y=y;
					tt[1].z=z;
					r.PB(make_pair(tt[0],tt[1]));
				}
				
			}
			tr.clear();
			for(i=0;i&lt;r.size();i++) if(!eql(r[i].first,r[i].second)) tr.PB(r[i]);
			r=tr;
			for(i=0;i&lt;r.size();i++) {
				//cout&lt;&lt;r[i].first.x&lt;&lt;' '&lt;&lt;r[i].first.y&lt;&lt;' '&lt;&lt;r[i].first.z&lt;&lt;'\n';
				//cout&lt;&lt;r[i].second.x&lt;&lt;' '&lt;&lt;r[i].second.y&lt;&lt;' '&lt;&lt;r[i].second.z&lt;&lt;'\n'&lt;&lt;'\n';
			}
			vector &lt; point &gt; ls;
			j=0;
			ls.push_back(r[0].first);
			j=0;
			for(i=0;i&lt;r.size();i++) {
				for(k=0;k&lt;r.size();k++) if(k!=j) {
					if(eql(ls.back(),r[k].first)) {
						ls.PB(r[k].second);
						break;
					}
					if(eql(ls.back(),r[k].second)) {
						ls.PB(r[k].first);
						break;
					}
				}
				j=k;
			}
			for(i=0;i&lt;ls.size();i++) //cout&lt;&lt;ls[i].x&lt;&lt;' '&lt;&lt;ls[i].y&lt;&lt;' '&lt;&lt;ls[i].z&lt;&lt;'\n';
			for(i=2;i&lt;ls.size()-1;i++) res+=ar(ls[0],ls[i-1],ls[i]);
		}
			
		cout&lt;&lt;I&lt;&lt;' '&lt;&lt;ceil(res-EPS)&lt;&lt;'\n';
	}

	return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98966">
<article class="comment" id="comment-98966">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514456" rel="external nofollow">新用户598192</a></span> on <a href="http://www.acmerblog.com/hdu-4244-the-golden-ceiling-7257.html#comment-98966" rel="nofollow"><time datetime="2017-04-20T14:27:55+00:00" pubdate="">2017年4月20日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>呵呵，，，丑？？？咱奋斗你也长不成那样，，，，</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68668">
<article class="comment" id="comment-68668">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919527270" rel="external nofollow">新用户104103</a></span> on <a href="http://www.acmerblog.com/hdu-4244-the-golden-ceiling-7257.html#comment-68668" rel="nofollow"><time datetime="2017-04-11T07:10:18+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>叶璃的叔叔竟然是赵履虫！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>