<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-04</div>
<div class="tit"><h1 class="entry-title">HDU 1298 T9-DFS-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/graph/graph-visit" rel="category tag" title="查看图的遍历中的全部文章">图的遍历</a>, <a href="http://www.acmerblog.com/category/basis/string" rel="category tag" title="查看字符串处理中的全部文章">字符串处理</a>, <a href="http://www.acmerblog.com/category/search" rel="category tag" title="查看搜索中的全部文章">搜索</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a></span><span class="i4">围观1422次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1668" href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comments" title="《HDU 1298 T9-DFS-[解题报告] C++》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">T9</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
A while ago it was quite cumbersome to create a message for the Short Message Service (SMS) on a mobile phone. This was because you only have nine keys and the alphabet has more than nine letters, so most characters could only be entered by pressing one key several times. For example, if you wanted to type "hello" you had to press key 4 twice, key 3 twice, key 5 three times, again key 5 three times, and finally key 6 three times. This procedure is very tedious and keeps many people from using the Short Message Service.
<p>This led manufacturers of mobile phones to try and find an easier way to enter text on a mobile phone. The solution they developed is called T9 text input. The "9" in the name means that you can enter almost arbitrary words with just nine keys and without pressing them more than once per character. The idea of the solution is that you simply start typing the keys without repetition, and the software uses a built-in dictionary to look for the "most probable" word matching the input. For example, to enter "hello" you simply press keys 4, 3, 5, 5, and 6 once. Of course, this could also be the input for the word "gdjjm", but since this is no sensible English word, it can safely be ignored. By ruling out all other "improbable" solutions and only taking proper English words into account, this method can speed up writing of short messages considerably. Of course, if the word is not in the dictionary (like a name) then it has to be typed in manually using key repetition again.</p>
<p></p><center><img src="http://acm.hdu.edu.cn/data/images/1298-1.gif"/><br/>Figure 8: The Number-keys of a mobile phone.</center>
<p>More precisely, with every character typed, the phone will show the most probable combination of characters it has found up to that point. Let us assume that the phone knows about the words "idea" and "hello", with "idea" occurring more often. Pressing the keys 4, 3, 5, 5, and 6, one after the other, the phone offers you "i", "id", then switches to "hel", "hell", and finally shows "hello".</p>
<p>Write an implementation of the T9 text input which offers the most probable character combination after every keystroke. The probability of a character combination is defined to be the sum of the probabilities of all words in the dictionary that begin with this character combination. For example, if the dictionary contains three words "hell", "hello", and "hellfire", the probability of the character combination "hell" is the sum of the probabilities of these words. If some combinations have the same probability, your program is to select the first one in alphabetic order. The user should also be able to type the beginning of words. For example, if the word "hello" is in the dictionary, the user can also enter the word "he" by pressing the keys 4 and 3 even if this word is not listed in the dictionary. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line contains the number of scenarios.
<p>Each scenario begins with a line containing the number w of distinct words in the dictionary (0&lt;=w&lt;=1000). These words are given in the next w lines. (They are not guaranteed in ascending alphabetic order, although it’s a dictionary.) Every line starts with the word which is a sequence of lowercase letters from the alphabet without whitespace, followed by a space and an integer p, 1&lt;=p&lt;=100, representing the probability of that word. No word will contain more than 100 letters.</p>
<p>Following the dictionary, there is a line containing a single integer m. Next follow m lines, each consisting of a sequence of at most 100 decimal digits 2-9, followed by a single 1 meaning "next word". </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The output for each scenario begins with a line containing "Scenario #i:", where i is the number of the scenario starting at 1.
<p>For every number sequence s of the scenario, print one line for every keystroke stored in s, except for the 1 at the end. In this line, print the most probable word prefix defined by the probabilities in the dictionary and the T9 selection rules explained above. Whenever none of the words in the dictionary match the given number sequence, print "MANUALLY" instead of a prefix.</p>
<p>Terminate the output for every number sequence with a blank line, and print an additional blank line at the end of every scenario.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
5
hell 3
hello 4
idea 8
next 8
super 3
2
435561
43321
7
another 5
contest 6
follow 3
give 13
integer 6
new 14
program 4
5
77647261
6391
4681
26684371
77771</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Scenario #1:
i
id
hel
hell
hello

i
id
ide
idea


Scenario #2:
p
pr
pro
prog
progr
progra
program

n
ne
new

g
in
int

c
co
con
cont
anoth
anothe
another

p
pr
MANUALLY
MANUALLY</pre>
<p><!-- problem end --></p>
<p><span style="font-size:16px">HDU-1298-T9</span></p>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1298"><span style="font-size:16px; color:#ff0000">http://acm.hdu.edu.cn/showproblem.php?pid=1298</span></a></p>
<p><span style="font-size:16px">很好的一题，字典树+DFS，思路参考swm8023大牛的</span></p>
<p><span style="font-size:16px">题意是模拟手机输入法，给出几个单词即频度，再给出几个数字串，确定对于给定的一个数字串，每输入一个数字，将显示什么字符</span></p>
<p><span style="font-size:16px">本题的数字串的每一个数字均代表一个字母，而不是平常的手机，多个数字可能代表一个字母，首先可将给出的单词即频度记录到字典树中，对于数字串进行DFS，查找其可能表示的频度最大的字符串</span></p>
<p><span style="font-size:16px">例如    ab  2</span></p>
<p><span style="font-size:16px">            bc  3</span></p>
<p><span style="font-size:16px">            23</span></p>
<p><span style="font-size:16px">23代表的字符串可能是ad,ae,af,bd,be,bf,cd,ce,cf，逐个搜索，找出频度最大的</span></p>
<p><span style="font-size:16px"><img alt="" src="http://my.csdn.net/uploads/201207/17/1342536809_7707.jpg"/><br/>
</span></p>
<p><span style="font-size:16px"></span></p>
<pre class="brush:cpp ">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;cstdlib&gt;
using namespace std;
struct node
{
	int count;
	node *childs[26];
	node()
	{
		count=0;
		for(int i=0;i&lt;26;i++)
		childs[i]=NULL;
	}
};
node *root;
node *current,*newnode;
int p;
char s1[105],s2[105],find[105],ans[105];
char phone[8][4]={{0,1,2},{3,4,5},{6,7,8},{9,10,11},{12,13,14},{15,16,17,18},{19,20,21},{22,23,24,25}};
int  num[8]={3,3,3,3,3,4,3,4};
void insert(char *str,int k) //插入字符串和它的频度
{
	int i,m;
	current=root;
	for(i=0;i&lt;strlen(str);i++)
	{
		m=str[i]-'a';
		if(current-&gt;childs[m]!=NULL)
		{
			current=current-&gt;childs[m];
			(current-&gt;count)+=k;
		}
		else
		{
			newnode=new node;
			(newnode-&gt;count)+=k;
			current-&gt;childs[m]=newnode;
			current=newnode;
		}
	}
}
void dfs(int cur,int len,node *nd)
{
    if(cur==len)
	{
		if(nd-&gt;count&gt;p)   //找频度最大的
		{
			p=nd-&gt;count;
            for(int i=0;i&lt;len;i++)
			find[i]=ans[i];
			find[len]='\0';
		}
	    return;
	}
    int t=s2[cur]-'2';
    for(int i=0;i&lt;num[t];i++)
	{
		int r=phone[t][i];
		if(nd-&gt;childs[r]==NULL)
		continue;
		ans[cur]='a'+r;
        dfs(cur+1,len,nd-&gt;childs[r]);
	}
	return;
}
int main()
{
	int i,n,m,t,k,cnt,len;
	scanf("%d",&amp;t);
	for(k=1;k&lt;=t;k++)
	{
		printf("Scenario #%d:\n",k);
		scanf("%d",&amp;n);
		root=new node;
		while(n--)
		{
			scanf("%s %d",s1,&amp;cnt);
			insert(s1,cnt);
		}
		scanf("%d",&amp;m);
		while(m--)
		{
			scanf("%s",s2);
			len=strlen(s2);
			for(i=1;i&lt;len;i++)
			{
				p=0;  //记录字符出现的频度
				dfs(0,i,root);
				if(p&gt;0)
				printf("%s\n",find);
				else
				printf("MANUALLY\n");
			}
			printf("\n");
		}
		printf("\n");
	}
	return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-12279">
<article class="comment" id="comment-12279">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HenrryCheng</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12279" rel="nofollow"><time datetime="2015-05-07T00:49:14+00:00" pubdate="">2015年5月7日 at 上午12:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12284">
<article class="comment" id="comment-12284">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mitrenick</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12284" rel="nofollow"><time datetime="2015-05-03T21:19:33+00:00" pubdate="">2015年5月3日 at 下午9:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很专业！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12286">
<article class="comment" id="comment-12286">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wizcabbit</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12286" rel="nofollow"><time datetime="2015-04-09T12:33:29+00:00" pubdate="">2015年4月9日 at 下午12:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一句可以忽略不计了吧。从第二句开始分析，说明这个花色下的所有牌都会在其它里面出现，那么还剩下♠️和♦️。第三句，可以排除2和7，因为在两种花色里有。现在是第四句，因为♠️还剩下多个，只有是♦️B才能知道答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12281">
<article class="comment" id="comment-12281">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">slowlight</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12281" rel="nofollow"><time datetime="2015-03-15T05:48:43+00:00" pubdate="">2015年3月15日 at 上午5:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>书上的解法更巧妙一些，在九度OJ实测的效率差不多</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12285">
<article class="comment" id="comment-12285">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">NiKaWaLi</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12285" rel="nofollow"><time datetime="2015-02-24T12:48:04+00:00" pubdate="">2015年2月24日 at 下午12:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一种方法怎么会是O(log(m+n))呢？没有二分的话直接遍历应该就是O(m+n)吧？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12289">
<article class="comment" id="comment-12289">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">keyyuanxin</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12289" rel="nofollow"><time datetime="2014-11-27T14:47:35+00:00" pubdate="">2014年11月27日 at 下午2:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感谢~速度真快，我很喜欢这个网站，从基础看起。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12288">
<article class="comment" id="comment-12288">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiaoliubuer</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12288" rel="nofollow"><time datetime="2014-11-19T22:29:35+00:00" pubdate="">2014年11月19日 at 下午10:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，现在就缺少新的资料</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54540">
<article class="comment" id="comment-54540">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">lintong</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-54540" rel="nofollow"><time datetime="2014-09-16T07:35:39+00:00" pubdate="">2014年9月16日 at 上午7:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这配图…..</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12280">
<article class="comment" id="comment-12280">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12280" rel="nofollow"><time datetime="2014-07-09T09:58:24+00:00" pubdate="">2014年7月9日 at 上午9:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>红绯鱼：<br/>
牛逼牛逼</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12287">
<article class="comment" id="comment-12287">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xuelanghu</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12287" rel="nofollow"><time datetime="2014-05-04T18:38:42+00:00" pubdate="">2014年5月4日 at 下午6:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已修改。一些字符在编辑的时候转义了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12282">
<article class="comment" id="comment-12282">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lint</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12282" rel="nofollow"><time datetime="2014-02-22T09:44:46+00:00" pubdate="">2014年2月22日 at 上午9:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，赞一个！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12290">
<article class="comment" id="comment-12290">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lint</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12290" rel="nofollow"><time datetime="2014-02-20T04:31:22+00:00" pubdate="">2014年2月20日 at 上午4:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题还是比较考验智商~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12283">
<article class="comment" id="comment-12283">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY243956</a></span> on <a href="http://www.acmerblog.com/hdu-1298-T9-1668.html#comment-12283" rel="nofollow"><time datetime="2013-12-26T05:25:29+00:00" pubdate="">2013年12月26日 at 上午5:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有一点问题。。后面动态规划的程序中<br/>
int dp[n+1][W+1];<br/>
会报错  提示表达式必须含有常量值。该怎么修改呢。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>