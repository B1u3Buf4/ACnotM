<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-09</div>
<div class="tit"><h1 class="entry-title">HDU 1361 Parencodings-模拟-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a></span><span class="i4">围观1701次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1790" href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comments" title="《HDU 1361 Parencodings-模拟-[解题报告] C++》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Parencodings</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Let S = s1 s2 … s2n  be a well-formed string of parentheses. S can be encoded in two different ways:
<ul>
<li>By an integer sequence P = p1 p2 … pn where pi is the number of left parentheses before the ith right parenthesis in S (P-sequence).</li>
<p>
</p><li>By an integer sequence W = w1 w2 … wn where for each right parenthesis, say a in S, we associate an integer which is the number of right parentheses counting from the matched left parenthesis of a up to a. (W-sequence).</li>
<p></p></ul>
<p>Following is an example of the above encodings:
</p><pre><br/>  S    (((()()())))<br/>  P-sequence      4 5 6666<br/>  W-sequence      1 1 1456<br/></pre>
<p>Write a program to convert P-sequence of a well-formed string to the W-sequence of the same string. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of the input file contains a single integer t (1  t  10), the number of test cases, followed by the input data for each test case. The first line of each test case is an integer n (1  n  20), and the second line is the P-sequence of a well-formed string. It contains n positive integers, separated with blanks, representing the P-sequence. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The output file consists of exactly t lines corresponding to test cases. For each test case, the output line should contain n integers describing the W-sequence of the string corresponding to its given P-sequence.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
6
4 5 6 6 6 6
9 
4 6 6 6 6 8 9 9 9</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1 1 1 4 5 6
1 1 2 4 5 1 1 3 9</pre>
<p> <!-- problem end --></p>
<p>地址：<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1361">http://acm.hdu.edu.cn/showproblem.php?pid=1361</a></p>
<p>题意：对于一个合法的括号序列S，可以计算出P和W的值。P的第i个值表示第i个右括号前面有多少个左括号，W的第i个值表示第i个右括号会和前面第几个左括号匹配。现在给出P的值，求W的值。</p>
<p>mark：因为数据很小，n的长度只有20，因此可以直接模拟，由P反求出S，然后由S直接求出P。</p>
<p>代码：</p>
<pre class="brush:cpp "># include &lt;stdio.h&gt;
# include &lt;string.h&gt;


char str[50] ;
int p[50],w[50] ;
int n ;


void setstr()
{
    int num, i, j, cnt ;
    for(i=0;i&lt;n;i++)
    {
        scanf ("%d", &amp;num) ;
        cnt = 0 ;
        for(j=0;cnt&lt;num;j++)
        {
            if (str[j]==')') continue ;
            cnt++ ;
        }
        while (str[j]==')')j++ ;
        str[j] = ')' ;
    }
    for(i = 0 ; i &lt; 2*n ; i++) if (str[i]!=')') str[i] = '(' ;
    str[2*n] = '\0' ;
}


void setw()
{
    
    int i, j=0, flag = 0 ;
    for (i = 0 ; i &lt; 2*n ; i++)
    {
        if (str[i]=='('){ j=i; continue ;}
        if (flag == 0) flag = 1 ;
        else putchar(' ') ;
        printf ("%d", (i-j)/2+1) ;
        str[j] = '*' ;
        while (j&gt;=0 &amp;&amp; str[j] != '(') j-- ;
    }
    printf ("\n") ;
}

int main ()
{
    int t ;
    scanf ("%d", &amp;t) ;
    while (t--)
    {
        scanf ("%d", &amp;n) ;
        memset (str, 0, sizeof(str)) ;
        setstr() ;
        setw() ;
    }
    return 0 ;
}</pre>
<p>解题报告转自：http://www.cnblogs.com/lzsz1212/archive/2012/02/16/2353516.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-40751">
<article class="comment" id="comment-40751">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AC_Grazy</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40751" rel="nofollow"><time datetime="2015-04-09T21:13:24+00:00" pubdate="">2015年4月9日 at 下午9:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这代码的输出格式不对阿，else语句的low=p移动一下位置，增加可读性</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40747">
<article class="comment" id="comment-40747">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">admin</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40747" rel="nofollow"><time datetime="2015-02-26T11:33:34+00:00" pubdate="">2015年2月26日 at 上午11:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>华为这题目略显简单啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-54650">
<article class="comment" id="comment-54650">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">20134055016</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-54650" rel="nofollow"><time datetime="2015-01-14T06:06:36+00:00" pubdate="">2015年1月14日 at 上午6:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题其实还可以找循环节。参照欧拉定理（也就是费马定理的推广）,a^(phi(m)) mod m = 1</p>
<p><a href="http://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86_(%E6%95%B0%E8%AE%BA)" rel="nofollow">http://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86_(%E6%95%B0%E8%AE%BA)</a></p>
<p>所以先算b mod phi(10)，这个部分都是可以约掉的。基本上O(1)的时间就出解了。当然，这也是因为这个问题模数太小的原因。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54649">
<article class="comment" id="comment-54649">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">asdass</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-54649" rel="nofollow"><time datetime="2015-01-13T11:51:26+00:00" pubdate="">2015年1月13日 at 上午11:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40755">
<article class="comment" id="comment-40755">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCCat</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40755" rel="nofollow"><time datetime="2014-10-01T17:31:46+00:00" pubdate="">2014年10月1日 at 下午5:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40752">
<article class="comment" id="comment-40752">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HaibaraAi</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40752" rel="nofollow"><time datetime="2014-09-05T03:45:23+00:00" pubdate="">2014年9月5日 at 上午3:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感谢分享 学习了`(*∩_∩*)′</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40749">
<article class="comment" id="comment-40749">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tangzhihua</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40749" rel="nofollow"><time datetime="2014-08-09T16:48:07+00:00" pubdate="">2014年8月9日 at 下午4:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>还是有些难度的！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40750">
<article class="comment" id="comment-40750">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40750" rel="nofollow"><time datetime="2014-06-02T20:26:18+00:00" pubdate="">2014年6月2日 at 下午8:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这一题的代码这样提交时错误的~少考虑了很多情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40753">
<article class="comment" id="comment-40753">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hongfieyu</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40753" rel="nofollow"><time datetime="2014-05-23T06:39:34+00:00" pubdate="">2014年5月23日 at 上午6:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40748">
<article class="comment" id="comment-40748">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">testnew</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40748" rel="nofollow"><time datetime="2014-03-11T14:36:45+00:00" pubdate="">2014年3月11日 at 下午2:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给力的文章，例子也非常好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40754">
<article class="comment" id="comment-40754">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Snarl_jsb</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-40754" rel="nofollow"><time datetime="2014-02-20T13:19:48+00:00" pubdate="">2014年2月20日 at 下午1:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>刚开始学习，为啥会报错了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12776">
<article class="comment" id="comment-12776">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">didiaozuoren</a></span> on <a href="http://www.acmerblog.com/hdu-1361-Parencodings-1790.html#comment-12776" rel="nofollow"><time datetime="2014-01-03T20:20:53+00:00" pubdate="">2014年1月3日 at 下午8:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给你一组数据吧：29 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 1000。此时的数据量还是很小的，耗时却不短。这种方法确实可以，当然或许还有其他的优化方案，但是优化只能针对某些数据，不太可能在所有情况下都能在可接受的时间内求解出答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>