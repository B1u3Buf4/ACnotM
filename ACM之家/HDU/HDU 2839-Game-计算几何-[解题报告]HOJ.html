<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-17</div>
<div class="tit"><h1 class="entry-title">HDU 2839-Game-计算几何-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/data-struct/hash" rel="category tag" title="查看Hash表中的全部文章">Hash表</a>, <a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/geometry/analytic-geometry" rel="category tag" title="查看解析几何中的全部文章">解析几何</a></span><span class="i4">围观717次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4482" href="http://www.acmerblog.com/hdu-2839-game-4482.html#comments" title="《HDU 2839-Game-计算几何-[解题报告]HOJ》上的评论">17 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Game</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
After played many kinds of nim games, Xay and Amr decided to play something different. As the judge, I wrote several valid pairs of numbers on the blackboard. For every pair (x, y), it is valid only if -y ≤ x ≤ y and the greatest common divisor of x and y is 1. The typical legal move is to alter just one of these pairs. If we change (x, y) to (a, b):<br/>1. (a, b) should be a valid pair.<br/>2. 1 ≤ b &lt; y if y != 1<br/>3. 1 ≤ b ≤ y, -b &lt; a &lt; b if y = 1.
<p>Furthermore, such a replacement will be legal for Xay only if a*y – b*x &lt; 0, legal for Amr only if a*y – b*x &gt; 0.For example, Xay can change (2, 5) to (1,3), (1,4), (-1,2), (0,1), (-1,1), etc. And Amr can similarly change (2, 5) to (1, 2), (2, 3), (3, 4), (1, 1), etc.</p>
<p>They will play on these pairs alternately. The last one who be able to move is the winner .We have already knew that both Amr and Xay are very clever and they will play this game perfectly. Now, my dear programmers, can you predict that who will be the winner? </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line contains a single positive integer T. which is the number of test cases. Each test case starts with a line with a single positive integer n(1 ≤ n ≤ 100) and a string “Xay” or “Amr” means who moves first. Then n lines follows, each line contains a pair of integers x and y. (1 ≤ y ≤ 15 and �y ≤ x ≤ y) </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line contains a single positive integer T. which is the number of test cases. Each test case starts with a line with a single positive integer n(1 ≤ n ≤ 100) and a string “Xay” or “Amr” means who moves first. Then n lines follows, each line contains a pair of integers x and y. (1 ≤ y ≤ 15 and �y ≤ x ≤ y)</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3
1 Xay
0 1
2 Amr
1 1
-1 1
2 Xay
1 4
-1 2</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Amr
Xay
Amr

Hint

If Xay choose the pair (x, y), he will change it to (a, b) which make a/b as large as possible. </pre>
<p> <!-- problem end --></p>
<h1 style="font-family:Simsun">
<center>
<table bgcolor="#0060F0">
<tbody>
<tr>
<td><strong><span style="font-size:24px; color:#C0FFFF"> <a name="SECTION0001000000000000000000" target="_blank">The Spot Game</a></span> </strong></td>
</tr>
</tbody>
</table>
<p></p></center><br/>
</h1>
<p style="font-family:Simsun; font-size:14px">The game of Spot is played on an NxN board as shown below for N = 4. During the game, alternate players may either place a black counter (spot) in an empty square or remove one from the board, thus producing a variety<br/>
 of patterns. If a board pattern (or its rotation by 90 degrees or 180 degrees) is repeated during a game, the player producing that pattern loses and the other player wins. The game terminates in a draw after 2N moves if no duplicate pattern is produced before<br/>
 then.</p>
<p style="font-family:Simsun; font-size:14px">Consider the following patterns:</p>
<p style="font-family:Simsun; font-size:14px">
</p><p style="font-family:Simsun; font-size:14px"><img align="BOTTOM" alt="picture23" src="http://cdn.acmerblog.com/img/1392909861185.gif"/></p>
<p style="font-family:Simsun; font-size:14px">
</p><p style="font-family:Simsun; font-size:14px">If the first pattern had been produced earlier, then any of the following three patterns (plus one other not shown) would terminate the game, whereas the last one would not.</p>
<p style="font-family:Simsun; font-size:14px">
</p><h2 style="font-family:Simsun"><span style="color:#0070E8">Input and Output</span></h2>
<p style="font-family:Simsun; font-size:14px">Input will consist of a series of games, each consisting of the size of the board, N (2 <img align="MIDDLE" alt="tex2html_wrap_inline180" height="24" src="http://cdn.acmerblog.com/img/1392909863000.gif" width="11"/> N <img align="MIDDLE" alt="tex2html_wrap_inline180" height="24" src="http://cdn.acmerblog.com/img/1392909864191.gif" width="11"/> 50)<br/>
 followed, on separate lines, by 2N moves, whether they are all necessary or not. Each move will consist of the coordinates of a square (integers in the range 1..N) followed by a blank and a character `+’ or `-’ indicating the addition or removal of a spot<br/>
 respectively. You may assume that all moves are legal, that is there will never be an attempt to place a spot on an occupied square, nor to remove a non-existent spot. Input will be terminated by a zero (0).</p>
<p style="font-family:Simsun; font-size:14px">
</p><p style="font-family:Simsun; font-size:14px">Output will consist of one line for each game indicating which player won and on which move, or that the game ended in a draw.</p>
<p style="font-family:Simsun; font-size:14px">
</p><h2 style="font-family:Simsun"><span style="color:#0070E8">Sample input</span></h2>
<p style="font-family:Simsun; font-size:14px">
</p><pre>2
1 1 +
2 2 +
2 2 -
1 2 +
2
1 1 +
2 2 +
1 2 +
2 2 -
0</pre>
<p style="font-family:Simsun; font-size:14px">
</p><h2 style="font-family:Simsun"><span style="color:#0070E8">Sample output</span></h2>
<p style="font-family:Simsun; font-size:14px">
</p><pre>Player 2 wins on move 3
Draw</pre>
<p></p>
<p><span style="font-family:Microsoft YaHei; font-size:14px">题意：放石头游戏(The game of Spot)在一块NxN的板子上进行，如下图为N=4的板子。游戏的玩法是两个玩家轮流放一块石头在空的格子上，或是可以从板子上拿一块石头起来，游戏的进行中可以发现，板子上石头的布局会不断变化，当一玩家排出已重复出现过的布局时，他就算输了这一局(一种布局如果将之旋转90度、180度、270度亦视为相同的布局)。若在2N步内未出现过相同的布局就算和局。</span>
</p>
<p><span style="font-family:Microsoft YaHei; font-size:14px">一开始就看错了题目，以为棋盘是4*4的，没看到n*n，wa了无数次，其中哈希函数也写错了。。一道简单的哈希题花了很久的时间。</span></p>
<p><span style="font-family:Microsoft YaHei; font-size:14px"></span></p>
<pre class="brush:cpp ">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;set&gt;

using namespace std;

char grid[55][55];
set&lt;string&gt; vis;
int n;

int try_to_insert()
{
    string str="";
    int i,j;
    for(i=0;i&lt;n;i++)
    {
        for(j=0;j&lt;n;j++)
        {
            str=str+grid[i][j];
        }
    }
    if(vis.count(str)) return 0;
    vis.insert(str);
    str="";
    for(i=n-1;i&gt;=0;i--)
    {
        for(j=0;j&lt;n;j++)
        {
            str=str+grid[i][j];
        }
    }
    if(!vis.count(str)) vis.insert(str);
    str="";
    for(i=n-1;i&gt;=0;i--)
    {
        for(j=n-1;j&gt;=0;j--)
        {
            str=str+grid[i][j];
        }
    }
    if(!vis.count(str)) vis.insert(str);
    str="";
    for(i=0;i&lt;n;i++)
    {
        for(j=n-1;j&gt;=0;j--)
        {
            str=str+grid[i][j];
        }
    }
    if(!vis.count(str)) vis.insert(str);
    return 1;
}

int main()
{
    while(cin&gt;&gt;n&amp;&amp;n)
    {
        int flag=1,winner,num;
        int i,x,y;
        char ch;
        vis.clear();
        memset(grid,'0',sizeof(grid));
        for(i=0;i&lt;2*n;i++)
        {
            cin&gt;&gt;x&gt;&gt;y&gt;&gt;ch;
            if(flag==0) continue;
            if(ch=='+') grid[x-1][y-1]='1';
            else if(ch=='-') grid[x-1][y-1]='0';
            if(try_to_insert()==0)
            {
                flag=0;
                num=i+1;
                if(i%2==0) winner=2;
                else winner=1;
                cout&lt;&lt;"Player "&lt;&lt;winner&lt;&lt;" wins on move "&lt;&lt;num&lt;&lt;endl;
            }
        }
        if(flag) cout&lt;&lt;"Draw"&lt;&lt;endl;
    }
    return 0;
}</pre>
<p>解题参考：http://blog.csdn.net/zju_ziqin/article/details/18970247</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-81657">
<article class="comment" id="comment-81657">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515754" rel="external nofollow">新用户090141</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-81657" rel="nofollow"><time datetime="2017-04-12T19:45:05+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"></div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81656">
<article class="comment" id="comment-81656">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515754" rel="external nofollow">新用户090141</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-81656" rel="nofollow"><time datetime="2017-04-12T19:45:05+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"></div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81655">
<article class="comment" id="comment-81655">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515754" rel="external nofollow">新用户090141</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-81655" rel="nofollow"><time datetime="2017-04-12T19:45:05+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"></div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81654">
<article class="comment" id="comment-81654">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515754" rel="external nofollow">新用户090141</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-81654" rel="nofollow"><time datetime="2017-04-12T19:45:05+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"></div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81653">
<article class="comment" id="comment-81653">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515754" rel="external nofollow">新用户090141</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-81653" rel="nofollow"><time datetime="2017-04-12T19:45:05+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"></div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81652">
<article class="comment" id="comment-81652">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515754" rel="external nofollow">新用户090141</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-81652" rel="nofollow"><time datetime="2017-04-12T19:45:05+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"></div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81651">
<article class="comment" id="comment-81651">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515754" rel="external nofollow">新用户090141</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-81651" rel="nofollow"><time datetime="2017-04-12T19:45:05+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"></div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-25074">
<article class="comment" id="comment-25074">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">usx13123</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25074" rel="nofollow"><time datetime="2015-07-02T06:29:13+00:00" pubdate="">2015年7月2日 at 上午6:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>没错的，再乘以m的就多余了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-25078">
<article class="comment" id="comment-25078">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bai</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25078" rel="nofollow"><time datetime="2015-06-29T11:09:27+00:00" pubdate="">2015年6月29日 at 上午11:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>整理的很好，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-25081">
<article class="comment" id="comment-25081">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Christmas</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25081" rel="nofollow"><time datetime="2015-06-14T00:59:50+00:00" pubdate="">2015年6月14日 at 上午12:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，还是这种实现比较好理解。虽然效率有点低</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57507">
<article class="comment" id="comment-57507">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mnmlist</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-57507" rel="nofollow"><time datetime="2015-05-23T02:44:29+00:00" pubdate="">2015年5月23日 at 上午2:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个应该是比较简单的解法了，如果有更好的办法可以告诉我</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-25080">
<article class="comment" id="comment-25080">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">reking</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25080" rel="nofollow"><time datetime="2015-05-11T22:26:21+00:00" pubdate="">2015年5月11日 at 下午10:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>aha, welcome!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-25079">
<article class="comment" id="comment-25079">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ding Qiangyuan</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25079" rel="nofollow"><time datetime="2014-12-25T06:54:52+00:00" pubdate="">2014年12月25日 at 上午6:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>跟书上的解法不一样，不知道哪个效率要高些</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46704">
<article class="comment" id="comment-46704">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Supermaner</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-46704" rel="nofollow"><time datetime="2014-08-18T10:56:25+00:00" pubdate="">2014年8月18日 at 上午10:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这配图…..</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-25075">
<article class="comment" id="comment-25075">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Anne</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25075" rel="nofollow"><time datetime="2014-07-27T07:15:24+00:00" pubdate="">2014年7月27日 at 上午7:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一句可以忽略不计了吧。从第二句开始分析，说明这个花色下的所有牌都会在其它里面出现，那么还剩下♠️和♦️。第三句，可以排除2和7，因为在两种花色里有。现在是第四句，因为♠️还剩下多个，只有是♦️B才能知道答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-25076">
<article class="comment" id="comment-25076">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiaobei</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25076" rel="nofollow"><time datetime="2014-06-06T17:03:44+00:00" pubdate="">2014年6月6日 at 下午5:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这种题解就相当于直接贴代码了，，想看的是思路</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-25077">
<article class="comment" id="comment-25077">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">skyand</a></span> on <a href="http://www.acmerblog.com/hdu-2839-game-4482.html#comment-25077" rel="nofollow"><time datetime="2014-06-03T11:52:32+00:00" pubdate="">2014年6月3日 at 上午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>