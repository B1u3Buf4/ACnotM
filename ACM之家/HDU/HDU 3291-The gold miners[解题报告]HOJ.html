<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-13</div>
<div class="tit"><h1 class="entry-title">HDU 3291-The gold miners[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观445次</span><span class="i3"><a class="ds-thread-count" data-thread-key="5186" href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comments" title="《HDU 3291-The gold miners[解题报告]HOJ》上的评论">11 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">The gold miners</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
There are some funny mini games on the internet. Sailormoon girls usually play these games in them spare time. They always play a mini game named THE GOLD MINNERS. Now they give you a problem about this game. Could you solve it? Now let’s look at the following picture.<br/>  <center><img alt="The magic apple tree" src="/img/1395044072983.jpg"/></center> <br/>We set the position of the minner as the origin of coordinate.There are many objects in this game,not only gold. They also have diamonds,stones,and other unknown things.All the objects can be treated as polygon. Every two polygons can not intersect. In this problem,we will give you some data about the angle in order. When the hook with certain angle sinking, it will always catch nearest object, and get the corresponding money. There will be nothing in the position of this object later. If there have no objects,the hook will return back to the origin of coordinate. How much money does the minner have at last?Do you know? </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There are multiple test cases.<br/>Each case begins with a positive integer N (0 &lt;= N &lt;= 30) , it means there are N objects.<br/>The following N * 2 lines describe the informatin about objects. Each object starts with a positive integer V (3 &lt;= V &lt;= 15), it means this object can be treated as a polygon with V vertex. Followed by a positive integer W which is the value of this object.<br/>The next line contains V * 2 decimal number. X1,Y1,X2,Y2……Xv,Yv. You can suppose all coordinate data are in the double range.Vertex coordinates clockwise.<br/>Then followed by a positive integer M (M &lt;= 100) which is number of the minner cast hook.<br/>The following M lines contains M positive integer.The Xth integer means the angle with which the minner cast hook the Xth.(0 &lt; angle &lt; 180)  </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There are multiple test cases.<br/>Each case begins with a positive integer N (0 &lt;= N &lt;= 30) , it means there are N objects.<br/>The following N * 2 lines describe the informatin about objects. Each object starts with a positive integer V (3 &lt;= V &lt;= 15), it means this object can be treated as a polygon with V vertex. Followed by a positive integer W which is the value of this object.<br/>The next line contains V * 2 decimal number. X1,Y1,X2,Y2……Xv,Yv. You can suppose all coordinate data are in the double range.Vertex coordinates clockwise.<br/>Then followed by a positive integer M (M &lt;= 100) which is number of the minner cast hook.<br/>The following M lines contains M positive integer.The Xth integer means the angle with which the minner cast hook the Xth.(0 &lt; angle &lt; 180) </div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
4
4 158
0.0 -1.0 2.0 -1.0 0.0 -3.0 -1.0 -2.0
4 37
4.0 -1.0 4.0 -2.0 3.0 -2.0 3.0 -1.0
6 360
2.0 -3.0 3.0 -3.0 2.0 -5.0 1.0 -5.0 1.0 -4.0 2.0 -4.0
5 223
-2.0 -4.0 -2.0 -5.0 -3.0 -6.0 -4.0 -5.0 -4.0 -4.0
3
45
16
127

5
4 10
-3.0 0.0 -2.0 -1.0 -3.0 -1.0 -4.0 0.0
4 208
-2.0 0.0 0.0 -1.0 3.0 -1.0 0.0 -3.0
6 660
3.0 -2.0 4.0 -2.0 5.0 -3.0 6.0 -3.0 6.0 -6.0 3.0 -6.0
4 25
-1.0 -4.0 2.0 -4.0 2.0 -6.0 -1.0 -6.0
3 18
0.0 -7.0 1.0 -8.0 -1.0 -8.0
3
34
64
90</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
418
251</pre>
<p> <!-- problem end --></p>
<p>数据就是变态 直接让我那个完全没精度的破模板wa上10几次</p>
<p>膜拜AC大神!</p>
<p>#include &lt;iostream&gt;<br/>#include &lt;algorithm&gt;<br/>#include &lt;cmath&gt;<br/>using namespace std;<br/>const double eps=1e-9;<br/>const double maxl=1e10;<br/>const double pi=3.1415926535897932384626433832795;<br/>const int maxv=20;<br/>template &lt;class T&gt;<br/>T Max(T a,T b){return a&gt;b?a:b;}<br/>template &lt;class T&gt;<br/>T Min(T a,T b){return a&lt;b?a:b;}<br/>double sqr(double a){return a*a;}<br/>int sgn(double a){if (a&gt;eps) return 1;if (a&lt;-eps) return -1;return 0;}<br/>struct Point<br/>{<br/> double x,y;<br/> Point(){};<br/> Point(double dx,double dy){x=dx;y=dy;}<br/> inline int init(){ return scanf("%lf%lf",&amp;x,&amp;y); }</p>
<p>};<br/>double dis(Point a,Point b);<br/>Point operator -(Point a,Point b){Point c;c.x=a.x-b.x;c.y=a.y-b.y;return c;}<br/>Point operator +(Point a,Point b){Point c;c.x=a.x+b.x;c.y=a.y+b.y;return c;}<br/>Point operator *(Point a,double d){Point c;c.x=a.x*d;c.y=a.y*d;return c;}<br/>Point operator *(double d,Point a){Point c;c.x=a.x*d;c.y=a.y*d;return c;}<br/>Point operator /(Point a,double d){Point c;c.x=a.x/d;c.y=a.y/d;return c;}<br/>double operator *(Point a,Point b){return a.x*b.x+a.y*b.y;}<br/>int operator ==(Point a,Point b){return dis(a,b)&lt;eps;}<br/>int operator !=(Point a,Point b){return dis(a,b)&gt;=eps;}<br/>bool operator &lt; (const Point &amp;l, const Point &amp;r){return sgn(l.y-r.y)&lt;0 ||( sgn(l.y-r.y)==0 &amp;&amp; sgn(l.x-r.x)&lt;0 );}<br/>double dis(Point a,Point b){a=a-b;return sqrt(sqr(a.x)+sqr(a.y));}<br/>double crossmuti(Point a,Point b){return a.x*b.y-a.y*b.x;}<br/>struct LineSegment<br/>{<br/> Point pt1,pt2;<br/> LineSegment(){};<br/> LineSegment(Point p1,Point p2){pt1=p1;pt2=p2;}<br/>};<br/>/*<br/>int Intersect(LineSegment L1, LineSegment L2)<br/>{<br/> if( (Max(L1.pt1.x, L1.pt2.x) &gt;= Min(L2.pt1.x, L2.pt2.x)) &amp;&amp;<br/>   (Max(L2.pt1.x, L2.pt2.x) &gt;= Min(L1.pt1.x, L1.pt2.x)) &amp;&amp;<br/>   (Max(L1.pt1.y, L1.pt2.y) &gt;= Min(L2.pt1.y, L2.pt2.y)) &amp;&amp;<br/>   (Max(L2.pt1.y, L2.pt2.y) &gt;= Min(L1.pt1.y, L1.pt2.y)) &amp;&amp;<br/>   (crossmuti(L2.pt1-L1.pt1,L1.pt2-L1.pt1) * crossmuti(L1.pt2-L1.pt1,L2.pt2-L1.pt1) &gt; eps) &amp;&amp;<br/>   (crossmuti(L1.pt1-L2.pt1,L2.pt2-L2.pt1) * crossmuti(L2.pt2-L2.pt1,L1.pt2-L2.pt1) &gt; eps)  ) return 1;</p>
<p> if( (Max(L1.pt1.x, L1.pt2.x)+eps &gt;= Min(L2.pt1.x, L2.pt2.x)) &amp;&amp;<br/>   (Max(L2.pt1.x, L2.pt2.x)+eps &gt;= Min(L1.pt1.x, L1.pt2.x)) &amp;&amp;<br/>   (Max(L1.pt1.y, L1.pt2.y)+eps &gt;= Min(L2.pt1.y, L2.pt2.y)) &amp;&amp;<br/>   (Max(L2.pt1.y, L2.pt2.y)+eps &gt;= Min(L1.pt1.y, L1.pt2.y)) &amp;&amp;<br/>   (sgn(crossmuti(L2.pt1-L1.pt1,L1.pt2-L1.pt1)) * sgn(crossmuti(L1.pt2-L1.pt1,L2.pt2-L1.pt1)) &gt;= 0) &amp;&amp;<br/>   (sgn(crossmuti(L1.pt1-L2.pt1,L2.pt2-L2.pt1)) * sgn(crossmuti(L2.pt2-L2.pt1,L1.pt2-L2.pt1)) &gt;= 0)  ) return -1;<br/> return 0;<br/>}<br/>*/<br/>struct Polygon<br/>{<br/> Point vertex[maxv];<br/> int numv;<br/> Polygon(){numv=0;}<br/> Polygon(Point *s,int num){numv=num;memcpy(vertex,s,num*sizeof(Point));}<br/> Point &amp;operator [](int k){return vertex[k];}<br/>};</p>
<p>struct Line<br/>{<br/> double a,b,c;   //ax+by+c==0<br/> Line(){};<br/> Line(double p,double q,double r){a=p;b=q;c=r;}<br/> Line(Point p,Point q) //将点q-〉p专成半平面 直线和法向量成右手螺旋<br/> {<br/>   a=q.y-p.y;<br/>   b=p.x-q.x;<br/>   c=p.y*q.x-p.x*q.y;<br/>   double one=sqrt(sqr(a)+sqr(b));<br/>   if (one&gt;0) {a/=one;b/=one;c/=one;}<br/> }  <br/> Line(LineSegment l)<br/> {<br/>   Line ls(l.pt1,l.pt2);<br/>   a=ls.a;b=ls.b;c=ls.c;<br/> }<br/> double func(Point &amp;p){return a*p.x+b*p.y+c;}<br/>};<br/>int ondiffside(Line l,Point a,Point b)<br/>{<br/> return sgn(l.func(a))*sgn(l.func(b))&lt;0;<br/>}<br/>int PntonSeg(LineSegment ls,Point p)<br/>{<br/> Line l(ls.pt1,ls.pt2);<br/> if (ls.pt1==p||ls.pt2==p) return 1;<br/> if (sgn(l.func(p))==0&amp;&amp;((ls.pt1&lt;p&amp;&amp;p&lt;ls.pt2)||(ls.pt2&lt;p&amp;&amp;p&lt;ls.pt1))) return 1;<br/> return 0;<br/>}<br/>int Intersect(LineSegment L1, LineSegment L2)<br/>{<br/> if (ondiffside(L1,L2.pt1,L2.pt2)&amp;&amp;ondiffside(L2,L1.pt1,L1.pt2))<br/>   return 1;<br/> if (PntonSeg(L1,L2.pt1)||PntonSeg(L1,L2.pt2)||PntonSeg(L2,L1.pt1)||PntonSeg(L2,L1.pt2))<br/>   return -1;<br/> return 0;<br/>}<br/>int intersection(Line p,Line q,Point &amp;s)<br/>{<br/> if (sgn(p.a*q.b-p.b*q.a)==0) return 0;<br/> s.y=(p.a*q.c-p.c*q.a)/(q.a*p.b-p.a*q.b);<br/> s.x=(p.b*q.c-p.c*q.b)/(p.a*q.b-p.b*q.a);<br/> return 1;<br/>}</p>
<p>//////////////////////////////////////////////////////////<br/>int poly_lineSg_cross(Polygon &amp;p,LineSegment l,Point &amp;s)<br/>{<br/> int i;<br/> int n=p.numv;<br/> if (n==0) return 0;<br/> p[n]=p[0];<br/> Point t;<br/> int find=0;<br/> for (i=0;i&lt;n;i++)<br/>   if (Intersect(LineSegment(p[i],p[i+1]),l))<br/>   {<br/>    if (intersection(Line(p[i],p[i+1]),Line(l.pt1,l.pt2),t)==0)<br/>     t=p[i];<br/>    if (find==0||dis(Point(0,0),t)&lt;dis(Point(0,0),s))<br/>     s=t;<br/>    find=1;<br/>   }<br/> return find;<br/>}<br/>Polygon p[50];<br/>int w[50];<br/>int n,m;<br/>int cat[50];<br/>Point ins[50];<br/>void work()<br/>{<br/> int i,j,k;<br/> int tot=0;<br/> for (i=0;i&lt;n;i++)<br/> {<br/>   scanf("%d%d",&amp;p[i].numv,w+i);<br/>   for (j=0;j&lt;p[i].numv;j++) p[i][j].init();<br/> }<br/> scanf("%d",&amp;m);<br/> while (m–)<br/> {<br/>   scanf("%d",&amp;k);<br/>   LineSegment l;<br/>   l.pt1=Point(0,0);<br/>   l.pt2=maxl*Point(cos((double)-k/180.0*pi),sin((double)-k/180.0*pi));<br/>   for (i=0;i&lt;n;i++)<br/>    cat[i]=poly_lineSg_cross(p[i],l,ins[i]);<br/>   int t=-1;<br/>   for (i=0;i&lt;n;i++)<br/>    if (cat[i])<br/>     if (t==-1||dis(Point(0,0),ins[i])&lt;dis(Point(0,0),ins[t]))<br/>      t=i;<br/>   if (t&gt;=0)<br/>   {<br/>    p[t].numv=0;<br/>    tot+=w[t];<br/>    w[t]=0;<br/>   }<br/> }<br/> printf("%d\n",tot);<br/>}<br/>int main()<br/>{<br/> freopen("in.in","r",stdin);<br/> while (scanf("%d",&amp;n)!=EOF)<br/>   work();<br/> return 0;<br/>}</p>
<p> 参考：http://hi.baidu.com/lccycc_acm/item/2ab73017bd07525c2a3e22bd</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-28546">
<article class="comment" id="comment-28546">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yesMan</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-28546" rel="nofollow"><time datetime="2015-05-21T22:30:09+00:00" pubdate="">2015年5月21日 at 下午10:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是往年的笔试题，非在线，主要考察基础，Java会在面试时问到</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58273">
<article class="comment" id="comment-58273">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">neil2wm</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-58273" rel="nofollow"><time datetime="2015-04-16T15:07:43+00:00" pubdate="">2015年4月16日 at 下午3:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>0000</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28547">
<article class="comment" id="comment-28547">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">radish</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-28547" rel="nofollow"><time datetime="2015-04-07T11:38:35+00:00" pubdate="">2015年4月7日 at 上午11:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>输出规范写错了哦~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58274">
<article class="comment" id="comment-58274">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">H.Watson</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-58274" rel="nofollow"><time datetime="2015-03-24T13:57:20+00:00" pubdate="">2015年3月24日 at 下午1:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个也是算法导论的习题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58269">
<article class="comment" id="comment-58269">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lin</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-58269" rel="nofollow"><time datetime="2015-02-11T23:02:43+00:00" pubdate="">2015年2月11日 at 下午11:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63310">
<article class="comment" id="comment-63310">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Spike</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-63310" rel="nofollow"><time datetime="2014-12-09T04:00:20+00:00" pubdate="">2014年12月9日 at 上午4:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>good !</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-48334">
<article class="comment" id="comment-48334">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bob</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-48334" rel="nofollow"><time datetime="2014-11-01T20:31:51+00:00" pubdate="">2014年11月1日 at 下午8:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>太变态了。我用hash居然超时了。这样break掉居然都行啊。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58270">
<article class="comment" id="comment-58270">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jhxxszy</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-58270" rel="nofollow"><time datetime="2014-09-15T08:27:05+00:00" pubdate="">2014年9月15日 at 上午8:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有的，已更新</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58272">
<article class="comment" id="comment-58272">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hsp_77_abc</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-58272" rel="nofollow"><time datetime="2014-08-22T23:17:31+00:00" pubdate="">2014年8月22日 at 下午11:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-48333">
<article class="comment" id="comment-48333">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">modstart</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-48333" rel="nofollow"><time datetime="2014-08-20T08:55:08+00:00" pubdate="">2014年8月20日 at 上午8:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顶一个 赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58271">
<article class="comment" id="comment-58271">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Dick</a></span> on <a href="http://www.acmerblog.com/hdu-3291-the-gold-miners-5186.html#comment-58271" rel="nofollow"><time datetime="2014-03-20T19:08:03+00:00" pubdate="">2014年3月20日 at 下午7:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正是我要找的，适合新手</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>