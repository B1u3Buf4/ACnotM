<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-12</div>
<div class="tit"><h1 class="entry-title">HDU 1605 Gears on a Board-计算几何-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/geometry/convex" rel="category tag" title="查看凸包问题中的全部文章">凸包问题</a>, <a href="http://www.acmerblog.com/category/search/backtracking" rel="category tag" title="查看回溯和剪枝中的全部文章">回溯和剪枝</a></span><span class="i4">围观1565次</span><span class="i3"><a class="ds-thread-count" data-thread-key="2174" href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comments" title="《HDU 1605 Gears on a Board-计算几何-[解题报告] C++》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Gears on a Board</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
An engineering firm called “Gears R Us" needs a program which can evaluate the operation of gears on a board. The board is a two-dimensional mounting plane which allows gears with two levels of teeth (an inside radius closest to the board and an outside radius away from the board). The gears rotate around the center of their diameter and interact by turning an adjacent gear which it touches (either on the inside or outside radiuss) with a equal tangential velocity. Angular velocity is the same for both the inside and outside radius gears. 
<p>“Gears R Us" uses square mounting boards which have a 300×300 grid of mounting holes on 1 cm centers. When viewing the board, the lower left of the board is position x = 1, y = 1; the upper right of the board is position x = 300, y = 300. The gears mount only on mounting holes and are available with integer inside and outside radii between 1 and 100. The “motor" gear is the only original source of energy of any board and is actually a gear (powered from behind the board) subject to all the restrictions described for gears above. The following diagram shows a sample configuration. </p>
<p><img src="http://acm.hdu.edu.cn/data/images/1605-1.png"/></p>
<p>In the above example, the motor is at location x = 20, y = 100; the inside and outside radii of the gears the motor drives are both 5 centimeters, and the motor is rotating to the left (counter-clockwise) at 300 RPM’s. By observation and computation, you can see that the motor touches (without overlapping) the inside radius of Gear #1. The inside radius of Gear #1 touches the inside radius of Gear #2 and Gear #3. The outside radius of Gear #3 touches the outside radius of Gear #4; the inside radius of Gear #4 touches the inside radius of Gear #5. </p>
<p>Given the data in the above example, it is possible to compute that Gear #1 rotates to the right (clockwise) at 83.33 RPM’s; Gear #2 rotates to the left (counter-clockwise) at 187.50 RPM’s; Gear #3 rotates to the left at 150.00 RPM’s; Gear #4 rotates to the right at 281.25 RPM’s; and Gear #5 rotates to the left at 33.75 RPM’s. </p>
<p>Although this example does not include any off-nominal conditions, “Gears R Us" needs your program to isolate two error conditions. The first error occurs when two or more gears would overlap at either the inner or outter radius. The second error condition occurs when any gear is being driven at two or more different speeds. It is valid for two or more gears to drive another gear at the same speed (and in the same direction). </p>
<p>It is possible for a warning condition to occur when 1 or more gears are idle (ie rotation = 0.0). If this condition occurs, your program will have to print a warning message as described below.  </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
Input to your program consists of an undetermined number of configurations to be analyzed. Each set starts with a single line of six integers. 
<p>The first two integers are the x, y coordinates of the motor (1 &lt;= x, y &lt;= 300); the next two integers are the inside and outside radii of the motor gear respectively (1 &lt;= ir, or &lt;= 100); the fifth integer is the rotational velocity (1 &lt;= abs(AV) &lt;= 1000) of the motor in RPM’s (negative representing counter-clockwise rotation and positive representing clockwise rotation); the sixth integer is the number of gears (1 &lt;= NG &lt;= 20) excluding the motor that are mounted on the board. </p>
<p>Each of the following NG lines contain exactly 4 integers representing gears 1 through NG respectively. The first two integers represent the x, y coordinates (1 &lt;= x, y &lt;= 300) of the gear and the second pair of integers represent the inside and outside radii of the gear respectively (1 &lt;= ir, or &lt;= 100). </p>
<p> </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each input set, your program should print either a list of the gears and the rotation value for each or one of two error messages. The first line of each output set should be a line containing only “Simulation #X" where X is the simulation number (starting with 1) and is left-justified starting in column 13. 
<p>If there are no errors, lines 2 through NG+1 of the output set should contain the gear number right-justified in columns 1 and 2, a colon in column 3, either a `L’ for counter-clockwise rotation of the gear or a `R’ for clockwise rotation in column 5, and the magnitude of the rotation always printed with two digits to the right of the decimal point and are left-justified starting in column 7. If any gear has rotation of magnitude zero, you should print the message “Warning — Idle Gear" in columns 5 through 24 instead of the rotation direction and magnitude. </p>
<p>If there is an error, your program should print only the first line containing “Simulation #X" and a second line containing only one of two error messages left-justified in column 1. If there is an overlapping of two or more gears at either in inner or outter radii, your program should print the message “Error — Overlapping Gears". If there is any gear which is being driven by two or more different vectors, your program should print the message “Error — Conflicting Gear Rotation". Your program should give precedence to the overlapping error condition. </p>
<p>The last line of output for each output set should be an empty line. </p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
20 100 5 5 -300 5
43 100 18 10
43 74 8 4
71 100 10 15
94 100 3 8
122 100 25 6
20 100 5 5 -300 5
43 100 18 10
43 74 8 4
71 100 10 10
89 100 3 8
105 100 25 6
20 100 5 5 -300 5
43 100 18 10
43 74 8 4
71 100 10 10
89 100 3 8
125 100 25 6</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Simulation #1
 1: R 83.33
 2: L 187.50
 3: L 150.00
 4: R 281.25
 5: L 33.75

Simulation #2
Error -- Overlapping Gears

Simulation #3
 1: R 83.33
 2: L 187.50
 3: L 150.00
 4: R 187.50
 5: Warning -- Idle Gear</pre>
<p> <!-- problem end --></p>
<p>题目连接:http://poj.org/problem?id=1113</p>
<p>http://acm.hit.edu.cn/hoj/problem/view?id=1605
</p>
<p>本题是凸包的典型应用。求凸包用建议水平序，因为极角序要处理共线的问题。</p>
<p>参考：<a href="http://www.cnblogs.com/Booble/archive/2011/03/10/1980089.html">http://www.cnblogs.com/Booble/archive/2011/03/10/1980089.html</a></p>
<p>有一个问题是水平序的常用模板中。左链是否有机会回溯到右链。本题不加判断也是可以的。不知其它题目如何。</p>
<pre class="brush:cpp ">#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;math.h&gt;
#include &lt;algorithm&gt;
using namespace std;

struct Point
{
    int x;
    int y;
    Point() {}
    Point(int _x,int _y):x(_x),y(_y) {}
    friend Point operator + (Point a,Point b)
    {
        return Point(a.x+b.x , a.y+b.y);
    }
    friend Point operator - (Point a,Point b)
    {
        return Point(a.x-b.x , a.y-b.y);
    }
};
Point p[1002];
Point stack[10002];

double det(Point a,Point b)
{
    return a.x*b.y-a.y*b.x;
}
double det(Point a,Point b,Point o)
{
    return det(a-o,b-o);
}
double det(Point a,Point b,Point c,Point d)
{
    return det(b-a,d-c);
}

bool cmp(Point a,Point b)
{
    return a.y&lt;b.y || (a.y == b.y &amp;&amp; a.x&lt;b.x);
}
double dis(Point a,Point b)
{
    return sqrt( (a.x - b.x)*(a.x - b.x) + (a.y - b.y)*(a.y - b.y) );
}

int main()
{
#ifndef ONLINE_JUDGE
    freopen("in.txt","r",stdin);
#endif
    int n,l;

    while(scanf(" %d %d",&amp;n,&amp;l)!=EOF)
    {
        for(int i=0; i&lt;n; i++)
        {
            scanf(" %d %d",&amp;p[i].x,&amp;p[i].y);
        }
        sort(p,p+n,cmp);
        int top = -1;
        stack[++top] = p[0];
        stack[++top] = p[1];
        for(int i=2; i&lt;n; i++)
        {
            while(top &amp;&amp; det(stack[top],p[i],stack[top-1]) &lt; 0)
            {
                top--;
            }
            stack[++top] = p[i];
        }
        //int midtop = top;
        for(int i=n-2; i&gt;=0; i--)
        {
            //左链有可能会回溯到右链么？top&gt;midtop是否不加也可以？
            //while(top&gt;midtop &amp;&amp; det(stack[top],p[i],stack[top-1]) &lt; 0)
            while(det(stack[top],p[i],stack[top-1]) &lt; 0)
            {
                top--;
            }
            stack[++top] = p[i];
        }
        double ans = 2 * l * acos(-1.0);
        for(int i=0; i&lt;top; i++)
        {
            ans += dis(stack[i],stack[i+1]);
        }
        ans += 0.5;
        printf("%d\n",(int)ans);
    }
    return 0;
}</pre>
<p>
</p>
<p>解题报告转自：http://blog.csdn.net/niuox/article/details/8614810</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-14534">
<article class="comment" id="comment-14534">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">g29tony</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-14534" rel="nofollow"><time datetime="2015-07-05T05:58:15+00:00" pubdate="">2015年7月5日 at 上午5:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>比较基础，找些自信</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-14535">
<article class="comment" id="comment-14535">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mysteriousAngel_love</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-14535" rel="nofollow"><time datetime="2015-04-19T21:45:14+00:00" pubdate="">2015年4月19日 at 下午9:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-41581">
<article class="comment" id="comment-41581">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fermi</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-41581" rel="nofollow"><time datetime="2015-03-21T01:49:56+00:00" pubdate="">2015年3月21日 at 上午1:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-55114">
<article class="comment" id="comment-55114">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lin</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-55114" rel="nofollow"><time datetime="2015-03-08T21:32:44+00:00" pubdate="">2015年3月8日 at 下午9:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>问题3中，GetRightPosition()和GetLeftPosition()与STL中的upper_bound()和lower_boune()的代码实现一样吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61721">
<article class="comment" id="comment-61721">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">211206421</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-61721" rel="nofollow"><time datetime="2015-01-05T05:58:19+00:00" pubdate="">2015年1月5日 at 上午5:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>very good solutions.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-14538">
<article class="comment" id="comment-14538">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ycaxgjd</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-14538" rel="nofollow"><time datetime="2014-12-18T23:06:27+00:00" pubdate="">2014年12月18日 at 下午11:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序只能输出一个子序列</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-14537">
<article class="comment" id="comment-14537">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">super157</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-14537" rel="nofollow"><time datetime="2014-11-05T12:41:47+00:00" pubdate="">2014年11月5日 at 下午12:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好，解决了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-55113">
<article class="comment" id="comment-55113">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Watson</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-55113" rel="nofollow"><time datetime="2014-04-05T18:12:35+00:00" pubdate="">2014年4月5日 at 下午6:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实就是DFS搜索，数据量较小，穷举了所有情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-41579">
<article class="comment" id="comment-41579">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123zxc</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-41579" rel="nofollow"><time datetime="2014-03-21T16:55:46+00:00" pubdate="">2014年3月21日 at 下午4:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-55112">
<article class="comment" id="comment-55112">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zzzzzz</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-55112" rel="nofollow"><time datetime="2014-03-11T09:56:38+00:00" pubdate="">2014年3月11日 at 上午9:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>88行是多余的，可以删除</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-41580">
<article class="comment" id="comment-41580">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">windy</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-41580" rel="nofollow"><time datetime="2014-02-07T14:29:43+00:00" pubdate="">2014年2月7日 at 下午2:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env  python<br/>
def cou(n):<br/>
        arr =  <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/82/one_org.gif"/><br/>
        i = 1<br/>
        while(i&lt;n):<br/>
                arr.append(arr[i-1]+selfcount(i))<br/>
                i+=1<br/>
        return arr[n-1]</p>
<p>def selfcount(n):<br/>
        count = 0<br/>
        while(n):<br/>
                if n%10 == 1:<br/>
                        count += 1<br/>
                n /= 10<br/>
        return count</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-14536">
<article class="comment" id="comment-14536">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wynk0804</a></span> on <a href="http://www.acmerblog.com/hdu-1605-Gears-on-a-Board-2174.html#comment-14536" rel="nofollow"><time datetime="2014-01-12T04:27:57+00:00" pubdate="">2014年1月12日 at 上午4:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>太变态了。我用hash居然超时了。这样break掉居然都行啊。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>