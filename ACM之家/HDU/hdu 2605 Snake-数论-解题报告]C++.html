<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-12</div>
<div class="tit"><h1 class="entry-title">hdu 2605 Snake-数论-解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a></span><span class="i4">围观744次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4189" href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comments" title="《hdu 2605 Snake-数论-解题报告]C++》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Snake</h1>
</div>
<div>
<p class="mytitle">问题描述 :</p>
</div>
<div class="mypanel">Snake is a popular game , and I believe most of us had played it . The Original game is that you can control a snake to eat the magic bean and after the snake eat one magic bean , the length of the snake’s body will get longer .But today we are talking about a new game. These are the rules of the new Snake Game :<br/>
1. The length of the snake’s body won’t change even though it eat a magic bean.<br/>
2. Some pairs of the beans have a relation , that is, one of them can not be eaten until another one had been eaten . We call the latter “the key bean” . For example , if A can’t be eaten until B had been eaten ,we say “B is the key bean of A”. (That means when A can’t be eaten , the snake can not move into the grid where A is.)<br/>
3. The snake could not move to a wall or its body.Befor it move,it will chooses an adjacent vacant square of its head,which is neither a stone nor occupied by its body.<br/>
<center>Figure 1 and figure2 shows how the snake move</center><br/>
<center><img alt="" src="http://cdn.acmerblog.com/img/1392435453008.jpg"/></center><br/>
<center>Figure 1</center><br/>
<center><img alt="" src="http://cdn.acmerblog.com/img/1392435453316.jpg"/></center><br/>
<center>Figure 2</center></div>
<div>
<p class="mytitle">输入:</p>
</div>
<div class="mypanel">The first line contain a integer T (T &lt;= 10).Followed by T cases. Each case contain five parts.<br/>
The first part: six integers ,H,W,L,K,R,N,(H &lt;= 20 , W &lt;= 20 , L &lt;= 8 , K &lt;= 7 ) means the height of the map , the width of the map , the length of the snake’s body, the number of the magic beans . the number of the relations , the number of the wall respectively.<br/>
The second part: L lines , each line contain two integer h<sub>i</sub> ,w<sub>i</sub>, indicating the original position of each block of snake’s body, from B<sub>1</sub>(h<sub>1</sub>,w<sub>1</sub>) to B<sub>L</sub>(h<sub>L</sub>,w<sub>L</sub>) orderly, where 1&lt;=h<sub>i</sub>&lt;=H, and 1&lt;=w<sub>i</sub>&lt;=W,1&lt;=i&lt;=L.<br/>
The third part: K lines ,each line contain two integer h<sub>i</sub> ,w<sub>i</sub> , indicating the position of each magic bean , from MB<sub>1</sub>(h<sub>1</sub>,w<sub>1</sub>) to MB<sub>K</sub>(h<sub>K</sub>,w<sub>K</sub>) orderly, where 1&lt;=h<sub>i</sub>&lt;=H, and 1&lt;=w<sub>i</sub>&lt;=W,1&lt;=i&lt;=K.<br/>
The fourth part : R lines , each line contain two integer A ,B means “A is the key bean of B ”. The A and B may appear several times , but “one bean will have only one key bean”.<br/>
The fifth part: N lines , each line contain two integer h<sub>i</sub> ,w<sub>i</sub> , indicating the position of each wall , from W<sub>1</sub>(h<sub>1</sub>,w<sub>1</sub>) to W<sub>N</sub>(h<sub>N</sub>,w<sub>N</sub>) orderly, where 1&lt;=h<sub>i</sub>&lt;=H, and 1&lt;=w<sub>i</sub>&lt;=W,1&lt;=i&lt;=N.</div>
<div>
<p class="mytitle">输出:</p>
</div>
<div class="mypanel">The first line contain a integer T (T &lt;= 10).Followed by T cases. Each case contain five parts.<br/>
The first part: six integers ,H,W,L,K,R,N,(H &lt;= 20 , W &lt;= 20 , L &lt;= 8 , K &lt;= 7 ) means the height of the map , the width of the map , the length of the snake’s body, the number of the magic beans . the number of the relations , the number of the wall respectively.<br/>
The second part: L lines , each line contain two integer h<sub>i</sub> ,w<sub>i</sub>, indicating the original position of each block of snake’s body, from B<sub>1</sub>(h<sub>1</sub>,w<sub>1</sub>) to B<sub>L</sub>(h<sub>L</sub>,w<sub>L</sub>) orderly, where 1&lt;=h<sub>i</sub>&lt;=H, and 1&lt;=w<sub>i</sub>&lt;=W,1&lt;=i&lt;=L.<br/>
The third part: K lines ,each line contain two integer h<sub>i</sub> ,w<sub>i</sub> , indicating the position of each magic bean , from MB<sub>1</sub>(h<sub>1</sub>,w<sub>1</sub>) to MB<sub>K</sub>(h<sub>K</sub>,w<sub>K</sub>) orderly, where 1&lt;=h<sub>i</sub>&lt;=H, and 1&lt;=w<sub>i</sub>&lt;=W,1&lt;=i&lt;=K.<br/>
The fourth part : R lines , each line contain two integer A ,B means “A is the key bean of B ”. The A and B may appear several times , but “one bean will have only one key bean”.<br/>
The fifth part: N lines , each line contain two integer h<sub>i</sub> ,w<sub>i</sub> , indicating the position of each wall , from W<sub>1</sub>(h<sub>1</sub>,w<sub>1</sub>) to W<sub>N</sub>(h<sub>N</sub>,w<sub>N</sub>) orderly, where 1&lt;=h<sub>i</sub>&lt;=H, and 1&lt;=w<sub>i</sub>&lt;=W,1&lt;=i&lt;=N.</div>
<div>
<p class="mytitle">样例输入:</p>
</div>
<pre class="mypanel iopanel">1
8 9
5 2
1 8
5 2
6 2
6 3
6 4
6 5
4 2
2 6
2 1
2 5
3 5
4 4
4 5
4 6
5 6
5 7
6 7</pre>
<div>
<p class="mytitle">样例输出:</p>
</div>
<pre class="mypanel iopanel">21</pre>
<p><!-- problem end --></p>
<p>典型的指数型母函数因为最后是取模，所以最后一定有周期,注意周期起始位置不一定从第一个开始实际上该题从&gt;=3开始以20为周期</p>
<pre class="brush:cpp">#include&lt;cstring&gt;
#include&lt;cstdio&gt;
#include&lt;iostream&gt;
using namespace std;

int cal(int x,int y)  
{  
   int ans=1;  
   while(y)  
   {  
     if(y&amp;1)  
       ans=(ans*x)%100;  
     y&gt;&gt;=1;  
    x=(x*x)%100;  
   }  
   return ans;  
} 
int rr[25];
int main()
{
    __int64 n,nn;
    for(int i=1; i&lt;=20; ++i)
    {
      rr[i]=cal(2,i+20-1);
      rr[i]=rr[i]*rr[i]+rr[i];
      rr[i]%=100;
    }
    while(scanf("%I64d",&amp;n)&amp;&amp;n!=0)
    {
      long long count=0;
      while(n--)
      {
        count++;
        scanf("%I64d",&amp;nn);
        printf("Case %d: ",count);
        if(nn==1) printf("2\n");
        else if(nn==2) printf("6\n");
        else 
        {
          nn=(nn+19)%20+1;
          printf("%d\n",rr[nn]);
        }
      }
      printf("\n");
    }
    return 0;
}</pre>
<p> </p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-83686">
<article class="comment" id="comment-83686">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919531176" rel="external nofollow">新用户288464</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-83686" rel="nofollow"><time datetime="2017-04-12T22:38:36+00:00" pubdate="">2017年4月12日 at 下午10:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好了，不说了，是在下楼。另外文莱王妃的那束捧花是扔出去的吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45909">
<article class="comment" id="comment-45909">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Yaunxi</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-45909" rel="nofollow"><time datetime="2015-06-18T01:10:14+00:00" pubdate="">2015年6月18日 at 上午1:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>太变态了。我用hash居然超时了。这样break掉居然都行啊。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23368">
<article class="comment" id="comment-23368">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liuyuedeyu</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-23368" rel="nofollow"><time datetime="2015-06-14T00:32:32+00:00" pubdate="">2015年6月14日 at 上午12:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45912">
<article class="comment" id="comment-45912">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">rtaxa</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-45912" rel="nofollow"><time datetime="2015-05-17T10:05:08+00:00" pubdate="">2015年5月17日 at 上午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>C语言版本的代码好像有点问题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23365">
<article class="comment" id="comment-23365">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-23365" rel="nofollow"><time datetime="2015-05-15T07:01:27+00:00" pubdate="">2015年5月15日 at 上午7:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>还真是，i7的cpu跑了3秒</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45913">
<article class="comment" id="comment-45913">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yipwinghong</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-45913" rel="nofollow"><time datetime="2015-05-04T12:04:24+00:00" pubdate="">2015年5月4日 at 下午12:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>从数学角度确实是C(n,r)，能给个递推关系式吗，从分治的角度不好理解</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23369">
<article class="comment" id="comment-23369">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ycaxgjd</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-23369" rel="nofollow"><time datetime="2015-01-13T04:50:55+00:00" pubdate="">2015年1月13日 at 上午4:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种想法，我想来好久，为啥需要一个newhead，发现是把最后一个节点一直返回到嘴上面这层函数。厉害，这道题之前没样子想过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45911">
<article class="comment" id="comment-45911">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">la0bei</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-45911" rel="nofollow"><time datetime="2014-12-02T10:52:08+00:00" pubdate="">2014年12月2日 at 上午10:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>面霸网。www.51mx.org</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23367">
<article class="comment" id="comment-23367">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magichu</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-23367" rel="nofollow"><time datetime="2014-11-19T07:33:00+00:00" pubdate="">2014年11月19日 at 上午7:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>,,,,,,,,,,,,,,,</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-23370">
<article class="comment" id="comment-23370">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">digiworm</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-23370" rel="nofollow"><time datetime="2014-11-07T08:10:47+00:00" pubdate="">2014年11月7日 at 上午8:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢提醒</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-45914">
<article class="comment" id="comment-45914">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">943965021</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-45914" rel="nofollow"><time datetime="2014-10-06T19:15:06+00:00" pubdate="">2014年10月6日 at 下午7:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>int L[m+1][n+1];这样定义出错，这个在gcc上可以编译通过 在VS上不行 应该改为new 或者vector</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-45910">
<article class="comment" id="comment-45910">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jlucky</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-45910" rel="nofollow"><time datetime="2014-08-30T10:01:12+00:00" pubdate="">2014年8月30日 at 上午10:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好！！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-23366">
<article class="comment" id="comment-23366">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wkhuahuo</a></span> on <a href="http://www.acmerblog.com/hdu-2605-snake-4189.html#comment-23366" rel="nofollow"><time datetime="2014-05-17T11:45:32+00:00" pubdate="">2014年5月17日 at 上午11:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>什么破题，题意好难懂啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>