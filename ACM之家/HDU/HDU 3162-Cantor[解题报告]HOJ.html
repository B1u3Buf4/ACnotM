<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-06</div>
<div class="tit"><h1 class="entry-title">HDU 3162-Cantor[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观347次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4996" href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comments" title="《HDU 3162-Cantor[解题报告]HOJ》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Cantor</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
<br/><center><img alt="Pipes" src="/img/1394454654526.jpg"/></center><br/>The ternary expansion of a number is that number written in base 3. A number can have more than one ternary expansion. A ternary expansion is indicated with a subscript 3. For example, 1 = 1<sub>3</sub> = 0.222…<sub>3</sub>, and 0.875 = 0.212121…<sub>3</sub>.
<p>The Cantor set is defined as the real numbers between 0 and 1 inclusive that have a ternary expansion that does not contain a 1. If a number has more than one ternary expansion, it is enough for a single one to not contain a 1.</p>
<p>For example, 0 = 0.000…<sub>3</sub> and 1 = 0.222…<sub>3</sub>, so they are in the Cantor set. But 0.875 = 0.212121…<sub>3</sub> and this is its only ternary expansion, so it is not in the Cantor set.</p>
<p>Your task is to determine whether a given number is in the Cantor set. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input consists of several test cases. 
<p>Each test case consists of a single line containing a number <b><i>x</i></b> written in decimal notation, with 0 &lt;= <b><i>x</i></b> &lt;= 1, and having at most 6 digits after the decimal point. </p>
<p>The last line of input is END. This is not a test case. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The input consists of several test cases. 
<p>Each test case consists of a single line containing a number <b><i>x</i></b> written in decimal notation, with 0 &lt;= <b><i>x</i></b> &lt;= 1, and having at most 6 digits after the decimal point. </p>
<p>The last line of input is END. This is not a test case.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
0
1
0.875
END</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
MEMBER
MEMBER
NON-MEMBER</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">//#pragma warning (disable: 4786)
//#pragma comment (linker, "/STACK:16777216")

#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;cstdlib&gt;
#include&lt;cctype&gt;
#include&lt;cmath&gt;
#include&lt;iostream&gt;
#include&lt;fstream&gt;
#include&lt;iomanip&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;queue&gt;
#include&lt;map&gt;
#include&lt;algorithm&gt;
#include&lt;set&gt;
#include&lt;sstream&gt;
#include&lt;cassert&gt;
#define maxim 100
#define LLD long long int
#define LLU long long unsigned
#define HD short int
#define HU short unsigned
#define pi acos(-1.0)
#define inf (1&lt;&lt;29)
#define CLR(a) memset(a,0,sizeof(a))
#define SET(a) memset(a,-1,sizeof(a))
#define pb push_back
#define sz(a) ((int)a.size())
#define all(a) a.begin(),a.end()
#define eps 1e-9
#define rep(i,init,n) for(i=init;i&lt;n;i++)
#define rem(i,init,n) for(i=init;i&gt;n;i--)
#define foreach(i, c) for( __typeof( (c).begin() ) i = (c).begin(); i != (c).end(); ++i )
#define _abs(a) ((a)&lt;0?(-(a)):(a))
#define area(x1,y1,x2,y2,x3,y3) ( x1*(y2-y3) + x2*(y3-y1) + x3*(y1-y2) )
#define sqr(x) ((x)*(x))
#define distSqr(x1,y1,x2,y2) ( sqr(x1-x2) + sqr(y1-y2) )
#define spDist(lat1,long1,lat2,long2,r) ( r * acos( sin(lat1) * sin(lat2) + cos(lat1) * cos(lat2) * cos(long1-long2) ) )
#define isEq(a,b) (fabs(a-b)&lt;eps)
#define STR string
#define LF double
#define IT iterator
#define VI vector&lt;int&gt;
#define VLLD vector&lt;LLD&gt;
#define VS vector&lt;STR&gt;
#define VLF vector&lt;LF&gt;
#define MII map&lt;int,int&gt;
#define MIB map&lt;int,bool&gt;
#define MSI map&lt;STR,int&gt;
#define MSB map&lt;STR,bool&gt;
#define MSS map&lt;STR,STR&gt;
#define M2dII map&lt;int,map&lt;int,int&gt; &gt;
#define QI queue&lt;int&gt;
#define SI stack&lt;int&gt;
#define PII pair&lt; int, int &gt;
#define PPI pair&lt; PII, int &gt;
#define ff first
#define ss second
#define VPII vector&lt;PII&gt;
#define MP make_pair

#define chk(a,k) ((bool)(a&amp;(1&lt;&lt;(k))))
#define set0(a,k) (a&amp;(~(1&lt;&lt;(k))))
#define set1(a,k) (a|(1&lt;&lt;(k)))

#define chkA(a,k) (bool)(a[(k)&gt;&gt;5] &amp; (1&lt;&lt;((k)&amp;31)))
#define setA0(a,k) (a[(k)&gt;&gt;5] &amp;= ~(1&lt;&lt;((k)&amp;31)))
#define setA1(a,k) (a[(k)&gt;&gt;5] |= (1&lt;&lt;((k)&amp;31)))

#define SD(a) scanf("%d",&amp;a)
#define SU(a) scanf("%u",&amp;a)
#define SHD(a) scanf("%hd",&amp;a)
#define SHU(a) scanf("%hu",&amp;a)
#define SF(a) scanf("%f",&amp;a)
#define SLF(a) scanf("%lf",&amp;a)
#define SC(a) scanf("%c",&amp;a)
#define SS(a) scanf("%s",a)

int diru[] = {-1,-1,-1,0,0,1,1,1};
int dirv[] = {-1,0,1,-1,1,-1,0,1};

using namespace std;

#define DEB(args...) {dbg,args; cerr&lt;&lt;endl;}
struct debugger { template&lt;typename T&gt; debugger&amp; operator,(const T&amp; v) { cerr&lt;&lt;v&lt;&lt;" "; return *this; } } dbg ;

template&lt; class T &gt; T sq(T n) { return n*n; }
template&lt; class T &gt; T gcd(T a, T b) { return (b != 0 ? gcd&lt;T&gt;(b, a%b) : a); }
template&lt; class T &gt; T lcm(T a, T b) { return (a / gcd&lt;T&gt;(a, b) * b); }
template&lt; class T &gt; bool inside(T a, T b, T c) { return a&lt;=b &amp;&amp; b&lt;=c; }
template&lt; class T &gt; void setmax(T &amp;a, T b) { if(a &lt; b) a = b; }
template&lt; class T &gt; void setmin(T &amp;a, T b) { if(b &lt; a) a = b; }
template&lt; class T &gt; T power(T N,T P){  return (P==0)?  1: N*power(N,P-1); }

char tmp[100] ;
int allow[100] ;
int in[200] ;
int n,len ;
LLD dp[200][2][2] ;
bool isV[200][2][2] ;

LLD cal(int i, int f, int non0)
{
    if(i==n)        return 1 ;

    if(isV[i][f][non0])       return dp[i][f][non0] ;

    LLD ret = 0 ;
    int j,k ;

    if(f==0)        // open
    {
        //ret += (LLD)len*cal(i+1,0) ;

        rep(j,0,len)
        {
            k = allow[j] ;
            ret += cal(i+1,0,non0||k) ;
        }

        if(allow[0] &amp;&amp; non0==0)        ret += cal(i+1,0,non0) ;
    }
    else
    {
        rep(j,0,len)
        {
            k = allow[j] ;

            if(k&gt;=in[i])        break ;

            ret += cal(i+1,0,non0||k) ;
        }

        if(j&lt;len &amp;&amp; allow[j]==in[i])
        {
            ret += cal(i+1,1,non0||allow[j]) ;
        }

        if(allow[0] &amp;&amp; non0==0)
        {
            if(i!=0)        assert(0) ;
            ret += cal(i+1,0,non0) ;
        }
    }

    isV[i][f][non0] = 1 ;
    return dp[i][f][non0] = ret ;
}

LLD solve(LLD v, LLD b)
{
    n = 0 ;

    if(v==0)
    {
        return 1 ;
    }

    while(v)
    {
        in[n++] = v%b ;
        v /= b ;
    }

    reverse(in,in+n) ;

    int i ;
    //DEB(n) ;

    //rep(i,0,n)  printf("%d",in[i]) ;
    //puts("") ;

    //CLR(isV) ;

    rep(i,0,n)
        CLR(isV[i]) ;

    return cal(0,1,0) ;
}

int main()
{
     int T,t=1,i,j,k;
     LLD x,y ;
     int b ;
     //freopen("in.txt","r",stdin);
     //freopen("out.txt","w",stdout);
     //scanf("%d",&amp;T);
     //for(t=1;t&lt;=T;t++)
     while(scanf("%lld",&amp;x)==1 &amp;&amp; x!=-1)
     {
         scanf("%lld",&amp;y) ;
         SD(b) ;
         SS(tmp) ;
         len = 0 ;

         for(i=0;tmp[i];i++)
         {
             if(tmp[i]=='S')    allow[len++] = i ;
         }

         LLD ans = solve(y,b) - solve(x-1,b) ;

         printf("%lld\n",ans) ;
         //printf("%lld\n",solve(y,b)) ;
     }

	return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-78727">
<article class="comment" id="comment-78727">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919512904" rel="external nofollow">新用户804700</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-78727" rel="nofollow"><time datetime="2017-04-12T12:30:19+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我们从2009年的那个春天在一起，我们就这样相爱了，我们和其他的校园男女生一样，牵着手绕过整个操场，一起吃饭一起上课，我以为幸福真的可以这样永远，我多么想跟其他女孩子一样可以有更多选择幸福的权利，我以前以为你会带我离开悲剧，是我太过天真太过奢侈，我现在不</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63205">
<article class="comment" id="comment-63205">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yesMan</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-63205" rel="nofollow"><time datetime="2015-06-04T02:36:04+00:00" pubdate="">2015年6月4日 at 上午2:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>非常好，初学者就应该先理解递归</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-47912">
<article class="comment" id="comment-47912">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yipwinghong</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-47912" rel="nofollow"><time datetime="2015-06-02T16:36:32+00:00" pubdate="">2015年6月2日 at 下午4:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯，是写错了，文中以更改。MAX ( L(X[0..m-2], Y[0..n-1]), L(X[0..m-1], Y[0..n-2])</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27607">
<article class="comment" id="comment-27607">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1173954900</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-27607" rel="nofollow"><time datetime="2015-06-01T11:53:08+00:00" pubdate="">2015年6月1日 at 上午11:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;</p>
<p>int main() {<br/>
	//answer must be odd<br/>
    int n, u, d;<br/>
    while(scanf("%d%d%d",&amp;n,&amp;u,&amp;d)==3 &amp;&amp; n&gt;0) {<br/>
        if(n&lt;=u) { puts("1"); continue; }<br/>
        n-=u; u-=d; n+=u-1; n/=u;<br/>
        n&lt;&lt;=1, ++n;<br/>
        printf("%dn",n);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-27602">
<article class="comment" id="comment-27602">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">crazymage</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-27602" rel="nofollow"><time datetime="2015-02-06T00:48:06+00:00" pubdate="">2015年2月6日 at 上午12:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序员会算法，等于一个古惑仔带了zhi抢啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-47911">
<article class="comment" id="comment-47911">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jintianya</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-47911" rel="nofollow"><time datetime="2015-01-27T21:26:07+00:00" pubdate="">2015年1月27日 at 下午9:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>隐藏最深的bug是(start+end)/2有可能上溢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-27608">
<article class="comment" id="comment-27608">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">3136869079</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-27608" rel="nofollow"><time datetime="2015-01-26T17:58:04+00:00" pubdate="">2015年1月26日 at 下午5:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>The site You have write is very nicely prepared and quite insightful thanks for nice posta?|</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27606">
<article class="comment" id="comment-27606">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yipwinghong</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-27606" rel="nofollow"><time datetime="2014-10-21T10:54:38+00:00" pubdate="">2014年10月21日 at 上午10:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>值得分享！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-27605">
<article class="comment" id="comment-27605">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">aaa</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-27605" rel="nofollow"><time datetime="2014-09-24T08:31:25+00:00" pubdate="">2014年9月24日 at 上午8:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题目虽然简单，但是小编做的很到位，应该会给很多人启发吧！对于面试当中不给开辟额外空间的问题不是绝对的，实际上至少是允许少数变量存在的。之前遇到相似的问题也是恍然大悟，今天看到小编这篇文章相见恨晚。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-47913">
<article class="comment" id="comment-47913">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">helloacm</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-47913" rel="nofollow"><time datetime="2014-08-19T14:11:18+00:00" pubdate="">2014年8月19日 at 下午2:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>问题3是不是应该为1/4  .因为截取的三段，无论是否能组成三角形， x， y-x ，1-y,都应大于0，所以  x&lt;y,基础应该是一个大三角形。小三角是大三角的 1/4.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-27604">
<article class="comment" id="comment-27604">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zjd1988</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-27604" rel="nofollow"><time datetime="2014-08-05T03:49:00+00:00" pubdate="">2014年8月5日 at 上午3:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>懂了，谢谢啦</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27603">
<article class="comment" id="comment-27603">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">siaswj</a></span> on <a href="http://www.acmerblog.com/hdu-3162-cantor-4996.html#comment-27603" rel="nofollow"><time datetime="2014-07-16T14:50:55+00:00" pubdate="">2014年7月16日 at 下午2:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>