<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-11</div>
<div class="tit"><h1 class="entry-title">HDU 1452 Happy 2004-数论-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a></span><span class="i4">围观803次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1975" href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comments" title="《HDU 1452 Happy 2004-数论-[解题报告] C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Happy 2004</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Consider a positive integer X,and let S be the sum of all positive integer divisors of 2004^X. Your job is to determine S modulo 29 (the rest of the division of S by 29).
<p>Take X = 1 for an example. The positive integer divisors of 2004^1 are 1, 2, 3, 4, 6, 12, 167, 334, 501, 668, 1002 and 2004. Therefore S = 4704 and S modulo 29 is equal to 6. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input consists of several test cases. Each test case contains a line with the integer X (1 &lt;= X &lt;= 10000000). 
<p>A test case of X = 0 indicates the end of input, and should not be processed. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each test case, in a separate line, please output the result of S modulo 29.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
10000
0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
6
10</pre>
<p> <!-- problem end --></p>
<p>设S(x)表示x的因子和。则题目求为:S(2004^X)mod 29<br/>因子和S是积性函数,即满足性质1。</p>
<p><strong><span>性质1 ：如果 gcd(a,b)=1  则 S(a*b)= S(a)*S(b)</span><br/></strong>2004^X=4^X * 3^X *167^X<br/>S(2004^X)=S(2^(2X)) * S(3^X) * S(167^X)</p>
<p><strong><span>性质2 ：如果 p 是素数 则 S(p^X)=1+p+p^2+…+p^X = (p^(X+1)-1)/(p-1)</span><br/></strong>因此：S(2004^X)=(2^(2X+1)-1) * (3^(X+1)-1)/2 * (167^(X+1)-1)/166<br/>167%29 == 22<br/>S(2004^X)=(2^(2X+1)-1) * (3^(X+1)-1)/2 * (22^(X+1)-1)/21</p>
<p><strong><span>性质3 ：(a*b)/c %M= a%M * b%M * inv(c)</span><br/></strong>其中inv(c)即满足 (c*inv(c))%M=1的最小整数,这里M=29<br/>则inv(1)=1，inv(2)=15，inv(22)=15</p>
<p>有上得：<br/>S(2004^X)=(2^(2X+1)-1) * (3^(X+1)-1)/2 * (22^(X+1)-1)/21<br/>=(2^(2X+1)-1) * (3^(X+1)-1)*15 * (22^(X+1)-1)*18</p>
<p> AC code:</p>
<pre class="brush:cpp ">#include &lt;iostream&gt;
 #include &lt;cstdio&gt;
 #include &lt;cmath&gt;
 
 using namespace std;
 
 int _pow( int a, int n )
 {
     int b = 1;
     while( n &gt; 1 )
         if( n % 2 == 0 )
         {
             a = ( a * a ) % 29;
             n /= 2;
         }
         else
         {
             b = b * a % 29;
             n--;
         }
         return a * b % 29;
 }
 int main()
 {
     int X;
     int a, b, c;
     while( cin &gt;&gt; X, X )
     {
         a = _pow( 2, 2 * X + 1 );
         b = _pow( 3, ( X + 1 ) );
         c = _pow( 22, ( X + 1 ) );
 
         cout &lt;&lt; ( a - 1 ) * ( b - 1 ) * 15 * ( c - 1 ) * 18 % 29 &lt;&lt; endl;
     }
     return 0;
 }</pre>
<p>解题报告转自：http://www.cnblogs.com/gaigai/archive/2012/04/24/2468453.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-13458">
<article class="comment" id="comment-13458">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Cloudy</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13458" rel="nofollow"><time datetime="2015-06-28T02:04:24+00:00" pubdate="">2015年6月28日 at 上午2:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法很不错啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13462">
<article class="comment" id="comment-13462">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xy7850151</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13462" rel="nofollow"><time datetime="2015-06-20T09:06:53+00:00" pubdate="">2015年6月20日 at 上午9:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>
	welcome!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-41053">
<article class="comment" id="comment-41053">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123456789_xd</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-41053" rel="nofollow"><time datetime="2015-04-30T18:22:44+00:00" pubdate="">2015年4月30日 at 下午6:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13461">
<article class="comment" id="comment-13461">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Trenson</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13461" rel="nofollow"><time datetime="2015-04-26T03:56:10+00:00" pubdate="">2015年4月26日 at 上午3:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>遍历了所有的情况(2^n)，tmp数组就是由当前遍历的状态s推算出的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13464">
<article class="comment" id="comment-13464">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fermi</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13464" rel="nofollow"><time datetime="2015-04-06T14:59:45+00:00" pubdate="">2015年4月6日 at 下午2:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>aha, welcome!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13463">
<article class="comment" id="comment-13463">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Riddick</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13463" rel="nofollow"><time datetime="2015-03-24T03:34:29+00:00" pubdate="">2015年3月24日 at 上午3:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有点意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13457">
<article class="comment" id="comment-13457">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">spiderMan</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13457" rel="nofollow"><time datetime="2015-03-07T01:16:08+00:00" pubdate="">2015年3月7日 at 上午1:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thanks for using the time to examine this, I truly feel strongly about it and enjoy finding out far more on this subject matter. If achievable, as you achieve knowledge</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13460">
<article class="comment" id="comment-13460">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vintion</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13460" rel="nofollow"><time datetime="2015-01-06T23:33:22+00:00" pubdate="">2015年1月6日 at 下午11:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给力！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13465">
<article class="comment" id="comment-13465">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13465" rel="nofollow"><time datetime="2014-10-22T13:12:31+00:00" pubdate="">2014年10月22日 at 下午1:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>整理的很好，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-41054">
<article class="comment" id="comment-41054">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY243956</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-41054" rel="nofollow"><time datetime="2014-10-04T15:02:57+00:00" pubdate="">2014年10月4日 at 下午3:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发的在线笔试题吗?发现很多C啊，阿里不是JAVA多么？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-41051">
<article class="comment" id="comment-41051">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Anne</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-41051" rel="nofollow"><time datetime="2014-06-08T03:19:33+00:00" pubdate="">2014年6月8日 at 上午3:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13459">
<article class="comment" id="comment-13459">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zzzzzz</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13459" rel="nofollow"><time datetime="2014-06-06T04:57:51+00:00" pubdate="">2014年6月6日 at 上午4:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>问题3中，GetRightPosition()和GetLeftPosition()与STL中的upper_bound()和lower_boune()的代码实现一样吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-41052">
<article class="comment" id="comment-41052">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Riddick</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-41052" rel="nofollow"><time datetime="2014-05-06T15:02:26+00:00" pubdate="">2014年5月6日 at 下午3:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>mark, 很巧妙的实现！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13466">
<article class="comment" id="comment-13466">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jue</a></span> on <a href="http://www.acmerblog.com/hdu-1452-Happy-2004-1975.html#comment-13466" rel="nofollow"><time datetime="2014-02-07T04:29:30+00:00" pubdate="">2014年2月7日 at 上午4:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>