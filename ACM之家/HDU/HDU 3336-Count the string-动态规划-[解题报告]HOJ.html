<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-16</div>
<div class="tit"><h1 class="entry-title">HDU 3336-Count the string-动态规划-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/string" rel="category tag" title="查看字符串处理中的全部文章">字符串处理</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观1120次</span><span class="i3"><a class="ds-thread-count" data-thread-key="5268" href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comments" title="《HDU 3336-Count the string-动态规划-[解题报告]HOJ》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Count the string</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
It is well known that AekdyCoin is good at string problems as well as number theory problems. When given a string s, we can write down all the non-empty prefixes of this string. For example:<br/>s: "abab"<br/>The prefixes are: "a", "ab", "aba", "abab"<br/>For each prefix, we can count the times it matches in s. So we can see that prefix "a" matches twice, "ab" matches twice too, "aba" matches once, and "abab" matches once. Now you are asked to calculate the sum of the match times for all the prefixes. For "abab", it is 2 + 2 + 1 + 1 = 6.<br/>The answer may be very large, so output the answer mod 10007. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line is a single integer T, indicating the number of test cases.<br/>For each case, the first line is an integer n (1 &lt;= n &lt;= 200000), which is the length of string s. A line follows giving the string s. The characters in the strings are all lower-case letters. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line is a single integer T, indicating the number of test cases.<br/>For each case, the first line is an integer n (1 &lt;= n &lt;= 200000), which is the length of string s. A line follows giving the string s. The characters in the strings are all lower-case letters.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
4
abab</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
6</pre>
<p> <!-- problem end --></p>
<p><span style="font-size:14px">题目链接：<a target="_blank">hdu3336</a></span></p>
<p><span style="font-size:14px">假设两串字符完全相等，next[j]=i,代表s[1...i]==sum[j-i+1....j]，这一段其实就是前缀</span></p>
<p><span style="font-size:14px">i~j之间已经不可能有以j结尾的子串是前缀了，不然next【j】就不是 i 了</span></p>
<p><span style="font-size:14px">设dp【i】:以string[i]结尾的子串总共含前缀的数量</span></p>
<p><span style="font-size:14px">所以dp[j]=dp[i]+1，即以i结尾的子串中含前缀的数量加上前j个字符这一前缀</span>
</p>
<p><span style="font-size:14px"></span></p>
<pre class="brush:cpp ">#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#include &lt;iostream&gt;
using namespace std;
const int N = 200005;
char a[N];
int next[N],d[N];
void get_next(char *b)
{
    int i = -1, j = 0;
    next[0] = -1;
    int len = strlen(b);
    while(j &lt; len)
    {
        if(i == -1 || b[i] == b[j])
            next[++j] = ++i;
        else
            i = next[i];
    }
}
int main()
{
    int T,i,n;
    scanf("%d",&amp;T);
    while(T--)
    {
        scanf("%d%s",&amp;n,a);
        get_next(a);
        for(i = 1; i &lt;= n; i ++)
            d[i] = 1;
        d[0] = 0;
        int sum = 0;
        for(i = 1; i &lt;= n; i ++)
        {
            d[i] = d[next[i]] + 1;
            sum += d[i]%10007;
        }
        printf("%d\n",sum%10007);
    }
    return 0;
}</pre>
<p>参考：http://blog.csdn.net/jzmzy/article/details/20143803</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-77614">
<article class="comment" id="comment-77614">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919513223" rel="external nofollow">新用户574005</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-77614" rel="nofollow"><time datetime="2017-04-12T09:15:02+00:00" pubdate="">2017年4月12日 at 上午9:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>必须画 </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28889">
<article class="comment" id="comment-28889">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">calvert1991</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-28889" rel="nofollow"><time datetime="2015-06-30T09:40:38+00:00" pubdate="">2015年6月30日 at 上午9:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有没有C++语言的代码？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-28888">
<article class="comment" id="comment-28888">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">lsdtc1225</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-28888" rel="nofollow"><time datetime="2015-06-19T07:15:05+00:00" pubdate="">2015年6月19日 at 上午7:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很详细！赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28887">
<article class="comment" id="comment-28887">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhuliyan</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-28887" rel="nofollow"><time datetime="2015-04-23T22:46:24+00:00" pubdate="">2015年4月23日 at 下午10:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>图像处理那题解题报告在哪儿呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-48497">
<article class="comment" id="comment-48497">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vincent_ynh</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-48497" rel="nofollow"><time datetime="2015-04-05T02:17:15+00:00" pubdate="">2015年4月5日 at 上午2:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>m /= i; 是一直在变的。参考这一篇关于质因数的http://www.acmerblog.com/integer-factorization-5124.html</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58355">
<article class="comment" id="comment-58355">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wkhuahuo</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-58355" rel="nofollow"><time datetime="2015-03-29T22:00:55+00:00" pubdate="">2015年3月29日 at 下午10:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>老实说，这种方法就是穷举，复杂度是2^n，之所以能够AC是应为题目的测试数据有问题，要么数据量很小，要么能够得到k == t，否则即使n = 30，也要很久才能得出结果，本人亲测</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63371">
<article class="comment" id="comment-63371">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1173954900</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-63371" rel="nofollow"><time datetime="2015-02-18T05:13:42+00:00" pubdate="">2015年2月18日 at 上午5:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>厉害，支持</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-48496">
<article class="comment" id="comment-48496">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">edward2414</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-48496" rel="nofollow"><time datetime="2015-02-18T02:03:35+00:00" pubdate="">2015年2月18日 at 上午2:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Java真是解决大数的利器</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58356">
<article class="comment" id="comment-58356">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liluvu</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-58356" rel="nofollow"><time datetime="2015-02-17T05:36:16+00:00" pubdate="">2015年2月17日 at 上午5:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>C语言版本的代码好像有点问题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28886">
<article class="comment" id="comment-28886">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tzf888888</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-28886" rel="nofollow"><time datetime="2014-12-05T23:17:08+00:00" pubdate="">2014年12月5日 at 下午11:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p><strong>bottes vernies blanches</strong></p>
<p>I appreciate the efforts you men and women place in to share blogs on such sort of matters, it was certainly useful. Keep Posting!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-58357">
<article class="comment" id="comment-58357">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-58357" rel="nofollow"><time datetime="2014-11-03T19:11:01+00:00" pubdate="">2014年11月3日 at 下午7:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>good !</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58358">
<article class="comment" id="comment-58358">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Christmas</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-58358" rel="nofollow"><time datetime="2014-08-17T04:28:15+00:00" pubdate="">2014年8月17日 at 上午4:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很强大啊，佩服</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-48499">
<article class="comment" id="comment-48499">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiao597896577</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-48499" rel="nofollow"><time datetime="2014-07-31T15:59:51+00:00" pubdate="">2014年7月31日 at 下午3:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>输入样例作为一个整体输入，带回车</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-48498">
<article class="comment" id="comment-48498">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cyyuen</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-48498" rel="nofollow"><time datetime="2014-06-29T22:48:43+00:00" pubdate="">2014年6月29日 at 下午10:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>刚开始学习，为啥会报错了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-48495">
<article class="comment" id="comment-48495">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tonight</a></span> on <a href="http://www.acmerblog.com/hdu-3336-count-the-string-5268.html#comment-48495" rel="nofollow"><time datetime="2014-04-02T09:23:39+00:00" pubdate="">2014年4月2日 at 上午9:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;</p>
<p>int main() {<br/>
	//answer must be odd<br/>
    int n, u, d;<br/>
    while(scanf("%d%d%d",&amp;n,&amp;u,&amp;d)==3 &amp;&amp; n&gt;0) {<br/>
        if(n&lt;=u) { puts("1"); continue; }<br/>
        n-=u; u-=d; n+=u-1; n/=u;<br/>
        n&lt;&lt;=1, ++n;<br/>
        printf("%dn",n);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>