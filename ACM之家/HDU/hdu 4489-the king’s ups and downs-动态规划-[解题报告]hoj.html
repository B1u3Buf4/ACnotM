<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>07-17</div>
<div class="tit"><h1 class="entry-title">hdu 4489-the king’s ups and downs-动态规划-[解题报告]hoj</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a>, <a href="http://www.acmerblog.com/category/basis/recurrence" rel="category tag" title="查看递推中的全部文章">递推</a></span><span class="i4">围观95次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7502" href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comments" title="《hdu 4489-the king’s ups and downs-动态规划-[解题报告]hoj》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h1 style="color:#1a5cc8">The King’s Ups and Downs</h1>
<p><span size="+0" style=""><strong><span style="font-size:12px; font-family:Arial; color:green">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others)<br/>
Total Submission(s): 151    Accepted Submission(s): 92<br/>
</span></strong></span></p>
<div align="left" class="panel_title">Problem Description</div>
<div class="panel_content">The king has guards of all different heights. Rather than line them up in increasing or decreasing height order, he wants to line them up so each guard is either shorter than the guards next to him or taller than the guards next to<br/>
 him (so the heights go up and down along the line). For example, seven guards of heights 160, 162, 164, 166, 168, 170 and 172 cm. could be arranged as:<br/>
<center><img alt="" src="http://localhost/blog/img/1447144264656.jpg"/></center>
<p>or perhaps:<br/>
</p><center><img alt="" src="http://localhost/blog/img/1447144264786.jpg"/></center>
<p>The king wants to know how many guards he needs so he can have a different up and down order at each changing of the guard for rest of his reign. To be able to do this, he needs to know for a given number of guards, n, how many different up and down orders<br/>
 there are:</p>
<p>For example, if there are four guards: 1, 2, 3,4 can be arrange as:</p>
<p>1324, 2143, 3142, 2314, 3412, 4231, 4132, 2413, 3241, 1423</p>
<p>For this problem, you will write a program that takes as input a positive integer n, the number of guards and returns the number of up and down orders for n guards of differing heights.
</p></div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Input</div>
<div class="panel_content">The first line of input contains a single integer P, (1 &lt;= P &lt;= 1000), which is the number of data sets that follow. Each data set consists of single line of input containing two integers. The first integer, D is the data set number.<br/>
 The second integer, n (1 &lt;= n &lt;= 20), is the number of guards of differing heights.
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Output</div>
<div class="panel_content">For each data set there is one line of output. It contains the data set number (D) followed by a single space, followed by the number of up and down orders for the n guards.
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Sample Input</div>
<div class="panel_content">
<pre><div style="font-family:Courier New,Courier,monospace">4
1 1
2 3
3 4
4 20</div></pre>
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Sample Output</div>
<div class="panel_content">
<pre><div style="font-family:Courier New,Courier,monospace">1 1
2 4
3 10
4 740742376475050</div></pre>
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Source</div>
<div class="panel_content"><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=Greater%20New%20York%202012&amp;source=1&amp;searchmode=source" target="_blank">Greater New York 2012</a></div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Recommend</div>
<div class="panel_content">liuyiding</div>
<div class="panel_bottom"> <span style="font-size:18px">题意：</span></div>
<div class="panel_bottom"><span style="font-size:18px">给你n个身高高低不同的士兵。问你把他们按照波浪状排列(高低高或低高低)有多少方法数。</span></div>
<div class="panel_bottom"><span style="font-size:18px">思路：</span></div>
<div class="panel_bottom"><span style="font-size:18px">开始脑残。觉得数据量不大才求20项想到了打表。于是用暴搜求答案。结果算到第15项就出不来答案了。</span></div>
<div class="panel_bottom"><span style="font-size:18px">只能说自己太天真了。指数级增长肯定不能暴搜呀。不然dp就没用武之地了。</span></div>
<div class="panel_bottom"><span style="font-size:18px">下来听了下别人的思路说是用dp。自己当时也想过用dp可惜没找到转移方程。后来想清楚后还是很简单的。</span></div>
<div class="panel_bottom"><span style="font-size:18px">我们考虑。前面已经有i-1个人现在要放第i个人的情况。由于i是最后放的所以他一定是最高的。无论他在哪个位置一定都是波峰。</span></div>
<div class="panel_bottom"><span style="font-size:18px">所以在他前面的部分结尾一定为高低。在他后面的部分开始一定为低高。这样才能形成高低<span style="color:#ff0000">高</span>低高。如果知道前面结尾高低的方法数n和后面开始低高的方法数m。那么在该位置的方法数就为n*m。而前面的个数和后面的个数是不确定的所以要枚举前面的个数j。而后面的个数就为i-j-1。由于状态转移要用到<span style="font-size:18px">结尾高低的方法数和后面开始低高的方法数</span></span></div>
<div class="panel_bottom"><span style="font-size:18px">所以我们用dp[i][0]表示有i个人且i个人结尾为高低的方法数。dp[i][1]表示有i个人且开始为<span style="font-size:18px">低高的方法数。</span></span></div>
<div class="panel_bottom"><span style="font-size:18px"><span style="font-size:18px">那么有i个人排列的方法数就为ans[i]+=dp[j][0]*dp[i-j-1][1]*c[i-1][j]。c[i-1][j]为方法数。因为不确定前面j个人的标号。所以要在i-1个人中选j个人出来。开始一直纠结标号问题把自己都搞晕了。其实用第i个人把人分到两边。只这样只跟人数有关系系了。</span></span></div>
<div class="panel_bottom"><span style="font-size:18px"><span style="font-size:18px">但怎么更新状态转移需要用到的dp[i][1]和dp[i][0]呢？</span></span></div>
<div class="panel_bottom"><span style="font-size:18px"><span style="font-size:18px">把i个士兵排好后无非两种情况。开始为低高。开始为高低。那么排列的逆序也满足条件。也就是说</span></span><span style="font-size:18px">结尾为高低的方法数</span><span style="font-size:18px">和</span><span style="font-size:18px">开始为低高的方法数</span><span style="font-size:18px">相同。而对于人数一定的情况。开始为低高的人数和开始为高低的人数相等。</span></div>
<div class="panel_bottom"><span style="font-size:18px">证明:我们用0表示波谷1表示波峰。</span></div>
<div class="panel_bottom"><span style="font-size:18px">当n为偶数时.假设波峰开始的序列为1010.那么把它倒置一下就变成了0101了。也就是说每一个1打头的对应着一个0打头的。</span></div>
<div class="panel_bottom"><span style="font-size:18px">当n为奇数时。<span style="font-size:18px">假设波峰开始的序列为10101.假设第一个数大于最后一个数。那我们把序列最后一个放到第一个位置由于<span style="font-size:18px">第一个数大于最后一个数所以序列就变成01010.如果<span style="font-size:18px">第一个数小于最后一个数把第一个数放到最后就行了。所以</span></span></span></span></div>
<div class="panel_bottom"><span style="font-size:18px"><span style="font-size:18px"><span style="font-size:18px"><span style="font-size:18px"><span style="font-size:18px">每一个1打头的对应着一个0打头的。</span><br/>
</span></span></span></span></div>
<div class="panel_bottom"><span style="font-size:18px">所以dp[i][0]=dp[i][1]=ans[i]/2。这样就好递推了。。。</span></div>
<div class="panel_bottom"><span style="font-size:18px">详细见代码：</span></div>
<div class="panel_bottom"><span style="font-size:18px"></span>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include&lt;stdio.h&gt;
using namespace std;

__int64 dp[25][2],ans[25];
__int64 c[20][25],t;
int main()
{
    int i,j,cas,cs,n;

    c[1][1]=1;
    c[1][0]=1;
    for(i=2;i&lt;=20;i++)//算组合数
    {
        c[i][0]=c[i][i]=1;
        for(j=1;j&lt;i;j++)
          c[i][j]=c[i-1][j]+c[i-1][j-1];
    }
    dp[1][0]=dp[1][1]=dp[0][0]=dp[0][1]=1;//初始为1
    for(i=2;i&lt;=20;i++)
    {
        t=0;//t记录总方法数
        for(j=0;j&lt;i;j++)
        {
            t+=dp[j][0]*dp[i-j-1][1]*c[i-1][j];
        }
        dp[i][0]=dp[i][1]=t/2;
    }
    scanf("%d",&amp;cas);
    while(cas--)
    {
        scanf("%d%d",&amp;cs,&amp;n);
        if(n==1)
        {
            printf("%d 1\n",cs);
            continue;
        }
        printf("%d %I64d\n",cs,dp[n][0]&lt;&lt;1);
    }
    return 0;
}
/*
#include &lt;iostream&gt;
#include&lt;stdio.h&gt;
using namespace std;
__int64 ans[20]=
{1,2,4,10,32,122,544,2770,15872,101042,707584,5405530,
44736512,398721962LL,3807514624LL,38783024290LL,419730685952LL,4809759350882LL,
58177770225664LL,740742376475050LL};
int main()
{
    int t,c,n,cas=1;
    scanf("%d",&amp;t);
    while(t--)
    {
        scanf("%d%d",&amp;c,&amp;n);
        printf("%d %I64d\n",cas++,ans[n-1]);
    }
}
*/
</pre>
<p>
</p></div>
<div class="panel_bottom"><span style="font-size:18px">感想：</span></div>
<div class="panel_bottom"><span style="font-size:18px">自己的dp功底还不够呀，很多题目还不能一下子把状态抽象出来。接下来还得多加练习。。。</span></div>
<p></p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97873">
<article class="comment" id="comment-97873">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514890" rel="external nofollow">新用户447581</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-97873" rel="nofollow"><time datetime="2017-04-20T08:48:51+00:00" pubdate="">2017年4月20日 at 上午8:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你好色！！！！！！！！！！！！！！！！！！你好色！！！！！！！！！！！！！！！！！！你好色！！！！！！！！！！！！！！！！！！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67383">
<article class="comment" id="comment-67383">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67383" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67382">
<article class="comment" id="comment-67382">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67382" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67381">
<article class="comment" id="comment-67381">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67381" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67380">
<article class="comment" id="comment-67380">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67380" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67379">
<article class="comment" id="comment-67379">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67379" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67378">
<article class="comment" id="comment-67378">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67378" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67377">
<article class="comment" id="comment-67377">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67377" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67376">
<article class="comment" id="comment-67376">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67376" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67375">
<article class="comment" id="comment-67375">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67375" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67374">
<article class="comment" id="comment-67374">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67374" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67373">
<article class="comment" id="comment-67373">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67373" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67372">
<article class="comment" id="comment-67372">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521302" rel="external nofollow">新用户227950</a></span> on <a href="http://www.acmerblog.com/hdu-4489-the-kings-ups-and-downs-7502.html#comment-67372" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这男的也很出名的，youtube主播，Chris，大帅哥一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>