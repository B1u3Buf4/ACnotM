<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">hdu 4261-estimation-动态规划-[解题报告]hoj</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a>, <a href="http://www.acmerblog.com/category/data-struct/linear" rel="category tag" title="查看线性结构中的全部文章">线性结构</a></span><span class="i4">围观121次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7274" href="http://www.acmerblog.com/hdu-4261-estimation-7274.html#comments" title="《hdu 4261-estimation-动态规划-[解题报告]hoj》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h1 style="text-align:center; color:rgb(26,92,200)">Estimation</h1>
<p><span size="+0" style=""></span></p>
<div style="text-align:center"><span style="color:green; font-family:Arial; font-weight:bold">Time Limit: 40000/15000 MS (Java/Others)    Memory Limit: 131072/131072 K (Java/Others)</span></div>
<p><strong></strong></p>
<div style="text-align:center"><span style="color:green; font-family:Arial">Total Submission(s): 598    Accepted Submission(s): 206</span></div>
<div align="left" class="panel_title">Problem Description</div>
<div class="panel_content">“There are too many numbers here!” your boss bellows. “How am I supposed to make sense of all of this? Pare it down! Estimate!”<br/>
You are disappointed. It took a lot of work to generate those numbers. But, you’ll do what your boss asks.<br/>
You decide to estimate in the following way: You have an array <strong>A</strong> of numbers. You will partition it into<br/>
<strong>k</strong> contiguous sections, which won’t necessarily be of the same size. Then, you’ll use a single number to estimate an entire section. In other words, for your array<br/>
<strong>A</strong> of size <strong>n</strong>, you want to create another array <strong><br/>
B</strong> of size <strong>n</strong>, which has <strong>k</strong> contiguous sections. If i and j are in the same section, then<br/>
<strong>B</strong>[i]=<strong>B</strong>[j]. You want to minimize the error, expressed as the sum of the absolute values of the differences (<strong>Σ</strong>|<strong>A</strong>[i]-<strong>B</strong>[i]|).</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Input</div>
<div class="panel_content">There will be several test cases in the input. Each test case will begin with two integers on a line,<br/>
<strong>n</strong> (1≤<strong>n</strong>≤2,000) and <strong>k</strong> (1≤<strong>k</strong>≤25,<br/>
<strong>k</strong>≤<strong>n</strong>), where <strong>n</strong> is the size of the array, and<br/>
<strong>k</strong> is the number of contiguous sections to use in estimation. The array<br/>
<strong>A</strong> will be on the next <strong>n</strong> lines, one integer per line. Each integer element of<br/>
<strong>A</strong> will be in the range from -10,000 to 10,000, inclusive. The input will end with a line with two 0s.</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Output</div>
<div class="panel_content">For each test case, output a single integer on its own line, which is the minimum error you can achieve. Output no extra spaces, and do not separate answers with blank lines. All possible inputs yield answers which will fit in a signed<br/>
 64-bit integer.</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Sample Input</div>
<div class="panel_content">
<pre><div style="font-family:Courier New,Courier,monospace">7 2
6
5
4
3
2
1
7
0 0</div></pre>
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Sample Output</div>
<div class="panel_content">
<pre><div style="font-family:Courier New,Courier,monospace">9</div></pre>
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Source</div>
<div class="panel_content"><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=The%20University%20of%20Chicago%20Invitational%20Programming%20Contest%202012&amp;source=1&amp;searchmode=source" target="_blank">The University of Chicago Invitational Programming<br/>
 Contest 2012 </a></div>
<div class="panel_bottom"> </div>
<div class="panel_bottom"><span style="font-size:18px"><br/>
</span></div>
<div class="panel_bottom"><span style="font-size:18px"><span style="color:#ff0000">思路来源于：</span><a href="http://blog.csdn.net/acm_cxlove/article/details/7908760" target="_blank">cxlove博客</a></span></div>
<div class="panel_bottom"><span style="font-size:18px"><br/>
</span></div>
<div class="panel_bottom"><span style="font-size:18px; color:#ff0000">题意：</span></div>
<div class="panel_bottom"><span style="font-size:18px"><span style="font-family:Arial; font-size:18px; line-height:26px">给出一个序列A，分为K个部分，然后每个部分给出一个B（自己给出），使得所有的∑(|Ai-Bi|)最小</span><br/>
</span></div>
<div class="panel_bottom"><span style="font-size:18px"><span style="font-family:Arial; font-size:18px; line-height:26px"><br/>
</span></span></div>
<div class="panel_bottom"><span style="font-family:Arial; font-size:18px; color:#ff0000"><span style="line-height:26px">思路：</span></span></div>
<div class="panel_bottom"><span style="font-family:Arial; font-size:18px"><span style="line-height:26px">要使一个部分的<span style="font-family:Arial; font-size:18px; line-height:26px">|Ai-Bi|最小，<span style="font-family:Arial; font-size:18px; line-height:26px">1°</span>如果个数为奇数，那么所选的Bi一定为中位数，2<span style="font-family:Arial; font-size:18px; line-height:26px">°</span>若为偶数那么一定是中间两个数中间的一个数，用sum表示大的减小的数，<span style="font-family:Arial; font-size:18px; line-height:26px">1°<br/>
 则<span style="font-family:Arial; font-size:18px; line-height:26px">|Ai-Bi|=sum-中位数，</span>2<span style="font-family:Arial; font-size:18px; line-height:26px">°则<span style="font-family:Arial; font-size:18px; line-height:26px">|Ai-Bi|=sum  （可以画个区间的图就能很好的反映出来了）。</span></span></span></span></span></span></div>
<div class="panel_bottom"><span style="font-family:Arial; font-size:18px"><span style="line-height:26px">首先肯定是预处理w[i][j] – i到j为一段时<span style="font-family:Arial; font-size:18px; line-height:26px">|Ai-Bi|的最小值，实现时可以用两个优先队列lower、upper，一个存较小的数，一个存较大的数，维护好sum以及lower和upper<br/>
 的个数就好了。</span></span></span></div>
<div class="panel_bottom"><span style="line-height:26px; font-family:Arial; font-size:18px">然后就是dp了，dp[i][j] – 将1到j分i段时最小的值。</span></div>
<div class="panel_bottom"><span style="font-family:Arial; font-size:18px"><span style="line-height:26px">那么 dp[i][j]=min(dp[i][j],dp[i-1][k]+w[k+1][j]);</span></span></div>
<div class="panel_bottom"><span style="font-family:Arial; font-size:18px"><span style="line-height:26px"><br/>
</span></span></div>
<div class="panel_bottom"><span style="font-family:Arial; font-size:18px"><span style="line-height:26px">代码：</span></span></div>
<p><span style="font-family:Arial; font-size:18px"><span style="line-height:26px"></span></span>
</p><pre class="brush:cpp" code_snippet_id="260988" name="code" snippet_file_name="blog_20140327_1_5331636">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;queue&gt;
#pragma comment (linker,"/STACK:102400000,102400000")
#define maxn 70
#define MAXN 31290
#define OO (1&lt;&lt;31)-1
#define mod 100000000
#define INF 0x3f3f3f3f
#define pi acos(-1.0)
#define eps 1e-6
typedef long long ll;
using namespace std;

int n,m,ans,cnt,tot,flag;
int a[2005],dp[30][2005],w[2005][2005];

int main()
{
    int i,j,k,t,num1,num2,sum;
    while(scanf("%d%d",&amp;n,&amp;m),n|m)
    {
        for(i=1;i&lt;=n;i++)
        {
            scanf("%d",&amp;a[i]);
        }
        for(i=1;i&lt;=n;i++)
        {
            priority_queue&lt;int&gt;lower;
            priority_queue&lt;int,vector&lt;int&gt;,greater&lt;int&gt; &gt;upper;
            sum=0;
            for(j=i;j&lt;=n;j++)
            {
                if(upper.empty()||a[j]&gt;=upper.top())
                {
                    upper.push(a[j]);
                    sum+=a[j];
                }
                else
                {
                    lower.push(a[j]);
                    sum-=a[j];
                }
                num1=(j-i+1)/2; num2=j-i+1-num1;  // 两个队列应该的大小
                if(lower.size()&gt;num1)
                {
                    upper.push(lower.top());
                    sum+=2*lower.top();
                    lower.pop();
                }
                else if(upper.size()&gt;num2)
                {
                    lower.push(upper.top());
                    sum-=2*upper.top();
                    upper.pop();
                }
                if(num2&gt;num1) w[i][j]=sum-upper.top();
                else w[i][j]=sum;
            }
        }
        for(i=0;i&lt;=m;i++) for(j=0;j&lt;=n;j++) dp[i][j]=INF;
        dp[0][0]=0;
        for(i=1;i&lt;=m;i++)
        {
            for(j=i;j&lt;=n;j++)
            {
                for(k=0;k&lt;j;k++)
                {
                    dp[i][j]=min(dp[i][j],dp[i-1][k]+w[k+1][j]);
                }
            }
        }
        printf("%d\n",dp[m][n]);
    }
    return 0;
}</pre>
</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98964">
<article class="comment" id="comment-98964">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525012" rel="external nofollow">新用户761138</a></span> on <a href="http://www.acmerblog.com/hdu-4261-estimation-7274.html#comment-98964" rel="nofollow"><time datetime="2017-04-20T14:27:54+00:00" pubdate="">2017年4月20日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不是，那是游菈。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68652">
<article class="comment" id="comment-68652">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919517398" rel="external nofollow">新用户803169</a></span> on <a href="http://www.acmerblog.com/hdu-4261-estimation-7274.html#comment-68652" rel="nofollow"><time datetime="2017-04-11T07:10:17+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我可一点也不喜欢那个黄发女孩，灵蕊不回来我也不想看了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>