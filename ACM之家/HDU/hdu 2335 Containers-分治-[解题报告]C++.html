<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>01-05</div>
<div class="tit"><h1 class="entry-title">hdu 2335 Containers-分治-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/data-struct/hash" rel="category tag" title="查看Hash表中的全部文章">Hash表</a>, <a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观693次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3561" href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comments" title="《hdu 2335 Containers-分治-[解题报告]C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Containers</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
At a container terminal, containers arrive from the hinterland, one by one, by rail, by road, or by small ships. The containers are piled up as they arrive. Then the huge cargo ships arrive, each one capable of carrying thousands of containers. The containers are loaded into the ships that will bring them to far away shores. Or the other way round, containers are brought in over sea, piled up, and transported to the hinterland one by one. Anyway, a huge parking lot is needed, to store the containers waiting for further transportation.<br/><img src="http://www.acmerblog.com/img/1388998394149.png"/><br/>Building the new container terminal at the mouth of the river was a good choice. But there are disadvantages as well. The ground is very muddy, and building on firm ground would have been substantially cheaper. It will be important to build the parking lot not larger than necessary.
<p>A container is 40 feet long and 8 feet wide. Containers are stacked, but a stack will be at most five containers high. The stacks are organized in rows. Next to a container stack, and between two container stacks (along the long side of the containers) a space of 2 feet is needed for catching the containers. Next to a row of stacks, and between two stacks (along the short side of the containers) a space of 4 feet is needed for the crane that lifts the containers. All containers are placed in the same direction, as the cranes can not make turns on the parking lot.</p>
<p>The parking lot should be rectangular. Given the required capacity of the parking lot, what will be the best dimension for the parking lot? In the first place the area should be minimal. The second condition is that the parking lot should be as square as possible.</p>
<p>Below you see a plan for a parking lot with a capacity of 8 stacks. Two rows of four containers each turns out to be the best solution here, with a total area of 92 × 42 = 3864.</p>
<p>A parking lot with 8 container stacks. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
On the first line one positive number: the number of testcases, at most 100. After that per testcase:
<p>A single positive integer n (n ≤ 10<sup>12</sup>) on a single line: the required capacity (number of containers) for the parking lot. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
On the first line one positive number: the number of testcases, at most 100. After that per testcase:
<p>A single positive integer n (n ≤ 10<sup>12</sup>) on a single line: the required capacity (number of containers) for the parking lot.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
6
1
15
22
29
36
43</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
48 X 12 = 576
48 X 32 = 1536
52 X 48 = 2496
92 X 32 = 2944
92 X 42 = 3864
136 X 32 = 4352</pre>
<p> <!-- problem end --></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">数据结构者，“数据间关系+数据存储方式”也。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">选择何种数据结构，取决于需要解决什么样的问题。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">任何一个数据结构都有它的优势，这个优势说白了就是“本数据结构在进行XX操作时快”，而选择何种数据结构就看要解决的问题需要在数据结构上进行何种操作来决定。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">哈希表就是体现这个道理的一个很好的例子。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">哈希表提供这么一种其它数据结构并不擅长的操作：</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">“在理想情况下，能用常量时间查找到指定值的数据”。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;"></span> </p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">普通数据结构如线性表、树、图等，其结点内的数据与数据所存储的位置之间的关系是随机的，所以要想提供“查找某已知值的数据的位置”只能通过“比较”方式进行，如：对于未排序的线性表，要从头至尾逐一比较是否“==”；对于二分查找，则要比较“&gt;”“&lt;”还是“==”。这样，时间复杂度是n或者logn。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">而哈希表通过“在存储位置和数据值之间建立映射关系”这一手段，将该操作的时间复杂度降低为O（1）。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">这个描述“在存储位置和数据值之间建立映射关系”的映射关系就是哈希函数。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">将数据存入哈希表时，利用哈希函数为该数据安排存储位置；查找指定值数据时，也按照哈希函数得到目标索引。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;"></span> </p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">实际操作起来时，由于数值域和索引域大小不同，所以不能简单地线性映射，而是需要建立较复杂的哈希函数，这就有可能造成“冲突”——这是哈希面临的主要问题。好的哈希函数应该让随机数据值得到的哈希结果尽可能地随即和分散，而且减少冲突。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;"></span> </p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">=====================分割线===========</span><span style="font-family:Comic Sans MS;font-size:13px;">============</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">有这样一类问题，查找是否有出现多于一次的数据？笨方法只能从头至尾逐一比对，复杂性为O(N*N)。聪明一点的方法，如果数据不是很分散，可以用做记号的方法，用一个位数组（可用bool实现）记录各个位所代表的数据是否出现过，如果读入一个已经出现过的数据则说明它出现多于一次，用int代替bool，还可以记录下每个数据出现的次数，在遍历一次便可得到出现最多次的数据，复杂度为O(N)。但是如果数据很分散，这种线性映射就不管用了，因为内存会严重浪费，如果数据过于夸张，会造成很大BUFFER的申请，但是这种映射记录的思想还是可取的，这时就需要一个从很大的数据域向相对很小的地址域映射的工具来辅助，自然就是“哈希”。</span></p>
<p><span style="font-family:Comic Sans MS;font-size:13px;"></span> </p>
<p><span style="font-family:Comic Sans MS;font-size:13px;">POJ3349就是利用哈希这个特点的一个典型应用。题目本身与存取无关，而只是要找出是否有数据出现过一次以上。就可以采取上述“标记”+“映射”的方法。</span></p>
<p> </p>
<p><span style="font-family:Comic Sans MS;">CODE:</span></p>
<pre class="brush:cpp ">/*hash判重*/
/*
1. 直接相加, 把(总和%大质数)为key.
2. 平方和相加, 把(总和%大质数)为key.
3. 从小到大的顺序, 对v[i]&lt;&lt;(i*3)依次异或, 然后模一个大质数作为key.(by hust07p43)
4. 六个数中非零数的积再乘上一个大质数,然后模一个100w上下的数。
自己拿随机数据测下来110w左右的效果最好，随机情况下数据量是10w的时候hash值相同的情况只有6k多个，几乎可以忽略。(by  killertom)
5. 依次对每个数异或所得的数作为key. (by archerstarlee)
6. (a[0] + a[2] + a[4])&amp;(a[1] + a[3] + a[5]), 再模一个大质数. 中间的&amp;还可以改成'|' 或者'^'.非常巧妙! 我采用'^'得到最快的719ms. (只对本题适用的hash方法)

其实最关键的就是要开放式寻址解决hash冲突, 不要以为hash就能解决问题了.
最后就是用getchar和gets来进行输入转换更为快速. G++比GCC快一些.
欢迎大家补充自己更为快速的Hash方法.
*/
/*AC代码：2344ms*/
#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;memory.h&gt;
#include &lt;algorithm&gt;
#include &lt;cstdlib&gt;
#define MAXN 100000
#define MOD 99991
using namespace std;
struct Node
{
	int val[7];
};
struct Node Hash[MAXN][20];//hash表
int len[MAXN];//相应hash表的长度
int N;
bool ok;
int hash(Node u)//hash函数
{
	int i,sum=0;
	for(i=1;i&lt;=6;i++)
		sum+=u.val[i];
	return sum%MOD;
}
void Rotate(Node &amp;u)//移动
{
	int i,t=u.val[1];
	for(i=1;i&lt;=5;i++)
		u.val[i]=u.val[i+1];
	u.val[6]=t;
}
void Reverse(Node &amp;u)//翻转
{
	Node v;
	int i,j;
	for(i=1,j=6;i&lt;=6;i++,j--)
		v.val[i]=u.val[j];
	u=v;
}
bool Equal(Node u,Node v)//判断是否相等
{
	int i;
	for(i=1;i&lt;=6;i++)
	{
		if(u.val[i]!=v.val[i])
			return false;
	}
	return true;
}
void Judge(Node u,Node v)
{
	int i;
	for(i=1;i&lt;=6;i++)
	{
		Rotate(u);
		if(Equal(u,v)) {ok=false;return;}
	}
	Reverse(u);
	for(i=1;i&lt;=6;i++)
	{
		Rotate(u);
		if(Equal(u,v)) {ok=false;return;}
	}
}
void Init()
{
	int i,j;
	Node u;
	ok=true;
	memset(len,0,sizeof(len));
	for(i=1;i&lt;=N;i++)
	{
		for(j=1;j&lt;=6;j++)
			scanf("%d",&amp;u.val[j]);
		if(!ok) continue;
		int pos=hash(u);
		for(j=0;j&lt;len[pos];j++)
		{
			Judge(u,Hash[pos][j]);
			if(!ok) break;
		}
		Hash[pos][len[pos]++]=u;
	}
}
void Solve()
{
	if(ok) printf("No two snowflakes are alike.\n");
	else printf("Twin snowflakes found.\n");
}
int main()
{
	while(scanf("%d",&amp;N)!=EOF)
	{
		Init();
		Solve();
	}
	return 0;
}</pre>
<p>解题转自：http://blog.csdn.net/allenjy123/article/details/6629320</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-21021">
<article class="comment" id="comment-21021">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hsp_77_abc</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21021" rel="nofollow"><time datetime="2015-05-28T16:31:29+00:00" pubdate="">2015年5月28日 at 下午4:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>方法二可行，已测试<br/>
<a href="http://blog.csdn.net/alpc_paul/article/details/33769407" rel="nofollow">http://blog.csdn.net/alpc_paul/article/details/33769407</a></p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21027">
<article class="comment" id="comment-21027">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Rocky</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21027" rel="nofollow"><time datetime="2015-03-22T18:05:36+00:00" pubdate="">2015年3月22日 at 下午6:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>good !</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21026">
<article class="comment" id="comment-21026">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tonight</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21026" rel="nofollow"><time datetime="2015-03-06T23:31:14+00:00" pubdate="">2015年3月6日 at 下午11:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thanks for taking the time to examine this, I really feel strongly about it and love studying a lot more on this topic. If possible, as you acquire experience</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21022">
<article class="comment" id="comment-21022">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">09291010</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21022" rel="nofollow"><time datetime="2015-01-29T17:07:51+00:00" pubdate="">2015年1月29日 at 下午5:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>神奇的网站</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21028">
<article class="comment" id="comment-21028">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Rosamondwu</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21028" rel="nofollow"><time datetime="2014-12-24T22:49:18+00:00" pubdate="">2014年12月24日 at 下午10:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哇，算法有这么多呢！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-44775">
<article class="comment" id="comment-44775">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">GordonTJ</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-44775" rel="nofollow"><time datetime="2014-09-12T06:23:59+00:00" pubdate="">2014年9月12日 at 上午6:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>為甚麼fln*20+0.5f</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21019">
<article class="comment" id="comment-21019">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Rocky</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21019" rel="nofollow"><time datetime="2014-05-28T21:23:37+00:00" pubdate="">2014年5月28日 at 下午9:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很棒的网站，加油！⛽️</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21018">
<article class="comment" id="comment-21018">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mechine</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21018" rel="nofollow"><time datetime="2014-05-08T19:13:14+00:00" pubdate="">2014年5月8日 at 下午7:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>int L[m+1][n+1];这样定义出错，这个在gcc上可以编译通过 在VS上不行 应该改为new 或者vector</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-44774">
<article class="comment" id="comment-44774">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tzf888888</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-44774" rel="nofollow"><time datetime="2014-04-26T06:37:48+00:00" pubdate="">2014年4月26日 at 上午6:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>楼主你能把scanf( "%d%*" ,&amp;T );中%*的用法详细说明吗</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21025">
<article class="comment" id="comment-21025">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">radish</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21025" rel="nofollow"><time datetime="2014-04-06T02:08:04+00:00" pubdate="">2014年4月6日 at 上午2:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>沙发呢，我抢到了沙发</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21023">
<article class="comment" id="comment-21023">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">youpushipop</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21023" rel="nofollow"><time datetime="2014-03-06T21:44:46+00:00" pubdate="">2014年3月6日 at 下午9:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>“可以发现,树将是满二叉树,”这句话不对吧，构造的树应该是“完全二叉树”，而非“满二叉树”。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-44776">
<article class="comment" id="comment-44776">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">985836927</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-44776" rel="nofollow"><time datetime="2014-02-10T03:27:20+00:00" pubdate="">2014年2月10日 at 上午3:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢支持！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-21024">
<article class="comment" id="comment-21024">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wynk0804</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21024" rel="nofollow"><time datetime="2014-02-04T22:14:41+00:00" pubdate="">2014年2月4日 at 下午10:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题是不是可以这样想，生了n孩子的家庭等价于n个家庭各生了一个1个孩子，这样最后男女的比例还是1:1</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-21020">
<article class="comment" id="comment-21020">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">water160</a></span> on <a href="http://www.acmerblog.com/hdu-2335-containers-3561.html#comment-21020" rel="nofollow"><time datetime="2014-01-23T21:38:34+00:00" pubdate="">2014年1月23日 at 下午9:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个是python代码啊。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>