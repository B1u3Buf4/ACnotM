<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-24</div>
<div class="tit"><h1 class="entry-title">HDU 4372-Count the Buildings-组合数学-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math" rel="category tag" title="查看数学相关中的全部文章">数学相关</a>, <a href="http://www.acmerblog.com/category/math/combination" rel="category tag" title="查看组合数学中的全部文章">组合数学</a></span><span class="i4">围观131次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7383" href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comments" title="《HDU 4372-Count the Buildings-组合数学-[解题报告]HOJ》上的评论">10 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Count the Buildings</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
There are N buildings standing in a straight line in the City, numbered from 1 to N. The heights of all the buildings are distinct and between 1 and N. You can see F buildings when you standing in front of the first building and looking forward, and B buildings when you are behind the last building and looking backward. A building can be seen if the building is higher than any building between you and it.<br/>Now, given N, F, B, your task is to figure out how many ways all the buildings can be. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
First line of the input is a single integer T (T&lt;=100000), indicating there are T test cases followed.<br/>Next T lines, each line consists of three integer N, F, B, (0&lt;N, F, B&lt;=2000) described above. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
First line of the input is a single integer T (T&lt;=100000), indicating there are T test cases followed.<br/>Next T lines, each line consists of three integer N, F, B, (0&lt;N, F, B&lt;=2000) described above.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
3 2 2
3 2 1</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
2
1</pre>
<p> <!-- problem end --></p>
<p><strong><span style="font-family:Courier New; font-size:14px; color:#009900"><a>题目：Count the Buildings</a></span></strong></p>
<p>
</p>
<p><strong></strong></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:26px">
<strong><span style="font-family:Courier New; font-size:14px">题意：N座高楼，高度均不同且为1~N中的数，从前向后看能看到F个，从后向前看能看到B个，问有多少种可能的排列数。</span></strong></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:26px">
<strong><span style="font-family:Courier New; font-size:14px">0 &lt; N, F, B &lt;= 2000</span></strong></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:26px">
<strong><span style="font-family:Courier New; font-size:14px"><br/>
</span></strong></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:26px">
</p><p><strong><span style="font-family:Courier New; font-size:14px">首先我们知道一个结论：n的环排列的个数与n-1个元素的排列的个数相等，因为P(n,n)/n=(n-1)!。</span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px">可以肯定，无论从最左边还是从最右边看，最高的那个楼一定是可以看到的.</span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px">假设最高的楼的位置固定，最高楼的编号为n，那么我们为了满足条件，可以在楼n的左边分x-1组，右边分y-1组，且用每</span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px">组最高的那个元素代表这一组，那么楼n的左边，从左到右，组与组之间最高的元素一定是单调递增的，且每组中的最高元</span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px">素一定排在该组的最左边，每组中的其它元素可以任意排列<span style="color:#ff0000">（相当于这个组中所有元素的环排列）</span>。右边反之亦然。</span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px">然后，可以这样考虑这个问题，最高的那个楼左边一定有x-1个组，右边一定有y-1个组，且每组是一个环排列，这就引出</span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px">了<span style="line-height:22px">第一类Stirling数（<img alt="Count the Buildings" src="http://cdn.acmerblog.com/img/1441096017748.png" style="border-style:none; margin:0px; vertical-align:middle"/>个人分成<img alt="Count the Buildings" src="http://cdn.acmerblog.com/img/1441096019386.png" style="border-style:none; margin:0px; vertical-align:middle"/>组，每组内再按特定顺序围圈的分组方法的数目）。</span></span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px"><span style="line-height:22px"><br/>
</span></span></strong></p>
<p><strong><span style="font-family:Courier New; font-size:14px"><span style="line-height:22px">我们可以先把n-1个元素分成x-1+y-1组，然后每组内部做环排列。再在所有组中选取x-1组放到楼n的左边。所以答案是</span></span></strong></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:26px">
<strong><span style="font-family:Courier New; font-size:14px">ans(n, f, b) = C[f + b - 2][f - 1] * S[n - 1][f + b - 2];</span></strong></p>
<p></p>
<p><strong></strong></p>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include &lt;string.h&gt;
#include &lt;stdio.h&gt;

using namespace std;
typedef long long LL;

const int N=2005;
const LL MOD=1000000007;

LL C[N][N];
LL S[N][N];

void Init()
{
    int i,j;
    for(i=0;i&lt;N;i++)
    {
        C[i][0]=1;
        C[i][i]=1;
        S[i][0]=0;
        S[i][i]=1;
        for(j=1;j&lt;i;j++)
        {
            C[i][j]=(C[i-1][j]%MOD+C[i-1][j-1]%MOD)%MOD;
            S[i][j]=((i-1)%MOD*S[i-1][j]%MOD+S[i-1][j-1]%MOD);
        }
    }
}

int main()
{
    LL t,n,f,b,ans;
    Init();
    scanf("%I64d",&amp;t);
    while(t--)
    {
        scanf("%I64d%I64d%I64d",&amp;n,&amp;f,&amp;b);
        ans=C[f+b-2][f-1]%MOD*S[n-1][f+b-2]%MOD;
        printf("%I64d\n",ans);
    }
    return 0;
}
</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/acdreamers/article/details/9732431</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98185">
<article class="comment" id="comment-98185">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919518154" rel="external nofollow">新用户090289</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-98185" rel="nofollow"><time datetime="2017-04-20T11:47:11+00:00" pubdate="">2017年4月20日 at 上午11:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这不就是锅盖盖得太严实煮饺子造成喷溅的后果么</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68207">
<article class="comment" id="comment-68207">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68207" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68206">
<article class="comment" id="comment-68206">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68206" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68205">
<article class="comment" id="comment-68205">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68205" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68204">
<article class="comment" id="comment-68204">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68204" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68203">
<article class="comment" id="comment-68203">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68203" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68202">
<article class="comment" id="comment-68202">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68202" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68201">
<article class="comment" id="comment-68201">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68201" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-68200">
<article class="comment" id="comment-68200">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68200" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68199">
<article class="comment" id="comment-68199">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919514257" rel="external nofollow">新用户720293</a></span> on <a href="http://www.acmerblog.com/hdu-4372-count-the-buildings-7383.html#comment-68199" rel="nofollow"><time datetime="2017-04-11T03:57:03+00:00" pubdate="">2017年4月11日 at 上午3:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一下航的错误，齐潇洒喜欢萝莉沧，玄月喜欢冰之沧月，不要弄混了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>