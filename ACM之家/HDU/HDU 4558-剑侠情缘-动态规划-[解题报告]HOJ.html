<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>07-25</div>
<div class="tit"><h1 class="entry-title">HDU 4558-剑侠情缘-动态规划-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/enumeration" rel="category tag" title="查看枚举中的全部文章">枚举</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观125次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7579" href="http://www.acmerblog.com/hdu-4558-7579.html#comments" title="《HDU 4558-剑侠情缘-动态规划-[解题报告]HOJ》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">剑侠情缘</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
剑侠情缘是西山居工作室的扛鼎之作，从95年开始的单机版，到现在的第三代网络游戏，一直备受广大玩家喜爱。
<p>有一天，由于你太过痴迷与喜爱这款游戏，于是，抱着你的一柄已经有点残破的长剑，开始了仗剑走天涯的生活。先不讲美人与美酒的故事，你要走的天涯，被我们有点无聊的简化为了一个二维矩阵。作为一个随性的大侠，你可以选择在任意一个点开始，然后在任意一个点结束你的旅途，在这个矩阵天涯里，你每一步只能向下或者向右移动一个格子，这段江湖旅途自然不能走出这个矩阵。</p>
<p>大侠也要面临窘迫的生活，是吧？你无法完全像游戏里面的人那样潇洒的来去如风，需要吃饭睡觉为自己补充能量，还需要不时修理你的剑，以免它残破的更厉害。在矩阵的每个点，有一个能量值，你可以选择为自己补充，也可以选择为你的爱剑补充。</p>
<p>经过一段时间的思考，你觉得这样比较平衡，在旅程的第一步，补充自己，下一步，也就是第二步补充剑，接着又补充自己，如此交替下去。一个必须要注意的问题是，你和剑能容纳的能量都是有上限的，超过这个上限后，计数器会溢出（不要问为什么，大家都是程序员）。具体来说，能量值只能维持在0-10范围之内，0为空，10为最佳。如果你当前的能量为10，补充了大小为1的能量，那么你的能量值就重新回到起点，变为0。</p>
<p>你意识到，其实最后能量值的大小无关紧要。你只希望你和你的剑能保持在统一水平，这样就可以依旧随心所欲的驾驭这把宝剑。而只要最后自己与剑的能量数值相等，这段与剑的情缘就足够牢固。你希望知道满足要求的情况下有多少种不同的选择方案，只要两种方案有任意一个不同的选择，就认为两种方案不同。 </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
输入第一行为T，表示有T组测试数据。<br/>每组数据以两个数组N，M开始，表示矩阵的大小。接着的N行每行包含一个长度为M的数字串Mi，表示矩阵内容。
<p>[Technical Specification]</p>
<p>1. 1 &lt;= T &lt;= 74<br/>2. 1 &lt;= N, M &lt;= 477<br/>3. Mi只包含‘1’-‘9’的数字 </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
输入第一行为T，表示有T组测试数据。<br/>每组数据以两个数组N，M开始，表示矩阵的大小。接着的N行每行包含一个长度为M的数字串Mi，表示矩阵内容。
<p>[Technical Specification]</p>
<p>1. 1 &lt;= T &lt;= 74<br/>2. 1 &lt;= N, M &lt;= 477<br/>3. Mi只包含‘1’-‘9’的数字</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3
2 2
11
11
2 2
13
31
3 3
122
231
211</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case 1: 4
Case 2: 0
Case 3: 12

<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
对第一组样例，四种方案是：(1,1)-&gt;(1,2), (1,1)-&gt;(2,1), (1,2)-&gt;(2,2), (2,1)-&gt;(2,2)。
</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<p>题意：n×m (<span>1&lt;= N, M &lt;=477</span>) 的矩阵，a[i][j]表示第i行第j列的能量值，可以从任意点出发，任意点停止，但只能往右或往下走。</p>
<p>第一步给自己补充能量，第二步给剑补充能量，依次循环补充。能量值0～10，若当前为10，又补充了1的能量，则能量变成0。</p>
<p>要求离开的时候，人和剑的能量值相同，问有多少种不同的走法？结果对<span>1 000 000 007取余。</span></p>
<p>分析：枚举人和剑的差值，人比剑多s，相当于人比剑少11-s。。。</p>
<p>设dp[x][y][i]表示在(x,y)位置，差值为i的方案数，</p>
<p>dp[x][y][i] = ( dp[x][y][i] + dp[x+1][y][j] ) % mod;</p>
<p>dp[x][y][i] = ( dp[x][y][i] + dp[x][y+1][j] ) % mod;</p>
<p>j为相邻格子的能量值，由于人和剑交替补充，对j取反为11-j，又当前格子本身有差值a[x][y]，</p>
<p>所以i=11-j+a[x][y]，  j=(11-i+a[x][y]) % 11;</p>
<p> </p>
<p> </p>
<pre class="brush:cpp">int dx[] = {1,0,1,0};//up Right down Left
int dy[] = {0,1,0,-1};

const int M = 480, N = 11, mod = 1000000007;
char s[M];
int a[M][M], n, m, ans;
int dp[M][M][N];

int main(){
    #ifndef ONLINE_JUDGE
    freopen("in.txt","r",stdin);
    //freopen("out.txt","w",stdout);
    #endif

    int T; scanf("%d", &amp;T);
    FOE(t, 1, T){
        ans = 0;
        memset(dp, 0, sizeof dp);
        scanf("%d%d", &amp;n, &amp;m);
        FOR(x, 0, n) {
            scanf("%s", s);
            FOR(y, 0, m) a[x][y] = s[y]-'0';
        }

        FOD(x, n-1, 0) {
            FOD(y, m-1, 0) {
                int v = a[x][y];
                FOR(i, 0, N) {
                    FOR(r, 0, 2) {
                        int xx=x+dx[r], yy=y+dy[r];
                        if(xx&gt;=n || yy&gt;=m) continue;

                        int temp = (11-i+v) % 11;
                        dp[x][y][i] = (dp[x][y][i] + dp[xx][yy][temp]) % mod;
                    }
                }
                dp[x][y][v]++;
                ans = ( ans + dp[x][y][0] ) % mod;
            }
        }
        printf("Case %d: %d\n", t, ans);
    }
    return 0;
}</pre>
<p> </p>
<p>参考：http://www.cnblogs.com/ts65213/archive/2013/05/26/3099978.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97574">
<article class="comment" id="comment-97574">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525555" rel="external nofollow">新用户323078</a></span> on <a href="http://www.acmerblog.com/hdu-4558-7579.html#comment-97574" rel="nofollow"><time datetime="2017-04-20T05:15:18+00:00" pubdate="">2017年4月20日 at 上午5:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>60年后第一位伊斯兰美国总统会说那时候我们还需要靠烈士来维护我们的信仰</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-66997">
<article class="comment" id="comment-66997">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919512137" rel="external nofollow">新用户904654</a></span> on <a href="http://www.acmerblog.com/hdu-4558-7579.html#comment-66997" rel="nofollow"><time datetime="2017-04-10T22:27:51+00:00" pubdate="">2017年4月10日 at 下午10:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>打开 980.so/2RMNNE 都是浪妞</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>