<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>02-21</div>
<div class="tit"><h1 class="entry-title">HDU 3726-Graph and Queries-DFS-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/search/dfs" rel="category tag" title="查看DFS搜索中的全部文章">DFS搜索</a>, <a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观501次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6706" href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comments" title="《HDU 3726-Graph and Queries-DFS-[解题报告]HOJ》上的评论">20 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Graph and Queries</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
You are given an undirected graph with N vertexes and M edges. Every vertex in this graph has an integer value assigned to it at the beginning. You’re also given a sequence of operations and you need to process them as requested. Here’s a list of the possible operations that you might encounter:<br/>1)  Deletes an edge from the graph.<br/>The format is [D X], where X is an integer from 1 to M, indicating the ID of the edge that you should delete. It is guaranteed that no edge will be deleted more than once.<br/>2)  Queries the weight of the vertex with K-th maximum value among all vertexes currently connected with vertex X (including X itself).<br/>The format is [Q X K], where X is an integer from 1 to N, indicating the id of the vertex, and you may assume that K will always fit into a 32-bit signed integer. In case K is illegal, the value for that query will be considered as undefined, and you should return 0 as the answer to that query.<br/>3)  Changes the weight of a vertex.<br/>The format is [C X V], where X is an integer from 1 to N, and V is an integer within the range [-10<sup>6</sup>, 10<sup>6</sup>].
<p>The operations end with one single character, E, which indicates that the current case has ended.<br/>For simplicity, you only need to output one real number – the average answer of all queries. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There are multiple test cases in the input file. Each case starts with two integers N and M (1 &lt;= N &lt;= 2 * 10<sup>4</sup>, 0 &lt;= M &lt;= 6 * 10<sup>4</sup>), the number of vertexes in the graph. The next N lines describes the initial weight of each vertex (-106 &lt;= weight[i] &lt;= 10<sup>6</sup>). The next part of each test case describes the edges in the graph at the beginning. Vertexes are numbered from 1 to N. The last part of each test case describes the operations to be performed on the graph. It is guaranteed that the number of query operations [Q X K] in each case will be in the range [1, 2 * 10<sup>5</sup>], and there will be no more than 2 * 10<sup>5</sup> operations that change the values of the vertexes [C X V].
<p>There will be a blank line between two successive cases. A case with N = 0, M = 0 indicates the end of the input file and this case should not be processed by your program.</p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There are multiple test cases in the input file. Each case starts with two integers N and M (1 &lt;= N &lt;= 2 * 10<sup>4</sup>, 0 &lt;= M &lt;= 6 * 10<sup>4</sup>), the number of vertexes in the graph. The next N lines describes the initial weight of each vertex (-106 &lt;= weight[i] &lt;= 10<sup>6</sup>). The next part of each test case describes the edges in the graph at the beginning. Vertexes are numbered from 1 to N. The last part of each test case describes the operations to be performed on the graph. It is guaranteed that the number of query operations [Q X K] in each case will be in the range [1, 2 * 10<sup>5</sup>], and there will be no more than 2 * 10<sup>5</sup> operations that change the values of the vertexes [C X V].
<p>There will be a blank line between two successive cases. A case with N = 0, M = 0 indicates the end of the input file and this case should not be processed by your program.</p>
</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3 3
10
20
30
1 2
2 3
1 3
D 3
Q 1 2
Q 2 1
D 2
Q 3 2
C 1 50
Q 1 1
E

3 3
10
20
20
1 2
2 3
1 3
Q 1 1
Q 1 2
Q 1 3
E

0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case 1: 25.000000
Case 2: 16.666667

<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>For the first sample:
D 3 -- deletes the 3rd edge in the graph (the remaining edges are (1, 2) and (2, 3))
Q 1 2 -- finds the vertex with the second largest value among all vertexes connected with 1. The answer is 20.
Q 2 1 -- finds the vertex with the largest value among all vertexes connected with 2. The answer is 30.
D 2 -- deletes the 2nd edge in the graph (the only edge left after this operation is (1, 2))
Q 3 2 -- finds the vertex with the second largest value among all vertexes connected with 3.  The answer is 0 (Undefined).
C 1 50 -- changes the value of vertex 1 to 50.
Q 1 1 -- finds the vertex with the largest value among all vertex connected with 1. The answer is 50.
E -- This is the end of the current test case. Four queries have been evaluated, and the answer to this case is (20 + 30 + 0 + 50) / 4 = 25.000.

For the second sample, caution about the vertex with same weight:
	Q 1 1 �C the answer is 20
	Q 1 2 �C the answer is 20
	Q 1 3 �C the answer is 10

</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<p> </p>
<p>大白书上的一道题。</p>
<p>离线，倒着操作。</p>
<p>这样删除就会变成合并两颗树。</p>
<p> </p>
<pre class="brush:cpp"> #include &lt;iostream&gt;
 #include &lt;cstdio&gt;
 #include &lt;cstring&gt;
 #include &lt;algorithm&gt;
 #include &lt;vector&gt;
 
 #define KT ch[ch[root][1]][0]
 #define LC ch[x][0]
 #define RC ch[x][1]
 #define N 61001
 #define M 61000
 #define Q 500000
 using namespace std;
 
 
 int fa[N];
 int ch[N][2];
 int sz[N];
 int top1;
 int top2;
 int ss[N];
 int que[N];
 int nodque[N],top3;
 int val[N];
 int nodbelong[N];
 int ini[N];
 const int inf=1e9;
 vector&lt;int&gt; g[N];
 struct SplayTree{
     int root;
     void rotate(int x,bool f){
         int y=fa[x];
         int z=fa[y];
         pushdown(y);
         pushdown(x);
         ch[y][!f]=ch[x][f];
         fa[ch[x][f]]=y;
         fa[x]=z;
         if (z) {
             ch[z][ch[z][1]==y] = x;
         }
         ch[x][f] = y;
         fa[y]=x;
         pushup(y);
     }
     void splay(int x, int g) {
         int y = fa[x];
         pushdown(x);
         while(y!=g){
             int z= fa[y];
             bool f = (ch[y][0]==x);
             if(z != g &amp;&amp; f == (ch[z][0]==y)){
                 rotate(y,f);
             }
             rotate(x,f);
             y=fa[x];
         }
         pushup(x);
         if(g==0) root = x;
     }
     void rotateTo(int k,int g) {
         int x=root;
         pushdown(x);
         while(sz[LC] != k){
             if(k&lt;sz[LC]){
                 x=LC;
             }else{
                 k -= sz[LC] + 1;
                 x = RC;
             }
             pushdown(x);
         }
         splay(x,g);
     }
     void build(int l,int r,int f){
         if(l&gt;r){
             return ;
         }
         int x = (l + r) &gt;&gt; 1;
         LC = (x - 1 &gt;= l)? (x - 1 + l)&gt;&gt; 1 :0;
         RC = (r &gt;= x + 1)? (x + 1 + r)&gt;&gt; 1 :0;
         fa[x] = f;
         build(l,x - 1,x);
         build(x + 1,r,x);
         pushup(x);
     }
     void erase(int x){
         if(x==0)
             return;
         int father= fa[x];
         int head = 0, tail=0;
         for(que[tail++] =x ; head &lt; tail; head++){
             ss[top2++] = que[head];
             if(ch[que[head]][0]){
                 que[tail++]=ch[que[head]][0];
             }
             if(ch[que[head]][1]){
                 que[tail++] = ch[que[head]][1];
             }
         }
         ch[father][ch[father][1]==x]=0;
         pushup(father);
     }
     void makeTree(int &amp;x, int l, int r, int f ,vector&lt;int&gt;&amp; g){
         if(l &gt; r){
             return;
         }
         int m=(l+r)&gt;&gt;1;
         newNode(x, ini[g[m]],g[m]);
         makeTree(LC,l,m-1,x,g);
         makeTree(RC,m+1,r,x,g);
         fa[x]=f;
         pushup(x);
     }
     void treaval(int x){
         if (x) {
             pushdown(x);
             treaval(LC);
             printf("@%d",val[x]);
 
             //ans[cnt++]=val[x];
             treaval(RC);
         }
     }
     void dfs(int x){
         if (x) {
             pushdown(x);
             dfs(LC);
             nodque[top3++]=x;
             dfs(RC);
         }
     }
     void newNode(int &amp;x,int c,int id){
         if(id){
             x=id;//直接另节点号一致
         }
         else if(top2){
             x = ss[--top2];
         } else {
             x = ++top1;//top1从n+1，开始
         }
         LC = 0;
         RC = 0;
         fa[x] =0;
         sz[x] = 1;
 
         val[x]=c;
     }
     void pushdown(int x){
 
     }
     void pushup(int x){
         sz[x]=1+sz[LC]+sz[RC];
     }
 
     void debug(){
         treaval(root);
         cout&lt;&lt;endl;
     }
     void cutTo(int l,int r,int c){
         rotateTo(l-1,0);
         rotateTo(r+1,root);
         int tmp=KT;
         KT=0;
         pushup(ch[root][1]);
         pushup(root);
 
         rotateTo(c,0);
         rotateTo(c+1,root);
         fa[tmp]=ch[root][1];
         KT=tmp;
         pushup(ch[root][1]);
         pushup(root);
     }
 
     void init(vector&lt;int&gt;&amp;g){
 
         root=0;
         int n=g.size();
         newNode(root,inf,0);
         newNode(ch[root][1],-inf,0);
         fa[ch[root][1]]=root;
         //for(int i=1;i&lt;=n;i++)scanf("%d",&amp;num[i]);
         makeTree(KT,0,n-1,ch[root][1],g);
         pushup(ch[root][1]);
         pushup(root);
     }
     int size(){
         return sz[root]-2;
     }
     int find(int x,int v,int cur){
         if(val[x]&gt;=v){
             cur=x;
             return RC?find(RC,v,cur):cur;
         }else{
             return LC?find(LC,v,cur):cur;
         }
 //        if(val[LC]&lt;v){
 //            return find(LC,v);
 //        }else if(val[RC]&gt;v){
 //            return find(RC,v);
 //        }else
 //            return val[x]&lt;v?LC:RC;
     }
     void insert(int y){//将y节点插入splay
         int x=find(root,val[y],root);
         splay(x,0);
         int s=sz[LC]+1;
         rotateTo(s,root);
         fa[y]=ch[root][1];
         ch[y][0]=0;
         ch[y][1]=0;
         KT=y;
         sz[y]=1;
         pushup(ch[root][1]);
         pushup(root);
     }
     void merge(SplayTree spt){
         top3=0;
         spt.dfs(spt.root);
         rotateTo(1,0);
         int tmp=nodbelong[root];
         for(int i=1;i&lt;top3-1;i++){
             insert(nodque[i]);
             nodbelong[nodque[i]]=tmp;
         }
     }
     void change(int x,int k){
         splay(x,0);
         int s=sz[LC];
         rotateTo(s-1,0);
         rotateTo(s+1,root);
 
         KT=0;
         pushup(ch[root][1]);
         pushup(root);
 
         val[x]=k;
         insert(x);
     }
     int query(int k){
         if(k&gt;size()||k&lt;=0)return 0;
         rotateTo(k,0);
         return val[root];
     }
 
 }spt[N];
 
 struct edge{
     int flag;
     int to;
     int next;
 }e[M&lt;&lt;1];
 int head[N],num;
 void _add(int u,int v){
     e[num].flag=0;
     e[num].to=v;
     e[num].next=head[u];
     head[u]=num++;
 }
 void add(int u,int v){
     _add(u,v);
     _add(v,u);
 }
 struct Ques{
     char op;
     int x,k;
     void set(char o,int xx,int kk){
         op=o;
         x=xx;
         k=kk;
     }
 }questa[Q];
 int top4;
 int vis[N];
 
 void dfs(int x,int id){
     vis[x]=1;
     nodbelong[x]=id;
     for(int i=head[x];i!=-1;i=e[i].next)if(!e[i].flag&amp;&amp;!vis[e[i].to]){
         dfs(e[i].to,id);
     }
 }
 int cmp(int i,int j){
     return ini[i]&gt;ini[j];
 }
 void init(int n,int m){
     memset(head,-1,sizeof(int)*(n+1));
     num=top4=0;
     top1=n;top2=0;
     memset(vis,0,sizeof(int)*(n+1));
 }
 void solve( int n,int m){
 
     int u,v;
     int x,k;
     char op[10];
 
     init(n,m);
     for(int i=1;i&lt;=n;i++){
         scanf("%d",&amp;ini[i]);
     }
     for(int i=0;i&lt;m;i++){
         scanf("%d%d",&amp;u,&amp;v);
         add(u,v);
     }
     top4=0;
     while(scanf("%s",op),op[0]!='E'){
         if(op[0]=='D'){
             scanf("%d",&amp;x);
             int id=(x-1)*2;
             questa[top4++].set(op[0],e[id].to,e[id^1].to);
             e[id].flag=1;
             e[id^1].flag=1;
         }else if(op[0]=='Q'){
             scanf("%d%d",&amp;x,&amp;k);
             questa[top4++].set(op[0],x,k);
         }else{
             scanf("%d%d",&amp;x,&amp;k);
             questa[top4++].set(op[0],x,ini[x]);
             ini[x]=k;
         }
     }
     int cnt=0;
     for(int i=1;i&lt;=n;i++)if(!vis[i]){
         dfs(i,cnt++);
     }
     for(int i=1;i&lt;=n;i++){
         g[nodbelong[i]].push_back(i);
     }
     for(int i=0;i&lt;cnt;i++){
         sort(g[i].begin(),g[i].end(),cmp);
 //        for(int j=g[i].size()-1;j&gt;=0;j--){
 //            cout&lt;&lt;g[i][j]&lt;&lt;" ";
 //        }
 //        cout&lt;&lt;endl;
     }
     for(int i=0;i&lt;cnt;i++){
         spt[i].init(g[i]);
     }
 //    for(int i=0;i&lt;cnt;i++)
 //        cout&lt;&lt;spt[i].size()&lt;&lt;endl;
     double ans=0;
     int ret=0;
     while(top4--){
         char op=questa[top4].op;
         x=questa[top4].x;k=questa[top4].k;
         if(op=='D'){
             int id1=nodbelong[x];
             int id2=nodbelong[k];
             int sz1=spt[id1].size();
             int sz2=spt[id2].size();
             if(id1==id2)continue;
             if(sz1&gt;sz2){
                 spt[id1].merge(spt[id2]);
             }else{
                 spt[id2].merge(spt[id1]);
             }
         }else if(op=='C'){
             int id=nodbelong[x];
 
             spt[id].change(x,k);
         }else{
             int id=nodbelong[x];
             //spt[id].debug();
             //int t=spt[id].query(k);
             ans+=spt[id].query(k);
             //cout&lt;&lt;t&lt;&lt;endl;
             ret++;
         }
     }
     printf("%.6lf\n",(double)ans/ret);
     for(int i=0;i&lt;cnt;i++)g[i].clear();
 }
 int main()
 {
     int n,m;
 
     int cas=1;
     while(scanf("%d%d",&amp;n,&amp;m),n||m){
         printf("Case %d: ",cas++);
         solve(n,m);
     }
     return 0;
 }
</pre>
<p> </p>
<p>参考：http://www.cnblogs.com/youyouyou/p/3966574.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-73106">
<article class="comment" id="comment-73106">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919466215" rel="external nofollow">新用户172973</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-73106" rel="nofollow"><time datetime="2017-04-11T22:05:32+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好文章！支持一下PO主！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73105">
<article class="comment" id="comment-73105">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919466215" rel="external nofollow">新用户172973</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-73105" rel="nofollow"><time datetime="2017-04-11T22:05:32+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好文章！支持一下PO主！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73104">
<article class="comment" id="comment-73104">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919466215" rel="external nofollow">新用户172973</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-73104" rel="nofollow"><time datetime="2017-04-11T22:05:32+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好文章！支持一下PO主！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73103">
<article class="comment" id="comment-73103">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919466215" rel="external nofollow">新用户172973</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-73103" rel="nofollow"><time datetime="2017-04-11T22:05:32+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好文章！支持一下PO主！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73102">
<article class="comment" id="comment-73102">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919466215" rel="external nofollow">新用户172973</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-73102" rel="nofollow"><time datetime="2017-04-11T22:05:32+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好文章！支持一下PO主！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73101">
<article class="comment" id="comment-73101">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919466215" rel="external nofollow">新用户172973</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-73101" rel="nofollow"><time datetime="2017-04-11T22:05:32+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好文章！支持一下PO主！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73100">
<article class="comment" id="comment-73100">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919466215" rel="external nofollow">新用户172973</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-73100" rel="nofollow"><time datetime="2017-04-11T22:05:32+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好文章！支持一下PO主！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59549">
<article class="comment" id="comment-59549">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sharp</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-59549" rel="nofollow"><time datetime="2015-07-12T01:25:02+00:00" pubdate="">2015年7月12日 at 上午1:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我得邮箱cwqbupt@qq.com</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59552">
<article class="comment" id="comment-59552">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hwp</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-59552" rel="nofollow"><time datetime="2015-07-08T10:39:07+00:00" pubdate="">2015年7月8日 at 上午10:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好网站，肯定会火的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63984">
<article class="comment" id="comment-63984">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zclzcllove</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-63984" rel="nofollow"><time datetime="2015-06-30T08:15:24+00:00" pubdate="">2015年6月30日 at 上午8:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分三种情况讨论。Not Possible就是impossible</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-33321">
<article class="comment" id="comment-33321">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bcys</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-33321" rel="nofollow"><time datetime="2015-06-22T08:01:37+00:00" pubdate="">2015年6月22日 at 上午8:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>网站不错，支持一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63986">
<article class="comment" id="comment-63986">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HaibaraAi</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-63986" rel="nofollow"><time datetime="2015-06-15T06:58:31+00:00" pubdate="">2015年6月15日 at 上午6:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-33319">
<article class="comment" id="comment-33319">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">NiKaWaLi2015</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-33319" rel="nofollow"><time datetime="2015-06-01T11:55:46+00:00" pubdate="">2015年6月1日 at 上午11:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great work！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59550">
<article class="comment" id="comment-59550">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">super157</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-59550" rel="nofollow"><time datetime="2015-05-29T12:48:48+00:00" pubdate="">2015年5月29日 at 下午12:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，就是把这32位当成一个长度为32的数组</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63985">
<article class="comment" id="comment-63985">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sum_tsai</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-63985" rel="nofollow"><time datetime="2015-05-22T14:12:05+00:00" pubdate="">2015年5月22日 at 下午2:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给力，赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-33322">
<article class="comment" id="comment-33322">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ForgetVay</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-33322" rel="nofollow"><time datetime="2015-05-10T05:32:49+00:00" pubdate="">2015年5月10日 at 上午5:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>请不要灌水，多谢！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59551">
<article class="comment" id="comment-59551">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">leowww</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-59551" rel="nofollow"><time datetime="2015-05-01T11:15:13+00:00" pubdate="">2015年5月1日 at 上午11:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;<br/>
#include &lt;algorithm&gt;</p>
<p>struct LWPair{<br/>
    int l,w;<br/>
};</p>
<p>int main() {<br/>
    //freopen("input.txt","r",stdin);<br/>
    const int MAXSIZE=5000, MAXVAL=10000;<br/>
    LWPair sticks[MAXSIZE];<br/>
    int store[MAXSIZE];<br/>
    int ncase, nstick, length,width, tmp, time, i,j;<br/>
    if(scanf("%d",&amp;ncase)!=1) return -1;<br/>
    while(ncase– &amp;&amp; scanf("%d",&amp;nstick)==1) {<br/>
        for(i=0;i&lt;nstick;++i) scanf("%d%d",&amp;sticks <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> .l,&amp;sticks <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> .w);<br/>
        std::sort(sticks,sticks+nstick,[](const LWPair &amp;lhs, const LWPair &amp;rhs) { return lhs.l&gt;rhs.l || lhs.l==rhs.l &amp;&amp; lhs.w&gt;rhs.w; });<br/>
        for(time=-1,i=0;i&lt;nstick;++i) {<br/>
            tmp=sticks <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> .w;<br/>
            for(j=time;j&gt;=0 &amp;&amp; store <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> &gt;=tmp;–j) ; // search from right to left<br/>
            if(j==time) { store[++time]=tmp; }<br/>
            else { store[j+1]=tmp; }<br/>
        }<br/>
        printf("%dn",time+1);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50979">
<article class="comment" id="comment-50979">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">litao</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-50979" rel="nofollow"><time datetime="2015-04-29T17:47:06+00:00" pubdate="">2015年4月29日 at 下午5:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;</p>
<p>int main() {<br/>
	//answer must be odd<br/>
    int n, u, d;<br/>
    while(scanf("%d%d%d",&amp;n,&amp;u,&amp;d)==3 &amp;&amp; n&gt;0) {<br/>
        if(n&lt;=u) { puts("1"); continue; }<br/>
        n-=u; u-=d; n+=u-1; n/=u;<br/>
        n&lt;&lt;=1, ++n;<br/>
        printf("%dn",n);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-33320">
<article class="comment" id="comment-33320">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sharp</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-33320" rel="nofollow"><time datetime="2015-04-08T20:20:36+00:00" pubdate="">2015年4月8日 at 下午8:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序只能输出一个子序列</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63983">
<article class="comment" id="comment-63983">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">chengleisheng</a></span> on <a href="http://www.acmerblog.com/hdu-3726-graph-and-queries-6706.html#comment-63983" rel="nofollow"><time datetime="2015-03-06T14:34:34+00:00" pubdate="">2015年3月6日 at 下午2:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题目虽然简单，但是小编做的很到位，应该会给很多人启发吧！对于面试当中不给开辟额外空间的问题不是绝对的，实际上至少是允许少数变量存在的。之前遇到相似的问题也是恍然大悟，今天看到小编这篇文章相见恨晚。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>