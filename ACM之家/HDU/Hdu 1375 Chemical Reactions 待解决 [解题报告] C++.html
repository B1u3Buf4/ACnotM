<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-09</div>
<div class="tit"><h1 class="entry-title">Hdu 1375 Chemical Reactions 待解决 [解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观1615次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1807" href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comments" title="《Hdu 1375 Chemical Reactions 待解决 [解题报告] C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Chemical Reactions</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Bill teaches chemistry in the school and has prepared a number of tests for his students. Each test has a chemical formula and a number of possible reaction outcomes that his students are to choose one correct from. However, Bill wants to make sure that he has not made any typos while entering his tests into a computer and that his students won’t easily throw away wrong answers simply by counting a number of chemical elements on the left and on the right side of the equation, which should be always equal in a valid reaction.
<p>You are to write a program that will help Bill. The program shall read the description of the test for the students that consists of the given left side of the equation and a number of possible right sides, and determines if the number of chemical elements on each right side of the equation is equal to the number of chemical elements on the given left side of the equation.</p>
<p>To help you, poor computer folks, that are unaware of the complex world of chemistry, Bill has formalized your task. Each side of the equation is represented by a string of characters without spaces, and consists of one or more chemical sequences separated by a ‘+’ (plus) characters. Each sequence has an optional preceding integer multiplier that applies to the whole sequence and a number of elements. Each element is optionally followed by an integer multiplier that applies to it. An element in this equation can be either distinct chemical element or a whole sequence that is placed in round parenthesis. Every distinct chemical element is represented by either one capital letter or a capital letter that is followed by a small letter.</p>
<p>Even more formally, using notation that is similar to BNF, we can write:</p>
<p>~{!$~} &lt;formula&gt; ::= [&lt;number&gt;] &lt;sequence&gt; { ‘+’ [&lt;number&gt;] &lt;sequence&gt; }<br/>~{!$~} &lt;sequence&gt; ::= &lt;element&gt; [&lt;number&gt;] { &lt;element&gt; [&lt;number&gt;] }<br/>~{!$~} &lt;element&gt; ::= &lt;chem&gt; | ‘(‘ &lt;sequence&gt; ‘)’<br/>~{!$~} &lt;chem&gt; ::= &lt;uppercase_letter&gt; [ &lt;lowercase_letter&gt; ]<br/>~{!$~} &lt;uppercase_letter&gt; ::= ‘A’..’Z’<br/>~{!$~} &lt;lowercase_letter&gt; ::= ‘a’..’z’<br/>~{!$~} &lt;number&gt; ::= ’1′..’9′ { ’0′..’9′ }</p>
<p>Every distinct chemical element is said to occur in the given formula for some total number X, if X is the sum of all separate occurrences of this chemical element multiplied to all numbers that apply to it. For example, in the following chemical formula:</p>
<p>C2H5OH+3O2+3(SiO2)</p>
<p>C occurs for a total of 2 times.<br/>H occurs for a total of 6 times (5 + 1).<br/>O occurs for a total of 13 times (1 + 3*2 + 3*2).<br/>Si occurs for a total of 3 times.</p>
<p>All multipliers in the formula are integer numbers that are at least 2 if explicitly specified and are 1 by default. Each chemical formula is at most 100 characters long, and every distinct chemical element is guaranteed to occur for a total of no more than 10000 times in each formula. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of the input file represents a chemical formula that is to be tested as the left side of the equation. The second line of the input file contains a single integer number N (1 &lt;= N &lt;= 10), which is the number of right sides of the equation that are to be tested. Each one of the following N lines represents one such formula. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
You are to write to the output file N lines – one line per each possible answer of the chemical test for Bill’s students that is given in the input file. For each right-hand side formula that is encountered in the input file, write to the output file:
<p>&lt;left_formula&gt;==&lt;right_formula&gt;</p>
<p>if the total number of occurrences of each distinct chemical element on the left-hand side equals to the total number of occurrences of this chemical element on the right-hand side. Otherwise write:</p>
<p>&lt;left_formula&gt;!=&lt;right_formula&gt;</p>
<p>Here &lt;left_formula&gt; must be replaced exactly (character by character) with the original left-hand side formula as it is given in the first line of the input file, and &lt;right_formula&gt; must be replaced exactly with each right-hand side formula as they are given in the input file. Do not place any spaces in the lines you write to the output file.</p>
<p>This problem contains multiple test cases!</p>
<p>The first line of a multiple input is an integer N, then a blank line followed by N input blocks. Each input block is in the format indicated in the problem description. There is a blank line between input blocks.</p>
<p>The output format consists of N output blocks. There is a blank line between output blocks.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1

C2H5OH+3O2+3(SiO2)
7
2CO2+3H2O+3SiO2
2C+6H+13O+3Si
99C2H5OH+3SiO2
3SiO4+C2H5OH
C2H5OH+3O2+3(SiO2)+Ge
3(Si(O)2)+2CO+3H2O+O2
2CO+3H2O+3O2+3Si</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
C2H5OH+3O2+3(SiO2)==2CO2+3H2O+3SiO2
C2H5OH+3O2+3(SiO2)==2C+6H+13O+3Si
C2H5OH+3O2+3(SiO2)!=99C2H5OH+3SiO2
C2H5OH+3O2+3(SiO2)==3SiO4+C2H5OH
C2H5OH+3O2+3(SiO2)!=C2H5OH+3O2+3(SiO2)+Ge
C2H5OH+3O2+3(SiO2)==3(Si(O)2)+2CO+3H2O+O2
C2H5OH+3O2+3(SiO2)!=2CO+3H2O+3O2+3Si</pre>
<p> <!-- problem end --></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-12865">
<article class="comment" id="comment-12865">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">a997930294</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12865" rel="nofollow"><time datetime="2015-07-10T05:32:24+00:00" pubdate="">2015年7月10日 at 上午5:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>从数学角度确实是C(n,r)，能给个递推关系式吗，从分治的角度不好理解</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12873">
<article class="comment" id="comment-12873">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ssjssh</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12873" rel="nofollow"><time datetime="2015-07-07T02:15:26+00:00" pubdate="">2015年7月7日 at 上午2:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12864">
<article class="comment" id="comment-12864">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wynk0804</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12864" rel="nofollow"><time datetime="2015-02-05T17:45:27+00:00" pubdate="">2015年2月5日 at 下午5:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么不直接用STL排序呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40785">
<article class="comment" id="comment-40785">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wawa</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-40785" rel="nofollow"><time datetime="2015-01-19T00:15:19+00:00" pubdate="">2015年1月19日 at 上午12:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序员会算法，等于一个古惑仔带了zhi抢啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12868">
<article class="comment" id="comment-12868">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Spike</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12868" rel="nofollow"><time datetime="2014-12-06T19:51:08+00:00" pubdate="">2014年12月6日 at 下午7:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主您好，这是一个内容十分优秀的博客，而且界面也非常漂亮。但是为什么博客的响应速度这么慢，虽然博客的主机在国外，但是我开启VPN还是经常响应很久，再者打开某些页面经常会出现数据库连接出错的提示</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54667">
<article class="comment" id="comment-54667">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xrjervis</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-54667" rel="nofollow"><time datetime="2014-10-14T01:27:51+00:00" pubdate="">2014年10月14日 at 上午1:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>楼主你能把scanf( "%d%*" ,&amp;T );中%*的用法详细说明吗</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12866">
<article class="comment" id="comment-12866">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">lintong</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12866" rel="nofollow"><time datetime="2014-10-03T18:14:27+00:00" pubdate="">2014年10月3日 at 下午6:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>全是智力分析的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12871">
<article class="comment" id="comment-12871">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">la0bei</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12871" rel="nofollow"><time datetime="2014-09-15T04:45:50+00:00" pubdate="">2014年9月15日 at 上午4:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12870">
<article class="comment" id="comment-12870">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xin</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12870" rel="nofollow"><time datetime="2014-08-16T00:22:49+00:00" pubdate="">2014年8月16日 at 上午12:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，现在就缺少新的资料</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12874">
<article class="comment" id="comment-12874">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jandk</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12874" rel="nofollow"><time datetime="2014-08-14T07:56:51+00:00" pubdate="">2014年8月14日 at 上午7:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Java真是解决大数的利器</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12872">
<article class="comment" id="comment-12872">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">helloacm</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12872" rel="nofollow"><time datetime="2014-06-11T11:54:18+00:00" pubdate="">2014年6月11日 at 上午11:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>题本身没错，但是HDOJ放题目的时候，前面有个题目解释了什么是XXX定律。<br/>
这里直接放了这个题目，肯定没几个人明白是干啥</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12869">
<article class="comment" id="comment-12869">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">spiderMan</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12869" rel="nofollow"><time datetime="2014-05-16T09:35:43+00:00" pubdate="">2014年5月16日 at 上午9:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>一开始就规定不相邻节点颜色相同，可能得不到最优解。我想个类似的算法，也不确定是否总能得到最优解：先着一个点，随机挑一个相邻点，着第二色，继续随机选一个点，但必须至少有一个边和已着点相邻，着上不同色，当然尽量不增加新色，直到完成。我还找不到反例验证他的错误。。希望LZ也帮想想, 有想法欢迎来邮件。谢谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12867">
<article class="comment" id="comment-12867">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tkdzyl2013</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-12867" rel="nofollow"><time datetime="2014-05-03T03:38:16+00:00" pubdate="">2014年5月3日 at 上午3:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>map[nodes <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> .index][nodes <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> .index] == 0 就是判断不相邻的。这个是可以证明的。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54666">
<article class="comment" id="comment-54666">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yesMan</a></span> on <a href="http://www.acmerblog.com/hdu-1375-Chemical-Reactions-1807.html#comment-54666" rel="nofollow"><time datetime="2014-04-03T06:21:23+00:00" pubdate="">2014年4月3日 at 上午6:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>居然是机试，还和13年重复。题目不难</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>