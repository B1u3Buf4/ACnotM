<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>09-17</div>
<div class="tit"><h1 class="entry-title">HDU 4649-Professor Tian-概率-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math/probability" rel="category tag" title="查看概率计算中的全部文章">概率计算</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观66次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7694" href="http://www.acmerblog.com/hdu-4649-professor-tian-7694.html#comments" title="《HDU 4649-Professor Tian-概率-[解题报告]HOJ》上的评论">一条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
Timer took the Probability and Mathematical Statistics course in the 2012, But his bad attendance angered Professor Tian who is in charge of the course. Therefore, Professor Tian decided to let Timer face a hard probability problem, and announced that if he<br/>
 fail to slove the problem there would be no way for Timer to pass the final exam. <br/>
As a result , Timer passed. <br/>
Now, you, the bad guy, also angered the Professor Tian when September Ends. You have to faced the problem too. The problem comes that there is an expression and you should calculate the excepted value of it. And the operators it may contains are ‘&amp;’ (and),’|'(or)<br/>
 and ‘^’(xor) which are all bit operators. For example: 7&amp;3=3, 5&amp;2=0, 2|5=7, 4|10=14, 6^5=3, 3^4=7.<br/>
Professor Tian declares that each operator O<sub>i</sub> with its coming number A<sub>i+1</sub> may disappear, and the probability that it happens is P<sub>i</sub> (0&lt;i&lt;=n). 
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
The input contains several test cases. For each test case, there is a integer n (0&lt;n&lt;=200) in the first line.In the second line, there are n+1 integers, stand for {A<sub>i</sub>}. The next line contains n operators ,stand for {O<sub>i</sub>}. The forth line<br/>
 contains {P<sub>i</sub>}. <br/>
A<sub>i</sub> will be less than 2<sup>20</sup>, 0&lt;=P<sub>i</sub>&lt;=1.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
For each text case, you should print the number of text case in the first line.Then output the excepted value of the expression, round to 6 decimal places.
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="word-wrap:break-word; white-space:pre-wrap; margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">2
1 2 3
^ ^
0.1 0.2
2
8 9 10
^ ^
0.5 0.78
1
1 2
&amp;
0.5</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:14px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="word-wrap:break-word; white-space:pre-wrap; margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">Case 1:
0.720000
Case 2:
4.940000
Case 3:
0.500000</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
 </div>
<div>
</div>
<div>题意：</div>
<div>给你一个式子，第i位有pi说的概率消失掉，要计算最后值的期望</div>
<div>
</div>
<div>思路：</div>
<div>每个数二进制最多20位，我们对每一位为1的情况进行计算即可</div>
<div>
</div>
<div>
<pre class="brush:cpp" name="code">#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stack&gt;
#include &lt;queue&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;math.h&gt;
#include &lt;bitset&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
using namespace std;

#define ls 2*i
#define rs 2*i+1
#define UP(i,x,y) for(i=x;i&lt;=y;i++)
#define DOWN(i,x,y) for(i=x;i&gt;=y;i--)
#define MEM(a,x) memset(a,x,sizeof(a))
#define W(a) while(a)
#define gcd(a,b) __gcd(a,b)
#define LL long long
#define N 205
#define MOD 1000000007
#define INF 0x3f3f3f3f
#define EXP 1e-8
#define rank rank1
const int mod = 10007;

int n,a[N];
double dp[N],p[N],ans;
char op[N][5];

int main()
{
    int i,j,k,cas=1;
    while(~scanf("%d",&amp;n))
    {
        for(i = 0; i&lt;=n; i++)
            scanf("%d",&amp;a[i]);
        for(i = 1; i&lt;=n; i++)
            scanf("%s",op[i]);
        for(i = 1; i&lt;=n; i++)
            scanf("%lf",&amp;p[i]);
        ans = 0;
        for(i = 0; i&lt;=20; i++)
        {
            double q;
            if(a[0]&amp;(1&lt;&lt;i)) q = 1;
            else q = 0;
            for(j = 1; j&lt;=n; j++)
            {
                if(a[j]&amp;(1&lt;&lt;i))
                {
                    if(op[j][0]=='&amp;')
                        continue;
                    else if(op[j][0]=='^')
                        q = q*p[j]+(1-q)*(1-p[j]);
                    else
                        q = q*p[j]+(1-p[j]);
                }
                else
                {
                    if(op[j][0]=='&amp;')
                        q = q*p[j];
                    else
                        continue;
                }
            }
            ans += q*(1&lt;&lt;i);
        }
        printf("Case %d:\n%lf\n",cas++,ans);
    }

    return 0;
}
</pre>
</div>
<div>
</div>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/libin56842/article/details/46929207</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97195">
<article class="comment" id="comment-97195">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515430" rel="external nofollow">新用户860391</a></span> on <a href="http://www.acmerblog.com/hdu-4649-professor-tian-7694.html#comment-97195" rel="nofollow"><time datetime="2017-04-20T00:52:34+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那是因为你没有另外一半啦~~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>