<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">HDU 4304-Let’s Hit Our Head!-数论-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观166次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7315" href="http://www.acmerblog.com/hdu-4304-lets-hit-our-head-7315.html#comments" title="《HDU 4304-Let’s Hit Our Head!-数论-[解题报告]HOJ》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Let’s Hit Our Head!</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Kingdom LHOH is celebrating its annual carnival again!This time another crazy game is now on show.N*N piles of brick here lying on the ground in a straight line, and N brave fellows have attended.<br/>First they should each choose a distinct piles brick to stand behind, forming a line parrelling to the brick, and facing the same side, watching at his piles of brick.<br/>Then their captain can yelled out 3 commands, described below:<br/>A "LEFT!" Every one should move so that he is behind the left piles of the original one.  <br/>B "RIGHT!" Every one should move so that he is behind the right piles of the original one.  <br/>C "HIT!" Every one should break all the piles of brick before him with only his head slamming them.
<p>A little constraints are showed below:<br/>In every step, when command A or B have been yelled out, no one should move outside, that is, for everyone after his moving, brick(even breaked up) is there before him,and when command C is to be yelled out, intact piles of brick must be there before every one, so that he cannot slamming brick that it already breaked up, and only that is fair to everyone.<br/>Not until all piles of brick have been successfully breaked up with the brave fellows’ heads, this game is successfully finished.<br/>Now the question is,the crazy captain wants to know how many initial options are there,satisfying for each initial option he always chooses the first piles, other members choose their own distinct ones,and the game can be finished successfully at the same time?<br/>We assume the other members except the captain cannot be told out. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
First there’s an integer T(T&lt;=15000) indicating the scenary numbers.<br/>Then there’s T lines represented for the scenaries, with an integer N(1&lt;=N&lt;=10^12) in each line. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
First there’s an integer T(T&lt;=15000) indicating the scenary numbers.<br/>Then there’s T lines represented for the scenaries, with an integer N(1&lt;=N&lt;=10^12) in each line.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
10
1
2
3
4
8
16
6469693228
6469693229
6469693230
1024</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1
2
2
6
20
70
84
14
8787513806478134
184756</pre>
<p> <!-- problem end --></p>
<p>题意我觉得还是好理解的。 我感觉就是有n*n堆石头，有n个人，每人挑个石堆站在后面。</p>
<p>三种操作：<a>http://acm.hdu.edu.cn/showproblem.php?pid=4304</a></p>
<p>     1. 人全部右移（石头不动）。</p>
<p>     2. 人全部左移。</p>
<p>     3. 将自己面前的石头全部用脑袋砸碎。</p>
<p>满足条件：</p>
<p>    1.左右移的时候不能移出去，就是每人面前都得有一堆石头，无论是坏的还是好的。</p>
<p>    2.砸的时候只能砸未砸过的石头。</p>
<p>最后将全部石头砸碎就行。 问第一堆石头必须有人站在后面的能成功的开始状态有几种。
</p>
<p>然后题解就Orz，真不会了。莫名奇妙就转化成因数分解和排列了。</p>
<p>
</p>
<p>以下是多校解题报告：</p>
<p>这个问题等价于把N因数分解，不能有1<br/>
然后将序列交替组合的方案数算出来就可以了</p>
<p>比如6=2*3<br/>
我们有[6],[2,3],[3,2]<br/>
交替组合有<br/>
A6B6 B6A6<br/>
A2B6A3 A3B6A2 B2A6B3 B3A6B2<br/>
A2B2A3B3 A2B3A3B2 A3B3A2B2 A3B2A2B3<br/>
B2A2B3A3 B2A3B3A2 B3A3B2A2 B3A2B2A3<br/>
共14种</p>
<p>再比如8=2*2*2=2*4<br/>
我们有[8],[2,4],[4,2],[2,2,2]<br/>
交替组合有<br/>
A8B8 B8A8<br/>
A2B8A4 A4B8A2 B2A8B4 B4A8B2<br/>
A2B2A4B4 A2B4A4B2 A4B2A2B4 A4B4A2B2<br/>
B2A2B4A4 B2A4B4A2 B4A2B2A4 B4A4B2A2<br/>
A2B2A2B4A2 A2B4A2B2A2 B2A2B2A4B2 B2A4B2A2B2<br/>
A2B2A2B2A2B2 B2A2B2A2B2A2<br/>
共20种
</p>
<pre class="brush:cpp" name="code">#include &lt;cstdio&gt;
#include &lt;cstring&gt;

int coef[20],delt[20],inx[20],base[20];
int mark[1000010],pri[1000010],priN;
__int64 dp[2000][20];

void init()
{
    int i,j;
    for(i=2; i&lt;=1000000; i++) mark[i]=i;
    for(i=2; i&lt;=1000000; i++)
    {
        if(mark[i]==i) pri[priN++]=i;
        for(j=0; j&lt;priN&amp;&amp;i*pri[j]&lt;=1000000; j++)
        {
            mark[i*pri[j]]=pri[j];
            if(i%pri[j]==0) break;
        }
    }
}

void deal()
{
    __int64 u,ans,num,t,tmpv;
    int cnt,i,j,k,l,prod,tot,amn,m;
    scanf("%I64d", &amp;u);
    for(cnt=0,num=u; num-1;)
    {
        if(num&gt;1000000)
        {
            t=num;
            for(j=0; j&lt;priN; j++)
            {
                if(num%pri[j]==0)
                {
                    t=pri[j];
                    break;
                }
            }
        }
        else t=mark[num];
        inx[cnt]=0;
        while(num%t==0) num/=t,inx[cnt]++;
        cnt++;
    }
    for(tot=0,prod=1,i=cnt-1; i&gt;=0; i--)
    {
        tot+=inx[i],base[i]=prod,prod*=(inx[i]+1);
    }
    for(i=0; i&lt;=tot; i++) for(j=0; j&lt;prod; j++) dp[j][i]=0;
    dp[0][0]=1;
    for(i=1; i&lt;prod; i++)
    {
        for(j=0; j&lt;cnt; j++) delt[j]=i/base[j]%(inx[j]+1);
        for(j=prod-1; j&gt;=0; j--)
        {
            amn=0x3fffffff;
            for(k=0; k&lt;cnt; k++)
            {
                coef[k]=j/base[k]%(inx[k]+1);
                if(delt[k])
                {
                    tmpv=(inx[k]-coef[k])/delt[k];
                    if(tmpv&lt;amn) amn=tmpv;
                }
            }
            for(l=1; l&lt;=amn; l++)
            {
                for(k=0; k+l&lt;=tot; k++)
                {
                    tmpv=dp[j][k];
                    for(m=1; m&lt;=l; m++) tmpv*=m+k,tmpv/=m;
                    dp[j+i*l][k+l]+=tmpv;
                }
            }
        }
    }
    for(ans=dp[prod-1][tot]*dp[prod-1][tot],i=0; i&lt;tot; i++)
    {
        ans+=(dp[prod-1][i]+dp[prod-1][i+1])*(dp[prod-1][i]+dp[prod-1][i+1]);
    }
    printf("%I64d\n", ans);
}

int main()
{
    init();
    int t;
    scanf("%d", &amp;t);
    while(t--) deal();
    return 0;
}</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/julyana_lin/article/details/8066893</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98919">
<article class="comment" id="comment-98919">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919459140" rel="external nofollow">新用户443728</a></span> on <a href="http://www.acmerblog.com/hdu-4304-lets-hit-our-head-7315.html#comment-98919" rel="nofollow"><time datetime="2017-04-20T14:27:50+00:00" pubdate="">2017年4月20日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>二战时期的活塞式战机挂载能力十分有限，和现代战机没法比，即使挂副油箱容量也不会大，阻力和载荷却大增，得不偿失。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68618">
<article class="comment" id="comment-68618">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919528076" rel="external nofollow">新用户128698</a></span> on <a href="http://www.acmerblog.com/hdu-4304-lets-hit-our-head-7315.html#comment-68618" rel="nofollow"><time datetime="2017-04-11T07:10:16+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>像dnf剑魂的幻影剑舞</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>