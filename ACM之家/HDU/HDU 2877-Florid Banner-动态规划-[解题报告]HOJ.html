<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-17</div>
<div class="tit"><h1 class="entry-title">HDU 2877-Florid Banner-动态规划-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观400次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4520" href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comments" title="《HDU 2877-Florid Banner-动态规划-[解题报告]HOJ》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Florid Banner</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Adam C. Murphy loves shopping. One day, when he was wandering along the avenue, he discovered several stores with florid banners. (A 2*5 example is shown below)<br/><center><img src="http://www.acmerblog.com/img/1392912118631.jpg"/></center> <br/>He found them fantastic and decided to get one in order to decorate his fresh new house. Unfortunately, no one meets Adam’s requirement, after visiting all stores nearby. What was worse, all banners left in the stores only have width 1. So he decided to make one himself by sewing them together.<br/>Adam wants to make a banner exactly as he designed. He didn’t want to flip or rotate the materials he had, since he believed that keep it in its original way is more beautiful. And he didn’t want to cut the banners for the same reason.<br/>Each material had different prices, so he wants to make his florid banner with minimum cost. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input consists of one or more test cases.<br/>Each test case contains two parts.<br/>The first part of the input describes the banner Mr. Murphy designed.<br/>First line: <br/>Two integers M (0&lt;M&lt;=10) and N (0&lt;N&lt;=10,000), describes the width and the length of the banner.
<p>Second line: <br/>One integer t states that the banner has t regions.</p>
<p>Following t lines: <br/>Each line has 5 integers x1,y1,x2,y2,c, represents a region from (x1,y1), the left bottom corner, to (x2,y2), the right top corner, and the color type of this region is c.<br/>The whole banner is M*N, with its left bottom located at (0, 0). It is guaranteed that t regions can exactly cover the whole banner once. (0&lt;=x1&lt;x2&lt;=M, 0&lt;=y1&lt;y2&lt;=N)</p>
<p>The second part describes the materials left in the store. No need to worry about the number of them, because they are infinity.<br/>The first line: <br/>The number of materials fn(0&lt;=fn&lt;=10000)</p>
<p>Following fn lines: <br/>Each line represents one kind of material. Following an integer P(P&gt;0) indicates the price, and an integer L(1&lt;=L&lt;=20) indicates the length of this banner. Then L integers for this material, i-th number indicates the color at position range from (0,i-1) to (1,i).</p>
<p>You may assume that the number of colors is no more than 30.<br/>Input will be terminated by EOF. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The input consists of one or more test cases.<br/>Each test case contains two parts.<br/>The first part of the input describes the banner Mr. Murphy designed.<br/>First line: <br/>Two integers M (0&lt;M&lt;=10) and N (0&lt;N&lt;=10,000), describes the width and the length of the banner.
<p>Second line: <br/>One integer t states that the banner has t regions.</p>
<p>Following t lines: <br/>Each line has 5 integers x1,y1,x2,y2,c, represents a region from (x1,y1), the left bottom corner, to (x2,y2), the right top corner, and the color type of this region is c.<br/>The whole banner is M*N, with its left bottom located at (0, 0). It is guaranteed that t regions can exactly cover the whole banner once. (0&lt;=x1&lt;x2&lt;=M, 0&lt;=y1&lt;y2&lt;=N)</p>
<p>The second part describes the materials left in the store. No need to worry about the number of them, because they are infinity.<br/>The first line: <br/>The number of materials fn(0&lt;=fn&lt;=10000)</p>
<p>Following fn lines: <br/>Each line represents one kind of material. Following an integer P(P&gt;0) indicates the price, and an integer L(1&lt;=L&lt;=20) indicates the length of this banner. Then L integers for this material, i-th number indicates the color at position range from (0,i-1) to (1,i).</p>
<p>You may assume that the number of colors is no more than 30.<br/>Input will be terminated by EOF.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2 5
7
0 0 2 1 0
1 1 2 3 0
0 1 1 2 1
0 2 1 3 2
0 3 2 4 1
0 4 1 5 3
1 4 2 5 2
5
1 3 0 0 0
2 3 2 1 3
2 3 0 1 2
1 2 1 3
5 1 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
15
<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
Hint

The pattern of the sample is as follows:
<center><img src="http://cdn.acmerblog.com/img/1392912118747.jpg"/></center> 
</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<p>题目描述：给定一个矩阵，只能一行一行构造，给定不同的串和构造使用的费用，问最小费用。</p>
<p>解法：dp+trie</p>
<p>本来是一个很傻逼的题目，但是一直过不去，最后发现原来是给定颜色是不一定是从0开始编号的，可能是随机的。。。。。我勒个去。。。</p>
<p></p>
<pre class="brush: cpp;toolbar:false;">#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;
#include &lt;cstdlib&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
using namespace std;
 
const int INF=0x3f3f3f3f;
typedef long long ll;
const int M=10005;
const int mod=1e9+7;
const double eps=1e-6;
const double Pi=2*acos(0.0);
 
inline int max(int a,int b){return a&gt;b?a:b;}
inline int min(int a,int b){return a&lt;b?a:b;}
inline int bit(int x){return 1&lt;&lt;x;}
inline double dabs(double x){return x&gt;0?x:(-x);}
inline int abs(int x){return x&gt;0?x:(-x);}
inline int lowbit(int x){return x&amp;(-x);}
 
int t,n,m,tail;
short ma[12][10010];
int dp[10010],color[30],cnt;
struct node{
    int next[30],val;
}trie[180000];
 
void init(){
    tail=1;
    cnt=0;
    memset(trie,-1,sizeof(trie));
}
 
int find(int num){
    for(int i=0;i&lt;cnt;i++)
        if(color[i]==num)
            return i;
    color[cnt++]=num;
    return cnt-1;
}
 
void add(int c,int l){
    int now=0,tmp;
    for(int i=0;i&lt;l;i++){
        scanf("%d",&amp;tmp);
        tmp=find(tmp);
        if(trie[now].next[tmp]==-1)
            trie[now].next[tmp]=tail++;
        now=trie[now].next[tmp];
    }
    if(trie[now].val==-1)
        trie[now].val=c;
    else
        trie[now].val=min(trie[now].val,c);
}
 
void getdp(int x){
    memset(dp,-1,sizeof(dp));
    dp[0]=0;
    for(int i=1;i&lt;=m;i++){
        if(dp[i-1]==-1) continue;
        int tmp=trie[0].next[ma[x][i]],j=i;
        while(tmp!=-1&amp;&amp;j&lt;=m){
            if(trie[tmp].val!=-1){
                if(dp[j]==-1)
                    dp[j]=dp[i-1]+trie[tmp].val;
                else
                    dp[j]=min(dp[j],dp[i-1]+trie[tmp].val);
            }
            tmp=trie[tmp].next[ma[x][++j]];
        }
    }
}
 
int main(){
    int x1,x2,y1,y2,c,l;
    while(~scanf("%d %d",&amp;n,&amp;m)){
        init();
        scanf("%d",&amp;t);
        while(t--){
            scanf("%d%d%d%d%d",&amp;x1,&amp;y1,&amp;x2,&amp;y2,&amp;c);
            c=find(c);
            for(int i=x1;i&lt;x2;i++)
            for(int j=y1;j&lt;y2;j++)
                ma[i][j+1]=c;
        }
        scanf("%d",&amp;t);
        while(t--){
            scanf("%d",&amp;c);
            scanf("%d",&amp;l);
            add(c,l);
        }
        int ans=0;
        bool jud=0;
        for(int i=0;i&lt;n;i++){
            getdp(i);
            ans+=dp[m];
            if(dp[m]&lt;0) {
                jud=1;
                break;
            }
        }
        if(jud) puts("impossible");
        else printf("%d\n",ans);
    }
    return 0;
}</pre>
<p></p>
<p> 解题参考：http://hi.baidu.com/isaacpei/item/efdbf048702c6232fa89602a</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-81549">
<article class="comment" id="comment-81549">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919527180" rel="external nofollow">新用户168122</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-81549" rel="nofollow"><time datetime="2017-04-12T18:13:50+00:00" pubdate="">2017年4月12日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>首先，你还不是享受过程？其次，你可以不当通讯作者。再次，连署名权都没有的爷爷奶奶才是维护主力吧？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46820">
<article class="comment" id="comment-46820">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">303589828</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-46820" rel="nofollow"><time datetime="2015-06-28T15:55:47+00:00" pubdate="">2015年6月28日 at 下午3:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有没有C++语言的代码？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57552">
<article class="comment" id="comment-57552">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">NiKaWaLi2015</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57552" rel="nofollow"><time datetime="2015-05-30T14:44:54+00:00" pubdate="">2015年5月30日 at 下午2:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>使用代码高亮的插件，再修改下css</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57558">
<article class="comment" id="comment-57558">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Emlar</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57558" rel="nofollow"><time datetime="2015-05-10T22:04:11+00:00" pubdate="">2015年5月10日 at 下午10:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这一题的代码这样提交时错误的~少考虑了很多情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57551">
<article class="comment" id="comment-57551">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">actlea</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57551" rel="nofollow"><time datetime="2015-02-23T02:46:13+00:00" pubdate="">2015年2月23日 at 上午2:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，再多来的CF上面的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57559">
<article class="comment" id="comment-57559">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bobo</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57559" rel="nofollow"><time datetime="2015-01-31T03:30:16+00:00" pubdate="">2015年1月31日 at 上午3:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>此网站甚是喜欢，潜力巨大，请问站长，如何加入开发团队~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46819">
<article class="comment" id="comment-46819">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mcitdkj</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-46819" rel="nofollow"><time datetime="2014-11-24T08:36:34+00:00" pubdate="">2014年11月24日 at 上午8:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题选错了，答案是A</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57553">
<article class="comment" id="comment-57553">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">spiderMan</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57553" rel="nofollow"><time datetime="2014-11-06T23:44:15+00:00" pubdate="">2014年11月6日 at 下午11:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>3，求得所有的为的总和sum—-&gt;所有数的总和<br/>
printf( "Not Possible" );—-&gt;printf("impossible");<br/>
对吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57560">
<article class="comment" id="comment-57560">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">edward2414</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57560" rel="nofollow"><time datetime="2014-10-02T13:42:12+00:00" pubdate="">2014年10月2日 at 下午1:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>mark, 很巧妙的实现！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57554">
<article class="comment" id="comment-57554">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">dreams</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57554" rel="nofollow"><time datetime="2014-09-08T05:00:20+00:00" pubdate="">2014年9月8日 at 上午5:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>根本过不了。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57556">
<article class="comment" id="comment-57556">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">haojunyu</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57556" rel="nofollow"><time datetime="2014-07-31T06:52:15+00:00" pubdate="">2014年7月31日 at 上午6:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>能不能说一下tmp数组和solve都是干嘛的？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57561">
<article class="comment" id="comment-57561">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">JcZ</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57561" rel="nofollow"><time datetime="2014-05-22T23:16:57+00:00" pubdate="">2014年5月22日 at 下午11:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一个数表示数列的个数，5表示之后有5个数</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46821">
<article class="comment" id="comment-46821">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Emlar</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-46821" rel="nofollow"><time datetime="2014-04-29T08:48:09+00:00" pubdate="">2014年4月29日 at 上午8:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>wt[n - 1]没错，因为下标是[0...n-1]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57555">
<article class="comment" id="comment-57555">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">weijieut</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57555" rel="nofollow"><time datetime="2014-04-04T03:00:05+00:00" pubdate="">2014年4月4日 at 上午3:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/good_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_org.gif"/> </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57557">
<article class="comment" id="comment-57557">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">GordonTJ</a></span> on <a href="http://www.acmerblog.com/hdu-2877-florid-banner-4520.html#comment-57557" rel="nofollow"><time datetime="2014-03-25T23:52:35+00:00" pubdate="">2014年3月25日 at 下午11:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thanks for taking the time to examine this, I really feel strongly about it and love studying a lot more on this topic. If possible, as you acquire experience</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>