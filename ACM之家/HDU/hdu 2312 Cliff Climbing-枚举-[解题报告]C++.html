<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>01-05</div>
<div class="tit"><h1 class="entry-title">hdu 2312 Cliff Climbing-枚举-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/search" rel="category tag" title="查看搜索中的全部文章">搜索</a>, <a href="http://www.acmerblog.com/category/basis/enumeration" rel="category tag" title="查看枚举中的全部文章">枚举</a></span><span class="i4">围观1170次</span><span class="i3"><a class="ds-thread-count" data-thread-key="3541" href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comments" title="《hdu 2312 Cliff Climbing-枚举-[解题报告]C++》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Cliff Climbing</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
At 17:00, special agent Jack starts to escape from the enemy camp. There is a cliff in between the camp and the nearest safety zone. Jack has to climb the almost vertical cliff by stepping his feet on the blocks that cover the cliff. The cliff has slippery blocks where Jack has to spend time to take each step. He also has to bypass some blocks that are too loose to support his weight. Your mission is to write a program that calculates the minimum time to complete climbing.
<p>Figure D-1 shows an example of cliff data that you will receive. The cliff is covered with square blocks. Jack starts cliff climbing from the ground under the cliff, by stepping his left or right foot on one of the blocks marked with ‘S’ at the bottom row. The numbers on the blocks are the "slippery levels". It takes t time units for him to safely put his foot on a block marked with t, where 1 ≤ t ≤ 9. He cannot put his feet on blocks marked with ‘X’. He completes the climbing when he puts either of his feet on one of the blocks marked with ‘T’ at the top row. <br/> <img src="http://www.acmerblog.com/img/1388997142386.png"/> <br/>Figure D-1: Example of Cliff Data</p>
<p>Jack’s movement must meet the following constraints. After putting his left (or right) foot on a block, he can only move his right (or left, respectively) foot. His left foot position (lx, ly) and his right foot position (rx, ry) should satisfy lx &lt; rx and | lx – rx | + | ly – ry | ≤ 3. This implies that, given a position of his left foot in Figure D-2 (a), he has to place his right foot on one of the nine blocks marked with blue color. Similarly, given a position of his right foot in Figure D-2 (b), he has to place his left foot on one of the nine blocks marked with blue color.<br/> <img src="http://www.acmerblog.com/img/1388997142715.png"/> <br/>Figure D-2: Possible Placements of Feet </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input is a sequence of datasets. The end of the input is indicated by a line containing two zeros separated by a space. Each dataset is formatted as follows:
<p>    w h<br/>    s(1,1) … s(1,w)<br/>    s(2,1) … s(2,w)<br/>    …<br/>    s(h,1) … s(h,w)</p>
<p>The integers w and h are the width and the height of the matrix data of the cliff. You may assume 2 ≤ w ≤ 30 and 5 ≤ h ≤ 60. Each of the following h lines consists of w characters delimited by a space. The character s(y, x) represents the state of the block at position (x, y) as follows:</p>
<p>    * ‘S’: Jack can start cliff climbing from this block.<br/>    * ‘T’: Jack finishes climbing when he reaches this block.<br/>    * ‘X’: Jack cannot put his feet on this block.<br/>    * ’1′ – ’9′ (= t): Jack has to spend t time units to put either of his feet on this block. </p>
<p>　</p>
<p>You can assume that it takes no time to put a foot on a block marked with ‘S’ or ‘T’. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The input is a sequence of datasets. The end of the input is indicated by a line containing two zeros separated by a space. Each dataset is formatted as follows:
<p>    w h<br/>    s(1,1) … s(1,w)<br/>    s(2,1) … s(2,w)<br/>    …<br/>    s(h,1) … s(h,w)</p>
<p>The integers w and h are the width and the height of the matrix data of the cliff. You may assume 2 ≤ w ≤ 30 and 5 ≤ h ≤ 60. Each of the following h lines consists of w characters delimited by a space. The character s(y, x) represents the state of the block at position (x, y) as follows:</p>
<p>    * ‘S’: Jack can start cliff climbing from this block.<br/>    * ‘T’: Jack finishes climbing when he reaches this block.<br/>    * ‘X’: Jack cannot put his feet on this block.<br/>    * ’1′ – ’9′ (= t): Jack has to spend t time units to put either of his feet on this block. </p>
<p>　</p>
<p>You can assume that it takes no time to put a foot on a block marked with ‘S’ or ‘T’.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
6 6
4 4 X X T T
4 7 8 2 X 7
3 X X X 1 8
1 2 X X X 6
1 1 2 4 4 7
S S 2 3 X X
2 10
T 1
1 X
1 X
1 X
1 1
1 X
1 X
1 1
1 X
S S
2 10
T X
1 X
1 X
1 X
1 1
1 X
1 X
1 1
1 X
S S
10 10
T T T T T T T T T T
X 2 X X X X X 3 4 X
9 8 9 X X X 2 9 X 9
7 7 X 7 3 X X 8 9 X
8 9 9 9 6 3 X 5 X 5
8 9 9 9 6 X X 5 X 5
8 6 5 4 6 8 X 5 X 5
8 9 3 9 6 8 X 5 X 5
8 3 9 9 6 X X X 5 X
S S S S S S S S S S
10 7
2 3 2 3 2 3 2 3 T T
1 2 3 2 3 2 3 2 3 2
3 2 3 2 3 2 3 2 3 4
3 2 3 2 3 2 3 2 3 5
3 2 3 1 3 2 3 2 3 5
2 2 3 2 4 2 3 2 3 5
S S 2 3 2 1 2 3 2 3
0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
12
5
-1
22
12</pre>
<p> <!-- problem end --></p>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2312">Problem – 2312</a></p>
<p>　　一条很暴力，有点恶心的搜索。题意其实很简单，主要是pfs的时候拓展结点会有种麻烦的感觉。注意的是，这里的n和m跟平常见到的有所不同，交换过来了。我的代码就是在因为这个长宽的问题wa了一次。</p>
<p>代码如下：</p>
<pre class="brush:cpp ">#include &lt;cstdio&gt;
 #include &lt;iostream&gt;
 #include &lt;algorithm&gt;
 #include &lt;cstring&gt;
 #include &lt;queue&gt;
 #include &lt;cctype&gt;
 
 using namespace std;
 
 typedef pair&lt;int, int&gt; PII;
 typedef pair&lt;PII, PII&gt; PPP;
 typedef pair&lt;int, PPP&gt; PPPI;
 
 #define FI first
 #define SE second
 #define PRIQ priority_queue
 
 const int R = 66;
 const int C = 33;
 char mat[R][C];
 bool vis[R][C][R][C];
 int n, m;
 
 inline int dis(int a, int b, int c, int d) { return abs(a - c) + abs(b - d);}
 inline bool inmat(int a, int b) { return 0 &lt;= a &amp;&amp; a &lt; n &amp;&amp; 0 &lt;= b &amp;&amp; b &lt; m;}
 
 int work() {
     PRIQ&lt;PPPI&gt; Q;
     int nx, ny, cx, cy;
     memset(vis, 0, sizeof(vis));
     while (!Q.empty()) Q.pop();
     for (int i = 0; i &lt; n; i++) {
         for (int j = 0; j &lt; m; j++) {
             if (mat[i][j] != 'S') continue;
             for (int dx = -2; dx &lt;= 2; dx++) {
                 nx = i + dx;
                 for (int dy = 1; dy &lt;= 3; dy++) {
                     ny = j + dy;
                     if (inmat(nx, ny) &amp;&amp; dis(i, j, nx, ny) &lt;= 3 &amp;&amp; mat[nx][ny] != 'X' &amp;&amp; !vis[i][j][nx][ny]) {
                         if (isdigit(mat[nx][ny])) Q.push(PPPI((int) '0' - mat[nx][ny], PPP(PII(i, j), PII(nx, ny))));
                         else Q.push(PPPI(0, PPP(PII(i, j), PII(nx, ny))));
                         vis[i][j][nx][ny] = true;
 //                        cout &lt;&lt; i &lt;&lt; ' ' &lt;&lt; j &lt;&lt; ' ' &lt;&lt; nx &lt;&lt; ' ' &lt;&lt; ny &lt;&lt; endl;
                     }
                     ny = j - dy;
                     if (inmat(nx, ny) &amp;&amp; dis(nx, ny, i, j) &lt;= 3 &amp;&amp; mat[nx][ny] != 'X' &amp;&amp; !vis[nx][ny][i][j]) {
                         if (isdigit(mat[nx][ny])) Q.push(PPPI((int) '0' - mat[nx][ny], PPP(PII(nx, ny), PII(i, j))));
                         else Q.push(PPPI(0, PPP(PII(nx, ny), PII(i, j))));
                         vis[nx][ny][i][j] = true;
 //                        cout &lt;&lt; nx &lt;&lt; ' ' &lt;&lt; ny &lt;&lt; ' ' &lt;&lt; i &lt;&lt; ' ' &lt;&lt; j &lt;&lt; endl;
                     }
                 }
             }
         }
     }
 //    cout &lt;&lt; "find S" &lt;&lt; endl;
     while (!Q.empty()) {
         PPPI cur = Q.top();
         Q.pop();
         int v = cur.FI, a = cur.SE.FI.FI, b = cur.SE.FI.SE, c = cur.SE.SE.FI, d = cur.SE.SE.SE;
 //        cout &lt;&lt; v &lt;&lt; ' ' &lt;&lt; a &lt;&lt; ' ' &lt;&lt; b &lt;&lt; ' ' &lt;&lt; c &lt;&lt; ' ' &lt;&lt; d &lt;&lt; endl;
         if (mat[a][b] == 'T' || mat[c][d] == 'T') return -v;
         for (int dx = -2; dx &lt;= 2; dx++) {
             nx = a + dx;
             cx = c + dx;
             for (int dy = 1; dy &lt;= 3; dy++) {
                 ny = b + dy;
                 if (inmat(nx, ny) &amp;&amp; dis(a, b, nx, ny) &lt;= 3 &amp;&amp; mat[nx][ny] != 'X' &amp;&amp; !vis[a][b][nx][ny]) {
                     if (isdigit(mat[nx][ny])) Q.push(PPPI((int) '0' - mat[nx][ny] + v, PPP(PII(a, b), PII(nx, ny))));
                     else Q.push(PPPI(v, PPP(PII(a, b), PII(nx, ny))));
                     vis[a][b][nx][ny] = true;
 //                    cout &lt;&lt; nx &lt;&lt; ' ' &lt;&lt; ny &lt;&lt; endl;
                 }
                 cy = d - dy;
                 if (inmat(cx, cy) &amp;&amp; dis(cx, cy, c, d) &lt;= 3 &amp;&amp; mat[cx][cy] != 'X' &amp;&amp; !vis[cx][cy][c][d]) {
                     if (isdigit(mat[cx][cy])) Q.push(PPPI((int) '0' - mat[cx][cy] + v, PPP(PII(cx, cy), PII(c, d))));
                     else Q.push(PPPI(v, PPP(PII(cx, cy), PII(c, d))));
                     vis[cx][cy][c][d] = true;
 //                    cout &lt;&lt; cx &lt;&lt; ' ' &lt;&lt; cy &lt;&lt; endl;
                 }
             }
         }
     }
     return -1;
 }
 
 int main() {
 //    freopen("in", "r", stdin);
 //    freopen("out", "w", stdout);
     while (cin &gt;&gt; m &gt;&gt; n &amp;&amp; (n || m)) {
         char buf[3];
         for (int i = 0; i &lt; n; i++) for (int j = 0; j &lt; m; j++) cin &gt;&gt; buf, mat[i][j] = buf[0];
         cout &lt;&lt; work() &lt;&lt; endl;
     }
     return 0;
 }</pre>
<p> </p>
<p style="text-align: right;">——written by Lyon</p>
<p>解题转自：http://www.cnblogs.com/LyonLys/archive/2013/07/19/hdu_2312_Lyon.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-56548">
<article class="comment" id="comment-56548">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AC_Grazy</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-56548" rel="nofollow"><time datetime="2015-07-12T08:57:18+00:00" pubdate="">2015年7月12日 at 上午8:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>信息不全</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62451">
<article class="comment" id="comment-62451">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">645198</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-62451" rel="nofollow"><time datetime="2015-06-03T23:33:23+00:00" pubdate="">2015年6月3日 at 下午11:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个是python代码啊。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-20876">
<article class="comment" id="comment-20876">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">3136869079</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-20876" rel="nofollow"><time datetime="2015-05-15T12:17:54+00:00" pubdate="">2015年5月15日 at 下午12:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哇，算法有这么多呢！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-20878">
<article class="comment" id="comment-20878">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wuzirui</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-20878" rel="nofollow"><time datetime="2015-05-10T06:41:01+00:00" pubdate="">2015年5月10日 at 上午6:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发的在线笔试题吗?发现很多C啊，阿里不是JAVA多么？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-56550">
<article class="comment" id="comment-56550">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lanifer</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-56550" rel="nofollow"><time datetime="2015-05-05T09:51:08+00:00" pubdate="">2015年5月5日 at 上午9:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯，是写错了，文中以更改。MAX ( L(X[0..m-2], Y[0..n-1]), L(X[0..m-1], Y[0..n-2])</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-20875">
<article class="comment" id="comment-20875">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">weijieut</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-20875" rel="nofollow"><time datetime="2014-11-25T20:47:17+00:00" pubdate="">2014年11月25日 at 下午8:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个差别应该不会太大，或许编辑器就自动优化成内联函数了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-20879">
<article class="comment" id="comment-20879">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liluvu</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-20879" rel="nofollow"><time datetime="2014-05-27T20:38:35+00:00" pubdate="">2014年5月27日 at 下午8:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>华为这题目略显简单啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62449">
<article class="comment" id="comment-62449">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY243956</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-62449" rel="nofollow"><time datetime="2014-05-01T06:56:06+00:00" pubdate="">2014年5月1日 at 上午6:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>失误失误，转载错了。已经改正，抱歉。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-56549">
<article class="comment" id="comment-56549">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Riddick</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-56549" rel="nofollow"><time datetime="2014-04-21T11:19:13+00:00" pubdate="">2014年4月21日 at 上午11:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>wt[n - 1]没错，因为下标是[0...n-1]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62448">
<article class="comment" id="comment-62448">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">g29tony</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-62448" rel="nofollow"><time datetime="2014-04-17T23:38:29+00:00" pubdate="">2014年4月17日 at 下午11:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这配图…..</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62450">
<article class="comment" id="comment-62450">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bernice1989</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-62450" rel="nofollow"><time datetime="2014-01-22T21:02:41+00:00" pubdate="">2014年1月22日 at 下午9:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好网站，肯定会火的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-20877">
<article class="comment" id="comment-20877">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">skyand</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-20877" rel="nofollow"><time datetime="2014-01-22T18:18:06+00:00" pubdate="">2014年1月22日 at 下午6:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有一点问题。。后面动态规划的程序中<br/>
int dp[n+1][W+1];<br/>
会报错  提示表达式必须含有常量值。该怎么修改呢。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-44704">
<article class="comment" id="comment-44704">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HDC</a></span> on <a href="http://www.acmerblog.com/hdu-2312-cliff-climbing-3541.html#comment-44704" rel="nofollow"><time datetime="2014-01-17T15:48:43+00:00" pubdate="">2014年1月17日 at 下午3:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哎，path[0]应该是从零开始吧，为什么是赋值1呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>