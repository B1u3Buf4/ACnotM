<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-09</div>
<div class="tit"><h1 class="entry-title">HDU 1329 Hanoi Tower Troubles Again!-动态规划-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观521次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1748" href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comments" title="《HDU 1329 Hanoi Tower Troubles Again!-动态规划-[解题报告] C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Hanoi Tower Troubles Again!</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
People stopped moving discs from peg to peg after they know the number of steps needed to complete the entire task. But on the other hand, they didn’t not stopped thinking about similar puzzles with the Hanoi Tower. Mr.S invented a little game on it. The game consists of N pegs and a LOT of balls. The balls are numbered 1,2,3… The balls look ordinary, but they are actually magic. If the sum of the numbers on two balls is NOT a square number, they will push each other with a great force when they’re too closed, so they can NEVER be put together touching each other. 
<p></p><center><img src="http://acm.hdu.edu.cn/data/images/1329-1.jpg"/></center>
<p>The player should place one ball on the top of a peg at a time. He should first try ball 1, then ball 2, then ball 3… If he fails to do so, the game ends. Help the player to place as many balls as possible. You may take a look at the picture above, since it shows us a best result for 4 pegs.  </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of the input contains a single integer T, indicating the number of test cases. (1&lt;=T&lt;=50) Each test case contains a single integer N(1&lt;=N&lt;=50), indicating the number of pegs available.  </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each test case in the input print a line containing an integer indicating the maximal number of balls that can be placed. Print -1 if an infinite number of balls can be placed. </div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
4
25</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
11
337</pre>
<p> <!-- problem end --></p>
<p align="left">2011-12-27 16:05:53</p>
<p align="left">地址：<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1329">http://acm.hdu.edu.cn/showproblem.php?pid=1329</a></p>
<p align="left">题意：有n个棍子，依序从1开始放小球，两个相邻的球编号和必须是完全平方数。求最后一个能放下的序号。</p>
<p align="left">mark：最多才1300，直接模拟。</p>
<p align="left">代码：</p>
<pre class="brush:cpp "># include &lt;stdio.h&gt;
# include &lt;string.h&gt;
# include &lt;math.h&gt;


int n ;
int dp[55] ;


int issquare(int a)
{
    int b = sqrt(1.0*a) ;
    return b*b == a ;
}


int gao()
{
    int i, j, flag ;
    for (i = 1 ; ; i++)
    {
        flag = 0 ;
        for (j = 0 ; j &lt; n ; j++)
        {
            
            if (dp[j] == 0 || issquare (dp[j]+i))
            {
                dp[j] = i ;
                flag = 1 ;
                break ;
            }
        }
        if (flag == 0)
            return i-1 ;
    }
    return -1 ;
}


int main ()
{
    int T ;
    scanf ("%d", &amp;T) ;
    while (T--)
    {
        scanf ("%d", &amp;n) ;
        memset (dp, 0, sizeof(dp)) ;
        printf ("%d\n", gao()) ;
    }
    return 0 ;
}</pre>
<p align="left">
</p><p>解题报告转自：http://www.cnblogs.com/lzsz1212/archive/2012/01/06/2315393.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-40650">
<article class="comment" id="comment-40650">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hunangangli</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-40650" rel="nofollow"><time datetime="2015-07-01T20:57:01+00:00" pubdate="">2015年7月1日 at 下午8:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这排版…你都打开来看看改改</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12535">
<article class="comment" id="comment-12535">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yesMan</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-12535" rel="nofollow"><time datetime="2015-05-31T03:15:22+00:00" pubdate="">2015年5月31日 at 上午3:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thanks i enjoy your write-up about Why We Keep track of | J Squared Consulting</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12539">
<article class="comment" id="comment-12539">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">calvert1991</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-12539" rel="nofollow"><time datetime="2015-05-21T11:22:55+00:00" pubdate="">2015年5月21日 at 上午11:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>代码可真够长的！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54597">
<article class="comment" id="comment-54597">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jxfactor</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-54597" rel="nofollow"><time datetime="2015-05-09T04:35:41+00:00" pubdate="">2015年5月9日 at 上午4:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个也是算法导论的习题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40652">
<article class="comment" id="comment-40652">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bcys</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-40652" rel="nofollow"><time datetime="2015-03-22T08:15:37+00:00" pubdate="">2015年3月22日 at 上午8:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个分析相当全面，经典！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12537">
<article class="comment" id="comment-12537">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">753951</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-12537" rel="nofollow"><time datetime="2015-03-07T05:49:19+00:00" pubdate="">2015年3月7日 at 上午5:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，感谢分享。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12538">
<article class="comment" id="comment-12538">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">oneal</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-12538" rel="nofollow"><time datetime="2014-12-26T05:52:54+00:00" pubdate="">2014年12月26日 at 上午5:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>头文件的颜色是有意设成这种灰暗色的吗？感觉看不清</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12536">
<article class="comment" id="comment-12536">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zclzcllove</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-12536" rel="nofollow"><time datetime="2014-11-11T03:59:16+00:00" pubdate="">2014年11月11日 at 上午3:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>思路二可以用一个长度为k的队列来实现，入队后判断下队尾元素的next指针是否为空，若为空，则出队指针即为所求。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-54599">
<article class="comment" id="comment-54599">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bernice1989</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-54599" rel="nofollow"><time datetime="2014-10-14T11:42:00+00:00" pubdate="">2014年10月14日 at 上午11:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好网站，肯定会火的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12534">
<article class="comment" id="comment-12534">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ruoshui</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-12534" rel="nofollow"><time datetime="2014-08-25T06:29:22+00:00" pubdate="">2014年8月25日 at 上午6:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>a是根先忽略掉，递归子树。剩下前缀bejkcfghid和后缀jkebfghicd，分拆的原则的是每个子树前缀和后缀的节点个数是一样的，根节点出现在前缀的第一个，后缀的最后一个。根节点b出现后缀的第四个位置，则第一部分为四个节点，前缀bejk，后缀jkeb，剩下的c出现在后缀的倒数第2个，就划分为cfghi和 fghic，第3部分就为c、c</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-54596">
<article class="comment" id="comment-54596">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">April</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-54596" rel="nofollow"><time datetime="2014-07-19T02:24:12+00:00" pubdate="">2014年7月19日 at 上午2:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p><a href="http://www.realoj.com/problem/7如果楼主不介意，以可以在这个oj上做下，按照你的代码是错的。。。直接复制粘贴你的也是错。。不懂错在哪。" rel="nofollow">http://www.realoj.com/problem/7如果楼主不介意，以可以在这个oj上做下，按照你的代码是错的。。。直接复制粘贴你的也是错。。不懂错在哪。</a></p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40649">
<article class="comment" id="comment-40649">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aifan</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-40649" rel="nofollow"><time datetime="2014-05-27T01:03:33+00:00" pubdate="">2014年5月27日 at 上午1:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这种二分还是比较经典！mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-54598">
<article class="comment" id="comment-54598">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaoriqiang2</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-54598" rel="nofollow"><time datetime="2014-03-24T05:23:02+00:00" pubdate="">2014年3月24日 at 上午5:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给力，赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40651">
<article class="comment" id="comment-40651">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bluesky</a></span> on <a href="http://www.acmerblog.com/hdu-1329-Hanoi-Tower-Troubles-Again%21-1748.html#comment-40651" rel="nofollow"><time datetime="2014-03-21T13:51:46+00:00" pubdate="">2014年3月21日 at 下午1:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有两个重复的话结果是正确的，但解法不够严谨，后面重复的覆盖掉前面的，由于题目数据限制也比较严，所以能提交通过。已更新算法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>