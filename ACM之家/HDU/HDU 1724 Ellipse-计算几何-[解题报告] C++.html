<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-21</div>
<div class="tit"><h1 class="entry-title">HDU 1724 Ellipse-计算几何-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math" rel="category tag" title="查看数学相关中的全部文章">数学相关</a>, <a href="http://www.acmerblog.com/category/geometry/analytic-geometry" rel="category tag" title="查看解析几何中的全部文章">解析几何</a></span><span class="i4">围观838次</span><span class="i3"><a class="ds-thread-count" data-thread-key="2697" href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comments" title="《HDU 1724 Ellipse-计算几何-[解题报告] C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Ellipse</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Math is important!! Many students failed in 2+2’s mathematical test, so let’s AC this problem to mourn for our lost youth..<br/>Look this sample picture:
<p></p><center><img src="http://acm.hdu.edu.cn/data/images/C61-1005-1.JPG"/></center>
<p>A ellipses in the plane and center in point O. the L,R lines will be vertical through the X-axis. The problem is calculating the blue intersection area. But calculating the intersection area is dull, so I have turn to you, a talent of programmer. Your task is tell me the result of calculations.(defined PI=3.14159265 , The area of an ellipse A=PI*a*b ) </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
Input may contain multiple test cases. The first line is a positive integer N, denoting the number of test cases below. One case One line. The line will consist of a pair of integers a and b, denoting the ellipse equation <img src="http://acm.hdu.edu.cn/data/images/C61-1005-2.JPG"/>, A pair of integers l and r, mean the L is (l, 0) and R is (r, 0).   (-a &lt;= l &lt;= r &lt;= a). </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each case, output one line containing a float, the area of the intersection, accurate to three decimals after the decimal point.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
2 1 -2 2
2 1 0 2</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
6.283
3.142</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">/*
hdu 1724 Ellipse simpson积分

求椭圆的部分面积
simpson积分法 http://zh.wikipedia.org/zh-tw/%E8%BE%9B%E6%99%AE%E6%A3%AE%E7%A7%AF%E5%88%86%E6%B3%95
*/
#include&lt;stdio.h&gt;
#include&lt;math.h&gt;
const double eps=1e-8;
inline double jue(double a)
{
	return a&gt;0?a:-a;
}
int dbcmp(double a)
{
	if(a&gt;eps)return 1;
	if(a&lt;(-eps)) return -1;
	return 0;
}
template&lt;typename T&gt;
inline T sqr(T d){return d*d;}
double a,b;
inline double func(double x)
{
	return 2*b*sqrt(1-sqr(x)/sqr(a));
}
double simpson(double l,double r)
{
	return (func(l)+func(r)+4*func((l+r)/2))/6*(r-l);
}
double work(double l,double r)
{
	double mid=(l+r)/2;
	double ans=simpson(l,r);
	if(dbcmp(ans-simpson(l,mid)-simpson(mid,r))==0)
	{
		return ans;
	}else
	{
		return work(l,mid)+work(mid,r);
	}
}
int main()
{
	int n;
	double l,r;
	scanf("%d",&amp;n);
	while(n--)
	{
		scanf("%lf%lf%lf%lf",&amp;a,&amp;b,&amp;l,&amp;r);
		double ret=work(l,r);
		printf("%.3f\n",ret);
	}
	return 0;
}</pre>
<p></p>
<p>解题报告转自：http://blog.csdn.net/qq172108805/article/details/12177473</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-55670">
<article class="comment" id="comment-55670">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mayboy</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-55670" rel="nofollow"><time datetime="2015-06-19T19:48:46+00:00" pubdate="">2015年6月19日 at 下午7:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42728">
<article class="comment" id="comment-42728">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">vintion</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42728" rel="nofollow"><time datetime="2015-06-02T22:13:51+00:00" pubdate="">2015年6月2日 at 下午10:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>从数学角度确实是C(n,r)，能给个递推关系式吗，从分治的角度不好理解</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-55669">
<article class="comment" id="comment-55669">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhuliyan</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-55669" rel="nofollow"><time datetime="2015-03-28T21:59:39+00:00" pubdate="">2015年3月28日 at 下午9:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42735">
<article class="comment" id="comment-42735">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">chengleisheng</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42735" rel="nofollow"><time datetime="2015-03-09T21:01:19+00:00" pubdate="">2015年3月9日 at 下午9:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实就是DFS搜索，数据量较小，穷举了所有情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-55672">
<article class="comment" id="comment-55672">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Rosamondwu</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-55672" rel="nofollow"><time datetime="2015-01-31T12:38:28+00:00" pubdate="">2015年1月31日 at 下午12:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的思路，可以借鉴</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42730">
<article class="comment" id="comment-42730">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">753951</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42730" rel="nofollow"><time datetime="2015-01-25T07:13:44+00:00" pubdate="">2015年1月25日 at 上午7:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我表示楼主不要乱抄题，你写的另一个题吧，直接扒了代码没跑吧</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-55671">
<article class="comment" id="comment-55671">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">windy</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-55671" rel="nofollow"><time datetime="2014-12-15T10:56:15+00:00" pubdate="">2014年12月15日 at 上午10:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>先从简单的做起，归并排序，二叉树相关的遍历等</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42727">
<article class="comment" id="comment-42727">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">weijieut</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42727" rel="nofollow"><time datetime="2014-12-11T01:09:41+00:00" pubdate="">2014年12月11日 at 上午1:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这一题的代码这样提交时错误的~少考虑了很多情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-42732">
<article class="comment" id="comment-42732">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">acmer29</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42732" rel="nofollow"><time datetime="2014-11-09T09:19:05+00:00" pubdate="">2014年11月9日 at 上午9:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>加了星号 (*) 表示跳过此数据不读入. 因为scanf是不读取本行回车的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42729">
<article class="comment" id="comment-42729">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaotong2055</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42729" rel="nofollow"><time datetime="2014-10-15T21:13:44+00:00" pubdate="">2014年10月15日 at 下午9:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序是对的。有些地方用了C++的写法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-42731">
<article class="comment" id="comment-42731">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Trenson</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42731" rel="nofollow"><time datetime="2014-02-23T21:37:22+00:00" pubdate="">2014年2月23日 at 下午9:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实不需要用LCA，用DFS+vector更简单</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42733">
<article class="comment" id="comment-42733">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gladuo</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42733" rel="nofollow"><time datetime="2014-02-06T09:22:51+00:00" pubdate="">2014年2月6日 at 上午9:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;<br/>
#include &lt;algorithm&gt;</p>
<p>struct LWPair{<br/>
    int l,w;<br/>
};</p>
<p>int main() {<br/>
    //freopen("input.txt","r",stdin);<br/>
    const int MAXSIZE=5000, MAXVAL=10000;<br/>
    LWPair sticks[MAXSIZE];<br/>
    int store[MAXSIZE];<br/>
    int ncase, nstick, length,width, tmp, time, i,j;<br/>
    if(scanf("%d",&amp;ncase)!=1) return -1;<br/>
    while(ncase– &amp;&amp; scanf("%d",&amp;nstick)==1) {<br/>
        for(i=0;i&lt;nstick;++i) scanf("%d%d",&amp;sticks <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> .l,&amp;sticks <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> .w);<br/>
        std::sort(sticks,sticks+nstick,[](const LWPair &amp;lhs, const LWPair &amp;rhs) { return lhs.l&gt;rhs.l || lhs.l==rhs.l &amp;&amp; lhs.w&gt;rhs.w; });<br/>
        for(time=-1,i=0;i&lt;nstick;++i) {<br/>
            tmp=sticks <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> .w;<br/>
            for(j=time;j&gt;=0 &amp;&amp; store <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> &gt;=tmp;–j) ; // search from right to left<br/>
            if(j==time) { store[++time]=tmp; }<br/>
            else { store[j+1]=tmp; }<br/>
        }<br/>
        printf("%dn",time+1);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-42734">
<article class="comment" id="comment-42734">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">samjustin</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-42734" rel="nofollow"><time datetime="2014-02-04T11:13:06+00:00" pubdate="">2014年2月4日 at 上午11:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;<br/>
#include &lt;cstring&gt;</p>
<p>const int MAXSIZE=256;<br/>
//char store[MAXSIZE];<br/>
char str1[MAXSIZE];<br/>
/*<br/>
void init(char *store) {<br/>
    int i;<br/>
    store['A']=’V', store['B']=’W',store['C']=’X',store['D']=’Y',store['E']=’Z';<br/>
    for(i=’F';i&lt;=’Z';++i) store <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =i-5;<br/>
}<br/>
*/<br/>
int main() {<br/>
    //freopen("input.txt","r",stdin);<br/>
    //init(store);<br/>
    char *p;<br/>
    while(fgets(str1,MAXSIZE,stdin) &amp;&amp; strcmp(str1,"STARTn")==0) {<br/>
        if(p=fgets(str1,MAXSIZE,stdin)) {<br/>
            for(;*p;++p) {<br/>
				//*p=store[*p]<br/>
                if(*p&lt;’A’ || *p&gt;’Z') continue;<br/>
                if(*p&gt;’E') *p=*p-5;<br/>
                else *p=*p+21;<br/>
            }<br/>
            printf("%s",str1);<br/>
        }<br/>
        fgets(str1,MAXSIZE,stdin);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-55673">
<article class="comment" id="comment-55673">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiao1108</a></span> on <a href="http://www.acmerblog.com/hdu-1724-Ellipse-2697.html#comment-55673" rel="nofollow"><time datetime="2014-01-13T08:09:12+00:00" pubdate="">2014年1月13日 at 上午8:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>可是看了很多算法书什么的都是说的(start-end)/2哎。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>