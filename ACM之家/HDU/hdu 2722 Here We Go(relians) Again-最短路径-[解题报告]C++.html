<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-14</div>
<div class="tit"><h1 class="entry-title">hdu 2722 Here We Go(relians) Again-最短路径-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/graph/shortest-path" rel="category tag" title="查看最短路径中的全部文章">最短路径</a></span><span class="i4">围观560次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4320" href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comments" title="《hdu 2722 Here We Go(relians) Again-最短路径-[解题报告]C++》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Here We Go(relians) Again</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
The Gorelians are a warlike race that travel the universe conquering new worlds as a form of recreation. Given their violent, fun-loving nature, keeping their leaders alive is of serious concern. Part of the Gorelian security plan involves changing the traffic patterns of their cities on a daily basis, and routing all Gorelian Government Officials to the Government Building by the fastest possible route.
<p>Fortunately for the Gorelian Minister of Traffic (that would be you), all Gorelian cities are laid out as a rectangular grid of blocks, where each block is a square measuring 2520 rels per side (a rel is the Gorelian Official Unit of Distance). The speed limit between two adjacent intersections is always constant, and may range from 1 to 9 rels per blip (a blip, of course, being the Gorelian Official Unit of Time). Since Gorelians have outlawed decimal numbers as unholy (hey, if you’re the dominant force in the known universe, you can outlaw whatever you want), speed limits are always integer values. This explains why Gorelian blocks are precisely 2520 rels in length: 2520 is the least common multiple of the integers 1 through 9. Thus, the time required to travel between two adjacent intersections is always an integer number of blips.</p>
<p>In all Gorelian cities, Government Housing is always at the northwest corner of the city, while the Government Building is always at the southeast corner. Streets between intersections might be one-way or two-way, or possibly even closed for repair (all this tinkering with traffic patterns causes a lot of accidents). Your job, given the details of speed limits, street directions, and street closures for a Gorelian city, is to determine the fastest route from Government Housing to the Government Building. (It is possible, due to street directions and closures, that no route exists, in which case a Gorelian Official Temporary Holiday is declared, and the Gorelian Officials take the day off.)<br/></p><center><img src="http://www.acmerblog.com/img/1392548306633.png"/></center><br/>The picture above shows a Gorelian City marked with speed limits, one way streets, and one closed street. It is assumed that streets are always traveled at the exact posted speed limit, and that turning a corner takes zero time. Under these conditions, you should be able to determine that the fastest route from Government Housing to the Government Building in this city is 1715 blips. And if the next day, the only change is that the closed road is opened to two way traffic at 9 rels per blip, the fastest route becomes 1295 blips. On the other hand, suppose the three one-way streets are switched from southbound to northbound (with the closed road remaining closed). In that case, no route would be possible and the day would be declared a holiday. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input consists of a set of cities for which you must find a fastest route if one exists. The first line of an input case contains two integers, which are the vertical and horizontal number of city blocks, respectively. The smallest city is a single block, or 1 by 1, and the largest city is 20 by 20 blocks. The remainder of the input specifies speed limits and traffic directions for streets between intersections, one row of street segments at a time. The first line of the input (after the dimensions line) contains the data for the northernmost east-west street segments. The next line contains the data for the northernmost row of north-south street segments. Then the next row of east-west streets, then north-south streets, and so on, until the southernmost row of east-west streets. Speed limits and directions of travel are specified in order from west to east, and each consists of an integer from 0 to 9 indicating speed limit, and a symbol indicating which direction traffic may flow. A zero speed limit means the road is closed. All digits and symbols are delimited by a single space. For east-west streets, the symbol will be an asterisk ‘*’ which indicates travel is allowed in both directions, a less-than symbol ‘&lt;’ which indicates travel is allowed only in an east-to-west direction, or a greater-than symbol ‘&gt;’ which indicates travel is allowed only in a west-to-east direction. For north-south streets, an asterisk again indicates travel is allowed in either direction, a lowercase "vee" character ‘v’ indicates travel is allowed only in a north-to-south directions, and a caret symbol ‘^’ indicates travel is allowed only in a south-to-north direction. A zero speed, indicating a closed road, is always followed by an asterisk. Input cities continue in this manner until a value of zero is specified for both the vertical and horizontal dimensions. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The input consists of a set of cities for which you must find a fastest route if one exists. The first line of an input case contains two integers, which are the vertical and horizontal number of city blocks, respectively. The smallest city is a single block, or 1 by 1, and the largest city is 20 by 20 blocks. The remainder of the input specifies speed limits and traffic directions for streets between intersections, one row of street segments at a time. The first line of the input (after the dimensions line) contains the data for the northernmost east-west street segments. The next line contains the data for the northernmost row of north-south street segments. Then the next row of east-west streets, then north-south streets, and so on, until the southernmost row of east-west streets. Speed limits and directions of travel are specified in order from west to east, and each consists of an integer from 0 to 9 indicating speed limit, and a symbol indicating which direction traffic may flow. A zero speed limit means the road is closed. All digits and symbols are delimited by a single space. For east-west streets, the symbol will be an asterisk ‘*’ which indicates travel is allowed in both directions, a less-than symbol ‘&lt;’ which indicates travel is allowed only in an east-to-west direction, or a greater-than symbol ‘&gt;’ which indicates travel is allowed only in a west-to-east direction. For north-south streets, an asterisk again indicates travel is allowed in either direction, a lowercase "vee" character ‘v’ indicates travel is allowed only in a north-to-south directions, and a caret symbol ‘^’ indicates travel is allowed only in a south-to-north direction. A zero speed, indicating a closed road, is always followed by an asterisk. Input cities continue in this manner until a value of zero is specified for both the vertical and horizontal dimensions.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2 2
9 * 9 *
6 v 0 * 8 v
3 * 7 *
3 * 6 v 3 *
4 * 8 *
2 2
9 * 9 *
6 v 9 * 8 v
3 * 7 *
3 * 6 v 3 *
4 * 8 *
2 2
9 * 9 *
6 ^ 0 * 8 ^
3 * 7 *
3 * 6 ^ 3 *
4 * 8 *
0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1715 blips
1295 blips
Holiday</pre>
<p> <!-- problem end --></p>
<p>/*<br/>
分析：<br/>
    卓提不系老难啊，主要系咋弄那与哦表，子要系能弄<br/>
揣那与哦表，用啥法儿都中。<br/>
    俺用类SPFA，弄类系邻接表。<br/>
    1a~</p>
<p>
                                              2012-07-25<br/>
*/</p>
<p></p>
<pre class="brush:cpp ">#include"stdio.h"
#include"string.h"


struct A
{
	int total;
	int dis;
	int mem[6];
	int len[6];
}E[444];


int MIN(int a,int b)
{
	return a&gt;b?b:a;
}


void SPFA(int s)
{
	int k,key;
	int hash[555];
	int i;
	int queue[888];


	queue[0]=s;
	key=1;
	k=0;
	memset(hash,0,sizeof(hash));
	hash[s]=1;
	while(k&lt;key)
	{
		for(i=0;i&lt;E[queue[k]].total;i++)
		{
			if(E[queue[k]].dis+E[queue[k]].len[i]&lt;E[E[queue[k]].mem[i]].dis)
			{
				E[E[queue[k]].mem[i]].dis=E[queue[k]].dis+E[queue[k]].len[i];
				if(!hash[E[queue[k]].mem[i]])
				{
					hash[E[queue[k]].mem[i]]=1;
					queue[key++]=E[queue[k]].mem[i];
				}
			}
		}
		hash[queue[k++]]=0;
	}
}
int main()
{
	int n,m;
	int n_temp;
	int i,l;
	int limit;
	int temp;
	int t1,t2;
	char str[10];


	while(scanf("%d%d",&amp;n,&amp;m),n||m)
	{
		temp=(n+1)*(m+1);
		for(i=1;i&lt;=temp;i++)	{E[i].total=0;E[i].dis=11111111;}


		n_temp=2*n+1;
		for(i=0;i&lt;n_temp;i++)
		{
			if(i%2)	limit=m+1;
			else	limit=m;
			for(l=0;l&lt;limit;l++)
			{
				scanf("%d%s",&amp;temp,str);
				if(temp==0)	continue;
				temp=2520/temp;
				if(i%2==0)	{t1=(i/2)*(m+1)+l+1;t2=t1+1;}
				else		{t1=((i-1)/2)*(m+1)+l+1;t2=t1+m+1;}
				if(str[0]=='*')
				{
					E[t1].mem[E[t1].total]=t2;
					E[t1].len[E[t1].total++]=temp;
					E[t2].mem[E[t2].total]=t1;
					E[t2].len[E[t2].total++]=temp;
				}
				else if(str[0]=='v')
				{
					E[t1].mem[E[t1].total]=t2;
					E[t1].len[E[t1].total++]=temp;
				}
				else if(str[0]=='^')
				{
					E[t2].mem[E[t2].total]=t1;
					E[t2].len[E[t2].total++]=temp;
				}
				else if(str[0]=='&gt;')
				{
					E[t1].mem[E[t1].total]=t2;
					E[t1].len[E[t1].total++]=temp;
				}
				else if(str[0]=='&lt;')
				{
					E[t2].mem[E[t2].total]=t1;
					E[t2].len[E[t2].total++]=temp;
				}
			}
		}


		E[1].dis=0;
		SPFA(1);


		if(E[(n+1)*(m+1)].dis==11111111)	printf("Holiday\n");
		else								printf("%d blips\n",E[(n+1)*(m+1)].dis);
	}
	return 0;
}</pre>
<p>解题转自：http://blog.csdn.net/ice_crazy/article/details/7786294</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-82087">
<article class="comment" id="comment-82087">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919517765" rel="external nofollow">新用户238459</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-82087" rel="nofollow"><time datetime="2017-04-12T19:45:08+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>作者大大催更啦~超喜欢看这个漫画的，什么时候更新啊？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62888">
<article class="comment" id="comment-62888">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zuo_zuo</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62888" rel="nofollow"><time datetime="2015-07-01T01:54:16+00:00" pubdate="">2015年7月1日 at 上午1:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62881">
<article class="comment" id="comment-62881">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">aaa</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62881" rel="nofollow"><time datetime="2015-06-29T08:32:25+00:00" pubdate="">2015年6月29日 at 上午8:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这怎么用Catalan数啊？求解答！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62891">
<article class="comment" id="comment-62891">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">daisyleedq</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62891" rel="nofollow"><time datetime="2015-05-15T21:45:46+00:00" pubdate="">2015年5月15日 at 下午9:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第36行，struct node **head_ref，怎么理解，那个函数感觉不是很懂啊！？？弱渣求助</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62884">
<article class="comment" id="comment-62884">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tzf88888888</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62884" rel="nofollow"><time datetime="2015-04-10T09:06:51+00:00" pubdate="">2015年4月10日 at 上午9:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二块代码if(it != mp.end())应改为if(it != mp.end() &amp;&amp; (i+1)!=(it-&gt;second +1))；因为第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62882">
<article class="comment" id="comment-62882">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">litaotao</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62882" rel="nofollow"><time datetime="2015-04-03T22:26:26+00:00" pubdate="">2015年4月3日 at 下午10:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>上面的评论很起劲，为什么我看不懂啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62890">
<article class="comment" id="comment-62890">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fiftyonejiao</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62890" rel="nofollow"><time datetime="2015-02-08T02:35:57+00:00" pubdate="">2015年2月8日 at 上午2:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62880">
<article class="comment" id="comment-62880">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">acmer29</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62880" rel="nofollow"><time datetime="2015-01-20T13:40:28+00:00" pubdate="">2015年1月20日 at 下午1:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题目虽然简单，但是小编做的很到位，应该会给很多人启发吧！对于面试当中不给开辟额外空间的问题不是绝对的，实际上至少是允许少数变量存在的。之前遇到相似的问题也是恍然大悟，今天看到小编这篇文章相见恨晚。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62889">
<article class="comment" id="comment-62889">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Happiness</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62889" rel="nofollow"><time datetime="2014-12-17T20:15:10+00:00" pubdate="">2014年12月17日 at 下午8:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>厉害，支持</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62886">
<article class="comment" id="comment-62886">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HenrryCheng</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62886" rel="nofollow"><time datetime="2014-11-15T02:06:21+00:00" pubdate="">2014年11月15日 at 上午2:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>终于AC了！next数组还是不好理解啊，mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62879">
<article class="comment" id="comment-62879">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ktcer</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62879" rel="nofollow"><time datetime="2014-10-24T05:06:24+00:00" pubdate="">2014年10月24日 at 上午5:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>后面的是python代码啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-24667">
<article class="comment" id="comment-24667">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">changjf</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-24667" rel="nofollow"><time datetime="2014-10-09T15:05:30+00:00" pubdate="">2014年10月9日 at 下午3:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>找bug好专业的说</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62887">
<article class="comment" id="comment-62887">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Baifern</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62887" rel="nofollow"><time datetime="2014-08-08T13:05:47+00:00" pubdate="">2014年8月8日 at 下午1:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env python def cou(n): arr =  [1]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-62885">
<article class="comment" id="comment-62885">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mayboy</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62885" rel="nofollow"><time datetime="2014-04-26T16:35:08+00:00" pubdate="">2014年4月26日 at 下午4:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>int L[m+1][n+1];这样定义出错，这个在gcc上可以编译通过 在VS上不行 应该改为new 或者vector</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-62883">
<article class="comment" id="comment-62883">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Supermaner</a></span> on <a href="http://www.acmerblog.com/hdu-2722-here-we-gorelians-again-4320.html#comment-62883" rel="nofollow"><time datetime="2014-04-20T12:04:48+00:00" pubdate="">2014年4月20日 at 下午12:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>