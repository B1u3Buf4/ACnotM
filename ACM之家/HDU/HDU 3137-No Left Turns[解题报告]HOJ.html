<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-03</div>
<div class="tit"><h1 class="entry-title">HDU 3137-No Left Turns[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观363次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4954" href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comments" title="《HDU 3137-No Left Turns[解题报告]HOJ》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">No Left Turns</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
<br/><center><img alt="Taunt Generation Simulator" src="http://www.acmerblog.com/img/1394163783035.jpg"/></center><br/><b>ALL HEADS:</b> You’re a Knight of the Round Table?
<p><b>ROBIN:</b> I am.</p>
<p><b>LEFT HEAD:</b> In that case I shall have to kill you.</p>
<p><b>MIDDLE HEAD:</b> Shall I?</p>
<p><b>RIGHT HEAD:</b> Oh, I don’t think so.</p>
<p><b>MIDDLE HEAD:</b> Well, what do I think?</p>
<p><b>LEFT HEAD:</b> I think kill him.</p>
<p><b>RIGHT HEAD:</b> Well let’s be nice to him.</p>
<p><b>MIDDLE HEAD:</b> Oh shut up.</p>
<p>As the story goes, the Knight scarpers off. Right Head has taken it upon himself to search the grounds for the knight so he, Left, and Middle can go extinguish him (and then have tea and biscuits.)</p>
<p>Consider the following 8 by 12 maze, where shaded squares are walls that can’t be entered.</p>
<p></p><center><img alt="Taunt Generation Simulator" src="http://www.acmerblog.com/img/1394163783296.jpg"/></center><br/>The shortest path between the Right Head (denoted by the S, for start) and the knight (denoted by the F, for finish) is of length 3, as illustrated above. But! Right Head can’t turn left or make UTurns. He can only move forward and turn right. That means the shortest path that Right Head can find is significantly longer: at 29!
<p></p><center><img alt="Taunt Generation Simulator" src="http://www.acmerblog.com/img/1394163783541.jpg"/></center> </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input file will consist of a single integer <b>N</b> (<b>N</b> &gt; 0) specifying the number of mazes in the file. Following this, on a maze by maze basis will be the number of rows, <b>r</b> (3 &lt; <b>r</b> &lt;= 20), a space, then the number of columns, <b>c</b> (3 &lt; <b>c</b> &lt;= 20). After this will follow <b>r</b> lines of <b>c</b> characters, representing a map of the maze:
<pre><br/>XXXXXXXXXXXXXX<br/>X          XXX<br/>X XFXXXXX    X<br/>XXX   XX  XX X<br/>X S          X<br/>XX  XXXXXX X X<br/>X        X X X<br/>X X      X X X<br/>XXX XX       X<br/>XXXXXXXXXXXXXX<br/></pre>
<p><b>X</b>’s mark those locations that are walls and can’t be occupied. <b>S</b> marks the start location, and <b>F</b> marks the Knight. Blanks are locations that can be freely traveled. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The input file will consist of a single integer <b>N</b> (<b>N</b> &gt; 0) specifying the number of mazes in the file. Following this, on a maze by maze basis will be the number of rows, <b>r</b> (3 &lt; <b>r</b> &lt;= 20), a space, then the number of columns, <b>c</b> (3 &lt; <b>c</b> &lt;= 20). After this will follow <b>r</b> lines of <b>c</b> characters, representing a map of the maze:
<pre><br/>XXXXXXXXXXXXXX<br/>X          XXX<br/>X XFXXXXX    X<br/>XXX   XX  XX X<br/>X S          X<br/>XX  XXXXXX X X<br/>X        X X X<br/>X X      X X X<br/>XXX XX       X<br/>XXXXXXXXXXXXXX<br/></pre>
<p><b>X</b>’s mark those locations that are walls and can’t be occupied. <b>S</b> marks the start location, and <b>F</b> marks the Knight. Blanks are locations that can be freely traveled.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
10 14
XXXXXXXXXXXXXX
X          XXX
X XFXXXXX    X
XXX   XX  XX X
X S          X
XX  XXXXXX X X
X        X X X
X X      X X X
XXX XX       X
XXXXXXXXXXXXXX</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
29</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">#pragma comment(linker,"/STACK:102400000,102400000")
#include &lt;cctype&gt;
#include &lt;cmath&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;ctime&gt;
#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;numeric&gt;
#include &lt;deque&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;queue&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;stack&gt;
#include &lt;iterator&gt;
#include &lt;memory&gt;
#include &lt;utility&gt;
#include &lt;string&gt;

using namespace std;

#define X first
#define Y second
#define mp make_pair
#define pb push_back
#define mset(a) memset(a,0,sizeof(a))
#define mmset(a) memset(a,-1,sizeof(a))
#define mcpy(a,b) memcpy(a,b,sizeof(a))
#define lowbit(a) ((a)&amp;(-(a)))

typedef double lf;
typedef long long ll;
typedef unsigned long long ull;
typedef pair&lt;int,int&gt; pii;
typedef pair&lt;ll,ll&gt; pll;
typedef pair&lt;lf,lf&gt; pdd;
typedef pair&lt;int,pii&gt; pip;
typedef pair&lt;pii,int&gt; ppi;
typedef vector&lt;int&gt; vi;
typedef vector&lt;pii&gt; vpii;

const int inf=1000000007;
const ll linf=1LL&lt;&lt;62;
const ull ulinf=1ULL&lt;&lt;63;
const lf eps=0.000001;
const lf pi=3.14159265358979323846;

template &lt;class T&gt; T abs(T a){return a&gt;=0?a:-a;}
template &lt;class T&gt; T sqr(T a){return a*a;}
template &lt;class T&gt; T gcd(T a,T b){return b?gcd(b,a%b):a;}
template &lt;class T&gt; T mod(T a,T b){return (a%b+b)%b;}
ll powmod(ll a,ll b,ll c){if(b==0LL)return 1LL;ll ret=powmod(a,b&gt;&gt;1,c);ret=ret*ret%c;if(b&amp;1LL)ret=ret*a%c;return ret;}
ll inv(ll a,ll b){return powmod(a,b-2LL,b);}
template &lt;class T&gt; void maxe(T &amp;a,T b){if(a&lt;b)a=b;}
template &lt;class T&gt; void mine(T &amp;a,T b){if(a&gt;b)a=b;}
int iszero(lf a){return abs(a)&lt;=eps;}

template &lt;class T&gt; void geti(T &amp;a){a=0;T b=1;char c=getchar();if(c=='-')b=-1;else a=c-48;while((c=getchar())!=' '&amp;&amp;c!='\n')a=a*10+c-48;a*=b;}

void fileio_in_out(){freopen(".in","r",stdin);freopen(".out","w",stdout);}
void fileio_txt(){freopen("input.txt","r",stdin);freopen("output.txt","w",stdout);}

//==================================================

#define DEBUG(X) 

const int N=22;
const int M=1111111;
const int K=9;

int test;
int n,m,k,ans;
char s[N][N];
int d[N][N][4];
pii st,ed;
ppi q[N*N*N*N];
int head,tail,inq[N][N][4];
const int dx[]={0,1,0,-1},dy[]={1,0,-1,0};

void push(int x,int y,int z)
{
    if(inq[x][y][z])
        return;
    inq[x][y][z]=1;
    q[++head]=mp(mp(x,y),z);
}

int check(int x,int y)
{
    return x&gt;=1&amp;&amp;x&lt;=n&amp;&amp;y&gt;=1&amp;&amp;y&lt;=m;
}

int main()
{
    //fileio_in_out();
    //fileio_txt();
    //ios::sync_with_stdio(false);
    
    scanf("%d",&amp;test);
    while(test--)
    {
        scanf("%d%d\n",&amp;n,&amp;m);
        for(int i=1;i&lt;=n;i++)
            gets(s[i]+1);
        
        for(int i=1;i&lt;=n;i++)
            for(int j=1;j&lt;=m;j++)
            {
                for(int k=0;k&lt;4;k++)
                    d[i][j][k]=inf;
                if(s[i][j]=='S')
                    st=mp(i,j);
                if(s[i][j]=='F')
                    ed=mp(i,j);
            }
        
        head=tail=0;
        for(int k=0;k&lt;4;k++)
        {
            d[st.X][st.Y][k]=0;
            push(st.X,st.Y,k);
        }
        while(head&gt;tail)
        {
            ppi t=q[++tail];
            int x=t.X.X,y=t.X.Y,z=t.Y;
            if(check(x+dx[z],y+dy[z])&amp;&amp;s[x+dx[z]][y+dy[z]]!='X'&amp;&amp;d[x+dx[z]][y+dy[z]][z]&gt;d[x][y][z]+1)
            {
                d[x+dx[z]][y+dy[z]][z]=d[x][y][z]+1;
                push(x+dx[z],y+dy[z],z);
            }
            int zz=(z+1)%4;
            if(check(x+dx[zz],y+dy[zz])&amp;&amp;s[x+dx[zz]][y+dy[zz]]!='X'&amp;&amp;d[x+dx[zz]][y+dy[zz]][zz]&gt;d[x][y][z]+1)
            {
                d[x+dx[zz]][y+dy[zz]][zz]=d[x][y][z]+1;
                push(x+dx[zz],y+dy[zz],zz);
            }
            inq[x][y][z]=0;
        }
        //printf("%d %d %d %d\n",st.X,st.Y,ed.X,ed.Y);
        ans=inf;
        for(int k=0;k&lt;4;k++)
            mine(ans,d[ed.X][ed.Y][k]);
        printf("%d\n",ans);
    }
    
    //system("pause");
    return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-78756">
<article class="comment" id="comment-78756">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919512213" rel="external nofollow">新用户451784</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-78756" rel="nofollow"><time datetime="2017-04-12T12:30:20+00:00" pubdate="">2017年4月12日 at 下午12:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>翻牌之恩，必生难忘！ 我想说有个错别字。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27384">
<article class="comment" id="comment-27384">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AC_Grazy</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-27384" rel="nofollow"><time datetime="2015-07-15T17:15:16+00:00" pubdate="">2015年7月15日 at 下午5:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-27389">
<article class="comment" id="comment-27389">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">BGPY</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-27389" rel="nofollow"><time datetime="2015-07-08T05:25:47+00:00" pubdate="">2015年7月8日 at 上午5:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正有此意，欢迎更多的建议~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27387">
<article class="comment" id="comment-27387">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wkhuahuo</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-27387" rel="nofollow"><time datetime="2015-05-30T06:00:06+00:00" pubdate="">2015年5月30日 at 上午6:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个程序编译都通不过， int L[m+1][n+1];这样定义出错，应该换成具体的数字ac</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63186">
<article class="comment" id="comment-63186">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">warriorbrant</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-63186" rel="nofollow"><time datetime="2015-05-08T02:45:09+00:00" pubdate="">2015年5月8日 at 上午2:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有没有C++语言的代码？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27388">
<article class="comment" id="comment-27388">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mnmlist</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-27388" rel="nofollow"><time datetime="2015-03-25T19:24:30+00:00" pubdate="">2015年3月25日 at 下午7:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，再多来的CF上面的题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63185">
<article class="comment" id="comment-63185">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hao555sky</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-63185" rel="nofollow"><time datetime="2015-03-22T03:21:15+00:00" pubdate="">2015年3月22日 at 上午3:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第36行，struct node **head_ref，怎么理解，那个函数感觉不是很懂啊！？？弱渣求助</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27390">
<article class="comment" id="comment-27390">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">GDUTtian</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-27390" rel="nofollow"><time datetime="2015-03-16T10:15:26+00:00" pubdate="">2015年3月16日 at 上午10:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>终于明白了递归和dp的关系，多谢分享！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-47833">
<article class="comment" id="comment-47833">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">everos</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-47833" rel="nofollow"><time datetime="2015-02-28T19:12:51+00:00" pubdate="">2015年2月28日 at 下午7:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>A的话不是不能避免冲突么？感觉出题者在考察是否考虑了冲突解决办法？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63183">
<article class="comment" id="comment-63183">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lint</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-63183" rel="nofollow"><time datetime="2014-10-02T19:06:36+00:00" pubdate="">2014年10月2日 at 下午7:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一种方法怎么会是O(log(m+n))呢？没有二分的话直接遍历应该就是O(m+n)吧？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63184">
<article class="comment" id="comment-63184">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">digiworm</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-63184" rel="nofollow"><time datetime="2014-08-13T19:50:20+00:00" pubdate="">2014年8月13日 at 下午7:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很有意思，可惜我很菜啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27385">
<article class="comment" id="comment-27385">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaotong2055</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-27385" rel="nofollow"><time datetime="2014-06-24T03:37:36+00:00" pubdate="">2014年6月24日 at 上午3:37</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>输出规范写错了哦~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63182">
<article class="comment" id="comment-63182">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zx123456</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-63182" rel="nofollow"><time datetime="2014-06-03T06:34:23+00:00" pubdate="">2014年6月3日 at 上午6:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题这里的解法最坏情况似乎应该是指数的。回溯的时候<br/>
O(n) = O(n-1) + O(n-2) + ….<br/>
O(n-1) = O(n-2) + O(n-3)+ …<br/>
O(n) – O(n-1) = O(n-1)<br/>
O(n) = 2O(n-1)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-27386">
<article class="comment" id="comment-27386">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">blogpick</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-27386" rel="nofollow"><time datetime="2014-05-06T09:45:37+00:00" pubdate="">2014年5月6日 at 上午9:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>int half(int *array,int len,int key)<br/>
{<br/>
    int l=0,r=len;<br/>
    while(l&lt;r)<br/>
    {<br/>
        int m=(l+r)&gt;&gt;1;<br/>
        if(key&gt;array <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/98/weibom_org.gif"/> )l=m+1;<br/>
        else if(key&lt;array <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/98/weibom_org.gif"/> )r=m;<br/>
        else return m;<br/>
    }<br/>
    return -1;<br/>
}<br/>
这种就能避免一些Bug<br/>
l,m,r<br/>
左边是l,m;右边就是m+1,r;</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-47834">
<article class="comment" id="comment-47834">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mitrenick</a></span> on <a href="http://www.acmerblog.com/hdu-3137-no-left-turns-4954.html#comment-47834" rel="nofollow"><time datetime="2014-03-12T05:29:31+00:00" pubdate="">2014年3月12日 at 上午5:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有意思，有难度</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>