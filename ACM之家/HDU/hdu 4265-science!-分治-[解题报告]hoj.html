<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">hdu 4265-science!-分治-[解题报告]hoj</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/graph/flow" rel="category tag" title="查看网络流中的全部文章">网络流</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观132次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7278" href="http://www.acmerblog.com/hdu-4265-science-7278.html#comments" title="《hdu 4265-science!-分治-[解题报告]hoj》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h1 style="color:#1a5cc8">Science!</h1>
<p><span size="+0" style=""><strong><span style="font-size:12px; font-family:Arial; color:green">Time Limit: 5000/2000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others)<br/>
Total Submission(s): 415    Accepted Submission(s): 116<br/>
<span style="color:red">Special Judge</span></span></strong></span></p>
<div align="left" class="panel_title">Problem Description</div>
<div class="panel_content">Welcome, ladies and gentlemen, to Aperture Science. Astronauts, War Heroes, Olympians — you’re here because we want the best, and you are it. That said, it’s time to make some science.<br/>
Now, I want each of you to stand on one of these buttons. Well done, we’re making great progress here. Now let’s do it again. Oh, come on – don’t stand on the same button! Move, people! No, no, that button’s only for the Astronauts, you know who you are. What?!<br/>
 You say you can’t do everything I ask? Ok let’s start over. You there, the Programmer, figure out how many times we can do this. And make it quick, we have a lot more science to get through…</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Input</div>
<div class="panel_content">There will be several test cases in the input. The first line of each case will contain<br/>
<strong>n</strong> (2≤<strong>n</strong>≤80) giving the number of people (and the number of buttons) in the experiment. The next<br/>
<strong>n</strong> lines will contain <strong>n</strong> characters each. If the j<sup>th</sup> character of the i<sup>th</sup> line is<br/>
<strong>Y</strong> it indicates that the i<sup>th</sup> person can stand on the j<sup>th</sup> button (it is<br/>
<strong>N</strong> otherwise). The last line of input will be a 0.</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Output</div>
<div class="panel_content">For each test case, output <strong>k</strong>, the maximum number of times everyone can be standing on buttons such that nobody stands on the same button more than once (This might be 0). After that, output<br/>
<strong>k</strong> lines. Each line should contain <strong>n</strong> integers separated by single spaces, where the i<sup>th</sup> integer describes which person is standing on the i<sup>th</sup> button. All of the lines should be valid and none of them should<br/>
 put the same person on the same button as a previous line of the same test case. Output no extra spaces, and do not separate answers with blank lines. Note that correct outputs might not be unique.</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Sample Input</div>
<div class="panel_content">
<pre><div style="font-family:Courier New,Courier,monospace">3
YYY
NYY
YNY
2
YN
YN
0</div></pre>
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Sample Output</div>
<div class="panel_content">
<pre><div style="font-family:Courier New,Courier,monospace">2
3 1 2
1 2 3
0</div></pre>
</div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Source</div>
<div class="panel_content"><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=The+University+of+Chicago+Invitational+Programming+Contest+2012&amp;source=1&amp;searchmode=source" target="_blank">The University of Chicago Invitational Programming Contest 2012<br/>
</a></div>
<div class="panel_bottom"> </div>
<p></p>
<div align="left" class="panel_title">Recommend</div>
<div class="panel_content">liuyiding   |   We have carefully selected several similar problems for you:  <a href="http://acm.hdu.edu.cn/showproblem.php?pid=5390" target="_blank">5390</a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=5389" target="_blank">5389</a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=5388" target="_blank">5388</a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=5387" target="_blank">5387</a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=5386" target="_blank">5386</a> </div>
<div class="panel_bottom"> </div>
<p><span style="font-size:14px"><br/>
</span></p>
<p><span style="font-size:14px">二分答案网络流，求出k.</span></p>
<p><span style="font-size:14px">删除多余边，</span></p>
<p><span style="font-size:14px">接下来k次，</span></p>
<p><span style="font-size:14px">每次在原图上找最大二分图匹配，删除边，</span></p>
<p><span style="font-size:14px">得到一个可行解</span></p>
<p>
</p>
<p>
</p>
<p>
</p>
<pre class="brush:cpp" name="code">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;cstdlib&gt;
#include&lt;algorithm&gt;
#include&lt;functional&gt;
#include&lt;iostream&gt;
#include&lt;cmath&gt;
#include&lt;cctype&gt;
#include&lt;ctime&gt;
using namespace std;
#define For(i,n) for(int i=1;i&lt;=n;i++)
#define Fork(i,k,n) for(int i=k;i&lt;=n;i++)
#define Rep(i,n) for(int i=0;i&lt;n;i++)
#define ForD(i,n) for(int i=n;i;i--)
#define RepD(i,n) for(int i=n;i&gt;=0;i--)
#define Forp(x) for(int p=pre[x];p;p=next[p])
#define Forpiter(x) for(int &amp;p=iter[x];p;p=next[p])
#define Lson (x&lt;&lt;1)
#define Rson ((x&lt;&lt;1)+1)
#define MEM(a) memset(a,0,sizeof(a));
#define MEMI(a) memset(a,127,sizeof(a));
#define MEMi(a) memset(a,128,sizeof(a));
#define INF (2139062143)
#define F (100000007)
#define MAXn (80+10)
#define MAXN (500+19)
#define MAXM (69999+100)
long long mul(long long a,long long b){return (a*b)%F;}
long long add(long long a,long long b){return (a+b)%F;}
long long sub(long long a,long long b){return (a-b+(a-b)/F*F+F)%F;}
typedef long long ll;
class Max_flow  //dinic+当前弧优化   
{    
public:    
    int n,s,t;    
    int q[MAXN];    
    int edge[MAXM],next[MAXM],pre[MAXN],weight[MAXM],size;    
    void addedge(int u,int v,int w)      
    {      
        edge[++size]=v;      
        weight[size]=w;      
        next[size]=pre[u];      
        pre[u]=size;      
    }      
    void addedge2(int u,int v,int w){addedge(u,v,w),addedge(v,u,0);}     
    bool b[MAXN];    
    int d[MAXN];    
    bool SPFA(int s,int t)      
    {      
        For(i,n) d[i]=INF;    
        MEM(b)    
        d[q[1]=s]=0;b[s]=1;      
        int head=1,tail=1;      
        while (head&lt;=tail)      
        {      
            int now=q[head++];      
            Forp(now)      
            {      
                int &amp;v=edge[p];      
                if (weight[p]&amp;&amp;!b[v])      
                {      
                    d[v]=d[now]+1;      
                    b[v]=1,q[++tail]=v;      
                }      
            }          
        }      
        return b[t];      
    }     
    int iter[MAXN];  
    int dfs(int x,int f)  
    {  
        if (x==t) return f;  
        Forpiter(x)  
        {  
            int v=edge[p];  
            if (weight[p]&amp;&amp;d[x]&lt;d[v])  
            {  
                  int nowflow=dfs(v,min(weight[p],f));  
                  if (nowflow)  
                  {  
                    weight[p]-=nowflow;  
                    weight[p^1]+=nowflow;  
                    return nowflow;  
                  }  
            }  
        }  
        return 0;  
    }  
    int max_flow(int s,int t)  
    {  
        int flow=0;  
        while(SPFA(s,t))  
        {  
            For(i,n) iter[i]=pre[i];  
            int f;  
            while (f=dfs(s,INF))  
                flow+=f;   
        }  
        return flow;  
    }   
    void mem(int n,int s,int t)    
    {    
        (*this).n=n;  
        (*this).t=t;    
        (*this).s=s;    
          
        size=1;    
        MEM(pre)   
    }    
}S;    

char s[MAXn][MAXn];
int n;
bool check(int m)
{
	S.mem(2*n+2,1,2*n+2);
	For(i,n) S.addedge2(1,i+1,m),S.addedge2(n+1+i,2*n+2,m);
	For(i,n) For(j,n) if (s[i][j]=='Y') S.addedge2(1+i,n+1+j,1);

	if (S.max_flow(1,2*n+2)==n*m) return 1;
	return 0;
}

int Ans[MAXn];

int main()
{
//	freopen("hdu4265.in","r",stdin);
//	freopen(".out","w",stdout);
	
	while(scanf("%d",&amp;n)==1)
	{
		if (!n) break;
		For(i,n) scanf("%s",s[i]+1);
		
		int l=0,r=n,ans=0;
		while(l&lt;=r)
		{
			int m=(l+r)&gt;&gt;1;
			if (check(m)) ans=m,l=m+1;
			else r=m-1;
		}
		
		check(ans);
			
		printf("%d\n",ans);
		Fork(i,2,n+1)
		{
			for(int p=S.pre[i];p;p=S.next[p])
				if (!S.weight[p^1]&amp;&amp;S.edge[p]&gt;n+1) s[i-1][S.edge[p]-n-1]='N'; 
			
		}
	
		while (ans--)
		{
			S.mem(2*n+2,1,2*n+2);
			For(i,n) S.addedge2(1,i+1,1),S.addedge2(n+1+i,2*n+2,1);
			For(i,n) For(j,n) if (s[i][j]=='Y') S.addedge2(1+i,n+1+j,1);
			S.max_flow(1,2*n+2);
			
		
			
			Fork(i,2,n+1)
			{
				for(int p=S.pre[i];p;p=S.next[p])
					if (!S.weight[p]&amp;&amp;S.edge[p]&gt;n+1)
					{
						Ans[S.edge[p]-n-1]=i-1,s[i-1][S.edge[p]-n-1]='N'; 
						break;
					}
			}
			
			For(i,n-1) printf("%d ",Ans[i]);printf("%d\n",Ans[n]);
	
			
		}	
		
	}
	
	return 0;
}
</pre>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98943">
<article class="comment" id="comment-98943">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529122" rel="external nofollow">新用户443539</a></span> on <a href="http://www.acmerblog.com/hdu-4265-science-7278.html#comment-98943" rel="nofollow"><time datetime="2017-04-20T14:27:53+00:00" pubdate="">2017年4月20日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>本来就是大小的区别.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68655">
<article class="comment" id="comment-68655">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919523641" rel="external nofollow">新用户021708</a></span> on <a href="http://www.acmerblog.com/hdu-4265-science-7278.html#comment-68655" rel="nofollow"><time datetime="2017-04-11T07:10:17+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>前排恶意围观，后排兜售瓜子，汽水，辣条，花生。欲购从速  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>