<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">HDU 4281-Judges’ response-动态规划-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a>, <a href="http://www.acmerblog.com/category/basis/tanxin" rel="category tag" title="查看贪心中的全部文章">贪心</a></span><span class="i4">围观124次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7294" href="http://www.acmerblog.com/hdu-4281-judges-response-7294.html#comments" title="《HDU 4281-Judges’ response-动态规划-[解题报告]HOJ》上的评论">一条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Judges’ response</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
　　The contest is running and the judges is busy watching the progress of the contest. Suddenly, N – 1 (N &lt;= 16) contestants hand up their hand at the same time. The judges should go to answer the contestants’ question one by one. The judges already foresee that answering contest i’s question would cost Ci minutes. In order to serve all the contestant, each judges is assigned to serve some subset of the contestants. As the judges have limited patience, each one of them can serve the contestants for no more than M minutes.<br/>　　You are asked to solve two problems:<br/>　　1. At least how many judges should be sent so that they can serve all the contestants? (Because the judges have limited patience, each one of them cannot serve too many contestants.)<br/>　　2. If there are infinite number of judges, how to assign the route for each judge so that the sum of their walking time is minimized? Each contestant i is reside in place (xi, yi), the judges are in place (x1, y1). Assuming the walking speed of the judge is 1. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
　　There are several test cases, Each case begin with two integer N, M(with the meaning in the above context, 2 &lt;= N &lt;= 16, 0 &lt;= M &lt;= 100000).<br/>　　Then N lines follow and line i will contain two numbers x, y(0 &lt;= x, y &lt;= 1000), indicating the coordinate of place i.<br/>　　Then another N lines follow and line i will contain numbers Ci(0 &lt;= Ci &lt;= 1000), indicating the time to solve contestant i’s question. C1 will 0 as place 1 is for the judges.<br/>　　<br/>　　The distance between place i and place j is defined as ceil(sqrt((xi – xj) ^ 2 + (yi – yj) ^ 2)). (ceil means rounding the number up, e.g. ceil(4.1) = 5) </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
　　There are several test cases, Each case begin with two integer N, M(with the meaning in the above context, 2 &lt;= N &lt;= 16, 0 &lt;= M &lt;= 100000).<br/>　　Then N lines follow and line i will contain two numbers x, y(0 &lt;= x, y &lt;= 1000), indicating the coordinate of place i.<br/>　　Then another N lines follow and line i will contain numbers Ci(0 &lt;= Ci &lt;= 1000), indicating the time to solve contestant i’s question. C1 will 0 as place 1 is for the judges.<br/>　　<br/>　　The distance between place i and place j is defined as ceil(sqrt((xi – xj) ^ 2 + (yi – yj) ^ 2)). (ceil means rounding the number up, e.g. ceil(4.1) = 5)</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3 3
0 0
0 3
0 1
0
1
2

3 2
0 0
0 3
0 1
0
1
2

3 1
0 0
0 3
0 1
0
1
2
　　
16 35
30 40
37 52
49 49
52 64
31 62
52 33
42 41
52 41
57 58
62 42
42 57
27 68
43 67
58 48
58 27
37 69
0
19
30
16
23
11
31
15
28
8
8
7
14
6
19
11</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1 6
2 8
-1 -1
8 467</pre>
<p> <!-- problem end --></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">转载请注明出处，谢谢</span><a style="color:rgb(202,0,0); text-decoration:none; font-family:Arial; font-size:18px; line-height:26px; text-align:left"> </a><a style="color:rgb(202,0,0); text-decoration:none; font-family:Arial; font-size:18px; line-height:26px; text-align:left">http://blog.csdn.net/ACM_cxlove?viewmode=contents</a><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">          <br/>
 by—cxlove </span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">题目：给出N个人，其中0号是裁判的位置，剩下有N-1的人提问，裁判需要去回答问题，每个人有一个val，每个裁判能拿到的val的上限为K。问题最少需要几个裁判，以及最少时间</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left"><a>http://acm.hdu.edu.cn/showproblem.php?pid=4281</a> <br/>
</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">第一问可以状态压缩DP解决，dp[i]表示状态i需要几个裁判。注~~~贪心 是错的！！！！</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">第二问就是多个TSP问题，dp[i][j]表示当前位置 在i，可行状态为j的最小费用，best[i]表示对于状态i的最小费用（而且是一个完整状态，裁判都回到原点），因为之前TSP中是求的可行状态，也就是每个裁判的上限不能超过K。之后就是枚举所有状态，对于一个状态，枚举他的所有子集，见代码中的位运算部分。而且两个子集中必须要包含0号结点，因为每个裁判都是从0出发的</span></p>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left">可以看这个博客：<a>http://blog.csdn.net/woshi250hua/article/details/7961869</a></span></p>
<p>
</p>
<pre class="brush:cpp" name="code">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;map&gt;
#include&lt;cstring&gt;
#include&lt;cmath&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;
#include&lt;set&gt;
#define inf 1&lt;&lt;28
#define M 100005
#define N 55
#define Min(a,b) ((a)&lt;(b)?(a):(b))
#define Max(a,b) ((a)&gt;(b)?(a):(b))
#define pb(a) push_back(a)
#define mem(a,b) memset(a,b,sizeof(a))
#define LL long long
#define MOD 1000000007
using namespace std;
struct Point{
	int x,y;
}p[20];
int n,m,val[20],path[20][20];
int dp[16][1&lt;&lt;16],state[1&lt;&lt;16],tot;
int best[1&lt;&lt;16],ok[1&lt;&lt;16];
int dist(Point p1,Point p2){
	return ceil(sqrt((double)(p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y)));
}
void Get_dist(){
	for(int i=0;i&lt;n;i++) for(int j=0;j&lt;n;j++) path[i][j]=dist(p[i],p[j]);
}
void Init(){
	for(int i=0;i&lt;n;i++)
		for(int j=0;j&lt;(1&lt;&lt;n);j++)
			dp[i][j]=inf;
	for(int i=0;i&lt;(1&lt;&lt;n);i++)
		best[i]=inf;
	dp[0][1]=0;
}
int check(int state){
	int sum=0;
	for(int i=0;i&lt;n;i++)
		if(state&amp;(1&lt;&lt;i))
			sum+=val[i];
	return sum&lt;=m;
}
bool cmp(int a,int b){return a&gt;b;}
int slove(){
	int dp[1&lt;&lt;16];
	for(int i=0;i&lt;(1&lt;&lt;n);i++) dp[i]=inf;
	dp[0]=0;
	for(int i=0;i&lt;tot;i++){
		for(int j=(1&lt;&lt;n)-1;j&gt;=0;j--){	
			if(dp[j]==inf) continue;
			if(state[i]&amp;j) continue;
			dp[state[i]+j]=min(dp[state[i]+j],dp[j]+1);
		}
	}
	return dp[(1&lt;&lt;n)-1]==inf?-1:dp[(1&lt;&lt;n)-1];
}
int TSP(){
	for(int i=0;i&lt;(1&lt;&lt;n);i++){
		if(ok[i])
			for(int j=0;j&lt;n;j++)
				if(i&amp;(1&lt;&lt;j)){
					best[i]=min(best[i],dp[j][i]+path[j][0]);
					for(int k=0;k&lt;n;k++)
						if(!(i&amp;(1&lt;&lt;k)))
							dp[k][i|(1&lt;&lt;k)]=min(dp[k][i|(1&lt;&lt;k)],dp[j][i]+path[j][k]);
				}
	}
	for(int i=0;i&lt;(1&lt;&lt;n);i++)
		if(i&amp;1)
			for(int j=i&amp;(i-1);j;j=i&amp;(j-1))
				best[i]=min(best[i],best[j]+best[(i-j)|1]);
	return best[(1&lt;&lt;n)-1];
}

int main(){
	while(scanf("%d%d",&amp;n,&amp;m)!=EOF){
		tot=0;
		for(int i=0;i&lt;n;i++) scanf("%d%d",&amp;p[i].x,&amp;p[i].y);
		for(int i=0;i&lt;n;i++) scanf("%d",&amp;val[i]);
		for(int i=0;i&lt;(1&lt;&lt;n);i++) {
			ok[i]=check(i);
			if(ok[i])
				state[tot++]=i;
		}
		Get_dist();
		Init();
		int ans1=slove();
		if(ans1==-1) {printf("-1 -1\n");continue;}
		printf("%d %d\n",ans1,TSP());
	}
	return 0;
}</pre>
<p><span style="font-family:Arial; font-size:18px; line-height:26px; text-align:left"></span></p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/acm_cxlove/article/details/7966276</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-68634">
<article class="comment" id="comment-68634">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529334" rel="external nofollow">新用户279067</a></span> on <a href="http://www.acmerblog.com/hdu-4281-judges-response-7294.html#comment-68634" rel="nofollow"><time datetime="2017-04-11T07:10:17+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>还有地方话题的人</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>