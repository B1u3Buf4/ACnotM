<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-09</div>
<div class="tit"><h1 class="entry-title">HDU 1364 Illusive Chase-最短路径-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/graph/shortest-path" rel="category tag" title="查看最短路径中的全部文章">最短路径</a></span><span class="i4">围观1077次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1794" href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comments" title="《HDU 1364 Illusive Chase-最短路径-[解题报告] C++》上的评论">12 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Illusive Chase</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Tom the robocat is presented in a Robotics Exhibition for an enthusiastic audience of youngsters, placed around an m  n field. Tom which is turned off initially is placed in some arbitrary point in the field by a volunteer from the audience. At time zero of the show, Tom is turned on by a remote control. Poor Tom is shown a holographic illusion of Jerry in a short distance such that a direct path between them is either vertical or horizontal. There may be obstacles in the field, but the illusion is always placed such that in the direct path between Tom and the illusion, there would be no obstacles. Tom tries to reach Jerry, but as soon as he gets there, the illusion changes its place and the chase goes on. Let’s call each chase in one direction (up, down, left, and right), a chase trip. Each trip starts from where the last illusion was deemed and ends where the next illusion is deemed out. After a number of chase trips, the holographic illusion no more shows up, and poor Tom wonders what to do next. At this time, he is signaled that for sure, if he returns to where he started the chase, a real Jerry is sleeping and he can catch it.
<p>To simplify the problem, we can consider the field as a grid of squares. Some of the squares are occupied with obstacles. At any instant, Tom is in some unoccupied square of the grid and so is Jerry, such that the direct path between them is either horizontal or vertical. It’s assumed that each time Tom is shown an illusion; he can reach it by moving only in one of the four directions, without bumping into an obstacle. Tom moves into an adjacent square of the grid by taking one and only one step.</p>
<p>The problem is that Tom’s logging mechanism is a bit fuzzy, thus the number of steps he has taken in each chase trip is logged as an interval of integers, e.g. 2 to 5 steps to the left. Now is your turn to send a program to Tom’s memory to help him go back. But to ease your task in this contest, your program should only count all possible places that he might have started the chase from. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of the input file contains a single integer t (1 &lt;= t &lt;= 10), the number of test cases, followed by the input data for each test case. The first line of each test case contains two integers m and n, which are the number of rows and columns of the grid respectively (1 &lt;= m, n &lt;= 100). Next, there are m lines, each containing n integers which are either 0 or 1, indicating whether the corresponding cell of the grid is empty (0) or occupied by an obstacle (1). After description of the field, there is a sequence of lines, each corresponding to a chase trip of Tom (in order). Each line contains two positive integers which together specify the range of steps Tom has taken (inclusive), followed by a single upper-case character indicating the direction of the chase trip, which is one of the four cases of R (for right), L (for left), U (for up), and D (for down). (Note that these directions are relative to the field and are not directions to which Tom turns). This part of the test case is terminated by a line containing exactly two zeros. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each test case, there should be a single line, containing an integer indicating the number of cells that Tom might have started the chase from.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
6 6
0 0 0 0 0 0
0 0 0 1 1 0
0 1 0 0 0 0
0 0 0 1 0 0
0 0 0 1 0 1
0 0 0 0 0 1
1 2 R
1 2 D
1 1 R
0 0
3 4
0 0 0 0
0 0 0 0
0 0 0 0
1 2 R
3 7 U
0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
10
0</pre>
<p> <!-- problem end --></p>
<p>这题目应该算是比较基础的差分约束吧，嘻嘻，也算是我的第一道差分约束，理解了题意之后，就是转化和构图的问题了</p>
<p><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta content="Word.Document" name="ProgId"/><meta content="Microsoft Word 11" name="Generator"/><meta content="Microsoft Word 11" name="Originator"/>
<link href="file:///C:%5CDOCUME%7E1%5CADMINI%7E1%5CLOCALS%7E1%5CTemp%5Cmsohtml1%5C01%5Cclip_filelist.xml" rel="File-List"/><xml><br/>
<w:worddocument><br/>
<w:view>Normal</w:view><br/>
<w:zoom>0</w:zoom><br/>
<w:punctuationkerning></w:punctuationkerning><br/>
<w:drawinggridverticalspacing>7.8 磅</w:drawinggridverticalspacing><br/>
<w:displayhorizontaldrawinggridevery>0</w:displayhorizontaldrawinggridevery><br/>
<w:displayverticaldrawinggridevery>2</w:displayverticaldrawinggridevery><br/>
<w:validateagainstschemas></w:validateagainstschemas><br/>
<w:saveifxmlinvalid>false</w:saveifxmlinvalid><br/>
<w:ignoremixedcontent>false</w:ignoremixedcontent><br/>
<w:alwaysshowplaceholdertext>false</w:alwaysshowplaceholdertext><br/>
<w:compatibility><br/>
<w:spaceforul></w:spaceforul><br/>
<w:balancesinglebytedoublebytewidth></w:balancesinglebytedoublebytewidth><br/>
<w:donotleavebackslashalone></w:donotleavebackslashalone><br/>
<w:ultrailspace></w:ultrailspace><br/>
<w:donotexpandshiftreturn></w:donotexpandshiftreturn><br/>
<w:adjustlineheightintable></w:adjustlineheightintable><br/>
<w:breakwrappedtables></w:breakwrappedtables><br/>
<w:snaptogridincell></w:snaptogridincell><br/>
<w:wraptextwithpunct></w:wraptextwithpunct><br/>
<w:useasianbreakrules></w:useasianbreakrules><br/>
<w:dontgrowautofit></w:dontgrowautofit><br/>
<w:usefelayout></w:usefelayout><br/>
</w:compatibility><br/>
<w:browserlevel>MicrosoftInternetExplorer4</w:browserlevel><br/>
</w:worddocument><br/>
</xml><xml><br/>
<w:latentstyles deflockedstate="false" latentstylecount="156"><br/>
</w:latentstyles><br/>
</xml></p>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<p></p>
<p align="left" class="MsoNormal" style="text-align: left; line-height: 150%;"><span style="font-size: 14px; line-height: 150%; font-family: 宋体;">构图方法<span lang="EN-US">:<o:p></o:p></span></span></p>
<p align="left" class="MsoNormal" style="text-align: left; line-height: 150%;"><span style="font-size: 14px; line-height: 150%; font-family: 宋体;">首先进行转换<span lang="EN-US">:a[j]+…+a[j+m] = a[1]+…a[j+m] – (a[1]+…+a[j-1]) = sum[j+m] – <o:p></o:p></span></span></p>
<p align="left" class="MsoNormal" style="text-align: left; line-height: 150%;"><span style="font-size: 14px;"><span lang="EN-US" style="line-height: 150%; font-family: 宋体;">sum[j-1]<br/>
&gt;(&lt;) ki. </span><span style="line-height: 150%; font-family: 宋体;">差分约束只能全部是<span lang="EN-US">&lt;=</span>或者<span lang="EN-US">(&gt;=).<o:p></o:p></span></span></span></p>
<p align="left" class="MsoNormal" style="text-align: left; line-height: 150%;"><span style="font-size: 14px; line-height: 150%; font-family: 宋体;">第二步转换<span lang="EN-US">: sum[j+m]-sum[j-1] &lt;= ki-1 </span>或者<span lang="EN-US"><br/>
sum[j-1]-sum[j+m] &lt;= -ki-1.<o:p></o:p></span></span></p>
<p align="left" class="MsoNormal" style="text-align: left; line-height: 150%;"><span style="font-size: 9pt; line-height: 150%; font-family: 宋体;"><span style="font-size: 14px;">约束图构造好后就是简单的<span lang="EN-US">Bellman-Ford</span>了</span><span lang="EN-US"><span style="font-size: 14px;">!</span></span></span></p>
<p align="left" class="MsoNormal" style="text-align: left; line-height: 150%;"><span style="font-size: 9pt; line-height: 150%; font-family: 宋体;"><span lang="EN-US"><span style="font-size: 14px;">注意，用bellman-Ford一定&lt;= 或者&gt;=，而题目给的只有&lt; 或者&gt; ,所以为了能用Bellman-Ford解决，就得在权重上面动手脚了，如上所示。</span></span></span></p>
<pre class="brush:cpp ">#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;queue&gt;
#define MAXINT 9999999
#define MAXN 110
using namespace std;
int dis[MAXN],n,m,min1,max1;
struct edge
{
	int u,v,w;
}e[MAXN];
bool bellman_ford()
{
	for(int i=min1;i&lt;=max1;i++)
		dis[i]=MAXINT;
	dis[min1]=0;//这里可要也可不要，因为Bellman-Ford是对所有边进行操作的，即使没有源点也照样进行松弛操作
	for(int i=1;i&lt;=n;i++)
	{
		for(int j=0;j&lt;m;j++)
		{
			if(dis[e[j].v]&gt;dis[e[j].u]+e[j].w)
				dis[e[j].v]=dis[e[j].u]+e[j].w;
		}
	}
		for(int j=0;j&lt;m;j++)
		{
			if(dis[e[j].v]&gt;dis[e[j].u]+e[j].w)
				return false;
		}
		return true;
}
int main()
{
	char str[5];
	int a,b,c;
	while(cin&gt;&gt;n)
	{
		if(n==0) break;
		cin&gt;&gt;m;
		max1=0;min1=MAXN;
		for(int i=0;i&lt;m;i++)
		{
			cin&gt;&gt;a&gt;&gt;b&gt;&gt;str&gt;&gt;c;
			max1=max(a+b+1,max1);
			min1=min(a,min1);
			min1=min(b,min1);
			if(strcmp(str,"gt")==0)
			{
				e[i].u=a+b+1;
				e[i].v=a;
				e[i].w=-c-1;
			}
			else {
				e[i].v=a+b+1;
				e[i].u=a;
				e[i].w=c-1;
			}
		}
		if(bellman_ford())
			cout&lt;&lt;"lamentable kingdom"&lt;&lt;endl;
		else cout&lt;&lt;"successful conspiracy"&lt;&lt;endl;
	}
	return 0;
}</pre>
<p>解题报告转自：http://www.cnblogs.com/nanke/archive/2011/08/14/2137638.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-12801">
<article class="comment" id="comment-12801">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">congve1</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-12801" rel="nofollow"><time datetime="2015-04-26T00:14:20+00:00" pubdate="">2015年4月26日 at 上午12:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;stdio.h&gt;<br/>
int main(void)<br/>
{<br/>
int arr[] = {10,20,30,40,50,60};<br/>
int *p=arr;<br/>
printf("%d,%d,",*p++,*++p);<br/>
printf("%d,%d,%d",*p,*p++,*++p);<br/>
return 0;<br/>
}</p>
<p>为什么是 20,20,50,40,50. 我觉得的应该是 20,20,40,40,50 . 谁能解释下？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54651">
<article class="comment" id="comment-54651">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">PriceKiller</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-54651" rel="nofollow"><time datetime="2015-04-08T11:58:18+00:00" pubdate="">2015年4月8日 at 上午11:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不考虑最后将结果排序的话，快排的时间复杂度是O(N) ，而堆排的是O(N*logK)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40762">
<article class="comment" id="comment-40762">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1832044043</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-40762" rel="nofollow"><time datetime="2015-01-11T17:04:47+00:00" pubdate="">2015年1月11日 at 下午5:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>51行错了，改为：void Union(struct subset subsets[], int x, int y)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12799">
<article class="comment" id="comment-12799">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-12799" rel="nofollow"><time datetime="2014-09-22T23:56:21+00:00" pubdate="">2014年9月22日 at 下午11:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有点意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12800">
<article class="comment" id="comment-12800">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">binqi_ren</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-12800" rel="nofollow"><time datetime="2014-09-04T09:38:45+00:00" pubdate="">2014年9月4日 at 上午9:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/good_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_org.gif"/> </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61493">
<article class="comment" id="comment-61493">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Aliens</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-61493" rel="nofollow"><time datetime="2014-08-23T06:42:44+00:00" pubdate="">2014年8月23日 at 上午6:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>嗯，是写错了，文中以更改。MAX ( L(X[0..m-2], Y[0..n-1]), L(X[0..m-1], Y[0..n-2])</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40760">
<article class="comment" id="comment-40760">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magicSky</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-40760" rel="nofollow"><time datetime="2014-08-01T18:23:38+00:00" pubdate="">2014年8月1日 at 下午6:23</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已更正。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40761">
<article class="comment" id="comment-40761">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">blogpick</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-40761" rel="nofollow"><time datetime="2014-07-16T07:18:48+00:00" pubdate="">2014年7月16日 at 上午7:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感谢分享 学习了`(*∩_∩*)′</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-54652">
<article class="comment" id="comment-54652">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zjd1988</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-54652" rel="nofollow"><time datetime="2014-05-27T18:46:32+00:00" pubdate="">2014年5月27日 at 下午6:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Often We don’t set up on weblogs, but I would like to condition that this established up really forced me individually to do this! considerably outstanding publish</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40763">
<article class="comment" id="comment-40763">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tangxiansheng</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-40763" rel="nofollow"><time datetime="2014-02-16T11:55:53+00:00" pubdate="">2014年2月16日 at 上午11:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个也是算法导论的习题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-40764">
<article class="comment" id="comment-40764">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">we</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-40764" rel="nofollow"><time datetime="2014-01-27T00:26:12+00:00" pubdate="">2014年1月27日 at 上午12:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>惊艳了，没想到代码如此简洁</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54653">
<article class="comment" id="comment-54653">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">actlea</a></span> on <a href="http://www.acmerblog.com/hdu-1364-Illusive-Chase-1794.html#comment-54653" rel="nofollow"><time datetime="2014-01-18T02:17:13+00:00" pubdate="">2014年1月18日 at 上午2:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>此题答案确实应该是A。文中已修改，感谢一楼的提醒！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>