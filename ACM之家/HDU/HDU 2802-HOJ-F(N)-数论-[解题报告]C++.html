<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>02-17</div>
<div class="tit"><h1 class="entry-title">HDU 2802-HOJ-F(N)-数论-[解题报告]C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/search" rel="category tag" title="查看搜索中的全部文章">搜索</a>, <a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a></span><span class="i4">围观417次</span><span class="i3"><a class="ds-thread-count" data-thread-key="4434" href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comments" title="《HDU 2802-HOJ-F(N)-数论-[解题报告]C++》上的评论">22 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">F(N)</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
<img src="http://www.acmerblog.com/img/1392865016792.gif"/><br/>Giving the N, can you tell me the answer of F(N)? </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
Each test case contains a single integer N(1&lt;=N&lt;=10^9). The input is terminated by a set starting with N = 0. This set should not be processed. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
Each test case contains a single integer N(1&lt;=N&lt;=10^9). The input is terminated by a set starting with N = 0. This set should not be processed.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
2
3
0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1
7
20</pre>
<p> <!-- problem end --></p>
<p>刚做完一道推公式题，这题跟上一题解题思路很像。做完后上网搜索，发现有些人不是我这样做的，他们是发现了结果中有循环节，不过我还是觉得我的做法更巧妙。</p>
<p>我的做法如下：</p>
<p>首先推出公式f(n)=cell[(n+1)*(n+1)*(2n-1)/4]；</p>
<p>这里涉及浮点数向上取整问题，将会给取余操作带来很大的麻烦，于是分类讨论之，我们记g(n)=(n+1)*(n+1)*(2n-1)。</p>
<p>显然，当n为奇数时，g(n)能被4整除</p>
<p>当n为偶数时，我们将g(n)等价转换为：n*n*(2n-1)+4*n*n-1，于是结论就显然了，g(n)+1一定能被4整除，这正是结果向上取整后的结果。</p>
<p>接下来就用我上一题的方法如法炮制就行了。</p>
<pre class="brush:cpp ">/*
 * hdu2802/win.cpp
 * Created on: 2011-10-28
 * Author    : ben
 */
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#include &lt;ctime&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;deque&gt;
#include &lt;list&gt;
#include &lt;functional&gt;
#include &lt;numeric&gt;
#include &lt;cctype&gt;
using namespace std;
const int MOD = 2009 * 4;

int main() {
#ifndef ONLINE_JUDGE
    freopen("data.in", "r", stdin);
#endif
    int n;
    long long ans;
    while (scanf("%d", &amp;n) == 1 &amp;&amp; n &gt; 0) {
        ans = (n + 1);
        ans *= (n + 1);
        ans %= MOD;
        ans *= (2 * n - 1);
        ans %= MOD;
        if (n % 2 == 0) {
            ans++;
        }
        ans %= MOD;
        ans /= 4;
        printf("%d\n", (int) ans);
    }
    return 0;
}</pre>
<p>解题参考：http://www.cnblogs.com/moonbay/archive/2011/10/28/2228163.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-81919">
<article class="comment" id="comment-81919">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81919" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81918">
<article class="comment" id="comment-81918">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81918" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81917">
<article class="comment" id="comment-81917">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81917" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81916">
<article class="comment" id="comment-81916">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81916" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81924">
<article class="comment" id="comment-81924">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81924" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81923">
<article class="comment" id="comment-81923">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81923" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81922">
<article class="comment" id="comment-81922">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81922" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81921">
<article class="comment" id="comment-81921">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81921" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-81920">
<article class="comment" id="comment-81920">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529292" rel="external nofollow">新用户579145</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-81920" rel="nofollow"><time datetime="2017-04-12T19:45:07+00:00" pubdate="">2017年4月12日 at 下午7:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不用多想了  肯定是D  秒选！  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46575">
<article class="comment" id="comment-46575">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">OrangeGuy</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46575" rel="nofollow"><time datetime="2015-03-22T10:31:27+00:00" pubdate="">2015年3月22日 at 上午10:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>都是一些基础题啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46567">
<article class="comment" id="comment-46567">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">verycourage</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46567" rel="nofollow"><time datetime="2015-02-18T20:24:57+00:00" pubdate="">2015年2月18日 at 下午8:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>后面的掩码变量部分乍一看比较难理解，其实就是把32位按照一个整体来看待。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46568">
<article class="comment" id="comment-46568">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">edward2414</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46568" rel="nofollow"><time datetime="2015-02-11T16:58:24+00:00" pubdate="">2015年2月11日 at 下午4:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢支持！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57450">
<article class="comment" id="comment-57450">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wizcabbit</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-57450" rel="nofollow"><time datetime="2015-01-22T03:10:48+00:00" pubdate="">2015年1月22日 at 上午3:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>gcc环境</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46570">
<article class="comment" id="comment-46570">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">userwawa</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46570" rel="nofollow"><time datetime="2015-01-12T14:13:33+00:00" pubdate="">2015年1月12日 at 下午2:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>mark, 备用</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-24809">
<article class="comment" id="comment-24809">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bcys</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-24809" rel="nofollow"><time datetime="2014-12-20T09:25:02+00:00" pubdate="">2014年12月20日 at 上午9:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这种二分还是比较经典！mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46573">
<article class="comment" id="comment-46573">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">nwling</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46573" rel="nofollow"><time datetime="2014-11-02T18:32:27+00:00" pubdate="">2014年11月2日 at 下午6:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真心不错，力顶作者</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-57449">
<article class="comment" id="comment-57449">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">silianbo</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-57449" rel="nofollow"><time datetime="2014-11-01T19:46:36+00:00" pubdate="">2014年11月1日 at 下午7:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>“可以发现,树将是满二叉树,”这句话不对吧，构造的树应该是“完全二叉树”，而非“满二叉树”。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-24808">
<article class="comment" id="comment-24808">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sharp</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-24808" rel="nofollow"><time datetime="2014-10-09T07:44:33+00:00" pubdate="">2014年10月9日 at 上午7:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>漏了一个"不"，已修正:)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46569">
<article class="comment" id="comment-46569">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sgx_go</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46569" rel="nofollow"><time datetime="2014-08-22T08:20:21+00:00" pubdate="">2014年8月22日 at 上午8:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>怎么输入两个0程序还没退出</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46571">
<article class="comment" id="comment-46571">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AC_Grazy</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46571" rel="nofollow"><time datetime="2014-06-17T10:42:19+00:00" pubdate="">2014年6月17日 at 上午10:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>根本过不了。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-46572">
<article class="comment" id="comment-46572">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">woweizhineng</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46572" rel="nofollow"><time datetime="2014-06-17T06:52:53+00:00" pubdate="">2014年6月17日 at 上午6:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一种方法怎么会是O(log(m+n))呢？没有二分的话直接遍历应该就是O(m+n)吧？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46574">
<article class="comment" id="comment-46574">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zzzzzz</a></span> on <a href="http://www.acmerblog.com/hdu-2802-fn-4434.html#comment-46574" rel="nofollow"><time datetime="2014-04-17T18:05:47+00:00" pubdate="">2014年4月17日 at 下午6:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>5.1处，反了；“上一个操作符的优先级比操作符ch的优先级大，或栈是空的就入栈。”如代码所述，应为“上一个操作符的优先级比操作符ch的优先级小，或栈是空的就入栈。”</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>