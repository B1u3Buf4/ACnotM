<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-12</div>
<div class="tit"><h1 class="entry-title">HDU 1509 Windows Message Queue-优先队列-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/sort" rel="category tag" title="查看排序中的全部文章">排序</a>, <a href="http://www.acmerblog.com/category/data-struct/linear" rel="category tag" title="查看线性结构中的全部文章">线性结构</a></span><span class="i4">围观1038次</span><span class="i3"><a class="ds-thread-count" data-thread-key="2066" href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comments" title="《HDU 1509 Windows Message Queue-优先队列-[解题报告] C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Windows Message Queue</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Message queue is the basic fundamental of windows system. For each process, the system maintains a message queue. If something happens to this process, such as mouse click, text change, the system will add a message to the queue. Meanwhile, the process will do a loop for getting message from the queue according to the priority value if it is not empty. Note that the less priority value means the higher priority. In this problem, you are asked to simulate the message queue for putting messages to and getting message from the message queue. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There’s only one test case in the input. Each line is a command, "GET" or "PUT", which means getting message or putting message. If the command is "PUT", there’re one string means the message name and two integer means the parameter and priority followed by. There will be at most 60000 command. Note that one message can appear twice or more and if two messages have the same priority, the one comes first will be processed first.(i.e., FIFO for the same priority.) Process to the end-of-file. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each "GET" command, output the command getting from the message queue with the name and parameter in one line. If there’s no message in the queue, output "EMPTY QUEUE!". There’s no output for "PUT" command.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
GET
PUT msg1 10 5
PUT msg2 10 4
GET
GET
GET</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
EMPTY QUEUE!
msg2 10
msg1 10
EMPTY QUEUE!</pre>
<p> <!-- problem end --></p>
<p>题目大意：</p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial">是当输入</span><span style="font-size:12pt; font-family:Arial">PUT</span><span style="font-size:10.5pt; font-family:Arial">时，接收一个</span><span style="font-size:12pt; font-family:Arial">msg</span><span style="font-size:10.5pt; font-family:Arial">的名称，参数和优先级，将它放在队列尾，当输入</span><span style="font-size:12pt; font-family:Arial">GET</span><span style="font-size:10.5pt; font-family:Arial">时，如果队列是空的，输出<span style="font-family:Times New Roman">“</span></span><span style="font-size:12pt; font-family:Arial">EMPTY QUEUE!<span style="font-family:Times New Roman">”</span></span><span style="font-size:10.5pt; font-family:Arial">，如果非空，输出优先级最高的那条</span><span style="font-size:12pt; font-family:Arial">msg</span><span style="font-size:10.5pt; font-family:Arial">的名称和参数（也就是数值最小的），并把它从队列里删除。</span><span style="font-size:10.5pt; font-family:Arial"></span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial"><br/>
</span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial">解题思路：</span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial">1）这道题根据输出中包含“queue”，那么我们可以考虑一下使用queue(队列)来解决这个问题。然而在队列中，要出现后进先出的情况，这时我们便可以考虑使用优先队列来解决这个问题。。。。</span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial">2）<img alt="" src="http://img.blog.csdn.net/20130807183336593?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGpkX2xvdmVfenp0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>。在这里，我对这个比较函数有一些自己的看法(可能不正确).其实，return<br/>
 a&lt;b</span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial">，这个意思应该是“维持默认的排序方式”，而在一般情况下，默认的排序方式即为升序。而return a  &gt; b则表示采用相反于默认排序的方式进行排序。</span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial">在优先队列中，默认的排序方式是降序排序。</span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial"><br/>
</span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-family:Arial"><span style="font-size:14px">AC代码如下：</span></span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-family:Arial"><span style="font-size:14px"></span></span></p>
<pre class="brush:cpp ">/*
 * 1509_1.cpp
 *
 *  Created on: 2013年8月7日
 *      Author: Administrator
 */


#include &lt;iostream&gt;
#include &lt;queue&gt;

using namespace std;

struct Node{
	string name;
	int val;
	int priority;
	int num;
	friend bool operator&lt;(Node a , Node b){
		if(a.priority != b.priority){
		
			//先输出优先级高的(即priority小的)
			return b.priority &lt; a.priority;
		}

		//用来实现当优先级相同时根据进队顺序输出的功能
		return b.num &lt; a.num;
	}
};
int main(){

	priority_queue&lt;Node&gt; q;
	Node cur , next;

	string str;
	int k = 0;
	while(cin &gt;&gt; str){
		if( str == "GET"){
			if(q.empty()){
				cout&lt;&lt;"EMPTY QUEUE!"&lt;&lt;endl;
			}else{
				cur = q.top();
				q.pop();

				cout&lt;&lt;cur.name&lt;&lt;" "&lt;&lt;cur.val&lt;&lt;endl;
			}
		}else{
			cin&gt;&gt;next.name&gt;&gt;next.val&gt;&gt;next.priority;

			//用来标记进队顺序,先进的num值小
			next.num = k++;
			q.push(next);
		}
	}



}</pre>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-family:Arial"><span style="font-size:14px"><br/>
</span></span></p>
<p class="p0" style="margin-bottom:0pt; margin-top:0pt"><span style="font-size:10.5pt; font-family:Arial"><br/>
</span></p>
<p>解题报告转自：http://blog.csdn.net/hjd_love_zzt/article/details/9821043</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-41267">
<article class="comment" id="comment-41267">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jixiangniao993</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-41267" rel="nofollow"><time datetime="2015-06-30T03:54:12+00:00" pubdate="">2015年6月30日 at 上午3:54</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-41265">
<article class="comment" id="comment-41265">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xy7850151</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-41265" rel="nofollow"><time datetime="2015-06-03T13:13:03+00:00" pubdate="">2015年6月3日 at 下午1:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-41268">
<article class="comment" id="comment-41268">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaotongtest</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-41268" rel="nofollow"><time datetime="2015-04-04T12:06:39+00:00" pubdate="">2015年4月4日 at 下午12:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>值得分享！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54929">
<article class="comment" id="comment-54929">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Supermaner</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-54929" rel="nofollow"><time datetime="2015-01-23T06:38:21+00:00" pubdate="">2015年1月23日 at 上午6:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>97行缺一个分号</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13859">
<article class="comment" id="comment-13859">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">kate19930802</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-13859" rel="nofollow"><time datetime="2015-01-11T01:11:04+00:00" pubdate="">2015年1月11日 at 上午1:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>.net中char类型不是两个字节么</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54928">
<article class="comment" id="comment-54928">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cyyuen</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-54928" rel="nofollow"><time datetime="2014-12-01T12:59:05+00:00" pubdate="">2014年12月1日 at 下午12:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好的思路，可以借鉴</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13857">
<article class="comment" id="comment-13857">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">spiderMan</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-13857" rel="nofollow"><time datetime="2014-11-13T13:46:34+00:00" pubdate="">2014年11月13日 at 下午1:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>居然看懂了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-41269">
<article class="comment" id="comment-41269">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123456789_xd</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-41269" rel="nofollow"><time datetime="2014-09-21T11:18:11+00:00" pubdate="">2014年9月21日 at 上午11:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个也是算法导论的习题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13854">
<article class="comment" id="comment-13854">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-13854" rel="nofollow"><time datetime="2014-09-05T02:27:16+00:00" pubdate="">2014年9月5日 at 上午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>if(j){<br/>
                    int ans=a <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> ;<br/>
                    for(int x=j-1;x&gt;=0;x–){<br/>
                        if(!a <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d7/newx_org.gif"/> ) break;<br/>
                        ans=min(ans,a <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d7/newx_org.gif"/> );<br/>
                        sum+=ans;<br/>
                    }<br/>
                }<br/>
求解释，，dp的思路是什么呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-41266">
<article class="comment" id="comment-41266">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">howhaw</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-41266" rel="nofollow"><time datetime="2014-08-02T07:47:46+00:00" pubdate="">2014年8月2日 at 上午7:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不考虑最后将结果排序的话，快排的时间复杂度是O(N) ，而堆排的是O(N*logK),这样比较看，快排快</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13856">
<article class="comment" id="comment-13856">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wall_</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-13856" rel="nofollow"><time datetime="2014-05-10T08:50:10+00:00" pubdate="">2014年5月10日 at 上午8:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，算是枚举吧，已修正</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13855">
<article class="comment" id="comment-13855">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Christmas</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-13855" rel="nofollow"><time datetime="2014-02-13T17:44:01+00:00" pubdate="">2014年2月13日 at 下午5:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>题目需要求解的是最小值，而且没有考虑可能存在环，比如<br/>
0 0 0 0 0<br/>
1 1 1 1 0<br/>
1 0 0 0 0<br/>
1 0 1 0 1<br/>
1 0 0 0 0<br/>
会陷入死循环</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-13860">
<article class="comment" id="comment-13860">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tzf888888</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-13860" rel="nofollow"><time datetime="2014-01-14T09:45:50+00:00" pubdate="">2014年1月14日 at 上午9:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法挺不错。NewHead代表新的头节点，通过递归找到最后一个节点之后，就把这个节点赋给NewHead，然后一直返回返回，中途这个值是没有变化的，一边返回一边把相应的指针方向颠倒，最后结束时返回新的头节点到主函数。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13858">
<article class="comment" id="comment-13858">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">slowlight</a></span> on <a href="http://www.acmerblog.com/hdu-1509-Windows-Message-Queue-2066.html#comment-13858" rel="nofollow"><time datetime="2013-12-28T06:30:33+00:00" pubdate="">2013年12月28日 at 上午6:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>正确性是关键，冲突是都会有的，主要是那种算法冲突的概率低</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>