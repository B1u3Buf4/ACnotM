<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>07-17</div>
<div class="tit"><h1 class="entry-title">HDU 4491-Windmill Animation-模拟-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/simulate" rel="category tag" title="查看模拟法中的全部文章">模拟法</a>, <a href="http://www.acmerblog.com/category/geometry" rel="category tag" title="查看计算几何中的全部文章">计算几何</a></span><span class="i4">围观121次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7504" href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comments" title="《HDU 4491-Windmill Animation-模拟-[解题报告]HOJ》上的评论">13 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Windmill Animation</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
A windmill animation works as follows:<br/>A two-dimensional set of points, no three of which lie on a line is chosen.  Then one of the points is chosen (as the first pivot) and a line is drawn through the chosen point at some initial angle.  The animation proceeds by rotating the line counter-clockwise about the pivot at a constant rate.    When the line hits another of the points, that point becomes the new pivot point.  In the two examples below, the points are (-1,1), (1,1), (0,0),  (-1,-2) and (1,-2).<br/><center><img alt="Mad Veterinarian" src="http://www.acmerblog.com/img/1445723437984.jpg"/></center> <br/><center><b> Example 1</b></center>
<p>In Example 1, the start point is point 1 and the line starts rotated 45 degrees from horizontal.  When the line rotates to 90 degrees, point 4 is hit and becomes the new pivot.  Then point 5 becomes the new pivot, then point 2 then point 1.<br/></p><center><img alt="Mad Veterinarian" src="http://www.acmerblog.com/img/1445723438072.jpg"/></center> <br/><center><b> Example 2</b></center>
<p>In Example 2, the initial point is point 3 and the line starts horizontal.  At 45 degrees, point 2 becomes the pivot, then at about 56 degrees, point 4 becomes the pivot. At about 63 degrees, point 3 becomes the pivot again, then point 5, point 1 and back  to 3 as at the start.</p>
<p> Write a program, which takes as input the points of the set, the initial point and the initial line angle and outputs the sequence of pivot points. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of input contains a single integer P, (1&lt;=  P &lt;= 1000), which is the number of data sets that follow.  Each data set should be processed identically and independently.
<p>Each data set consists of multiple lines of input.  The first line of each data set consists of four space- separated decimal integers followed by a single floating-point value.  The first integer is the data set number. The second integer is the number of points M to follow (3  &lt;=  M  &lt;=  20).  The third integer gives the number, s , of the pivot points to output (3  &lt;=   s   &lt;=  20) and the fourth integer gives the index, I, of the initial point (1  &lt;=  I &lt;=  M).  The floating-point value is the angle, A, in degrees, that the initial line is rotated counter-clockwise from horizontal (0  &lt;=  A  &lt;  180).</p>
<p>The remaining M lines in the data set contain the coordinates of the set of points. Each line consists of an integer, the point.s index, I, and two floating-point values, the X and Y coordinates of the point respectively. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line of input contains a single integer P, (1&lt;=  P &lt;= 1000), which is the number of data sets that follow.  Each data set should be processed identically and independently.
<p>Each data set consists of multiple lines of input.  The first line of each data set consists of four space- separated decimal integers followed by a single floating-point value.  The first integer is the data set number. The second integer is the number of points M to follow (3  &lt;=  M  &lt;=  20).  The third integer gives the number, s , of the pivot points to output (3  &lt;=   s   &lt;=  20) and the fourth integer gives the index, I, of the initial point (1  &lt;=  I &lt;=  M).  The floating-point value is the angle, A, in degrees, that the initial line is rotated counter-clockwise from horizontal (0  &lt;=  A  &lt;  180).</p>
<p>The remaining M lines in the data set contain the coordinates of the set of points. Each line consists of an integer, the point.s index, I, and two floating-point values, the X and Y coordinates of the point respectively.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
1  5  5  1  45
1  -1  1
2  1  1
3  0  0
4  -1  -2
5  1  -2
2  5  7  3  0
1  -1  1
2  1  1
3  0  0
4  -1  -2
5  1  -2</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1 4 5 2 1 4
2 2 4 3 5 1 3 2</pre>
<p> <!-- problem end --></p>
<p><span style="font-family:Microsoft YaHei; font-size:18px">给定平面上的n(n&lt;=20)个点,不存在三点共线。然后每次用某条直线（原点及斜率）逆时针旋转，每碰到一个点后，更换原点跟斜率。求出前s个原点。</span></p>
<p><span style="font-family:Microsoft YaHei; font-size:18px">考虑到n很小，可以模拟来搞。每次得到一个原点及斜率，然后构造出在直线上原点(O)的上方(rp）和下方(rn)两个点。然后依次每个不在该直线上的点，如果该点在直线上方，那么要达到该点逆时针旋转的角度为向量 rp-&gt;O 和向量 p-&gt;O的夹角。反之则是向量O-&gt;rp和向量O-&gt;rn的夹角。</span></p>
<p><span style="font-family:Microsoft YaHei; font-size:18px"></span></p>
<pre class="brush:cpp" name="code">#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;fstream&gt;
#include&lt;sstream&gt;
#include&lt;cstdlib&gt;
#include&lt;vector&gt;
#include&lt;string&gt;
#include&lt;cstdio&gt;
#include&lt;bitset&gt;
#include&lt;queue&gt;
#include&lt;stack&gt;
#include&lt;cmath&gt;
#include&lt;map&gt;
#include&lt;set&gt;
#define FF(i, a, b) for(int i=a; i&lt;b; i++)
#define FD(i, a, b) for(int i=a; i&gt;=b; i--)
#define REP(i, n) for(int i=0; i&lt;n; i++)
#define CLR(a, b) memset(a, b, sizeof(a))
#define debug puts("**debug**")
#define LL long long
#define PB push_back
#define MP make_pair
using namespace std;

const double eps = 1e-8;
const double PI = acos(-1.0);
int dcmp(double x) {
  if(fabs(x) &lt; eps) return 0; else return x &lt; 0 ? -1 : 1;
}

struct Point {
  double x, y;
  Point(double x=0, double y=0):x(x),y(y) { }
};

typedef Point Vector;

Vector operator + (Vector A, Vector B) { return Vector(A.x+B.x, A.y+B.y); }
Vector operator - (Point A, Point B) { return Vector(A.x-B.x, A.y-B.y); }
Vector operator * (Vector A, double p) { return Vector(A.x*p, A.y*p); }
Vector operator / (Vector A, double p) { return Vector(A.x/p, A.y/p); }

bool operator &lt; (const Point&amp; a, const Point&amp; b) {
  return a.x &lt; b.x || (a.x == b.x &amp;&amp; a.y &lt; b.y);
}

bool operator == (const Point&amp; a, const Point &amp;b) {
  return dcmp(a.x-b.x) == 0 &amp;&amp; dcmp(a.y-b.y) == 0;
}

double Dot(Vector A, Vector B) { return A.x*B.x + A.y*B.y; }
double Length(Vector A) { return sqrt(Dot(A, A)); }
double Angle(Vector A, Vector B) { return acos(Dot(A, B) / Length(A) / Length(B)); }
double angle(Vector v) { return atan2(v.y, v.x); }
double torad(double ang)
{
    return ang / 180 * PI;
}

void getLineGeneralEquation(const Point&amp; p1, const Point&amp; p2, double&amp; a, double&amp; b, double &amp;c) {
  a = p2.y-p1.y;
  b = p1.x-p2.x;
  c = -a*p1.x - b*p1.y;
}

Point read_point()
{
    Point a;
    scanf("%lf%lf", &amp;a.x, &amp;a.y);
    return a;
}

const int maxn = 30;
int P, cas, ind, n, s, st, ans[maxn];
double ang;
Point p[maxn];

int main()
{
    scanf("%d", &amp;P);
    while(P--)
    {
        scanf("%d%d%d%d%lf", &amp;cas, &amp;n, &amp;s, &amp;st, &amp;ang);
        ang = torad(ang);
        FF(i, 1, n+1)
        {
            scanf("%d", &amp;ind);
            p[ind] = read_point();
        }
        int tot = 0, id1 = st, id2 = st;
        Point now = p[st];
        while(tot &lt; s)
        {
            int nxt;
            double a, b, c, tmp, tang, nxtang = 1e50;
            Point O = now, rp = O + Point(1000*cos(ang), 1000*sin(ang)) , rn = O - Point(1000*cos(ang), 1000*sin(ang));
            getLineGeneralEquation(O, rp, a, b, c);
            FF(i, 1, n+1) if(i != id1 &amp;&amp; i != id2)
            {
                tmp = a*p[i].x + b*p[i].y + c;
                if(tmp &gt; 0) tang = Angle(rn-O, p[i]-O);
                else if(tmp &lt; 0) tang = Angle(rp-O, p[i]-O);
                else tang = 0;
                if(dcmp(nxtang - tang) &gt; 0) nxtang = tang, nxt = i;
            }
            ans[tot++] = nxt;
            ang = angle(now-p[nxt]);
            now = p[nxt];
            id1 = id2;
            id2 = nxt;
        }
        printf("%d", cas);
        REP(i, tot) printf(" %d", ans[i]);
        puts("");
    }
    return 0;
}
</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/diary_yang/article/details/12855727</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97871">
<article class="comment" id="comment-97871">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919513760" rel="external nofollow">新用户985407</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-97871" rel="nofollow"><time datetime="2017-04-20T08:48:51+00:00" pubdate="">2017年4月20日 at 上午8:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>说实话，这款软件，没有SPX方便。而功能强大方面我还是比较喜欢HyperSnap才是截图软件中的精品。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67419">
<article class="comment" id="comment-67419">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67419" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67418">
<article class="comment" id="comment-67418">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67418" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67417">
<article class="comment" id="comment-67417">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67417" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67416">
<article class="comment" id="comment-67416">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67416" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67415">
<article class="comment" id="comment-67415">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67415" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67414">
<article class="comment" id="comment-67414">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67414" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67413">
<article class="comment" id="comment-67413">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67413" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67412">
<article class="comment" id="comment-67412">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67412" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67411">
<article class="comment" id="comment-67411">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67411" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67410">
<article class="comment" id="comment-67410">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67410" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67409">
<article class="comment" id="comment-67409">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67409" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-67408">
<article class="comment" id="comment-67408">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919511784" rel="external nofollow">新用户315213</a></span> on <a href="http://www.acmerblog.com/hdu-4491-windmill-animation-7504.html#comment-67408" rel="nofollow"><time datetime="2017-04-11T00:40:27+00:00" pubdate="">2017年4月11日 at 上午12:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>只从文章来看是自杀应该</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>