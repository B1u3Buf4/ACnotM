<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>05-23</div>
<div class="tit"><h1 class="entry-title">hdu 4249-a famous equation-动态规划-[解题报告]hoj</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/enumeration" rel="category tag" title="查看枚举中的全部文章">枚举</a>, <a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观139次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7262" href="http://www.acmerblog.com/hdu-4249-a-famous-equation-7262.html#comments" title="《hdu 4249-a famous equation-动态规划-[解题报告]hoj》上的评论">2 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h1 style="color:rgb(26,92,200); text-align:center; font-family:'Times New Roman'">
A Famous Equation</h1>
<p><span style="font-family:'Times New Roman'; font-size:16px"><strong><span style="font-family:Arial; font-size:12px; color:green">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others)<br/>
Total Submission(s): 38    Accepted Submission(s): 18<br/>
</span></strong></span><br style="font-family:'Times New Roman'; font-size:16px"/><br/>
<br style="font-family:'Times New Roman'; font-size:16px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'; text-align:left">
Mr. B writes an addition equation such as 123+321=444 on the blackboard after class. Mr. G removes some of the digits and makes it look like “1?3+??1=44?”. Here “?” denotes removed digits. After Mr. B realizes some digits are missing, he wants to recover them.<br/>
 Unfortunately, there may be more than one way to complete the equation. For example “1?3+??1=44?” can be completed to “123+321=444” , “143+301=444” and many other possible solutions. Your job is to determine the number of different possible solutions.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:16px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:16px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'; text-align:left">
Each test case describes a single line with an equation like a+b=c which contains exactly one plus sign “+” and one equal sign “=” with some question mark “?” represent missing digits. You may assume a, b and c are non-negative integers, and the length of each<br/>
 number is no more than 9. In the other words, the equation will contain three integers less than 1,000,000,000.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:16px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:16px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'; text-align:left">
For each test case, display a single line with its case number and the number of possible solutions to recover the equation.</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:16px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:16px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'; text-align:left">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">7+1?=1?
?1+?1=22</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:16px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:16px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'; text-align:left">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">Case 1: 3
Case 2: 1

<div style="font-family:'Times New Roman'; background-color:rgb(244,251,255); border:1px dashed rgb(183,203,255); padding:6px"><div style="font-family:Arial; font-weight:bold; color:rgb(124,169,237); border-bottom-color:rgb(183,203,255); border-bottom-width:1px; border-bottom-style:dashed"><em>Hint</em></div>
There are three solutions for the first case:
7+10=17, 7+11=18, 7+12=19
There is only one solution for the second case:
11+11=22
Note that 01+21=22 is not a valid solution because extra leading zeros are not allowed.
</div><span style="font-size:1px"> </span></div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:16px">
 </div>
<p><br style="font-family:'Times New Roman'; font-size:16px"/></p>
<div align="left" class="panel_title" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Source</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'; text-align:left">
<a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=Fudan%20Local%20Programming%20Contest%202012&amp;source=1&amp;searchmode=source" style="color:rgb(26,92,200); text-decoration:none">Fudan Local Programming Contest 2012</a></div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:16px">
 </div>
<p></p>
<p>呃，动态规划题。</p>
<p>模拟高精度加法，从低位扫到高位。</p>
<p>dp[i][0]表示前i位满足条件且没进位的方法数，dp[i][1]表示前i位满足条件且进1的方法数。</p>
<p>暴力枚举每一位的数字，然后往前递推即可。</p>
<p>代码很难看，还是勉为其难的贴一下吧……orz，主要是前导0那部分处理的太搓了……</p>
<p>
</p>
<pre class="brush:cpp" name="code">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;algorithm&gt;
using namespace std;

char str[105];
int a[15];
int b[15];
int c[15];
long long dp[10][2];

int main()
{
    int i,j,n,tag,t,aup,bup,cup,cnt=1,x,y,z,p,q,r;
    while(scanf("%s",str)!=EOF)
    {
        memset(dp,0,sizeof(dp));
        n=strlen(str);
        tag=0;
        aup=bup=cup=0;
        for (i=n-1;i&gt;=0;i--)
        {
            if (str[i]=='=' || str[i]=='+') tag++;
            else
            {
                t=str[i]=='?'?-1:(str[i]-'0');
                if (tag==0) c[cup++]=t;
                if (tag==1) b[bup++]=t;
                if (tag==2) a[aup++]=t;
            }
        }
        if (cup&lt;max(aup,bup))
        {
            printf("Case %d: 0\n",cnt++);
            continue;
        }
        for (i=aup;i&lt;=cup;i++)
        {
            a[i]=0;
        }
        for (i=bup;i&lt;=cup;i++)
        {
            b[i]=0;
        }
        for (i=0;i&lt;cup;i++)
        {
            for (x=0;x&lt;=9;x++)
            {
                if (i==aup-1 &amp;&amp; aup!=1 &amp;&amp; x==0 &amp;&amp; a[i]==-1) continue;
                if (a[i]!=-1 &amp;&amp; x&gt;=1) continue;
                for (y=0;y&lt;=9;y++)
                {
                    if (i==bup-1 &amp;&amp; bup!=1 &amp;&amp; y==0 &amp;&amp; b[i]==-1) continue;
                    if (b[i]!=-1 &amp;&amp; y&gt;=1) continue;
                    for (z=0;z&lt;=9;z++)
                    {
                        if (i==cup-1 &amp;&amp; cup!=1 &amp;&amp; z==0 &amp;&amp; c[i]==-1) continue;
                        if (c[i]!=-1 &amp;&amp; z&gt;=1) continue;
                        p=a[i]==-1?x:a[i];
                        q=b[i]==-1?y:b[i];
                        r=c[i]==-1?z:c[i];
                        if (p+q==r)
                        {
                            if (i==0) dp[i][0]++;
                            else dp[i][0]+=dp[i-1][0];
                        }
                        if (p+q==10+r)
                        {
                            if (i==0) dp[i][1]++;
                            else dp[i][1]+=dp[i-1][0];
                        }
                        if (p+q+1==r &amp;&amp; i!=0)
                        {
                            dp[i][0]+=dp[i-1][1];
                        }
                        if (p+q+1==r+10 &amp;&amp; i!=0)
                        {
                            dp[i][1]+=dp[i-1][1];
                        }
                    }
                }
            }
         }
        printf("Case %d: %I64d\n",cnt++,dp[cup-1][0]);
    }
    return 0;
}
</pre>
<p>
</p>
<p>
</p>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-98960">
<article class="comment" id="comment-98960">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919515338" rel="external nofollow">新用户890617</a></span> on <a href="http://www.acmerblog.com/hdu-4249-a-famous-equation-7262.html#comment-98960" rel="nofollow"><time datetime="2017-04-20T14:27:54+00:00" pubdate="">2017年4月20日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你敢反对？你就是恐怖主义，赶紧来喝茶，否则嫖决。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-68661">
<article class="comment" id="comment-68661">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919521970" rel="external nofollow">新用户526860</a></span> on <a href="http://www.acmerblog.com/hdu-4249-a-famous-equation-7262.html#comment-68661" rel="nofollow"><time datetime="2017-04-11T07:10:18+00:00" pubdate="">2017年4月11日 at 上午7:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>也給我一份717073457@qq.com</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>