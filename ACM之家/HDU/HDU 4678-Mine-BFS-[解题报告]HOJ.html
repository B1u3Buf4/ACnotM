<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>09-17</div>
<div class="tit"><h1 class="entry-title">HDU 4678-Mine-BFS-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/game" rel="category tag" title="查看博弈论中的全部文章">博弈论</a>, <a href="http://www.acmerblog.com/category/data-struct/linear" rel="category tag" title="查看线性结构中的全部文章">线性结构</a></span><span class="i4">围观55次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7723" href="http://www.acmerblog.com/hdu-4678-mine-7723.html#comments" title="《HDU 4678-Mine-BFS-[解题报告]HOJ》上的评论">一条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Mine</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
Have you ever played a game in Windows: Mine?<br/>This game is played on a n*m board, just like the Pic(1)<br/><img alt="Query on Graph" src="http://www.acmerblog.com/img/1447884958675.jpg" style="max-width:100%;"/><br/><img alt="Query on Graph" src="http://www.acmerblog.com/img/1447884958869.jpg" style="max-width:100%;"/><br/>On the board, Under some grids there are mines (represent by a red flag). There are numbers ‘A(i,j)’ on some grids means there’re A(i,j) mines on the 8 grids which shares a corner or a line with gird(i,j). Some grids are blank means there’re no mines on the 8 grids which shares a corner or a line with them.<br/>At the beginning, all grids are back upward.<br/>In each turn, Player should choose a back upward grid to click.<br/>If he clicks a mine, Game over.<br/>If he clicks a grid with a number on it , the grid turns over.<br/>If he clicks a blank grid, the grid turns over, then check grids in its 8 directions.If the new grid is a blank gird or a grid with a number,it will be clicked too.<br/>So If we click the grid with a red point in Pic(1), grids in the area be encompassed with green line will turn over.<br/>Now Xiemao and Fanglaoshi invent a new mode of playing Mine. They have found out coordinates of all grids with mine in a game. <strong>They also find that in a game there is no grid will turn over twice when click 2 different connected components.</strong>(In the Pic(2), grid at (1,1) will turn over twice when player clicks (0,0) and (2,2) , test data will not contain these cases).<br/>Then, starting from Xiemao, they click the grid in turns. They both use the best strategy. Both of them will not click any grids with mine, and the one who have no grid to click is the loser.<br/>Now give you the size of board N, M, number of mines K, and positions of every mine X<sub>i</sub>,Y<sub>i</sub>. Please output who will win. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
Multicase<br/>The first line of the date is an integer T,  which is the number of the text cases. (T&lt;=50)<br/>Then T cases follow, each case starts with 3 integers N, M, K indicates the size of the board and the number of mines.Then goes K lines, the ith line with 2 integer X<sub>i</sub>,Y<sub>i</sub> means the position of the ith mine.<br/>1&lt;=N,M&lt;=1000   0&lt;=K&lt;=N*M   0&lt;=X<sub>i</sub>&lt;N   0&lt;=Y<sub>i</sub>&lt;M </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
Multicase<br/>The first line of the date is an integer T,  which is the number of the text cases. (T&lt;=50)<br/>Then T cases follow, each case starts with 3 integers N, M, K indicates the size of the board and the number of mines.Then goes K lines, the ith line with 2 integer X<sub>i</sub>,Y<sub>i</sub> means the position of the ith mine.<br/>1&lt;=N,M&lt;=1000   0&lt;=K&lt;=N*M   0&lt;=X<sub>i</sub>&lt;N   0&lt;=Y<sub>i</sub>&lt;M</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
3 3 0
3 3 1
1 1</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case #1: Xiemao
Case #2: Fanglaoshi</pre>
<p> <!-- problem end --></p>
<p>　　题目链接：<a target="_blank" title="http://acm.hdu.edu.cn/showproblem.php?pid=4678">http://acm.hdu.edu.cn/showproblem.php?pid=4678</a></p>
<p>　　题意就不说了，太长了。。。</p>
<p>　　这个应该算简单博弈吧。先求联通分量，把空白区域边上的数字个数全部求出来a[i](就是一个连通分量)，然后就是n堆石子，每堆每次可以取一个或者全部取掉，然后要注意在取玩边上的石子后，剩下的就只能一次取掉了，因此我们直接把空白区域上的算做一个a[i]+1。然后这个SG函数很好求，奇数是1，偶数是2。。。</p>
<pre class="brush:cpp"> //STATUS:C++_AC_156MS_4268KB
 #include &lt;functional&gt;
 #include &lt;algorithm&gt;
 #include &lt;iostream&gt;
 //#include &lt;ext/rope&gt;
 #include &lt;fstream&gt;
 #include &lt;sstream&gt;
 #include &lt;iomanip&gt;
 #include &lt;numeric&gt;
 #include &lt;cstring&gt;
 #include &lt;cassert&gt;
 #include &lt;cstdio&gt;
 #include &lt;string&gt;
 #include &lt;vector&gt;
 #include &lt;bitset&gt;
 #include &lt;queue&gt;
 #include &lt;stack&gt;
 #include &lt;cmath&gt;
 #include &lt;ctime&gt;
 #include &lt;list&gt;
 #include &lt;set&gt;
 #include &lt;map&gt;
 using namespace std;
 //#pragma comment(linker,"/STACK:102400000,102400000")
 //using namespace __gnu_cxx;
 //define
 #define pii pair&lt;int,int&gt;
 #define mem(a,b) memset(a,b,sizeof(a))
 #define lson l,mid,rt&lt;&lt;1
 #define rson mid+1,r,rt&lt;&lt;1|1
 #define PI acos(-1.0)
 //typedef
 typedef __int64 LL;
 typedef unsigned __int64 ULL;
 //const
 const int N=1010;
 const int INF=0x3f3f3f3f;
 const LL MOD=1000000007,STA=8000010;
 const LL LNF=1LL&lt;&lt;55;
 const double EPS=1e-9;
 const double OO=1e50;
 const int dx[8]={-1,-1,0,1,1,1,0,-1};
 const int dy[8]={0,1,1,1,0,-1,-1,-1};
 const int day[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};
 //Daily Use ...
 inline int sign(double x){return (x&gt;EPS)-(x&lt;-EPS);}
 template&lt;class T&gt; T gcd(T a,T b){return b?gcd(b,a%b):a;}
 template&lt;class T&gt; T lcm(T a,T b){return a/gcd(a,b)*b;}
 template&lt;class T&gt; inline T lcm(T a,T b,T d){return a/d*b;}
 template&lt;class T&gt; inline T Min(T a,T b){return a&lt;b?a:b;}
 template&lt;class T&gt; inline T Max(T a,T b){return a&gt;b?a:b;}
 template&lt;class T&gt; inline T Min(T a,T b,T c){return min(min(a, b),c);}
 template&lt;class T&gt; inline T Max(T a,T b,T c){return max(max(a, b),c);}
 template&lt;class T&gt; inline T Min(T a,T b,T c,T d){return min(min(a, b),min(c,d));}
 template&lt;class T&gt; inline T Max(T a,T b,T c,T d){return max(max(a, b),max(c,d));}
 //End
 
 int g[N][N];
 int T,n,m,k;
 
 int bfs(int x,int y)
 {
     int i,nx,ny,ret=0;
     pii t;
     g[x][y]=-1;
     queue&lt;pii&gt; q;
     q.push(make_pair(x,y));
     while(!q.empty())
     {
         t=q.front();q.pop();
         for(i=0;i&lt;8;i++){
             nx=t.first+dx[i];
             ny=t.second+dy[i];
             if(nx&lt;0||nx&gt;=n || ny&lt;0||ny&gt;=m || g[nx][ny]==-1)continue;
             if(g[nx][ny])ret++;
             else q.push(make_pair(nx,ny));
             g[nx][ny]=-1;
         }
     }
     return ret;
 }
 
 int main(){
  //   freopen("in.txt","r",stdin);
     int i,j,sg,x,y,nx,ny,ca=1;
     scanf("%d",&amp;T);
     while(T--)
     {
         scanf("%d%d%d",&amp;n,&amp;m,&amp;k);
         mem(g,0);
         for(i=0;i&lt;k;i++){
             scanf("%d%d",&amp;x,&amp;y);
             g[x][y]=-1;
             for(j=0;j&lt;8;j++){
                 nx=x+dx[j];ny=y+dy[j];
                 if(nx&lt;0||nx&gt;=n || ny&lt;0||ny&gt;=m || g[nx][ny]==-1)continue;
                 g[nx][ny]=1;
             }
         }
 
         sg=0;
         for(i=0;i&lt;n;i++){
             for(j=0;j&lt;m;j++){
                 if(g[i][j])continue;
                 sg^=(bfs(i,j)&amp;1)+1;
             }
         }
         for(i=0;i&lt;n;i++){
             for(j=0;j&lt;m;j++){
                 if(g[i][j]==-1)continue;
                 sg^=1;
             }
         }
 
         printf("Case #%d: %s\n",ca++,sg?"Xiemao":"Fanglaoshi");
     }
     return 0;
 }
</pre>
<p> </p>
<p>参考：http://www.cnblogs.com/zhsl/p/3263675.html</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-97169">
<article class="comment" id="comment-97169">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919458813" rel="external nofollow">新用户120239</a></span> on <a href="http://www.acmerblog.com/hdu-4678-mine-7723.html#comment-97169" rel="nofollow"><time datetime="2017-04-20T00:52:32+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>倒数第三段削弱了文章的力量。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>