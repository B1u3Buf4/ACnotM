<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-05</div>
<div class="tit"><h1 class="entry-title">HDU 3523-Image copy detection -二分图-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/graph/bipartite-graph" rel="category tag" title="查看二分图中的全部文章">二分图</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观386次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6484" href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comments" title="《HDU 3523-Image copy detection -二分图-[解题报告]HOJ》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Image copy detection </h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
The success of the Internet and cost-effective digital storage device has made it possible to replicate, transmit, and distribute digital content in an effortless way. Thus, the protection of intellectual Property right (IPR) has become a crucial legal issue.  Detecting copies of digital media(images, audio and video) is a basic requirement for IPR protection (or copyright protection).The applications of copydetection include usage tracking and copyright violation enforcement.<br/>For those above purposes, the image copy detection system came out.It aggregated all the images which were viewed as a copy of original image.In this system,an image is partitioned into m×n equalsized blocks,which makes the system independent of input image sizes,and an m×n sub-image is calculated by taking the average value of each block(see Figure.1(b)), This array is converted to a rank matrix as shown in Fig.1(c).Suppose that the intensity values in Fig.1(b) are changed in the copied image so that its sub-image has values:{{30, 60, 40}, {70, 90, 110}, {50, 100, 80}}. Nevertheless,its rank matrix is identical to that shown in Fig. 1(c) and thus perfect matching with original image can be achieved.
<p></p><center><img alt="Minimum Integer sequence " src="http://www.acmerblog.com/img/1418320386141.jpg"/></center>
<p>Fig.1 (a)An image is divided into m×n blocks (3×3 in this example),(b)average values of blocks, and(c)rank matrix of (b). Let T and Q represent test image and original image,N represent the matrix size;there exists N tuples (t1,q1),…,( tn,qn),…,( tN,qN)(the order of the rank matrix:from left to right and from top to bottom).Now we define D(T,Q) = <img alt="Minimum Integer sequence " src="http://www.acmerblog.com/img/1418320386283.jpg"/>measures the distance between the two images(it’s obvious that if D(T,Q) gets smaller while the probability of the test image is considered as a copy of original image by the system becomes larger). Since there are M original images in the image copy detection system(Q1…QM). And the distance between T and some original images is given by D(T,Q1…QM)= <img alt="Minimum Integer sequence " src="http://www.acmerblog.com/img/1418320386426.jpg"/> To make it simple,we want to find an image which owns least D(T,Q1…QM). </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line of input should give the number of cases, T (at most 100). T test cases follow. The first line of each test case contains two integer n (1 ≤ n ≤ 100) and m(1 ≤ m ≤ 100) indicating the size of rank matrix and number of original images. The following m lines each contains a sequence of n different integers denotes the rank matrix. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line of input should give the number of cases, T (at most 100). T test cases follow. The first line of each test case contains two integer n (1 ≤ n ≤ 100) and m(1 ≤ m ≤ 100) indicating the size of rank matrix and number of original images. The following m lines each contains a sequence of n different integers denotes the rank matrix.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
3 2
1 2 3
1 3 2
9 3
1 4 2 5 7 9 3 8 6
2 1 4 5 9 3 7 6 8
9 8 7 6 5 4 3 2 1</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case #1: 2
Case #2: 58</pre>
<p> <!-- problem end --></p>
<h1 style="font-size:36px; margin-right:0px; margin-bottom:20px; margin-left:0px; font-family:'Helvetica Neue',Arial,'Hiragino Sans GB',STHeiti,'Microsoft YaHei','WenQuanYi Micro Hei',SimSun,Song,sans-serif; line-height:1.1; color:rgb(22,32,41); margin-top:0px!important">
HDU 3523 Image copy detection</h1>
<p style="margin-top:0px; margin-bottom:10px; line-height:22.3999996185303px; white-space:pre-wrap; word-wrap:break-word; color:rgb(22,32,41); font-family:'Helvetica Neue',Arial,'Hiragino Sans GB',STHeiti,'Microsoft YaHei','WenQuanYi Micro Hei',SimSun,Song,sans-serif; font-size:14px">
<a style="" target="_blank">题目链接</a></p>
<p style="margin-top:0px; margin-bottom:10px; line-height:22.3999996185303px; white-space:pre-wrap; word-wrap:break-word; color:rgb(22,32,41); font-family:'Helvetica Neue',Arial,'Hiragino Sans GB',STHeiti,'Microsoft YaHei','WenQuanYi Micro Hei',SimSun,Song,sans-serif; font-size:14px">
题意：这题其实题意读懂就简单了，说白了就是1-n放到1-n列，每列的值为每列上数字和该数字的差的绝对值，然后求总和最小</p>
<p style="margin-top:0px; margin-bottom:10px; line-height:22.3999996185303px; white-space:pre-wrap; word-wrap:break-word; color:rgb(22,32,41); font-family:'Helvetica Neue',Arial,'Hiragino Sans GB',STHeiti,'Microsoft YaHei','WenQuanYi Micro Hei',SimSun,Song,sans-serif; font-size:14px">
思路：就一KM最大匹配</p>
<p style="margin-top:0px; margin-bottom:10px; line-height:22.3999996185303px; white-space:pre-wrap; word-wrap:break-word; color:rgb(22,32,41); font-family:'Helvetica Neue',Arial,'Hiragino Sans GB',STHeiti,'Microsoft YaHei','WenQuanYi Micro Hei',SimSun,Song,sans-serif; font-size:14px">
代码：</p>
<p style="margin-top:0px; margin-bottom:10px; line-height:22.3999996185303px; white-space:pre-wrap; word-wrap:break-word; color:rgb(22,32,41); font-family:'Helvetica Neue',Arial,'Hiragino Sans GB',STHeiti,'Microsoft YaHei','WenQuanYi Micro Hei',SimSun,Song,sans-serif; font-size:14px">
</p><pre class="brush:cpp" code_snippet_id="504690" name="code" snippet_file_name="blog_20141101_1_9467876">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#include &lt;cstdlib&gt;
#include &lt;algorithm&gt;
using namespace std;

const int MAXNODE = 505;

typedef int Type;
const Type INF = 0x3f3f3f3f;

struct KM {
	int n, m;
	Type g[MAXNODE][MAXNODE];
	Type Lx[MAXNODE], Ly[MAXNODE], slack[MAXNODE];
	int left[MAXNODE], right[MAXNODE];
	bool S[MAXNODE], T[MAXNODE];

	void init(int n, int m) {
		this-&gt;n = n;
		this-&gt;m = m;
		memset(g, 0, sizeof(g));
	}

	void add_Edge(int u, int v, Type val) {
		g[u][v] += val;
	}

	bool dfs(int i) {
		S[i] = true;
		for (int j = 0; j &lt; m; j++) {
			if (T[j]) continue;
			Type tmp = Lx[i] + Ly[j] - g[i][j];
			if (!tmp) {
				T[j] = true;
				if (left[j] == -1 || dfs(left[j])) {
					left[j] = i;
					right[i] = j;
					return true;
				}
			} else slack[j] = min(slack[j], tmp);
		}
		return false;
	}

	void update() {
		Type a = INF;
		for (int i = 0; i &lt; m; i++)
			if (!T[i]) a = min(a, slack[i]);
		for (int i = 0; i &lt; n; i++)
			if (S[i]) Lx[i] -= a;
		for (int i = 0; i &lt; m; i++)
			if (T[i]) Ly[i] += a;
	}

	Type km() {
		memset(left, -1, sizeof(left));
		memset(right, -1, sizeof(right));
		memset(Ly, 0, sizeof(Ly));
		for (int i = 0; i &lt; n; i++) {
			Lx[i] = -INF;
			for (int j = 0; j &lt; m; j++)
				Lx[i] = max(Lx[i], g[i][j]);
		}
		for (int i = 0; i &lt; n; i++) {
			for (int j = 0; j &lt; m; j++) slack[j] = INF;
			while (1) {
				memset(S, false, sizeof(S));
				memset(T, false, sizeof(T));
				if (dfs(i)) break;
				else update();
			}
		}
		Type ans = 0;
		for (int i = 0; i &lt; n; i++) {
			//if (right[i] == -1) return -1;
			//if (g[i][right[i]] == -INF) return -1;
			ans += g[i][right[i]];
		}
		return -ans;
	}
} gao;

int t, n, m;

int main() {
	int cas = 0;
	scanf("%d", &amp;t);
	while (t--) {
		scanf("%d%d", &amp;n, &amp;m);
		gao.init(n, n);
		int tmp;
		for (int i = 0; i &lt; m; i++) {
			for (int j = 0; j &lt; n; j++) {
				scanf("%d", &amp;tmp);
				for (int k = 0; k &lt; n; k++)
					gao.add_Edge(k, j, -abs(tmp - k - 1));
			}
		}
		printf("Case #%d: %d\n", ++cas, gao.km());
	}
	return 0;
}</pre>
<p>参考：http://blog.csdn.net/accelerator_/article/details/40690461</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-75041">
<article class="comment" id="comment-75041">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919523551" rel="external nofollow">新用户922975</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-75041" rel="nofollow"><time datetime="2017-04-12T03:53:51+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>cc  好棒</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30901">
<article class="comment" id="comment-30901">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tzf888888</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30901" rel="nofollow"><time datetime="2015-06-08T01:03:01+00:00" pubdate="">2015年6月8日 at 上午1:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>,,,,,,,,,,,,,,,</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30896">
<article class="comment" id="comment-30896">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">chengleisheng</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30896" rel="nofollow"><time datetime="2015-04-19T20:10:45+00:00" pubdate="">2015年4月19日 at 下午8:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30900">
<article class="comment" id="comment-30900">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">digiworm</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30900" rel="nofollow"><time datetime="2015-04-08T15:38:09+00:00" pubdate="">2015年4月8日 at 下午3:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很高兴你会喜欢这个网站。目前还没有一个开发团队，网站是我一个人在维护，都是用的开源系统，也没有太多需要开发的部分，主要是内容整理。非常感谢你的关注。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30899">
<article class="comment" id="comment-30899">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">huangduanjing</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30899" rel="nofollow"><time datetime="2015-04-05T06:20:03+00:00" pubdate="">2015年4月5日 at 上午6:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第15行代码，/n/n，应该改为\n\n</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30903">
<article class="comment" id="comment-30903">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Anne</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30903" rel="nofollow"><time datetime="2015-03-25T20:42:35+00:00" pubdate="">2015年3月25日 at 下午8:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不同的编译器，printf(),执行的顺序不同，所以结果也就不同，建议不要那么写</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30897">
<article class="comment" id="comment-30897">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">3136869079</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30897" rel="nofollow"><time datetime="2015-03-25T17:47:58+00:00" pubdate="">2015年3月25日 at 下午5:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30905">
<article class="comment" id="comment-30905">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30905" rel="nofollow"><time datetime="2015-03-23T03:03:46+00:00" pubdate="">2015年3月23日 at 上午3:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>…. 配图居然是没方向的。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30898">
<article class="comment" id="comment-30898">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tonight</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30898" rel="nofollow"><time datetime="2015-03-04T19:19:01+00:00" pubdate="">2015年3月4日 at 下午7:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第15行代码，/n/n，应该改为nn</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30902">
<article class="comment" id="comment-30902">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">aaa</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30902" rel="nofollow"><time datetime="2015-01-25T08:46:20+00:00" pubdate="">2015年1月25日 at 上午8:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实不需要用LCA，用DFS+vector更简单</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30906">
<article class="comment" id="comment-30906">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">NextLife</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30906" rel="nofollow"><time datetime="2015-01-01T20:31:09+00:00" pubdate="">2015年1月1日 at 下午8:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;stdio.h&gt;<br/>
int main()<br/>
{<br/>
    int n,p,t[100]={1};<br/>
    for(int i=1;i&lt;100;i++)<br/>
        t <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =i;<br/>
    while(scanf("%d",&amp;n)&amp;&amp;n!=0){<br/>
        if(n==1)<br/>
        printf("Printing order for 1 pages:nSheet 1, front: Blank, 1n");<br/>
        else {<br/>
        if(n%4) p=n/4+1;<br/>
        else p=n/4;<br/>
        int q=4*p;<br/>
        printf("Printing order for %d pages:n",n);<br/>
        for(int i=0;i&lt;p;i++){<br/>
            printf("Sheet %d, front: ",i+1);<br/>
            if(q&gt;n) {printf("Blank, %dn",t[2*i+1]);}<br/>
            else {printf("%d, %dn",q,t[2*i+1]);}<br/>
            q–;//打印表前<br/>
            printf("Sheet %d, back : ",i+1);<br/>
            if(q&gt;n) {printf("%d, Blankn",t[2*i+2]);}<br/>
            else {printf("%d, %dn",t[2*i+2],q);}<br/>
            q–;//打印表后<br/>
           }<br/>
        }<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49636">
<article class="comment" id="comment-49636">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaoriqiang</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-49636" rel="nofollow"><time datetime="2014-12-29T06:59:14+00:00" pubdate="">2014年12月29日 at 上午6:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-30904">
<article class="comment" id="comment-30904">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Ailing</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-30904" rel="nofollow"><time datetime="2014-12-15T16:40:23+00:00" pubdate="">2014年12月15日 at 下午4:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>信息不全</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49638">
<article class="comment" id="comment-49638">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fastislow</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-49638" rel="nofollow"><time datetime="2014-11-19T20:06:08+00:00" pubdate="">2014年11月19日 at 下午8:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thank you very much</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49637">
<article class="comment" id="comment-49637">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lanifer</a></span> on <a href="http://www.acmerblog.com/hdu-3523-image-copy-detection-6484.html#comment-49637" rel="nofollow"><time datetime="2014-11-08T04:09:09+00:00" pubdate="">2014年11月8日 at 上午4:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已更正。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>