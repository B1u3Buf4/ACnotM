<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-30</div>
<div class="tit"><h1 class="entry-title">HDU 3673-David Shopping[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观294次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6634" href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comments" title="《HDU 3673-David Shopping[解题报告]HOJ》上的评论">18 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">David Shopping</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
David comes to Chengdu for ACM-ICPC 2007. After learning Chengdu is a beautiful city, David decides to buy his friends some gifts.
<p>The capacity of David’s pocket is so small that it can only contain M gifts. Considering the diversity of his gifts, David would not buy two of the same kind. And some typical gift should be chosen to represent the features of Chengdu.</p>
<p>David will walk down from north to south and visit N shops one by one along the shopping street. There is ONLY ONE type of gift sold in each shop.</p>
<p>David has such a poor memory that he can’t remember how many shops sell gift K . So he will write a number L on this gift he bought in his pocket, to indicate how many shops where sell gift K . In David’s opinion, the smaller the number L is, the better the gift (David like uncommon gifts).</p>
<p>When David stops in a shop which sells gift K , the following three situations he might come across.</p>
<p>   1. If there is not gift K in his pocket and still some place for it, He will buy without hesitation. Before putting it into the pocket, David will write down the number `1′ on the gift to indicate that he has once seen one shop selling it.<br/>   2. If there is gift K in his pocket, David will just replace the number L with L + 1 , indicating L + 1 shops sell gift K .<br/>   3. If there is not gift K in his pocket and the pocket is full, David would like to regard no shops selling gift K (because he cannot remember whether or not he has met gift K ), so he will have to discard one gift in his pocket to release a place for the gift K . But which gift should be discarded? According to the follow rule:</p>
<p>      He chooses the gift that has the biggest number L on it. If several gifts have the same biggest number L , he will discard the one which has been putted into the pocket at the earliest time. After discarding the gift, he will put gift K into his pocket and write number `1′ on gift K . </p>
<p>Now, your task is to write a program to record the number of these gifts which have been discarded by David.</p>
<p>For example:</p>
<p>David’s pocket has the capacity only for two gifts. There are 5 shops in the street, and each shop sells only one type of gift. The selling sequence of gifts is 1, 2, 1, 3, and 1.</p>
<p>In shop 1, the pocket is empty, so he will buy gift 1, write a number `1′ on this gift, and then put it into his pocket.</p>
<p>When he comes to shop 2, there is one place left in his pocket, so he buys gift 2, write a number `1′ on it, and then put it into the pocket.</p>
<p>When walking into shop 3, he has already got gift 1 in his pocket, so he will replace the number L (here, L = 1 ) with L + 1 .</p>
<p>When David visits shop 4, the pocket is full, but without gift 3 in it, so he has to discard one gift to release a place for gift 3. The number L on gift 1 is `2′, but the number L on gift 2 is `1′, so he will discard gift 1, write number 1 on gift 3 and then put it into the pocket.</p>
<p>In shop 5, the pocket is full, gift 1 is not in it, he should will discard a gift to find place for gift 1. The number L on gift 2 is `1′, the number L on gift 3 is also `1′. They have the same L , but gift 2 put into the pocket earlier than gift 3. So he discards gift 2, write number `1′ on gift 1 and then put it into the pocket. At the end of the street, David gets two gifts in his pocket, number `1′ on gift 3 and number `1′ on gift 1. The number of discarded gifts is 2. </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There are multiple test cases in the input file. Each test case contains two lines.
<p>The first line has two positive integers M and N ( M&lt;=50, 000 and N&lt;=100, 000 ) where M (the capacity of pocket) shows how many gifts it can take and N is the number of shops in the street. The second line has N positive integers Ki (Ki &lt; 2^20, i = 1, 2,…, N) indicating the type of gift sold in the i -th shop. M = 0 and N = 0 indicate the end of file and should not be processed by your program. </p></div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There are multiple test cases in the input file. Each test case contains two lines.
<p>The first line has two positive integers M and N ( M&lt;=50, 000 and N&lt;=100, 000 ) where M (the capacity of pocket) shows how many gifts it can take and N is the number of shops in the street. The second line has N positive integers Ki (Ki &lt; 2^20, i = 1, 2,…, N) indicating the type of gift sold in the i -th shop. M = 0 and N = 0 indicate the end of file and should not be processed by your program.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3 5 
1 2 3 2 4 
2 4 
1 2 2 1 
2 6 
1 2 2 1 1024 1 
2 10 
1 2 3 2 4 2 3 6 7 8 
2 1 
1048575 
6 16 
10 1 2 3 4 5 6 1 2 3 6 5 4 10 1 6 
0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case 1: 1
Case 2: 0
Case 3: 2
Case 4: 7
Case 5: 0
Case 6: 3</pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cmath&gt;
#include&lt;algorithm&gt;
#include&lt;map&gt;
#include&lt;string.h&gt;
using namespace std;

#define MAXN 100100

map&lt;int,int&gt; mp;

int Max[MAXN&lt;&lt;2],in[MAXN],inT[MAXN],shop[MAXN];

int getmax(int x,int y){
	if (in[x]&gt;in[y]) return x;
	if (in[x]&lt;in[y]) return y;
	if (inT[x]&lt;inT[y]) return x;
	else return y;
}

void update(int x,int l,int r,int rt){
	if (l==r){
		Max[rt]=x;
		return;
	}
	int m=(l+r)&gt;&gt;1;
	if (x&lt;=m) update(x,l,m,rt&lt;&lt;1);
	else update(x,m+1,r,rt&lt;&lt;1|1);
	Max[rt]=getmax(Max[rt&lt;&lt;1],Max[rt&lt;&lt;1|1]);
}

int main(){
	int caseT=0,S,n,x;
	while (scanf("%d%d",&amp;S,&amp;n)!=EOF){
		if (S==0&amp;&amp;n==0) break;
		mp.clear();
		int cnt=0;
		for (int i=1;i&lt;=n;i++){
			scanf("%d",&amp;x);
			if (mp.find(x)==mp.end()) mp[x]=++cnt;
			shop[i]=mp[x];
		}
		memset(Max,0,sizeof(Max));
		memset(in,0,sizeof(in));
		memset(inT,0,sizeof(inT));
		int now=0,ans=0;
		for (int i=1;i&lt;=n;i++){
			if (in[shop[i]]){
				in[shop[i]]++;
//				cout&lt;&lt;1&lt;&lt;' '&lt;&lt;i&lt;&lt;' '&lt;&lt;shop[i]&lt;&lt;endl;
			}
			else if (now&lt;S){
				in[shop[i]]++; inT[shop[i]]=i;
				now++;
	//			cout&lt;&lt;2&lt;&lt;' '&lt;&lt;i&lt;&lt;endl;
			}
			else {
				int t=Max[1];
				in[t]=0; inT[t]=0; in[shop[i]]++; inT[shop[i]]=i;
				update(t,1,n,1);
				ans++;
			}
			update(shop[i],1,n,1);
		//	cout&lt;&lt;Max[1]&lt;&lt;' '&lt;&lt;in[Max[1]]&lt;&lt;' '&lt;&lt;inT[Max[1]]&lt;&lt;endl;
		}
		printf("Case %d: %d\n",++caseT,ans);
	}
	return 0;
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-73480">
<article class="comment" id="comment-73480">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525012" rel="external nofollow">新用户761138</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-73480" rel="nofollow"><time datetime="2017-04-11T22:05:34+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈蛋，咱们众筹，诉回去！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73479">
<article class="comment" id="comment-73479">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525012" rel="external nofollow">新用户761138</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-73479" rel="nofollow"><time datetime="2017-04-11T22:05:34+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈蛋，咱们众筹，诉回去！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73478">
<article class="comment" id="comment-73478">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525012" rel="external nofollow">新用户761138</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-73478" rel="nofollow"><time datetime="2017-04-11T22:05:34+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈蛋，咱们众筹，诉回去！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73477">
<article class="comment" id="comment-73477">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919525012" rel="external nofollow">新用户761138</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-73477" rel="nofollow"><time datetime="2017-04-11T22:05:34+00:00" pubdate="">2017年4月11日 at 下午10:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈蛋，咱们众筹，诉回去！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32969">
<article class="comment" id="comment-32969">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wizcabbit</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32969" rel="nofollow"><time datetime="2015-07-13T09:53:34+00:00" pubdate="">2015年7月13日 at 上午9:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32970">
<article class="comment" id="comment-32970">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zcmu_sls</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32970" rel="nofollow"><time datetime="2015-07-02T22:06:59+00:00" pubdate="">2015年7月2日 at 下午10:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>终于明白了递归和dp的关系，多谢分享！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59466">
<article class="comment" id="comment-59466">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">303589828</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-59466" rel="nofollow"><time datetime="2015-07-01T23:34:54+00:00" pubdate="">2015年7月1日 at 下午11:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，这里说的最长回文子序列，非子串</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32968">
<article class="comment" id="comment-32968">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">_Tree</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32968" rel="nofollow"><time datetime="2015-06-10T12:44:59+00:00" pubdate="">2015年6月10日 at 下午12:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env python def cou(n): arr =  [1]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32975">
<article class="comment" id="comment-32975">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">anthozoan77</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32975" rel="nofollow"><time datetime="2015-05-14T12:08:20+00:00" pubdate="">2015年5月14日 at 下午12:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法挺不错。NewHead代表新的头节点，通过递归找到最后一个节点之后，就把这个节点赋给NewHead，然后一直返回返回，中途这个值是没有变化的，一边返回一边把相应的指针方向颠倒，最后结束时返回新的头节点到主函数。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32972">
<article class="comment" id="comment-32972">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">verycourage</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32972" rel="nofollow"><time datetime="2015-04-20T12:53:43+00:00" pubdate="">2015年4月20日 at 下午12:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实国内大部分公司对算法都不够重视。特别是中小型公司老板根本都不懂技术，也不懂什么是算法，从而也不要求程序员懂什么算法，做程序从来不考虑性能问题，只要页面能显示出来就是好程序，这是国内的现状，很无奈。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32965">
<article class="comment" id="comment-32965">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">we</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32965" rel="nofollow"><time datetime="2015-04-17T02:05:01+00:00" pubdate="">2015年4月17日 at 上午2:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>我还有个问题想请教一下，就是感觉对于新手来说，递归理解起来有些困难，不知有没有什么好的方法或者什么好的建议？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63954">
<article class="comment" id="comment-63954">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bob</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-63954" rel="nofollow"><time datetime="2015-04-10T06:11:50+00:00" pubdate="">2015年4月10日 at 上午6:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，这里说的最长回文子序列，非子串</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32967">
<article class="comment" id="comment-32967">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jandk</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32967" rel="nofollow"><time datetime="2015-03-29T00:20:06+00:00" pubdate="">2015年3月29日 at 上午12:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好！！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32964">
<article class="comment" id="comment-32964">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tangzhihua</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32964" rel="nofollow"><time datetime="2015-03-20T16:08:03+00:00" pubdate="">2015年3月20日 at 下午4:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>可以根据二叉排序树的定义进行严格的排序树创建和后序遍历操作。如果形成的排序树相同，其树的前、中、后序遍历是相同的，但在此处不能使用中序遍历，因为，中序遍历的结果就是排序的结果。经在九度测试，运行时间90ms，比楼主的要快。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32966">
<article class="comment" id="comment-32966">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">crazymage</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32966" rel="nofollow"><time datetime="2015-03-19T06:58:08+00:00" pubdate="">2015年3月19日 at 上午6:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个..  真没看出来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32974">
<article class="comment" id="comment-32974">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xun.gong</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32974" rel="nofollow"><time datetime="2015-03-17T19:02:42+00:00" pubdate="">2015年3月17日 at 下午7:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实国内大部分公司对算法都不够重视。特别是中小型公司老板根本都不懂技术，也不懂什么是算法，从而也不要求程序员懂什么算法，做程序从来不考虑性能问题，只要页面能显示出来就是好程序，这是国内的现状，很无奈。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32973">
<article class="comment" id="comment-32973">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wizcabbit</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32973" rel="nofollow"><time datetime="2015-01-08T03:15:25+00:00" pubdate="">2015年1月8日 at 上午3:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>nice!!!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32971">
<article class="comment" id="comment-32971">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">dongxi</a></span> on <a href="http://www.acmerblog.com/hdu-3673-david-shopping-6634.html#comment-32971" rel="nofollow"><time datetime="2014-12-01T01:38:38+00:00" pubdate="">2014年12月1日 at 上午1:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>贴的有些代码的头文件不见了，这是为啥</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>