<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-26</div>
<div class="tit"><h1 class="entry-title">HDU 1016 Prime Ring Problem-DFS-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/search/dfs" rel="category tag" title="查看DFS搜索中的全部文章">DFS搜索</a>, <a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/graph/graph-visit" rel="category tag" title="查看图的遍历中的全部文章">图的遍历</a>, <a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a>, <a href="http://www.acmerblog.com/category/graph/mst" rel="category tag" title="查看最小生成树中的全部文章">最小生成树</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观875次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1269" href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comments" title="《HDU 1016 Prime Ring Problem-DFS-[解题报告] C++》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Prime Ring Problem</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
A ring is compose of n circles as shown in diagram. Put natural number 1, 2, …, n into each circle separately, and the sum of numbers in two adjacent circles should be a prime.
<p>Note: the number of first circle should always be 1.</p>
<p><img src="http://acm.hdu.edu.cn/showproblem.php/../../data/images/1016-1.gif"/> </p></div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
n (0 &lt; n &lt; 20). </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The output format is shown as sample below. Each row represents a series of circle numbers in the ring beginning from 1 clockwisely and anticlockwisely. The order of numbers must satisfy the above requirements. Print solutions in lexicographical order.
<p>You are to write a program that completes above process.</p>
<p>Print a blank line after each case.</p></div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
6
8</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case 1:
1 4 3 2 5 6
1 6 5 2 3 4

Case 2:
1 2 3 8 5 6 7 4
1 2 5 8 3 4 7 6
1 4 7 6 5 8 3 2
1 6 7 4 3 8 5 2</pre>
<p><!-- problem end --></p>
<p><span style="background-color: #ccffcc;">题意：很容易理解，就是让你输出满足相邻的相加是素数的序列（注意不要重复）</span></p>
<p><span style="background-color: #ccffcc;">思路就是深搜思想把每种情况遍历一次</span></p>
<p><span style="background-color: #ccffcc;">代码实现：</span></p>
<pre class="brush:cpp ">#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
int prime[40]={0,1,1,1,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0},n;//素数打表，因为n最大是20，所以只要打到40
int visited[21],a[21];
void dfs(int num)//深搜
{
   int i;
   if(num==n&amp;&amp;prime[a[num-1]+a[0]])  //满足条件了，就输出来
   {
       for(i=0;i&lt;num-1;i++)
           printf("%d ",a[i]);
       printf("%d\n",a[num-1]);
   }
   else
   {
       for(i=2;i&lt;=n;i++)
       {
           if(visited[i]==0)//是否用过了
           {
               if(prime[i+a[num-1]]) //是否和相邻的加起来是素数
               {
                   visited[i]=-1;//标记了
                   a[num++]=i;//放进数组
                   dfs(num); //递归调用
                   visited[i]=0; //退去标记
                   num--;
               }
           }
       }
   }
}    
int main()
{
      int num=0;
      while(scanf("%d",&amp;n)!=EOF)
      {
         num++;
         printf("Case %d:\n",num);
         memset(visited,0,sizeof(visited));
         a[0]=1;
         dfs(1);
         printf("\n");
      }
      return 0;
}</pre>
<p> </p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-65033">
<article class="comment" id="comment-65033">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn">1</span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-65033" rel="nofollow"><time datetime="2017-02-09T15:07:54+00:00" pubdate="">2017年2月9日 at 下午3:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>submit的时候选语言记得选C 选C++过不了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10473">
<article class="comment" id="comment-10473">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ycaxgjd</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10473" rel="nofollow"><time datetime="2015-06-21T00:11:51+00:00" pubdate="">2015年6月21日 at 上午12:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有些说不通吧，只有1个孩子肯定是男孩了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10475">
<article class="comment" id="comment-10475">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lin</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10475" rel="nofollow"><time datetime="2015-06-13T09:12:16+00:00" pubdate="">2015年6月13日 at 上午9:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>根本过不了。。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10469">
<article class="comment" id="comment-10469">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xin</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10469" rel="nofollow"><time datetime="2015-04-28T00:56:28+00:00" pubdate="">2015年4月28日 at 上午12:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>此题答案确实应该是A。文中已修改，感谢一楼的提醒！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10472">
<article class="comment" id="comment-10472">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123456789_xd</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10472" rel="nofollow"><time datetime="2015-03-30T01:31:29+00:00" pubdate="">2015年3月30日 at 上午1:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>都是一些基础题啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10471">
<article class="comment" id="comment-10471">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">piaoyi</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10471" rel="nofollow"><time datetime="2015-03-08T05:25:38+00:00" pubdate="">2015年3月8日 at 上午5:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很好，注释很详细啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10470">
<article class="comment" id="comment-10470">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sheyty</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10470" rel="nofollow"><time datetime="2014-12-31T22:53:26+00:00" pubdate="">2014年12月31日 at 下午10:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个还不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39579">
<article class="comment" id="comment-39579">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yupeng.bai</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-39579" rel="nofollow"><time datetime="2014-08-15T13:33:22+00:00" pubdate="">2014年8月15日 at 下午1:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不太懂呀，乡亲们。原理知道代码不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10464">
<article class="comment" id="comment-10464">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zclzcllove</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10464" rel="nofollow"><time datetime="2014-08-15T09:34:06+00:00" pubdate="">2014年8月15日 at 上午9:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great work！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10466">
<article class="comment" id="comment-10466">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HaibaraAi</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10466" rel="nofollow"><time datetime="2014-08-03T18:48:36+00:00" pubdate="">2014年8月3日 at 下午6:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>多谢提醒。代码又编辑了一下</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10468">
<article class="comment" id="comment-10468">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">daisyleedq</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10468" rel="nofollow"><time datetime="2014-06-21T19:16:38+00:00" pubdate="">2014年6月21日 at 下午7:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>真考人啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10465">
<article class="comment" id="comment-10465">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wuzirui</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10465" rel="nofollow"><time datetime="2014-05-14T06:13:29+00:00" pubdate="">2014年5月14日 at 上午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已更新</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10474">
<article class="comment" id="comment-10474">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiaobei</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10474" rel="nofollow"><time datetime="2014-05-01T10:16:07+00:00" pubdate="">2014年5月1日 at 上午10:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>纠正一个错误，二分查找树的中序遍历获得元素的升序排列。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10467">
<article class="comment" id="comment-10467">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">blogpick</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-10467" rel="nofollow"><time datetime="2014-03-17T14:04:29+00:00" pubdate="">2014年3月17日 at 下午2:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>.net中char类型不是两个字节么</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39580">
<article class="comment" id="comment-39580">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fanxianxian</a></span> on <a href="http://www.acmerblog.com/hdu-1016-Prime-Ring-Problem-1269.html#comment-39580" rel="nofollow"><time datetime="2014-02-18T05:06:37+00:00" pubdate="">2014年2月18日 at 上午5:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>