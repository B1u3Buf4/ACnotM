<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>11-26</div>
<div class="tit"><h1 class="entry-title">HDU 1023 Train Problem II-高精度-[解题报告] java</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/math/number-theory" rel="category tag" title="查看数论应用中的全部文章">数论应用</a>, <a href="http://www.acmerblog.com/category/basis/recurrence" rel="category tag" title="查看递推中的全部文章">递推</a>, <a href="http://www.acmerblog.com/category/math/bignumber" rel="category tag" title="查看高精度计算中的全部文章">高精度计算</a></span><span class="i4">围观1378次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1275" href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comments" title="《HDU 1023 Train Problem II-高精度-[解题报告] java》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Train Problem II</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
As we all know the Train Problem I, the boss of the Ignatius Train Station want to know if all the trains come in strict-increasing order, how many orders that all the trains can get out of the railway. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The input contains several test cases. Each test cases consists of a number N(1&lt;=N&lt;=100). The input is terminated by the end of file. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
For each test case, you should output how many ways that all the trains can get out of the railway.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
1
2
3
10</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1
2
5
16796

<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
The result will be very large, so you may not process it by 32-bit integers.
</div><i style="font-size:1px"> </i></pre>
<p><!-- problem end --></p>
<p>题目：<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1023" target="_blank">Train Problem II</a></p>
<p>
</p>
<p>题意：一种严格上升的进站序列，有多少种不同的出站方式？</p>
<p><span style="text-indent:30px"><br/>
</span></p>
<p><span style="text-indent:30px">思路：卡塔兰数的模型，</span><span style="font-family:arial,宋体,sans-serif; text-indent:30px"><span style="font-size:14px; line-height:24px">本题要用到大数</span></span></p>
<p>
</p>
<p>卡塔兰数递推公式：</p>
<p>h(0) = h(1) = 1;</p>
<p><span style="font-family:arial,宋体,sans-serif; font-size:14px; line-height:24px">h(n)=h(n-1)*(4*n-2)/(n+1);</span></p>
<p><span style="font-family:arial,宋体,sans-serif; font-size:14px; line-height:24px"><br/>
</span></p>
<p>代码：</p>
<pre class="brush:java ">import java.io.*;
import java.util.*;
import java.math.*;

public class Main {

        public static void main(String[] argv) throws IOException
        {
              Scanner in = new Scanner(new InputStreamReader(System.in));
              
              BigInteger[] ans = new BigInteger[105];
              
              ans[0] = ans[1] = new BigInteger("1");
              
              BigInteger cheng,chu;
              
              for(int i = 2 ; i &lt; 105 ; i++)
              {
            	  cheng = new BigInteger(Integer.toString(4*i-2));
            	  chu = new BigInteger(Integer.toString(i+1));
            	  
            	  ans[i] = (ans[i-1].multiply(cheng)).divide(chu);
              }
              
             
              while(in.hasNext())
              {
            	  int n = in.nextInt();
            	  
            	  System.out.println(ans[n]);
              }

        }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-39611">
<article class="comment" id="comment-39611">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Silence.L</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39611" rel="nofollow"><time datetime="2015-06-26T21:33:28+00:00" pubdate="">2015年6月26日 at 下午9:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>97行缺一个分号</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39616">
<article class="comment" id="comment-39616">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">piaoyi</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39616" rel="nofollow"><time datetime="2015-05-23T14:27:55+00:00" pubdate="">2015年5月23日 at 下午2:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>18题的C也是错误的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39613">
<article class="comment" id="comment-39613">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yueyanglou</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39613" rel="nofollow"><time datetime="2015-02-11T13:01:39+00:00" pubdate="">2015年2月11日 at 下午1:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一句可以忽略不计了吧。从第二句开始分析，说明这个花色下的所有牌都会在其它里面出现，那么还剩下♠️和♦️。第三句，可以排除2和7，因为在两种花色里有。现在是第四句，因为♠️还剩下多个，只有是♦️B才能知道答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39614">
<article class="comment" id="comment-39614">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">binqi_ren</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39614" rel="nofollow"><time datetime="2015-01-23T16:39:01+00:00" pubdate="">2015年1月23日 at 下午4:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39618">
<article class="comment" id="comment-39618">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">rick</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39618" rel="nofollow"><time datetime="2014-12-02T12:29:30+00:00" pubdate="">2014年12月2日 at 下午12:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>华为这题目略显简单啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10509">
<article class="comment" id="comment-10509">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wuzirui</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-10509" rel="nofollow"><time datetime="2014-11-27T04:48:29+00:00" pubdate="">2014年11月27日 at 上午4:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题其实还可以找循环节。参照欧拉定理（也就是费马定理的推广）,a^(phi(m)) mod m = 1</p>
<p><a href="http://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86_(%E6%95%B0%E8%AE%BA)" rel="nofollow">http://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86_(%E6%95%B0%E8%AE%BA)</a></p>
<p>所以先算b mod phi(10)，这个部分都是可以约掉的。基本上O(1)的时间就出解了。当然，这也是因为这个问题模数太小的原因。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-10510">
<article class="comment" id="comment-10510">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">helloacm</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-10510" rel="nofollow"><time datetime="2014-10-08T21:57:16+00:00" pubdate="">2014年10月8日 at 下午9:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>使用代码高亮的插件，再修改下css</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39610">
<article class="comment" id="comment-39610">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">userwawa</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39610" rel="nofollow"><time datetime="2014-07-14T18:12:18+00:00" pubdate="">2014年7月14日 at 下午6:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>通不过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61190">
<article class="comment" id="comment-61190">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AE</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-61190" rel="nofollow"><time datetime="2014-06-07T06:49:43+00:00" pubdate="">2014年6月7日 at 上午6:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有意思，有难度</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39612">
<article class="comment" id="comment-39612">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mr-zhang2011</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39612" rel="nofollow"><time datetime="2014-05-23T15:55:07+00:00" pubdate="">2014年5月23日 at 下午3:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-39615">
<article class="comment" id="comment-39615">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fastislow</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39615" rel="nofollow"><time datetime="2014-03-20T14:51:26+00:00" pubdate="">2014年3月20日 at 下午2:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>3，求得所有的为的总和sum—-&gt;所有数的总和<br/>
printf( "Not Possible" );—-&gt;printf("impossible");<br/>
对吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39617">
<article class="comment" id="comment-39617">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jintianya</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-39617" rel="nofollow"><time datetime="2014-01-23T17:07:05+00:00" pubdate="">2014年1月23日 at 下午5:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>思路二可以用一个长度为k的队列来实现，入队后判断下队尾元素的next指针是否为空，若为空，则出队指针即为所求。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61188">
<article class="comment" id="comment-61188">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HDC</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-61188" rel="nofollow"><time datetime="2013-12-20T03:06:58+00:00" pubdate="">2013年12月20日 at 上午3:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很强大啊，佩服</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61189">
<article class="comment" id="comment-61189">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/hdu-1023-Train-Problem-II-1275.html#comment-61189" rel="nofollow"><time datetime="2013-12-09T01:15:26+00:00" pubdate="">2013年12月9日 at 上午1:15</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>gcc环境</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>