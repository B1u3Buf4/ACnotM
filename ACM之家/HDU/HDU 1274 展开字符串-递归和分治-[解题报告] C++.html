<div class="c-top2" id="post-55">
<div class="datetime">2013<br/>12-04</div>
<div class="tit"><h1 class="entry-title">HDU 1274 展开字符串-递归和分治-[解题报告] C++</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/basis/recursion" rel="category tag" title="查看递归和分治中的全部文章">递归和分治</a></span><span class="i4">围观672次</span><span class="i3"><a class="ds-thread-count" data-thread-key="1641" href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comments" title="《HDU 1274 展开字符串-递归和分治-[解题报告] C++》上的评论">14 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">展开字符串</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
在纺织CAD系统开发过程中，经常会遇到纱线排列的问题。<br/>该问题的描述是这样的：常用纱线的品种一般不会超过25种，所以分别可以用小写字母表示不同的纱线，例如：abc表示三根纱线的排列；重复可以用数字和括号表示，例如：2(abc)表示abcabc；1(a)=1a表示a;2ab表示aab;如果括号前面没有表示重复的数字出现，则就可认为是1被省略了，如：cd(abc)=cd1(abc)=cdabc;这种表示方法非常简单紧凑，也易于理解；但是计算机却不能理解。为了使计算机接受，就必须将简单紧凑的表达方式展开。某ACM队接受了此项任务。现在你就是该ACM队的一员，请你把这个程序编写完成。<br/>已知条件：输入的简单紧凑表达方式的长度不超过250个字符；括号前表示重复的数不超过1000；不会出现除了数字、括号、小写字母以外的任何其他字符；不会出现括号不配对等错误的情况（错误处理已由ACM其他队员完成了）。 </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
本题有多个测试数据组，第一行输入的就是数据组数N，接着就是N行表达式，表达式是按照前面介绍的意义书写的。 </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
输出时含有N行，每行对应一个输入的表达式。</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
2
1(1a2b1(ab)1c)
3(ab2(4ab))</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
abbabc
abaaaabaaaababaaaabaaaababaaaabaaaab</pre>
<p><!-- problem end --></p>
<p>题目大意：本体是中文的，读者可以直接在OJ上读题。。。</p>
<p>解题思路：</p>
<p>f1：先对数字进行处理。然后判断接下来的是( ，还是字母。若是(则递归调用f1，若是字母则直接输出。</p>
<p>这道题传说中可以用容器来做，但是后来才去的是以下做法：</p>
<p>
</p>
<pre class="brush:cpp ">/*
 * 1274_5.cpp
 *
 *  Created on: 2013年8月7日
 *      Author: Administrator
 *
 *      章泽天,我的女神！！！！
 */


#include &lt;iostream&gt;

using namespace std;

string str;
int fun(int index){

	char c ;
	int k;
	int e = 0;

	for(c = str[index++] ; index &lt; str.length() &amp;&amp; c != ')' ; c  = str[index++]){

		for( k = 0 ; isdigit(c) ; c = str[index++]){
			k = 10*k + c - '0';
		}

		if(!k){
			k = 1;
		}

		if( c == '('){
			while(k--){
				e = fun(index);
			}

			index = e;
		}else{
			while(k--){
				cout&lt;&lt;c;
			}
		}


	}

	if( c == ')'){
		return index;
	}
}


int main(){
	int t;
	cin &gt;&gt; t;
	while(t--){
		cin &gt;&gt; str;
		fun(0);
		cout&lt;&lt;endl;
	}
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-61406">
<article class="comment" id="comment-61406">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCat</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-61406" rel="nofollow"><time datetime="2015-05-31T02:44:00+00:00" pubdate="">2015年5月31日 at 上午2:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12130">
<article class="comment" id="comment-12130">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">we</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12130" rel="nofollow"><time datetime="2015-03-30T06:32:24+00:00" pubdate="">2015年3月30日 at 上午6:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>此网站甚是喜欢，潜力巨大，请问站长，如何加入开发团队~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12131">
<article class="comment" id="comment-12131">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">rick</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12131" rel="nofollow"><time datetime="2015-02-06T01:18:00+00:00" pubdate="">2015年2月6日 at 上午1:18</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>额楼主能否在发布代码的同时对解题思路做个讲解呢？这样大家在学习的时候就方便多了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12132">
<article class="comment" id="comment-12132">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">testnew</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12132" rel="nofollow"><time datetime="2015-01-26T21:48:14+00:00" pubdate="">2015年1月26日 at 下午9:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个系列很不错</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12133">
<article class="comment" id="comment-12133">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zcmu_sls</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12133" rel="nofollow"><time datetime="2014-11-08T07:47:53+00:00" pubdate="">2014年11月8日 at 上午7:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二块代码if(it != mp.end())应改为if(it != mp.end() &amp;&amp; (i+1)!=(it-&gt;second +1))；因为第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12134">
<article class="comment" id="comment-12134">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mayboy</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12134" rel="nofollow"><time datetime="2014-11-07T05:02:04+00:00" pubdate="">2014年11月7日 at 上午5:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，感谢分享。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12127">
<article class="comment" id="comment-12127">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sum_tsai</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12127" rel="nofollow"><time datetime="2014-07-20T11:33:48+00:00" pubdate="">2014年7月20日 at 上午11:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12135">
<article class="comment" id="comment-12135">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xy7850151</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12135" rel="nofollow"><time datetime="2014-07-12T22:22:25+00:00" pubdate="">2014年7月12日 at 下午10:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一句可以忽略不计了吧。从第二句开始分析，说明这个花色下的所有牌都会在其它里面出现，那么还剩下♠️和♦️。第三句，可以排除2和7，因为在两种花色里有。现在是第四句，因为♠️还剩下多个，只有是♦️B才能知道答案。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12128">
<article class="comment" id="comment-12128">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaoriqiang</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12128" rel="nofollow"><time datetime="2014-07-12T03:12:35+00:00" pubdate="">2014年7月12日 at 上午3:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>21行中，j&lt;10可改为j&lt;10-i，减少比较次数</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54494">
<article class="comment" id="comment-54494">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zoe_music</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-54494" rel="nofollow"><time datetime="2014-06-27T02:36:08+00:00" pubdate="">2014年6月27日 at 上午2:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61408">
<article class="comment" id="comment-61408">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1832044043</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-61408" rel="nofollow"><time datetime="2014-05-17T02:21:38+00:00" pubdate="">2014年5月17日 at 上午2:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>您没有考虑 树的根节点是负数的情况， 若树的根节点是个很大的负数，那么就要考虑过不过另外一边子树了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61407">
<article class="comment" id="comment-61407">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">MCIT</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-61407" rel="nofollow"><time datetime="2014-04-26T17:09:17+00:00" pubdate="">2014年4月26日 at 下午5:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>2的64次方是多少？ 这到底是在考什么啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-12126">
<article class="comment" id="comment-12126">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">_Tree</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12126" rel="nofollow"><time datetime="2014-04-17T16:59:54+00:00" pubdate="">2014年4月17日 at 下午4:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题这里的解法最坏情况似乎应该是指数的。回溯的时候<br/>
O(n) = O(n-1) + O(n-2) + ….<br/>
O(n-1) = O(n-2) + O(n-3)+ …<br/>
O(n) – O(n-1) = O(n-1)<br/>
O(n) = 2O(n-1)</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12129">
<article class="comment" id="comment-12129">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mnmlist</a></span> on <a href="http://www.acmerblog.com/hdu-1274-%E5%B1%95%E5%BC%80%E5%AD%97%E7%AC%A6%E4%B8%B2-1641.html#comment-12129" rel="nofollow"><time datetime="2014-01-06T01:16:52+00:00" pubdate="">2014年1月6日 at 上午1:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实就是DFS搜索，数据量较小，穷举了所有情况</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>