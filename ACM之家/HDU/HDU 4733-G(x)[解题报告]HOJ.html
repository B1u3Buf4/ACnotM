<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>09-17</div>
<div class="tit"><h1 class="entry-title">HDU 4733-G(x)[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观118次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7778" href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comments" title="《HDU 4733-G(x)[解题报告]HOJ》上的评论">10 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">G(x)</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
For a binary number x with n digits (A<sub>n</sub>A<sub>n-1</sub>A<sub>n-2</sub> … A<sub>2</sub>A<sub>1</sub>), we encode it as <img alt="Round Table" src="http://www.acmerblog.com/img/1447920822180.jpg" style="max-width:100%;"/><br/>Where "<img alt="Round Table" src="http://www.acmerblog.com/img/1447920822256.jpg" style="max-width:100%;"/>" is bitwise XOR operation and "<img alt="Round Table" src="http://www.acmerblog.com/img/1447920822333.jpg" style="max-width:100%;"/>" indicates the largest integer which is not greater than x.<br/>Due to some reasons, Mzry1992 encode his password P into G(P), and additionally, he encode P + 1 into G(P + 1) too, and write G(P) and G(P + 1) into his diary.<br/>This story happened many years ago and now you hold the diary with these numbers in your hands. Unfortunately, some digits are unreadable now. Could you determine the values of these digits using the readable digits? </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The first line has a number T (T &lt;= 100) , indicating the number of test cases.<br/>For every test case, it has 2 lines of same number of digits describe G(P) and G(P + 1), In every line, it only contains 1, 0 and ?. Unreadable digits are denoted with symbol ?, The length of every line in the input is up to 10<sup>5</sup>. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The first line has a number T (T &lt;= 100) , indicating the number of test cases.<br/>For every test case, it has 2 lines of same number of digits describe G(P) and G(P + 1), In every line, it only contains 1, 0 and ?. Unreadable digits are denoted with symbol ?, The length of every line in the input is up to 10<sup>5</sup>.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
3
10??
10??
0010
0110
1?01
0?01</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
Case #1:
Ambiguous 3
Case #2:
0010
0110
Case #3:
Impossible
<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
In the first sample case, the three possible situations are:
1. 
G(12) = 1010
G(13) = 1011
2.  
G(13) = 1011
G(14) = 1001
3.  
G(14) = 1001
G(15) = 1000
</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<p>没什么好说，注意细节</p>
<pre class="brush:cpp" name="code">#pragma comment(linker, "/STACK:102400000,102400000")
#include&lt;iostream&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;
#include&lt;cstdio&gt;
#include&lt;queue&gt;
#include&lt;stack&gt;
#include&lt;string&gt;
#include&lt;map&gt;
#include&lt;set&gt;
#include&lt;cmath&gt;
#include&lt;cassert&gt;
#include&lt;cstring&gt;
#include&lt;iomanip&gt;
using namespace std;
#ifdef _WIN32
#define i64 __int64
#define out64 "%I64d\n"
#define in64 "%I64d"
#else
#define i64 long long
#define out64 "%lld\n"
#define in64 "%lld"
#endif
/************ for topcoder by zz1215 *******************/
#define foreach(c,itr)  for(__typeof((c).begin()) itr=(c).begin();itr!=(c).end();itr++)
#define FOR(i,a,b)      for( int i = (a) ; i &lt;= (b) ; i ++)
#define FF(i,a)         for( int i = 0 ; i &lt; (a) ; i ++)
#define FFD(i,a,b)      for( int i = (a) ; i &gt;= (b) ; i --)
#define S64(a)          scanf(in64,&amp;a)
#define SS(a)           scanf("%d",&amp;a)
#define LL(a)           ((a)&lt;&lt;1)
#define RR(a)           (((a)&lt;&lt;1)+1)
#define pb              push_back
#define pf              push_front
#define X               first
#define Y               second
#define CL(Q)           while(!Q.empty())Q.pop()
#define MM(name,what)   memset(name,what,sizeof(name))
#define MC(a,b)         memcpy(a,b,sizeof(b))
#define MAX(a,b)        ((a)&gt;(b)?(a):(b))
#define MIN(a,b)        ((a)&lt;(b)?(a):(b))
#define read            freopen("in.txt","r",stdin)
#define write           freopen("out.txt","w",stdout)

const int inf = 0x3f3f3f3f;
const i64 inf64 = 0x3f3f3f3f3f3f3f3fLL;
const double oo = 10e9;
const double eps = 10e-9;
const double pi = acos(-1.0);
const int maxn = 100111;
const int mod = 1000000007;

int f[maxn];
int T;
char s[maxn];
string a,b;
int pos;
int num[maxn];

void init()
{
	f[0]=1;
	for(int i=1;i&lt;maxn;i++)
	{
		f[i] = f[i-1]*2;
		f[i] %= mod;
	}
	return ;
}

int have()
{
	int re = 0;
	for(int i=0;i&lt;a.length();i++)
	{
		if(a[i]!='?' &amp;&amp; b[i]!='?')
		{
			if(a[i]!=b[i])
			{
				re++;
				pos = i;
			}
		}
	}
	return re;
}

bool can()
{
	if(pos+1&lt;a.length())
	{
		if(a[pos+1] == '0' || b[pos+1]=='0')
		{
			return false;
		}
		else
		{
			a[pos+1] = b[pos+1] = '1';
		}
	}
	for(int i=pos+2;i&lt;a.length();i++)
	{
		if(a[i] == '1' || b[i] == '1')
		{
			return false;
		}
		else
		{
			a[i] = b[i] = '0';
		}
	}

	return true;
}

int gao()
{
	int temp = 0;
	for(int i=0;i&lt;pos;i++)
	{
		if(a[i] == '?' &amp;&amp; b[i] == '?')
		{
			temp++;
		}
		else if(a[i]=='?')
		{
			a[i] = b[i];
		}
		else if(b[i] == '?')
		{
			b[i] = a[i];
		}
	}
	return f[temp];
}



int start()
{
	int all = 0;
	for(int i=0;i&lt;a.length();i++)
	{
		if(a[i] == '?' &amp;&amp; b[i] == '?')
		{
			all++;
		}
		else
		{
			if(a[i]!='?')
			{
				s[i]=a[i];
			}
			else if(b[i]!='?')
			{
				s[i]=b[i];
			}
			else s[i]=a[i];
		}
	}

	num[0]=0;
	for(int i=0;i&lt;a.length();i++)
	{
		if(a[i] == '1')
		{
			num[i]=num[i-1]+1;
		}
		else
		{
			num[i] = num[i-1];
		}
	}


	int ans = 0;
	int pass = 0;
	bool ok = true;
	bool c0 = true;
	bool end = false;
	for(int i=int(a.length())-1; i&gt;=0 ; i--)
	{
		if(a[i] == '?' &amp;&amp; b[i] == '?')
		{
			pass++;
			if(ok)
			{
				ans+=f[all-pass];
				ans%=mod;
				pos=i;
			}
			if(end) break;
			ok = c0;
			c0 = true;
		}
		else if(a[i] == '?')
		{
			if(ok)
			{
				if(all&gt;pass)
				{
					ans+=f[all-pass-1];
					pos=i;
					ans%=mod;
				}
				else if(all == pass)
				{
					if(b[i]=='1' &amp;&amp; num[i]%2==0)
					{
						ans++;
						pos = i;
						ans%=mod;
					}
					else if(b[i]=='0' &amp;&amp; num[i]%2==1)
					{
						ans++;
						pos = i;
						ans%=mod;
					}
				}
			}
			if(end) break;
			if(b[i]=='1' &amp;&amp; c0)
			{
				ok = true;
			}
			else
			{
				ok = false;
			}
			c0 = bool(b[i]=='0');
			if(ok) end = true;
		}
		else if(b[i] == '?')
		{
			if(ok)
			{
				if(all&gt;pass)
				{
					pos = i;
					ans+=f[all-pass];
					ans%=mod;
				}
				else if(all == pass)
				{
                    if(a[i]=='1' &amp;&amp; num[i]%2==1)
					{
						ans++;
						pos = i;
						ans%=mod;
					}
					else if(a[i]=='0' &amp;&amp; num[i]%2==0)
					{
						ans++;
						pos = i;
						ans%=mod;
					}
				}
			}
			if(end ) break;
			if(a[i]=='1' &amp;&amp; c0)
			{
				ok = true;
			}
			else
			{
				ok = false;
			}
			c0 = bool(a[i]=='0');
			if(ok) end = true;
		}
		else if(a[i]=='0')
		{
			ok = false;
			c0 = true;
		}
		else if(a[i] == '1')
		{
			ok = true;
			end = true;
			c0 = false;
		}
	}
	return ans;
}

void ss()
{
	if(a[pos] == '?' &amp;&amp; b[pos] == '?')
	{
		if(num[pos]%2==0)
		{
			a[pos] = '0';
			b[pos] = '1';
		}
		else
		{
			a[pos] = '1';
			b[pos] = '0';
		}
	}
	else if(a[pos] == '?')
	{
		if(b[pos] == '1') a[pos] = '0';
		if(b[pos] == '0') a[pos] = '1';
	}
	else if(b[pos] == '?')
	{
		if(a[pos] == '1') b[pos] = '0';
		if(a[pos] == '0') b[pos] = '1';
 	}
	if(pos+1&lt;a.length())
	{
		a[pos+1] = b[pos+1] = '1';
	}
	for(int i=pos+2;i&lt;a.length();i++)
	{
		a[i] = b[i] = '0';
	}
	for(int i=0;i&lt;a.length();i++)
	{
		if(a[i] == '?')
		{
			a[i] = b[i];
		}
		else if(b[i] == '?')
		{
			b[i] = a[i];
		}
	}
	return ;
}

void out(string x)
{
	for(int i=0;i&lt;x.length();i++)
	{
		s[i] = x[i];
	}
	s[x.length()] = '\0';
	printf("%s\n",s);
	return ;
}

int main()
{
	init();
	cin&gt;&gt;T;
	getchar();
	for(int tt=1;tt&lt;=T;tt++)
	{
		cin.getline(s,100100);
		a=s;
		cin.getline(s,100100);
		b=s;
        cout&lt;&lt;"Case #"&lt;&lt;tt&lt;&lt;":"&lt;&lt;endl;
		int temp = have();
		if(temp &gt;= 2)
		{
			cout&lt;&lt;"Impossible"&lt;&lt;endl;
		}
		else if(temp == 1)
		{
			if(!can())
			{
				cout&lt;&lt;"Impossible"&lt;&lt;endl;
			}
			else
			{
				int ans = gao();
				ans/=2;
				if(ans == 0)
				{
					for(int i=0;i&lt;a.length();i++)
					{
                        if(a[i]!='?')
						{
							s[i]=a[i];
						}
						else if(b[i]!='?')
						{
							s[i]=b[i];
						}
						else
						{
							s[i]=a[i];
						}
					}
					int cx = 0;
					for(int i=0;i&lt;=pos;i++)
					{
						if(s[i]=='1')
						{
							cx++;
						}
					}
					if(cx%2==0)
					{
						ans=1;
					}
				}
				if(ans == 1)
				{
					//cout&lt;&lt;a&lt;&lt;endl;
					//cout&lt;&lt;b&lt;&lt;endl;
					out(a);
					out(b);
				}
				else
				{
					cout&lt;&lt;"Ambiguous "&lt;&lt;ans&lt;&lt;endl;
				}
			}
		}
		else
		{
			int ans = start();
			if(ans == 0)
			{
                cout&lt;&lt;"Impossible"&lt;&lt;endl;
			}
			else if(ans == 1)
			{
				ss();
				//cout&lt;&lt;a&lt;&lt;endl;
				//cout&lt;&lt;b&lt;&lt;endl;
				out(a);
				out(b);
			}
			else
			{
                cout&lt;&lt;"Ambiguous "&lt;&lt;ans&lt;&lt;endl;
			}
		}

	}

	return 0;
}
</pre>
<div style="padding-top:20px">
<p style="font-size:12px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<p>参考：http://blog.csdn.net/zz_1215/article/details/11692777</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-96950">
<article class="comment" id="comment-96950">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96950" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-96949">
<article class="comment" id="comment-96949">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96949" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-96948">
<article class="comment" id="comment-96948">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96948" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-96947">
<article class="comment" id="comment-96947">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96947" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-96946">
<article class="comment" id="comment-96946">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96946" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-96945">
<article class="comment" id="comment-96945">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96945" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-96944">
<article class="comment" id="comment-96944">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96944" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-96943">
<article class="comment" id="comment-96943">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96943" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-96942">
<article class="comment" id="comment-96942">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96942" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-96941">
<article class="comment" id="comment-96941">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919533233" rel="external nofollow">新用户631584</a></span> on <a href="http://www.acmerblog.com/hdu-4733-gx-7778.html#comment-96941" rel="nofollow"><time datetime="2017-04-20T00:52:29+00:00" pubdate="">2017年4月20日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>突如其来</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>