<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>03-23</div>
<div class="tit"><h1 class="entry-title">HDU 3394-Railway-DFS-[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/search/dfs" rel="category tag" title="查看DFS搜索中的全部文章">DFS搜索</a>, <a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a>, <a href="http://www.acmerblog.com/category/data-struct/linear" rel="category tag" title="查看线性结构中的全部文章">线性结构</a></span><span class="i4">围观443次</span><span class="i3"><a class="ds-thread-count" data-thread-key="5420" href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comments" title="《HDU 3394-Railway-DFS-[解题报告]HOJ》上的评论">18 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Railway</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
There are some locations in a park, and some of them are connected by roads. The park manger needs to build some railways along the roads, and he would like to arrange tourist routes to each circuit. If a railway belongs to more than one tourist routes, there might be clash on it, and if a railway belongs to none tourist route, it doesn’t need to build.<br/>Now we know the plan, and can you tell us how many railways are no need to build and how many railways where clash might happen. </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
The Input consists of multiple test cases. The first line of each test case contains two integers, n (0 &lt; n &lt;= 10000), m (0 &lt;= m &lt;= 100000), which are the number of locations and the number of the railways. The next m lines, each line contains two integers, u, v (0 &lt;= u, v &lt; n), which means the manger plans to build a railway on the road between u and v.<br/>You can assume that there is no loop and no multiple edges.<br/>The last test case is followed by two zeros on a single line, which means the end of the input. </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
The Input consists of multiple test cases. The first line of each test case contains two integers, n (0 &lt; n &lt;= 10000), m (0 &lt;= m &lt;= 100000), which are the number of locations and the number of the railways. The next m lines, each line contains two integers, u, v (0 &lt;= u, v &lt; n), which means the manger plans to build a railway on the road between u and v.<br/>You can assume that there is no loop and no multiple edges.<br/>The last test case is followed by two zeros on a single line, which means the end of the input.</div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
8 10
0 1
1 2
2 3
3 0
3 4
4 5
5 6
6 7
7 4
5 7
0 0</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
1 5</pre>
<p> <!-- problem end --></p>
<pre style="white-space:pre-wrap; word-wrap:break-word; color:rgb(54,46,43); font-size:14px; background-color:rgb(255,255,255); margin-top:0px; margin-bottom:0px; font-family:'Courier New'; line-height:20px"></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="background-color:rgb(255,255,255)"><span style="line-height:1.5"><span style="font-size:18px; color:rgb(51,51,255)">题意描述</span></span><span style="color:rgb(0,128,0); line-height:1.5"><span style="font-size:18px">：</span>
       </span><span style="line-height:1.5"> 公园有n个景点，公园的管理员计划要建m条道路，并且安排一些形成回路的参观路径，如果一条道路可以被多条回路共用，
        那么这条边是冲突边，如果一个块中有多个环，则该块中的每条边都是冲突边。</span></span></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="background-color:rgb(255,255,255)"><span style="line-height:1.5">        如果不能形成环的路则为不需要的边，现在就是求无向图中冲突边和不需要边的条数</span></span></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="line-height:1.5"><span style="background-color:rgb(255,255,255)">
</span></span></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="line-height:1.5"></span></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="line-height:1.5; background-color:rgb(255,255,255)"><span style="font-size:18px; color:rgb(51,102,255)">解题思路：</span></span></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="line-height:1.5; background-color:rgb(255,255,255)"><span style="color:rgb(0,128,0)">        </span>把图分为多个块，然后判断每个块里面的边数，如果块的边数等于块的点数，那么该块只有一个环，如果块的边数大于块的
       点数，那么这个块中有多个环，并且这个块中的每条边都是多个环里面的一部分。</span></pre>
<p>
</p><pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="line-height:1.5"><span style="color:rgb(51,102,255)">注意：  </span>将块出栈时，只能出到u的子节点v为止 ，因为u作为割点极有可能是该个块与别的块公用的，所以若是每次出栈到u，则会破坏其他的块。（这就是与有向图的tarjan的一个不同之处。）</span></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="line-height:1.5">
</span></pre>
<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; font-family:'Courier New'"><span style="line-height:1.5"></span></pre>
<pre class="brush:cpp ">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;stack&gt;
using namespace std;
const int N=11000;
const int M=210000;
using namespace std;

int head[N],to[M],next[M],edge_cnt,n,m;
int dfs_cnt,dfn[N],low[N],num[N],in[N];
stack&lt;int&gt; s;
void init_edge(){
    memset(head,-1,sizeof(head)); edge_cnt=0;
}
void add_edge(int u,int v){
    next[edge_cnt]=head[u]; to[edge_cnt]=v; head[u]=edge_cnt++;
    next[edge_cnt]=head[v]; to[edge_cnt]=u; head[v]=edge_cnt++;
}

int ans1,ans2;
vector&lt;int&gt; block;

void update(){
    int sz=block.size(),cnt=0;
    for (int i=0;i&lt;sz;++i){
        int u=block[i];
        for (int j=head[u];j!=-1;j=next[j]){
            int v=to[j];
            if (in[v]) cnt++;
        }
    }
    cnt/=2;
    if (cnt&gt;sz) ans2+=cnt;
    else if (cnt&lt;sz) ans1+=cnt;
}

void dfs(int u,int fa){
    low[u]=dfn[u]=++dfs_cnt;
    s.push(u);
    for (int i=head[u];i!=-1;i=next[i]){
        int v=to[i];
        if (!dfn[v]){
            dfs(v,u); low[u]=min(low[v],low[u]);
            if (low[v]&gt;=dfn[u]){
                block.clear(); memset(in,0,sizeof(in));
                int tmp;
                do{
                    tmp=s.top(); s.pop();
                    in[tmp]=1; block.push_back(tmp);
                }while (tmp!=v);
                block.push_back(u); in[u]=1;
                update();
            }
        }
        else if (fa!=v) low[u]=min(low[u],dfn[v]);
    }
}

void init(){
    memset(dfn,0,sizeof(dfn)); memset(low,0,sizeof(low));
    memset(num,0,sizeof(num)); memset(in,0,sizeof(in));
    while (!s.empty()) s.pop();
    dfs_cnt=0;
}

void work(){
    ans1=ans2=0; init();
    for (int i=1;i&lt;=n;++i)
        if (!dfn[i]) dfs(i,-1);
    printf("%d %d\n",ans1,ans2);
}
int main(){
    while (~scanf("%d%d",&amp;n,&amp;m) &amp;&amp; (n+m)){
        init_edge();
        for (int i=1;i&lt;=m;++i){
            int u,v; scanf("%d%d",&amp;u,&amp;v);
            add_edge(u+1,v+1);
        }
        work();
    }
    return 0;
}</pre>
<div><span style="line-height:1.5"><br/></span></div>
<p>参考：http://blog.csdn.net/qq397470071/article/details/20872583</p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-77088">
<article class="comment" id="comment-77088">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77088" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-77087">
<article class="comment" id="comment-77087">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77087" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-77086">
<article class="comment" id="comment-77086">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77086" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-77085">
<article class="comment" id="comment-77085">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77085" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-77084">
<article class="comment" id="comment-77084">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77084" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-77083">
<article class="comment" id="comment-77083">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77083" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-77082">
<article class="comment" id="comment-77082">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77082" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-77081">
<article class="comment" id="comment-77081">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919468041" rel="external nofollow">新用户049357</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-77081" rel="nofollow"><time datetime="2017-04-12T09:14:59+00:00" pubdate="">2017年4月12日 at 上午9:14</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>鸣人不怕自身的查克拉没了吗，战斗都打这么久了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63443">
<article class="comment" id="comment-63443">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Miracle-cc</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-63443" rel="nofollow"><time datetime="2015-07-09T12:24:29+00:00" pubdate="">2015年7月9日 at 下午12:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不太懂呀，乡亲们。原理知道代码不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63446">
<article class="comment" id="comment-63446">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaotong2055</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-63446" rel="nofollow"><time datetime="2015-07-04T00:05:27+00:00" pubdate="">2015年7月4日 at 上午12:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不同的编译器，printf(),执行的顺序不同，所以结果也就不同，建议不要那么写</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63448">
<article class="comment" id="comment-63448">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">lintong</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-63448" rel="nofollow"><time datetime="2015-06-05T08:31:14+00:00" pubdate="">2015年6月5日 at 上午8:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-29356">
<article class="comment" id="comment-29356">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">windy</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-29356" rel="nofollow"><time datetime="2015-06-01T19:22:44+00:00" pubdate="">2015年6月1日 at 下午7:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>nice!!!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63449">
<article class="comment" id="comment-63449">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">testnew</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-63449" rel="nofollow"><time datetime="2015-04-21T01:07:03+00:00" pubdate="">2015年4月21日 at 上午1:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>给力的文章，例子也非常好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63445">
<article class="comment" id="comment-63445">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Emlar</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-63445" rel="nofollow"><time datetime="2014-10-01T01:33:23+00:00" pubdate="">2014年10月1日 at 上午1:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为避免精度问题，PI值请使用arccos(-1)。应该是acos</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63444">
<article class="comment" id="comment-63444">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">geoksz</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-63444" rel="nofollow"><time datetime="2014-06-14T11:36:28+00:00" pubdate="">2014年6月14日 at 上午11:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么暴力求解方法循环到sqrt(n) 就可以了呢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63447">
<article class="comment" id="comment-63447">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">michaelwen</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-63447" rel="nofollow"><time datetime="2014-05-24T05:31:54+00:00" pubdate="">2014年5月24日 at 上午5:31</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>好厉害～</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-29358">
<article class="comment" id="comment-29358">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">verycourage</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-29358" rel="nofollow"><time datetime="2014-05-08T22:50:54+00:00" pubdate="">2014年5月8日 at 下午10:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env  python<br/>
def cou(n):<br/>
        arr =  <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/82/one_org.gif"/><br/>
        i = 1<br/>
        while(i&lt;n):<br/>
                arr.append(arr[i-1]+selfcount(i))<br/>
                i+=1<br/>
        return arr[n-1]</p>
<p>def selfcount(n):<br/>
        count = 0<br/>
        while(n):<br/>
                if n%10 == 1:<br/>
                        count += 1<br/>
                n /= 10<br/>
        return count</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-29357">
<article class="comment" id="comment-29357">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">edward2414</a></span> on <a href="http://www.acmerblog.com/hdu-3394-railway-5420.html#comment-29357" rel="nofollow"><time datetime="2014-05-06T15:21:28+00:00" pubdate="">2014年5月6日 at 下午3:21</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Often We don’t set up on weblogs, but I would like to condition that this established up really forced me individually to do this! considerably outstanding publish</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>