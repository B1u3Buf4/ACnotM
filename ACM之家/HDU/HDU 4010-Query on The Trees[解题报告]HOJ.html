<div class="c-top2" id="post-55">
<div class="datetime">2015<br/>04-15</div>
<div class="tit"><h1 class="entry-title">HDU 4010-Query on The Trees[解题报告]HOJ</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/spiderman" rel="author" title="由蜘蛛侠发布">蜘蛛侠</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/hdu" rel="category tag" title="查看HDU-杭电中的全部文章">HDU-杭电</a></span><span class="i4">围观363次</span><span class="i3"><a class="ds-thread-count" data-thread-key="7013" href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comments" title="《HDU 4010-Query on The Trees[解题报告]HOJ》上的评论">26 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<div>
<h1 class="mytitle mybigtile">Query on The Trees</h1>
</div>
<div>
<p class="mytitle"> 问题描述 :</p>
</div>
<div class="mypanel">
We have met so many problems on the tree, so today we will have a query problem on a set of trees. <br/>There  are  N  nodes,  each  node  will  have  a  unique  weight  Wi.  We  will  have  four  kinds  of operations on it and you should solve them efficiently. Wish you have fun!  </div>
<div>
<p class="mytitle"> 输入:</p>
</div>
<div class="mypanel">
There are multiple test cases in our dataset. <br/>For each case, the first line contains only one integer N.(1  ≤  N  ≤  300000) The next N�\1 lines each contains two integers x, y which means there is an edge between them. It also means we will give you one tree initially. <br/>The next line will contains N integers which means the weight Wi of each node. (0  ≤  Wi ≤  3000) <br/>The next line will contains an integer Q. (1  ≤  Q  ≤  300000) The next Q lines will start with an integer 1, 2, 3 or 4 means the kind of this operation. <br/>1. Given two integer x, y, you should make a new edge between these two node x and y. So after this operation, two trees will be connected to a new one. <br/>2. Given two integer x, y, you should find the tree in the tree set who contain node x, and you should make the node x be the root of this tree, and then you should cut the edge between node y and its parent. So after this operation, a tree will be separate into two parts. <br/>3. Given three integer w, x, y, for the x, y and all nodes between the path from x to y, you should increase their weight by w. <br/>4. Given two integer x, y, you should check the node weights on the path between x and y, and you should output the maximum weight on it.  </div>
<div>
<p class="mytitle"> 输出:</p>
</div>
<div class="mypanel">
There are multiple test cases in our dataset. <br/>For each case, the first line contains only one integer N.(1  ≤  N  ≤  300000) The next N�\1 lines each contains two integers x, y which means there is an edge between them. It also means we will give you one tree initially. <br/>The next line will contains N integers which means the weight Wi of each node. (0  ≤  Wi ≤  3000) <br/>The next line will contains an integer Q. (1  ≤  Q  ≤  300000) The next Q lines will start with an integer 1, 2, 3 or 4 means the kind of this operation. <br/>1. Given two integer x, y, you should make a new edge between these two node x and y. So after this operation, two trees will be connected to a new one. <br/>2. Given two integer x, y, you should find the tree in the tree set who contain node x, and you should make the node x be the root of this tree, and then you should cut the edge between node y and its parent. So after this operation, a tree will be separate into two parts. <br/>3. Given three integer w, x, y, for the x, y and all nodes between the path from x to y, you should increase their weight by w. <br/>4. Given two integer x, y, you should check the node weights on the path between x and y, and you should output the maximum weight on it. </div>
<div>
<p class="mytitle"> 样例输入:</p>
</div>
<pre class="mypanel iopanel">
5
1 2
2 4
2 5
1 3
1 2 3 4 5
6
4 2 3
2 1 2
4 2 3
1 3 5
3 2 1 4
4 1 4</pre>
<div>
<p class="mytitle"> 样例输出:</p>
</div>
<pre class="mypanel iopanel">
3
-1
7

<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px"><div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
We define the illegal situation of different operations: 
In first operation: if node x and y belong to a same tree, we think it's illegal. 
In second operation: if x = y or x and y not belong to a same tree, we think it's illegal. 
In third operation: if x and y not belong to a same tree, we think it's illegal. 
In fourth operation: if x and y not belong to a same tree, we think it's illegal. 
</div><i style="font-size:1px"> </i></pre>
<p> <!-- problem end --></p>
<pre class="brush:cpp ">#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;cstdio&gt;

using namespace std;

#define REP(i, n) for (int i=0;i&lt;int(n);++i)
#define FOR(i, a, b) for (int i=int(a);i&lt;int(b);++i)
#define REP_1(i, n) for (int i=1;i&lt;=int(n);++i)
#define FOR_C(i, a, b) for (int b____=int(b),i=int(a);i&lt;b____;++i)
#define REP_1_C(i, n) for (int n____=int(n),i=1;i&lt;=n____;++i)
#define DO(n) while(n--)
#define DO_C(n) int n____ = n; while(n____--)

template&lt;class T&gt; inline void RD(T &amp;x){char c; for (c = getchar(); c &lt; '0'; c = getchar()); x = c - '0'; for (c = getchar(); c &gt;= '0'; c = getchar()) x = x * 10 + c - '0';}
inline int RD(){ int x; RD(x); return x;}
template&lt;class T0, class T1&gt; inline void RD(T0 &amp;x0, T1 &amp;x1){RD(x0), RD(x1);}
template&lt;class T0, class T1, class T2&gt; inline void RD(T0 &amp;x0, T1 &amp;x1, T2 &amp;x2){RD(x0), RD(x1), RD(x2);}
template&lt;class T&gt; inline void OT(const T &amp;x){printf("%d\n", x);}
template&lt;class T&gt; inline void RST(T &amp;A){memset(A, 0, sizeof(A));}
template&lt;class T0, class T1, class T2, class T3, class T4, class T5&gt; inline void RST(T0 &amp;A0, T1 &amp;A1, T2 &amp;A2, T3 &amp;A3, T4 &amp;A4, T5 &amp;A5){RST(A0), RST(A1), RST(A2), RST(A3), RST(A4), RST(A5);}
template&lt;class T&gt; inline T max(T a, T b, T c){return max(max(a, b), c);}

/*--------*/

const int N = 300009, M = 2 * N;

int l[N], r[N], p[N], w0[N], w1[N], delay[N], rev[N]; 
bool rt[N];
// Link-cut tree
int hd[N], nxt[M], a[M], b[M];
// Adjacent list
int n;

#define lx l[x]
#define rx r[x]

// private:

inline void Inc(int x, int d){
	if (x == 0) return;
	w0[x] += d, w1[x] += d, delay[x] += d;
}

inline void Release(int x){
	if (x == 0) return;

	if (rev[x]){
		swap(lx, rx);
		rev[lx] ^=1, rev[rx] ^=1;
		rev[x] = 0;
	}

	if (delay[x]){
		Inc(lx, delay[x]), Inc(rx, delay[x]);
		delay[x] = 0;
	}
}

inline void Update(int x){
	w1[x] = max(w0[x], w1[lx], w1[rx]);
}

inline void Set(int l[], int y, int x){
	l[y] = x, p[x] = y;
}

#define z p[y]
inline void Rotate(int x){
	int y = p[x];

	if (!rt[y]) Release(z), Set(y == l[z] ? l : r, z, x);
	else p[x] = z;

	Release(y), Release(x);

	if (x == l[y]) Set(l, y, rx), Set(r, x, y);
	else Set(r, y, lx), Set(l, x, y);

	if (rt[y]) rt[y] = false, rt[x] = true;
	Update(y);
}

inline void Splay(int x){
	while (!rt[x]) Rotate(x);
}

inline int Access(int x){
	int y = 0; do{
		Splay(x), Release(x);
		rt[rx] = true, rt[rx = y] = false, Update(x);
		x = p[y = x];
	} while (x);
	return y;
}

inline int Root(int x){
	for (x = Access(x); Release(x), lx; x = lx);
	return x;
}

inline void Evert(int x){
	rev[Access(x)] ^= 1;
}

// public:

void Query(int x, int y){
	if (Root(x) != Root(y))
		puts("-1");
	else {
		Access(y); y = 0; do{
			Splay(x), Release(x); if (!p[x]) OT(max(w1[rx], w0[x], w1[y]));
			rt[rx] = true, rt[rx = y] = false, Update(x);
			x = p[y = x];
		} while (x);
	}
}

void Link(int x, int y){
	if (Root(x) == Root(y))
		puts("-1");
	else {
		Evert(x), Splay(x), p[x] = y, Access(x);
	}
}

// Set y as a root, Cut the connection between x and p[x] ..
void Cut(int y, int x){
	if (x == y || Root(x) != Root(y))
		puts("-1");
	else {
		Evert(y), Splay(y), Access(x), Splay(x);
		p[lx] = p[x], rt[lx] = true, p[x] = lx = 0;
	}
}

void Modify(int x, int y, int w){
	if (Root(x) != Root(y))
		puts("-1");
	else {
		Access(y); y = 0; do{
			Splay(x), Release(x); if (!p[x]) Inc(rx, w), w0[x] += w, Inc(y, w);
			rt[rx] = true, rt[rx = y] = false, Update(x);
			x = p[y = x];
		} while (x);
	}
}

#define v b[i]
inline void dfs(int u = 1){
	for(int i=hd[u];i;i=nxt[i]) if (!p[v]){
		p[v] = u, dfs(v);
	}
}

int main(){

	while (scanf("%d", &amp;n) != EOF){
		// Initializing Phase
		FOR_C(i, 2, n &lt;&lt; 1){
			RD(a[i], b[i]), a[i|1] = b[i], b[i|1] = a[i];
			nxt[i] = hd[a[i]], hd[a[i]] = i; ++i;
			nxt[i] = hd[a[i]], hd[a[i]] = i;
		}

		REP_1(i, n) RD(w0[i]), rt[i] = true;
		p[1] = -1, dfs(), p[1] = 0;

		//Interaction Phase
		int a, b, cmd; DO_C(RD()){
			RD(cmd, a, b); if (cmd == 1) Link(a, b);
			else if (cmd == 2) Cut(a, b);
			else if (cmd == 3) Modify(b, RD(), a);
			else Query(a, b);
		}

		puts("");

		// Rececling ...
		RST(hd, p, l, r, delay, rev);
	}
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-100010">
<article class="comment" id="comment-100010">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919512836" rel="external nofollow">新用户326634</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-100010" rel="nofollow"><time datetime="2017-04-20T21:02:04+00:00" pubdate="">2017年4月20日 at 下午9:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>没人觉得她的相貌并没什么撸点吗？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-70842">
<article class="comment" id="comment-70842">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70842" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-70841">
<article class="comment" id="comment-70841">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70841" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-70840">
<article class="comment" id="comment-70840">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70840" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-70839">
<article class="comment" id="comment-70839">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70839" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-70838">
<article class="comment" id="comment-70838">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70838" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-70837">
<article class="comment" id="comment-70837">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70837" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-70836">
<article class="comment" id="comment-70836">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70836" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-70835">
<article class="comment" id="comment-70835">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70835" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-70834">
<article class="comment" id="comment-70834">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70834" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-70833">
<article class="comment" id="comment-70833">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70833" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-70832">
<article class="comment" id="comment-70832">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519293" rel="external nofollow">新用户823149</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-70832" rel="nofollow"><time datetime="2017-04-11T15:16:33+00:00" pubdate="">2017年4月11日 at 下午3:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>哦买嘎，竟然更新了，好激动哦?</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-51857">
<article class="comment" id="comment-51857">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lin</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-51857" rel="nofollow"><time datetime="2015-07-10T13:05:02+00:00" pubdate="">2015年7月10日 at 下午1:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>请问printAllCombination的时间复杂度怎么分析呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35304">
<article class="comment" id="comment-35304">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">ygwx</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35304" rel="nofollow"><time datetime="2015-07-07T09:51:51+00:00" pubdate="">2015年7月7日 at 上午9:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。第2题，TCP不支持多播，多播和广播仅应用于UDP。所以B选项是不对的。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-35305">
<article class="comment" id="comment-35305">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">huangduanjing</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35305" rel="nofollow"><time datetime="2015-07-01T07:04:12+00:00" pubdate="">2015年7月1日 at 上午7:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>写的好·····  Pollard Rh</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35298">
<article class="comment" id="comment-35298">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">siaswj</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35298" rel="nofollow"><time datetime="2015-06-23T20:59:28+00:00" pubdate="">2015年6月23日 at 下午8:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序只能输出一个子序列</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-51858">
<article class="comment" id="comment-51858">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mnmlist</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-51858" rel="nofollow"><time datetime="2015-06-06T10:13:05+00:00" pubdate="">2015年6月6日 at 上午10:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个差别应该不会太大，或许编辑器就自动优化成内联函数了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35299">
<article class="comment" id="comment-35299">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">didiaozuoren</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35299" rel="nofollow"><time datetime="2015-06-06T03:24:21+00:00" pubdate="">2015年6月6日 at 上午3:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实不需要用LCA，用DFS+vector更简单</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-35307">
<article class="comment" id="comment-35307">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">fiftyonejiao</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35307" rel="nofollow"><time datetime="2015-06-03T02:49:05+00:00" pubdate="">2015年6月3日 at 上午2:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>站长，你好！<br/>
         你创办的的网站非常好，为我们学习算法练习编程提供了一个很好的平台，我想给你提个小建议，就是要能把每道题目的难度标出来就好了，这样我们学习起来会有一个循序渐进的过程！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35301">
<article class="comment" id="comment-35301">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">_Tree</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35301" rel="nofollow"><time datetime="2015-05-19T18:42:55+00:00" pubdate="">2015年5月19日 at 下午6:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>想问下computeLSPArray那里，if(len!=0) len=lps[len-1]是什么意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-35300">
<article class="comment" id="comment-35300">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wawa_zmt</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35300" rel="nofollow"><time datetime="2015-05-15T06:25:36+00:00" pubdate="">2015年5月15日 at 上午6:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>非常好，初学者就应该先理解递归</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35302">
<article class="comment" id="comment-35302">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zcmu_sls</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35302" rel="nofollow"><time datetime="2015-05-09T14:01:28+00:00" pubdate="">2015年5月9日 at 下午2:01</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>递归还真是一门学问，学习了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-35306">
<article class="comment" id="comment-35306">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jintianya</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35306" rel="nofollow"><time datetime="2015-04-28T18:13:12+00:00" pubdate="">2015年4月28日 at 下午6:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35308">
<article class="comment" id="comment-35308">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">linyanjin</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35308" rel="nofollow"><time datetime="2015-04-25T12:12:40+00:00" pubdate="">2015年4月25日 at 下午12:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法很不错啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-35303">
<article class="comment" id="comment-35303">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">303589828</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35303" rel="nofollow"><time datetime="2015-04-22T17:58:08+00:00" pubdate="">2015年4月22日 at 下午5:58</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二个方法挺不错。NewHead代表新的头节点，通过递归找到最后一个节点之后，就把这个节点赋给NewHead，然后一直返回返回，中途这个值是没有变化的，一边返回一边把相应的指针方向颠倒，最后结束时返回新的头节点到主函数。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35297">
<article class="comment" id="comment-35297">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zrw</a></span> on <a href="http://www.acmerblog.com/hdu-4010-query-on-the-trees-7013.html#comment-35297" rel="nofollow"><time datetime="2015-04-19T03:56:19+00:00" pubdate="">2015年4月19日 at 上午3:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一个真的要比较两次吗，换成else if 不可以吗</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>