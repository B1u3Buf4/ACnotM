<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-18</div>
<div class="tit"><h1 class="entry-title">LeetCode-String to Integer (atoi)[字符串]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/basis/string" rel="category tag" title="查看字符串处理中的全部文章">字符串处理</a></span><span class="i4">围观981次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6257" href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comments" title="《LeetCode-String to Integer (atoi)[字符串]》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h3><strong>String to Integer (atoi)</strong></h3>
<div class="question-content">
<p>Implement <span style="font-family:monospace">atoi</span> to convert a string to an integer.</p>
<p><b>Hint:</b> Carefully consider all possible input cases. If you want a challenge, please do not see below and ask yourself what are the possible input cases.</p>
<p>
<b>Notes:</b><br/>
It is intended for this problem to be specified vaguely (ie, no given input specs). You are responsible to gather all the input requirements up front. </p>
<p class="showspoilers"><a href="#" onclick="showSpoilers(this); return false;">spoilers alert… click to show requirements for atoi.</a></p>
<div class="spoilers"><b>Requirements for atoi:</b>
<p>The function first discards as many whitespace characters as necessary until the first non-whitespace character is found. Then, starting from this character, takes an optional initial plus or minus sign followed by as many numerical digits as possible, and interprets them as a numerical value.</p>
<p>The string can contain additional characters after those that form the integral number, which are ignored and have no effect on the behavior of this function.</p>
<p>If the first sequence of non-whitespace characters in str is not a valid integral number, or if no such sequence exists because either str is empty or it contains only whitespace characters, no conversion is performed.</p>
<p>If no valid conversion could be performed, a zero value is returned. If the correct value is out of the range of representable values, INT_MAX (2147483647) or INT_MIN (-2147483648) is returned.
</p>
</div>
</div>
<p> 标签: Math String<br/>
<strong>分析</strong>
</p><p>细节题。注意几个测试用例：<br/>
\begin{enumerate}<br/>
\item 不规则输入，但是有效，"-3924x8fc"， "  +  413",<br/>
\item 无效格式，" ++c", " ++1"<br/>
\item 溢出数据，"2147483648"<br/>
\end{enumerate}</p>
<p>代码1
</p><pre class="brush:cpp">
// LeetCode, String to Integer (atoi)
// 时间复杂度O(n)，空间复杂度O(1)
class Solution {
public:
    int atoi(const char *str) {
        int num = 0;
        int sign = 1;
        const int n = strlen(str);
        int i = 0;

        while (str[i] == ' ' &amp;&amp; i &lt; n) i++;

        if (str[i] == '+') {
            i++;
        } else if (str[i] == '-') {
            sign = -1;
            i++;
        }

        for (; i &lt; n; i++) {
            if (str[i] &lt; '0' || str[i] &gt; '9')
                break;
            if (num &gt; INT_MAX / 10 ||
                            (num == INT_MAX / 10 &amp;&amp;
                                    (str[i] - '0') &gt; INT_MAX % 10)) {
                return sign == -1 ? INT_MIN : INT_MAX;
            }
            num = num * 10 + str[i] - '0';
        }
        return num * sign;
    }
};
</pre>
<p>Java代码:
</p><pre class="brush:java">public class Solution {
    public int atoi(String str) {
        if(str == null || str.length()==0) return 0;
        int res = 0, i= 0;
        while (str.charAt(i) == ' ') i++;
        int sign = str.charAt(i) == '-' ? -1:1;
        if(str.charAt(i) == '-' || str.charAt(i) == '+') i++;
        char tmp;
        while (i&lt;str.length() &amp;&amp; ((tmp = str.charAt(i)) &gt;= '0' &amp;&amp; tmp &lt;= '9') ){
                if(res &gt; 214748364 || (res == 214748364) &amp;&amp; tmp &gt; '7')
                    return sign == 1 ? 2147483647:-2147483648;
                res = 10 * res + tmp - '0';
            i++;
        }
        return res * sign;
    }
}</pre>
<p><strong>相关题目</strong><br/>
<a href="/leetcode-solution-implement-strstr-6220.html">Implement strStr()</a></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-74354">
<article class="comment" id="comment-74354">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919526542" rel="external nofollow">新用户072110</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-74354" rel="nofollow"><time datetime="2017-04-12T01:59:36+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>五分钟后，脑袋掉了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59049">
<article class="comment" id="comment-59049">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">acmer29</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-59049" rel="nofollow"><time datetime="2015-07-06T05:52:16+00:00" pubdate="">2015年7月6日 at 上午5:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>能不能说下这个是用的什么算法策略？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31608">
<article class="comment" id="comment-31608">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">beizhiwu</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-31608" rel="nofollow"><time datetime="2015-06-30T13:16:55+00:00" pubdate="">2015年6月30日 at 下午1:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大哥，你复制也看看是不是这题的答案才复制吧。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63747">
<article class="comment" id="comment-63747">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">rick</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-63747" rel="nofollow"><time datetime="2015-06-29T08:09:08+00:00" pubdate="">2015年6月29日 at 上午8:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了！！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31612">
<article class="comment" id="comment-31612">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magichu</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-31612" rel="nofollow"><time datetime="2015-05-27T15:47:34+00:00" pubdate="">2015年5月27日 at 下午3:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，算是枚举吧，已修正</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63749">
<article class="comment" id="comment-63749">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">windy</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-63749" rel="nofollow"><time datetime="2015-05-10T16:51:30+00:00" pubdate="">2015年5月10日 at 下午4:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>从数学角度确实是C(n,r)，能给个递推关系式吗，从分治的角度不好理解</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59050">
<article class="comment" id="comment-59050">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">645198</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-59050" rel="nofollow"><time datetime="2015-05-02T06:49:39+00:00" pubdate="">2015年5月2日 at 上午6:49</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个应该是最朴素的KMP实现</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50052">
<article class="comment" id="comment-50052">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">AE</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-50052" rel="nofollow"><time datetime="2015-04-23T22:10:48+00:00" pubdate="">2015年4月23日 at 下午10:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31607">
<article class="comment" id="comment-31607">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">admin</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-31607" rel="nofollow"><time datetime="2015-04-01T16:35:24+00:00" pubdate="">2015年4月1日 at 下午4:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>大哥，你复制也看看是不是这题的答案才复制吧。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31610">
<article class="comment" id="comment-31610">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">daisyleedq</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-31610" rel="nofollow"><time datetime="2015-03-18T04:45:09+00:00" pubdate="">2015年3月18日 at 上午4:45</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>总结的很全面，学习了！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50051">
<article class="comment" id="comment-50051">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123zxc</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-50051" rel="nofollow"><time datetime="2015-03-15T04:02:14+00:00" pubdate="">2015年3月15日 at 上午4:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>算法还停留在大学的知识中</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59051">
<article class="comment" id="comment-59051">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">biantiao</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-59051" rel="nofollow"><time datetime="2015-03-02T14:06:52+00:00" pubdate="">2015年3月2日 at 下午2:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分析的很专业！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31611">
<article class="comment" id="comment-31611">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yupeng.bai</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-31611" rel="nofollow"><time datetime="2015-02-04T08:13:04+00:00" pubdate="">2015年2月4日 at 上午8:13</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>m /= i; 是一直在变的。参考这一篇关于质因数的http://www.acmerblog.com/integer-factorization-5124.html</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63748">
<article class="comment" id="comment-63748">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zcmu_sls</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-63748" rel="nofollow"><time datetime="2015-01-24T02:00:22+00:00" pubdate="">2015年1月24日 at 上午2:00</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>程序是对的。有些地方用了C++的写法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31609">
<article class="comment" id="comment-31609">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhiqiang</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-string-to-integer-atoi-6257.html#comment-31609" rel="nofollow"><time datetime="2015-01-01T09:39:31+00:00" pubdate="">2015年1月1日 at 上午9:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Good task for the group. Hold it up for every yeara??s winner. This is a excellent oppotunity for a lot more enhancement. Indeed, obtaining far better and much better is constantly the crucial. Just like my pal suggests on the truth about ab muscles, he just keeps obtaining much better.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>