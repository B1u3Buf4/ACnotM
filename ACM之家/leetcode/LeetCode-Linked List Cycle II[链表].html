<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-19</div>
<div class="tit"><h1 class="entry-title">LeetCode-Linked List Cycle II[链表]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/leetcode" rel="category tag" title="查看LeetCode中的全部文章">LeetCode</a></span><span class="i4">围观844次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6340" href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comments" title="《LeetCode-Linked List Cycle II[链表]》上的评论">25 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h3><strong>Linked List Cycle II</strong></h3>
<div class="question-content">
<p>
Given a linked list, return the node where the cycle begins. If there is no cycle, return <code>null</code>.
</p>
<p>
Follow up:<br/>
Can you solve it without using extra space?
</p>
</div>
<p> 标签: Linked List Two Pointers<br/>
<strong>分析</strong>
</p><p>当fast与slow相遇时，slow肯定没有遍历完链表，而fast已经在环内循环了$n$圈($1 \leq n$)。假设slow走了$s$步，则fast走了$2s$步（fast步数还等于$s$加上在环上多转的$n$圈），设环长为$r$，则：<br/>
\begin{eqnarray}<br/>
2s &amp;=&amp; s + nr \nonumber \\<br/>
s &amp;=&amp; nr \nonumber<br/>
\end{eqnarray}</p>
<p>设整个链表长$L$，环入口点与相遇点距离为$a$，起点到环入口点的距离为$x$，则<br/>
\begin{eqnarray}<br/>
x + a &amp;=&amp; nr = (n – 1)r +r = (n-1)r + L – x \nonumber \\<br/>
x &amp;=&amp; (n-1)r + (L – x – a) \nonumber<br/>
\end{eqnarray}</p>
<p>$L – x – a$为相遇点到环入口点的距离，由此可知，从链表头到环入口点等于$n-1$圈内环+相遇点到环入口点，于是我们可以从{head}开始另设一个指针{slow2}，两个慢指针每次前进一步，它俩一定会在环入口点相遇。</p>
<p>代码1
</p><pre class="brush:cpp">
//LeetCode, Linked List Cycle II
// 时间复杂度O(n)，空间复杂度O(1)
class Solution {
public:
    ListNode *detectCycle(ListNode *head) {
        ListNode *slow = head, *fast = head;
        while (fast &amp;&amp; fast-&gt;next) {
            slow = slow-&gt;next;
            fast = fast-&gt;next-&gt;next;
            if (slow == fast) {
                ListNode *slow2 = head;

                while (slow2 != slow) {
                    slow2 = slow2-&gt;next;
                    slow = slow-&gt;next;
                }
                return slow2;
            }
        }
        return nullptr;
    }
};
</pre>
<p>Java代码:
</p><pre class="brush:java">/**
 * Definition for singly-linked list.
 * class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) {
 *         val = x;
 *         next = null;
 *     }
 * }
 */
public class Solution {
    public ListNode detectCycle(ListNode head) {
        if(null == head || null == head.next) return null;
        ListNode slow = head;
        ListNode fast = head;
        while(slow != null &amp;&amp; fast != null &amp;&amp; fast.next != null){
            slow = slow.next;
            fast = fast.next.next;
            if(slow == fast){
                slow = head;
                while(slow != fast){
                    slow = slow.next;
                    fast = fast.next;
                }
                return slow;
            }
        }
        return null;
    }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-73705">
<article class="comment" id="comment-73705">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73705" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73704">
<article class="comment" id="comment-73704">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73704" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73703">
<article class="comment" id="comment-73703">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73703" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73702">
<article class="comment" id="comment-73702">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73702" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73701">
<article class="comment" id="comment-73701">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73701" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73700">
<article class="comment" id="comment-73700">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73700" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73699">
<article class="comment" id="comment-73699">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73699" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73698">
<article class="comment" id="comment-73698">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73698" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73697">
<article class="comment" id="comment-73697">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73697" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73696">
<article class="comment" id="comment-73696">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73696" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73695">
<article class="comment" id="comment-73695">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919519249" rel="external nofollow">新用户887274</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-73695" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是同一人画的</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32131">
<article class="comment" id="comment-32131">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123456789_xd</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-32131" rel="nofollow"><time datetime="2015-06-27T14:33:12+00:00" pubdate="">2015年6月27日 at 下午2:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>老实说，这种方法就是穷举，复杂度是2^n，之所以能够AC是应为题目的测试数据有问题，要么数据量很小，要么能够得到k == t，否则即使n = 30，也要很久才能得出结果，本人亲测</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32133">
<article class="comment" id="comment-32133">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jandk</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-32133" rel="nofollow"><time datetime="2015-06-27T11:34:53+00:00" pubdate="">2015年6月27日 at 上午11:34</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>分三种情况讨论。Not Possible就是impossible</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32132">
<article class="comment" id="comment-32132">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1193658339</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-32132" rel="nofollow"><time datetime="2015-06-15T19:02:27+00:00" pubdate="">2015年6月15日 at 下午7:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为什么不直接用STL排序呢？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32130">
<article class="comment" id="comment-32130">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xiao597896577</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-32130" rel="nofollow"><time datetime="2015-05-30T00:27:48+00:00" pubdate="">2015年5月30日 at 上午12:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>想问下computeLSPArray那里，if(len!=0) len=lps[len-1]是什么意思</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59225">
<article class="comment" id="comment-59225">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaoriqiang</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-59225" rel="nofollow"><time datetime="2015-05-13T16:46:57+00:00" pubdate="">2015年5月13日 at 下午4:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>博主的C++功底真是好</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32135">
<article class="comment" id="comment-32135">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cherry_odd</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-32135" rel="nofollow"><time datetime="2015-05-08T17:52:53+00:00" pubdate="">2015年5月8日 at 下午5:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#!/usr/bin/env python def cou(n): arr =  [1]</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50357">
<article class="comment" id="comment-50357">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Supermaner</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-50357" rel="nofollow"><time datetime="2015-05-05T20:39:06+00:00" pubdate="">2015年5月5日 at 下午8:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有意思，有难度</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50355">
<article class="comment" id="comment-50355">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Miracle-cc</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-50355" rel="nofollow"><time datetime="2015-03-06T09:10:47+00:00" pubdate="">2015年3月6日 at 上午9:10</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个应该是最朴素的KMP实现</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32134">
<article class="comment" id="comment-32134">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wangzhenvs123</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-32134" rel="nofollow"><time datetime="2015-03-01T11:29:54+00:00" pubdate="">2015年3月1日 at 上午11:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>int L[m+1][n+1];这样定义出错，这个在gcc上可以编译通过 在VS上不行 应该改为new 或者vector</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50356">
<article class="comment" id="comment-50356">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">magicSky</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-50356" rel="nofollow"><time datetime="2015-02-17T03:27:21+00:00" pubdate="">2015年2月17日 at 上午3:27</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>其实国内大部分公司对算法都不够重视。特别是中小型公司老板根本都不懂技术，也不懂什么是算法，从而也不要求程序员懂什么算法，做程序从来不考虑性能问题，只要页面能显示出来就是好程序，这是国内的现状，很无奈。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32129">
<article class="comment" id="comment-32129">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wuzirui</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-32129" rel="nofollow"><time datetime="2015-02-04T00:52:55+00:00" pubdate="">2015年2月4日 at 上午12:52</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对，就是把这32位当成一个长度为32的数</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50353">
<article class="comment" id="comment-50353">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hwp</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-50353" rel="nofollow"><time datetime="2014-12-12T01:05:31+00:00" pubdate="">2014年12月12日 at 上午1:05</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59224">
<article class="comment" id="comment-59224">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">cyyuen</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-59224" rel="nofollow"><time datetime="2014-12-08T08:35:02+00:00" pubdate="">2014年12月8日 at 上午8:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>因为是要把从字符串s的start位到当前位在hash中重置，修改提交后能accept，但是不修改居然也能accept</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50354">
<article class="comment" id="comment-50354">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1832044043</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-linked-list-cycle-ii-6340.html#comment-50354" rel="nofollow"><time datetime="2014-12-02T08:30:28+00:00" pubdate="">2014年12月2日 at 上午8:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有谁知道直接遍历的方法中第8行是什么意思嘛？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>