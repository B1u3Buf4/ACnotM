<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-19</div>
<div class="tit"><h1 class="entry-title">LeetCode-Distinct Subsequences[动态规划]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观1330次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6358" href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comments" title="《LeetCode-Distinct Subsequences[动态规划]》上的评论">15 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h3><strong>Distinct Subsequences</strong></h3>
<div class="question-content">
<p>
Given a string <b>S</b> and a string <b>T</b>, count the number of distinct subsequences of <b>T</b> in <b>S</b>.
</p>
<p>
A subsequence of a string is a new string which is formed from the original string by deleting some (can be none) of the characters without disturbing the relative positions of the remaining characters. (ie, <code>"ACE"</code> is a subsequence of <code>"ABCDE"</code> while <code>"AEC"</code> is not).
</p>
<p>
Here is an example:<br/>
<b>S</b> = <code>"rabbbit"</code>, <b>T</b> = <code>"rabbit"</code>
</p>
<p>
Return <code>3</code>.
</p>
</div>
<p> 标签: Dynamic Programming String<br/>
<strong>分析</strong>
</p><p>设状态为$f(i,j)$，表示{T[0,j]}在{S[0,i]}里出现的次数。首先，无论{S[i]}和{T[j]}是否相等，若不使用{S[i]}，则$f(i,j)=f(i-1,j)$；若{S[i]==T[j]}，则可以使用{S[i]}，此时$f(i,j)=f(i-1,j)+f(i-1, j-1)$。</p>
<p>代码1
</p><pre class="brush:cpp">
// LeetCode, Distinct Subsequences
// 二维动规+滚动数组
// 时间复杂度O(m*n)，空间复杂度O(n)
class Solution {
public:
    int numDistinct(const string &amp;S, const string &amp;T) {
        vector&lt;int&gt; f(T.size() + 1);
        f[0] = 1;
        for (int i = 0; i &lt; S.size(); ++i) {
            for (int j = T.size() - 1; j &gt;= 0; --j) {
                f[j + 1] += S[i] == T[j] ? f[j] : 0;
            }
        }

        return f[T.size()];
    }
};
</pre>
<p>Java代码:
</p><pre class="brush:java">public class Solution {
    static int dp[][];
    static int numDistinctRecr(char s[],char t[],int i,int j){
        if(s.length - i &lt; t.length - j) return 0;
        if(j == t.length) return 1;
        if( i &gt;= s.length || j&gt;= t.length ) return 0;
        if(dp[i][j] &gt;= 0) return dp[i][j];
        if(s[i] == t[j]){ //当前这个字符相等
            return (dp[i][j] = numDistinctRecr(s, t, i+1, j) + numDistinctRecr(s,t,i+1,j+1));
        }else{//不同的只能删掉
            return (dp[i][j] = numDistinctRecr(s, t, i+1,j ));
        }
    }

    public static int numDistinct(String S, String T) {
        dp = new int[S.length()][T.length()];
        for(int i=0; i&lt;S.length(); i++)
            for(int j=0; j&lt;T.length(); j++)
                dp[i][j] = -1;
        return numDistinctRecr(S.toCharArray(), T.toCharArray(), 0, 0);
    }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-73626">
<article class="comment" id="comment-73626">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919461977" rel="external nofollow">新用户059329</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-73626" rel="nofollow"><time datetime="2017-04-12T00:07:35+00:00" pubdate="">2017年4月12日 at 上午12:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>恩，做基友，可以有！好东西啊！！！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32256">
<article class="comment" id="comment-32256">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">feifei003603</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32256" rel="nofollow"><time datetime="2015-07-06T20:17:58+00:00" pubdate="">2015年7月6日 at 下午8:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>思路二可以用一个长度为k的队列来实现，入队后判断下队尾元素的next指针是否为空，若为空，则出队指针即为所求。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59258">
<article class="comment" id="comment-59258">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Bernice1989</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-59258" rel="nofollow"><time datetime="2015-06-07T21:24:15+00:00" pubdate="">2015年6月7日 at 下午9:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发类的题还是算法类？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32254">
<article class="comment" id="comment-32254">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">21435048</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32254" rel="nofollow"><time datetime="2015-06-05T21:33:36+00:00" pubdate="">2015年6月5日 at 下午9:33</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>目前为止见过的最易懂的一个，多谢分享</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59259">
<article class="comment" id="comment-59259">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gaotongtest</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-59259" rel="nofollow"><time datetime="2015-05-26T14:11:10+00:00" pubdate="">2015年5月26日 at 下午2:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>已更正。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50396">
<article class="comment" id="comment-50396">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">asdass</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-50396" rel="nofollow"><time datetime="2015-05-25T04:22:42+00:00" pubdate="">2015年5月25日 at 上午4:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题其实还可以找循环节。参照欧拉定理（也就是费马定理的推广）,a^(phi(m)) mod m = 1</p>
<p><a href="http://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86_(%E6%95%B0%E8%AE%BA)" rel="nofollow">http://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86_(%E6%95%B0%E8%AE%BA)</a></p>
<p>所以先算b mod phi(10)，这个部分都是可以约掉的。基本上O(1)的时间就出解了。当然，这也是因为这个问题模数太小的原因。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32249">
<article class="comment" id="comment-32249">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">NiKaWaLi</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32249" rel="nofollow"><time datetime="2015-05-07T07:39:54+00:00" pubdate="">2015年5月7日 at 上午7:39</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>mark, 备用</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50395">
<article class="comment" id="comment-50395">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tzf888888</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-50395" rel="nofollow"><time datetime="2015-04-17T01:40:48+00:00" pubdate="">2015年4月17日 at 上午1:40</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>对于第一题，我的直觉告诉我换不换都一样，求指教</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32253">
<article class="comment" id="comment-32253">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hao555sky</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32253" rel="nofollow"><time datetime="2015-02-02T00:19:48+00:00" pubdate="">2015年2月2日 at 上午12:19</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>C语言版本的代码好像有点问题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32251">
<article class="comment" id="comment-32251">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">TimeFight</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32251" rel="nofollow"><time datetime="2015-01-19T20:16:22+00:00" pubdate="">2015年1月19日 at 下午8:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>,,,,,,,,,,,,,,,</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50397">
<article class="comment" id="comment-50397">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zhenghao</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-50397" rel="nofollow"><time datetime="2014-12-28T19:08:36+00:00" pubdate="">2014年12月28日 at 下午7:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>very good solutions.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32250">
<article class="comment" id="comment-32250">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sum_tsai</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32250" rel="nofollow"><time datetime="2014-12-28T11:04:58+00:00" pubdate="">2014年12月28日 at 上午11:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一题还是比较考验智商~</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32252">
<article class="comment" id="comment-32252">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">rick</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32252" rel="nofollow"><time datetime="2014-12-27T13:46:13+00:00" pubdate="">2014年12月27日 at 下午1:46</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>处凡愚而不减，在圣贤而不增；<br/>住烦恼而不乱，居禅定而不寂。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32255">
<article class="comment" id="comment-32255">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">becool456</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32255" rel="nofollow"><time datetime="2014-12-14T17:26:01+00:00" pubdate="">2014年12月14日 at 下午5:26</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>#include &lt;cstdio&gt;<br/>
#include &lt;cstring&gt;</p>
<p>const int MAXSIZE=256;<br/>
//char store[MAXSIZE];<br/>
char str1[MAXSIZE];<br/>
/*<br/>
void init(char *store) {<br/>
    int i;<br/>
    store['A']=’V', store['B']=’W',store['C']=’X',store['D']=’Y',store['E']=’Z';<br/>
    for(i=’F';i&lt;=’Z';++i) store <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =i-5;<br/>
}<br/>
*/<br/>
int main() {<br/>
    //freopen("input.txt","r",stdin);<br/>
    //init(store);<br/>
    char *p;<br/>
    while(fgets(str1,MAXSIZE,stdin) &amp;&amp; strcmp(str1,"STARTn")==0) {<br/>
        if(p=fgets(str1,MAXSIZE,stdin)) {<br/>
            for(;*p;++p) {<br/>
				//*p=store[*p]<br/>
                if(*p&lt;’A’ || *p&gt;’Z') continue;<br/>
                if(*p&gt;’E') *p=*p-5;<br/>
                else *p=*p+21;<br/>
            }<br/>
            printf("%s",str1);<br/>
        }<br/>
        fgets(str1,MAXSIZE,stdin);<br/>
    }<br/>
    return 0;<br/>
}</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-32257">
<article class="comment" id="comment-32257">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">GDUTtian</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-distinct-subsequences-6358.html#comment-32257" rel="nofollow"><time datetime="2014-12-02T05:59:35+00:00" pubdate="">2014年12月2日 at 上午5:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>代码是给出了，但是解析的也太不清晰了吧！如 13 abejkcfghid jkebfghicda<br/>
第一步拆分为 三部分 (bejk, cfghi, d) * C(13,3)，为什么要这样拆分，原则是什么？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>