<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-19</div>
<div class="tit"><h1 class="entry-title">LeetCode-Single Number II[数组]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/leetcode" rel="category tag" title="查看LeetCode中的全部文章">LeetCode</a></span><span class="i4">围观670次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6317" href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comments" title="《LeetCode-Single Number II[数组]》上的评论">25 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h3><strong>Single Number II</strong></h3>
<div class="question-content">
<p>Given an array of integers, every element appears <i>three</i> times except for one. Find that single one.</p>
<p><b>Note:</b><br/>
Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</p>
</div>
<p>标签: Bit Manipulation<br/>
<strong>分析</strong></p>
<p>本题和上一题 Single Number，考察的是位运算。</p>
<p>方法1：创建一个长度为{sizeof(int)}的数组{count[sizeof(int)]}，{count[i]}表示在在$i$位出现的1的次数。如果{count[i]}是3的整数倍，则忽略；否则就把该位取出来组成答案。</p>
<p>方法2：用{one}记录到当前处理的元素为止，二进制1出现“1次”（mod 3 之后的 1）的有哪些二进制位；用{two}记录到当前计算的变量为止，二进制1出现“2次”（mod 3 之后的 2）的有哪些二进制位。当{one}和{two}中的某一位同时为1时表示该二进制位上1出现了3次，此时需要清零。即\textbf{用二进制模拟三进制运算}。最终{one}记录的是最终结果。</p>
<p>代码1</p>
<pre class="brush:cpp">// LeetCode, Single Number II
// 方法1，时间复杂度O(n)，空间复杂度O(1)
class Solution {
public:
    int singleNumber(int A[], int n) {
        const int W = sizeof(int) * 8; // 一个整数的bit数，即整数字长
        int count[W];  // count[i]表示在在i位出现的1的次数
        fill_n(&amp;count[0], W, 0);
        for (int i = 0; i &lt; n; i++) {
            for (int j = 0; j &lt; W; j++) {
                count[j] += (A[i] &gt;&gt; j) &amp; 1;
                count[j] %= 3;
            }
        }
        int result = 0;
        for (int i = 0; i &lt; W; i++) {
            result += (count[i] &lt;&lt; i);
        }
        return result;
    }
};</pre>
<p>代码2</p>
<pre class="brush:cpp">// LeetCode, Single Number II
// 方法2，时间复杂度O(n)，空间复杂度O(1)
class Solution {
public:
    int singleNumber(int A[], int n) {
        int one = 0, two = 0, three = 0;
        for (int i = 0; i &lt; n; ++i) {
            two |= (one &amp; A[i]);
            one ^= A[i];
            three = ~(one &amp; two);
            one &amp;= three;
            two &amp;= three;
        }

        return one;
    }
};</pre>
<p><strong>相关题目</strong></p>
<p><a href="http://www.acmerblog.com/leetcode-solution-single-number-6279.html">Single Number</a></p>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-73947">
<article class="comment" id="comment-73947">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73947" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73946">
<article class="comment" id="comment-73946">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73946" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73945">
<article class="comment" id="comment-73945">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73945" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73944">
<article class="comment" id="comment-73944">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73944" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73943">
<article class="comment" id="comment-73943">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73943" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73942">
<article class="comment" id="comment-73942">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73942" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73941">
<article class="comment" id="comment-73941">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73941" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73940">
<article class="comment" id="comment-73940">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73940" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73939">
<article class="comment" id="comment-73939">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73939" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73938">
<article class="comment" id="comment-73938">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73938" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-73937">
<article class="comment" id="comment-73937">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919516895" rel="external nofollow">新用户458006</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-73937" rel="nofollow"><time datetime="2017-04-12T01:59:34+00:00" pubdate="">2017年4月12日 at 上午1:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>狗：MMP不知道当不当讲</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59178">
<article class="comment" id="comment-59178">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">nsoi_onion</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-59178" rel="nofollow"><time datetime="2015-07-15T16:48:46+00:00" pubdate="">2015年7月15日 at 下午4:48</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二块代码if(it != mp.end())应改为if(it != mp.end() &amp;&amp; (i+1)!=(it-&gt;second +1))；因为第二种解法如果数组有重复元素 就不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59180">
<article class="comment" id="comment-59180">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liluvu</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-59180" rel="nofollow"><time datetime="2015-07-12T07:03:42+00:00" pubdate="">2015年7月12日 at 上午7:03</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>simple, however efficient. A lot of instances it is difficult to get that a??perfect balancea?? among usability and appearance. I must say that youa??ve done a exceptional task with this. Also, the blog masses quite fast for me on Web explore.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63821">
<article class="comment" id="comment-63821">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mazilian</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-63821" rel="nofollow"><time datetime="2015-07-11T18:12:07+00:00" pubdate="">2015年7月11日 at 下午6:12</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>Thanks i enjoy your write-up about Why We Keep track of | J Squared Consulting</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31990">
<article class="comment" id="comment-31990">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Emlar</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-31990" rel="nofollow"><time datetime="2015-07-03T23:38:37+00:00" pubdate="">2015年7月3日 at 下午11:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>为避免精度问题，PI值请使用arccos(-1)。应该是acos</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50271">
<article class="comment" id="comment-50271">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">hanyi</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-50271" rel="nofollow"><time datetime="2015-06-17T18:09:22+00:00" pubdate="">2015年6月17日 at 下午6:09</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>可是看了很多算法书什么的都是说的(start-end)/2哎。。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63823">
<article class="comment" id="comment-63823">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bcys</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-63823" rel="nofollow"><time datetime="2015-06-05T20:02:38+00:00" pubdate="">2015年6月5日 at 下午8:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>很棒的网站，加油！⛽️</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50270">
<article class="comment" id="comment-50270">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">123zxc</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-50270" rel="nofollow"><time datetime="2015-05-19T18:55:45+00:00" pubdate="">2015年5月19日 at 下午6:55</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>简洁的代码</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-63822">
<article class="comment" id="comment-63822">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mysteriousAngel_love</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-63822" rel="nofollow"><time datetime="2015-05-04T22:08:06+00:00" pubdate="">2015年5月4日 at 下午10:08</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>原来的主机不行，目前更换到了国内主机</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31989">
<article class="comment" id="comment-31989">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Dwayne</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-31989" rel="nofollow"><time datetime="2015-04-24T23:29:37+00:00" pubdate="">2015年4月24日 at 下午11:29</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>是O(m+n)，不小心打错了</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50269">
<article class="comment" id="comment-50269">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">liuk</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-50269" rel="nofollow"><time datetime="2015-03-15T10:07:58+00:00" pubdate="">2015年3月15日 at 上午10:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>学习了。找到这题</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-50272">
<article class="comment" id="comment-50272">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">xy7850151</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-50272" rel="nofollow"><time datetime="2015-02-25T17:30:00+00:00" pubdate="">2015年2月25日 at 下午5:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>站长好。我是一个准备创业的互联网小白,我们打算做一个有关国*际*游*学的平台。手上也有了一些境外资源。现阶段的团队现在没有cto.原意出让一些管理股寻找一个靠谱的技术专家做合伙人, 不知道是不是能得到您的帮助。发个帖子或者其他方式。期待您的回应。可以加我微信tianxielemon聊聊。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-50268">
<article class="comment" id="comment-50268">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">gladuo</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-50268" rel="nofollow"><time datetime="2015-01-28T10:57:09+00:00" pubdate="">2015年1月28日 at 上午10:57</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63824">
<article class="comment" id="comment-63824">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">HDC</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-63824" rel="nofollow"><time datetime="2014-12-12T14:02:37+00:00" pubdate="">2014年12月12日 at 下午2:02</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>有一点问题。。后面动态规划的程序中<br/>
int dp[n+1][W+1];<br/>
会报错  提示表达式必须含有常量值。该怎么修改呢。。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-59179">
<article class="comment" id="comment-59179">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">CCCat</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-single-number-ii-6317.html#comment-59179" rel="nofollow"><time datetime="2014-12-07T05:32:35+00:00" pubdate="">2014年12月7日 at 上午5:32</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>厉害啊，我遇见数学问题就头疼！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>