<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-18</div>
<div class="tit"><h1 class="entry-title">LeetCode-LRU Cache[链表]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/problemset/leetcode" rel="category tag" title="查看LeetCode中的全部文章">LeetCode</a></span><span class="i4">围观498次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6205" href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comments" title="《LeetCode-LRU Cache[链表]》上的评论">25 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h3><strong>LRU Cache</strong></h3>
<div class="question-content">
<p>
Design and implement a data structure for Least Recently Used (LRU) cache. It should support the following operations: <code>get</code> and <code>set</code>.
</p>
<p>
<code>get(key)</code> – Get the value (will always be positive) of the key if the key exists in the cache, otherwise return -1.<br/>
<code>set(key, value)</code> – Set or insert the value if the key is not already present. When the cache reached its capacity, it should invalidate the least recently used item before inserting a new item.
</p>
</div>
<p> 标签: Data Structure<br/>
<strong>分析</strong>
</p><p>为了使查找、插入和删除都有较高的性能，我们使用一个双向链表({std::list})和一个哈希表({std::unordered_map})，因为：<br/>
\begin{itemize}<br/>
\item{哈希表保存每个节点的地址，可以基本保证在$O(1)$时间内查找节点}<br/>
\item{双向链表插入和删除效率高，单向链表插入和删除时，还要查找节点的前驱节点}<br/>
\end{itemize}</p>
<p>具体实现细节：<br/>
\begin{itemize}<br/>
\item{越靠近链表头部，表示节点上次访问距离现在时间最短，尾部的节点表示最近访问最少}<br/>
\item{访问节点时，如果节点存在，把该节点交换到链表头部，同时更新hash表中该节点的地址}<br/>
\item{插入节点时，如果cache的size达到了上限capacity，则删除尾部节点，同时要在hash表中删除对应的项；新节点插入链表头部}<br/>
\end{itemize}</p>
<p>Java代码:
</p><pre class="brush:java">import java.util.LinkedHashMap;
public class LRUCache extends LinkedHashMap&lt;Integer,Integer&gt;{
    private int capacity;
    public LRUCache(int capacity) {
	        super(16, 0.75f, true);
	        this.capacity = capacity;
	   }
    public Integer get(Object key) {
		   Integer v = super.get(key);
		   if(v != null) return v;
		   else return -1;
	}
	public boolean removeEldestEntry(Map.Entry&lt;Integer,Integer&gt; eldest){     
        return size()&gt;capacity;        
    }
     public void set(int key, int value) {
		   super.put(key, value);
	   }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-74834">
<article class="comment" id="comment-74834">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74834" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74833">
<article class="comment" id="comment-74833">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74833" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74832">
<article class="comment" id="comment-74832">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74832" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74831">
<article class="comment" id="comment-74831">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74831" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74830">
<article class="comment" id="comment-74830">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74830" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74829">
<article class="comment" id="comment-74829">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74829" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74828">
<article class="comment" id="comment-74828">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74828" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74827">
<article class="comment" id="comment-74827">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74827" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74826">
<article class="comment" id="comment-74826">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74826" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74825">
<article class="comment" id="comment-74825">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74825" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74824">
<article class="comment" id="comment-74824">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919532332" rel="external nofollow">新用户396220</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-74824" rel="nofollow"><time datetime="2017-04-12T03:53:50+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>那么如此正能量，何罪之有呢？罪大发了，因为这世界不是靠正能量运转的。”“这种人根本不会</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31273">
<article class="comment" id="comment-31273">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">blogpick</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31273" rel="nofollow"><time datetime="2015-07-04T08:38:13+00:00" pubdate="">2015年7月4日 at 上午8:38</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不错，赞一个！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31263">
<article class="comment" id="comment-31263">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">H.Watson</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31263" rel="nofollow"><time datetime="2015-06-28T12:56:07+00:00" pubdate="">2015年6月28日 at 下午12:56</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>算法是程序的灵魂，算法分简单和复杂，如果不搞大数据类，程序员了解一下简单点的算法也是可以的，但是会算法的一定要会编程才行，程序员不一定要会算法，利于自己项目需要的可以简单了解。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31271">
<article class="comment" id="comment-31271">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mazilian</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31271" rel="nofollow"><time datetime="2015-06-18T23:22:49+00:00" pubdate="">2015年6月18日 at 下午11:22</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顶一个 赞一个</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31272">
<article class="comment" id="comment-31272">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">21435048</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31272" rel="nofollow"><time datetime="2015-06-18T13:44:18+00:00" pubdate="">2015年6月18日 at 下午1:44</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>妈呀！这个Dijkstra模板好长OwQ！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-58973">
<article class="comment" id="comment-58973">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">mysteriousAngel_love</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-58973" rel="nofollow"><time datetime="2015-05-25T23:11:28+00:00" pubdate="">2015年5月25日 at 下午11:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>great!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31275">
<article class="comment" id="comment-31275">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1173954900</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31275" rel="nofollow"><time datetime="2015-04-30T20:04:07+00:00" pubdate="">2015年4月30日 at 下午8:04</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>上面的评论很起劲，为什么我看不懂啊</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31267">
<article class="comment" id="comment-31267">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Lanifer</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31267" rel="nofollow"><time datetime="2015-04-23T22:47:11+00:00" pubdate="">2015年4月23日 at 下午10:47</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>simple, however efficient. A lot of instances it is difficult to get that a??perfect balancea?? among usability and appearance. I must say that youa??ve done a exceptional task with this. Also, the blog masses quite fast for me on Web explore.</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31270">
<article class="comment" id="comment-31270">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">753951</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31270" rel="nofollow"><time datetime="2015-04-03T07:30:40+00:00" pubdate="">2015年4月3日 at 上午7:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>helpful！！ mark</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31266">
<article class="comment" id="comment-31266">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Amber</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31266" rel="nofollow"><time datetime="2015-03-31T15:51:35+00:00" pubdate="">2015年3月31日 at 下午3:51</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>感谢分享 学习了`(*∩_∩*)′</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31269">
<article class="comment" id="comment-31269">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jue</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31269" rel="nofollow"><time datetime="2015-03-05T00:42:44+00:00" pubdate="">2015年3月5日 at 上午12:42</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这道题目的核心一句话是：取还是不取。<br/>
如果当前取，则index+1作为参数。如果当前不取，则任用index作为参数。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31265">
<article class="comment" id="comment-31265">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">21435048</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31265" rel="nofollow"><time datetime="2015-01-24T23:07:47+00:00" pubdate="">2015年1月24日 at 下午11:07</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>确实有点难度，搞了好久。int溢出要注意</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31268">
<article class="comment" id="comment-31268">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bobo</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31268" rel="nofollow"><time datetime="2014-12-29T07:20:05+00:00" pubdate="">2014年12月29日 at 上午7:20</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你指的哪个问题？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-31274">
<article class="comment" id="comment-31274">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">753951</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31274" rel="nofollow"><time datetime="2014-11-28T12:17:53+00:00" pubdate="">2014年11月28日 at 下午12:17</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这是研发类的题还是算法类？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-31264">
<article class="comment" id="comment-31264">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">verycourage</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-lru-cache-6205.html#comment-31264" rel="nofollow"><time datetime="2014-11-25T08:16:26+00:00" pubdate="">2014年11月25日 at 上午8:16</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>此题的样例描述不正确</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>