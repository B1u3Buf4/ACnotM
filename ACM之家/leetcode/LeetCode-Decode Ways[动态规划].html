<div class="c-top2" id="post-55">
<div class="datetime">2014<br/>11-18</div>
<div class="tit"><h1 class="entry-title">LeetCode-Decode Ways[动态规划]</h1>
<div class="entry-meta iititle2">
<span class="i2"><a href="http://www.acmerblog.com/author/admin" rel="author" title="由coder发布">coder</a></span><span class="i1"><a href="http://www.acmerblog.com/category/dp2/line-dp" rel="category tag" title="查看线性DP中的全部文章">线性DP</a></span><span class="i4">围观1607次</span><span class="i3"><a class="ds-thread-count" data-thread-key="6209" href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comments" title="《LeetCode-Decode Ways[动态规划]》上的评论">25 条评论</a></span>
</div>
</div>
<div class="cls"></div>
</div><div class="entry-content">
<h3><strong>Decode Ways</strong></h3>
<div class="question-content">
<p>
A message containing letters from <code>A-Z</code> is being encoded to numbers using the following mapping:
</p>
<pre>
'A' -&gt; 1
'B' -&gt; 2
...
'Z' -&gt; 26
</pre>
<p>
Given an encoded message containing digits, determine the total number of ways to decode it.
</p>
<p>
For example,<br/>
Given encoded message <code>"12"</code>,<br/>
it could be decoded as <code>"AB"</code> (1 2) or <code>"L"</code> (12).
</p>
<p>
The number of ways decoding <code>"12"</code> is 2.
</p>
</div>
<p> 标签: Dynamic Programming String<br/>
<strong>分析</strong>
</p><p>跟 Climbing Stairs (见 \S \ref{sec:climbing-stairs})很类似，不过多加一些判断逻辑。</p>
<p>代码1
</p><pre class="brush:cpp">
// LeetCode, Decode Ways
// 动规，时间复杂度O(n)，空间复杂度O(1)
class Solution {
public:
    int numDecodings(const string &amp;s) {
        if (s.empty() || s[0] == '0') return 0;

        int prev = 0;
        int cur = 1;
        // 长度为n的字符串，有 n+1个阶梯
        for (size_t i = 1; i &lt;= s.size(); ++i) {
            if (s[i-1] == '0') cur = 0;

            if (i &lt; 2 || !(s[i - 2] == '1' ||
                     (s[i - 2] == '2' &amp;&amp; s[i - 1] &lt;= '6')))
                prev = 0;

            int tmp = cur;
            cur = prev + cur;
            prev = tmp;
        }
        return cur;
    }
};
</pre>
<p>Java代码:
</p><pre class="brush:java">public class Solution {
    public int numDecodings(String s) {
        if(s.length() == 0) return 0;
        if(s.charAt(0) == '0') return 0;
        if(s.length() == 1) return s.charAt(0) &gt; '0' ? 1:0;
        int dp[] = new int[s.length()+1];
        dp[0] = dp[1] = 1;
        for(int i=2; i&lt;=s.length(); i++){
            dp[i] = dp[i-1];
            if(s.charAt(i-1) == '0')
                if (s.charAt(i-2) == '1' || s.charAt(i-2) == '2')
                    dp[i] = dp[i-2];
                else return 0;
            else if(s.charAt(i-2) == '0'){
                dp[i] = dp[i-1];
                continue;
            }
            else if(s.charAt(i-2) &lt; '2' || (s.charAt(i-2) == '2' &amp;&amp; s.charAt(i-1) &lt; '7') )
                dp[i] += dp[i-2];
        }
        return dp[s.length()];
    }
}</pre>
<div>
</script>
<!-- acm-hf-01 -->
<ins class="adsbygoogle" data-ad-client="ca-pub-9460629317209118" data-ad-slot="5011774182" style="display:inline-block;width:728px;height:90px"></ins>

(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="bdsharebuttonbox"><a class="bds_more" data-cmd="more" href="#"></a><a class="bds_qzone" data-cmd="qzone" href="#" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" href="#" title="分享到新浪微博"></a><a class="bds_tqq" data-cmd="tqq" href="#" title="分享到腾讯微博"></a><a class="bds_renren" data-cmd="renren" href="#" title="分享到人人网"></a><a class="bds_weixin" data-cmd="weixin" href="#" title="分享到微信"></a></div>

</div><ol id="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-74680">
<article class="comment" id="comment-74680">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74680" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74679">
<article class="comment" id="comment-74679">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74679" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74678">
<article class="comment" id="comment-74678">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74678" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74677">
<article class="comment" id="comment-74677">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74677" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74676">
<article class="comment" id="comment-74676">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74676" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74675">
<article class="comment" id="comment-74675">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74675" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74674">
<article class="comment" id="comment-74674">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74674" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74673">
<article class="comment" id="comment-74673">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74673" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74672">
<article class="comment" id="comment-74672">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74672" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74671">
<article class="comment" id="comment-74671">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74671" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-74670">
<article class="comment" id="comment-74670">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://www.renren.com/profile.do?id=919529988" rel="external nofollow">新用户596504</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-74670" rel="nofollow"><time datetime="2017-04-12T03:53:49+00:00" pubdate="">2017年4月12日 at 上午3:53</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>磁性白痴  </p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49850">
<article class="comment" id="comment-49850">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bluesky</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49850" rel="nofollow"><time datetime="2015-07-02T00:28:36+00:00" pubdate="">2015年7月2日 at 上午12:28</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一种方法怎么会是O(log(m+n))呢？没有二分的话直接遍历应该就是O(m+n)吧？</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49847">
<article class="comment" id="comment-49847">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">bai</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49847" rel="nofollow"><time datetime="2015-06-15T00:24:25+00:00" pubdate="">2015年6月15日 at 上午12:24</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第一段代码中：<br/>
 next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/>  = next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/newj_org.gif"/> ;<br/>
明显不对吧，应该是 next <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e6/weiboi_org.gif"/> =j;才对</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49848">
<article class="comment" id="comment-49848">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">tkdzyl2013</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49848" rel="nofollow"><time datetime="2015-05-09T10:06:10+00:00" pubdate="">2015年5月9日 at 上午10:06</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>nice!!!</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49854">
<article class="comment" id="comment-49854">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Rocky</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49854" rel="nofollow"><time datetime="2015-04-29T12:11:41+00:00" pubdate="">2015年4月29日 at 下午12:11</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>额楼主能否在发布代码的同时对解题思路做个讲解呢？这样大家在学习的时候就方便多了。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49852">
<article class="comment" id="comment-49852">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">wynk0804</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49852" rel="nofollow"><time datetime="2015-04-28T06:50:42+00:00" pubdate="">2015年4月28日 at 上午6:50</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>能告诉我为什么对于每一个m，cnt的值不用更新吗?这儿我想不通啊，谢谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49851">
<article class="comment" id="comment-49851">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">Mayboy</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49851" rel="nofollow"><time datetime="2015-04-27T06:30:46+00:00" pubdate="">2015年4月27日 at 上午6:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>不考虑最后将结果排序的话，快排的时间复杂度是O(N) ，而堆排的是O(N*logK),这样比较看，快排快</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49842">
<article class="comment" id="comment-49842">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">MyHome</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49842" rel="nofollow"><time datetime="2015-04-24T02:43:22+00:00" pubdate="">2015年4月24日 at 上午2:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>这个问题别太纠结了，不同的编译器结果不一</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49853">
<article class="comment" id="comment-49853">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">jue</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49853" rel="nofollow"><time datetime="2015-04-18T18:41:01+00:00" pubdate="">2015年4月18日 at 下午6:41</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>顺利测试通过了，多谢</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49846">
<article class="comment" id="comment-49846">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">sam_justin</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49846" rel="nofollow"><time datetime="2015-04-14T05:59:02+00:00" pubdate="">2015年4月14日 at 上午5:59</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>书上的解法更巧妙一些，在九度OJ实测的效率差不多</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49844">
<article class="comment" id="comment-49844">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">room306</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49844" rel="nofollow"><time datetime="2015-04-06T05:25:48+00:00" pubdate="">2015年4月6日 at 上午5:25</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>后面的掩码变量部分乍一看比较难理解，其实就是把32位按照一个整体来看待。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49849">
<article class="comment" id="comment-49849">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1173954900</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49849" rel="nofollow"><time datetime="2015-03-25T16:36:37+00:00" pubdate="">2015年3月25日 at 下午4:36</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>mark, 很巧妙的实现！</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49843">
<article class="comment" id="comment-49843">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">yelawolf</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49843" rel="nofollow"><time datetime="2015-03-05T19:30:53+00:00" pubdate="">2015年3月5日 at 下午7:30</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>写的好·····  Pollard Rh</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-49855">
<article class="comment" id="comment-49855">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">1832044043</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49855" rel="nofollow"><time datetime="2015-01-22T09:35:09+00:00" pubdate="">2015年1月22日 at 上午9:35</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>第二种想法，我想来好久，为啥需要一个newhead，发现是把最后一个节点一直返回到嘴上面这层函数。厉害，这道题之前没样子想过。</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-49845">
<article class="comment" id="comment-49845">
<footer class="comment-meta">
<cite class="comment-author vcard">
<span class="fn"><a class="url" href="http://fdsf" rel="external nofollow">zrw</a></span> on <a href="http://www.acmerblog.com/leetcode-solution-decode-ways-6209.html#comment-49845" rel="nofollow"><time datetime="2014-12-15T02:43:50+00:00" pubdate="">2014年12月15日 at 上午2:43</time></a> <span class="says">said:</span> </cite><!-- .comment-author .vcard -->
</footer>
<div class="comment-content"><p>你好，这题给出的代码好像弄错了，这个是pow那道题目的解法</p>
</div>
</article><!-- #comment-## -->
</li><!-- #comment-## -->
</ol>